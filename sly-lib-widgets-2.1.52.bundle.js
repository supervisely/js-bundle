window.SuperviselyWidgets=function(A){var M={};function o(h){if(M[h])return M[h].exports;var v=M[h]={i:h,l:!1,exports:{}};return A[h].call(v.exports,v,v.exports,o),v.l=!0,v.exports}return o.m=A,o.c=M,o.d=function(h,v,g){o.o(h,v)||Object.defineProperty(h,v,{enumerable:!0,get:g})},o.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},o.t=function(h,v){if(v&1&&(h=o(h)),v&8||v&4&&typeof h=="object"&&h&&h.__esModule)return h;var g=Object.create(null);if(o.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:h}),v&2&&typeof h!="string")for(var m in h)o.d(g,m,function(b){return h[b]}.bind(null,m));return g},o.n=function(h){var v=h&&h.__esModule?function(){return h.default}:function(){return h};return o.d(v,"a",v),v},o.o=function(h,v){return Object.prototype.hasOwnProperty.call(h,v)},o.p="/",o(o.s=0)}({0:function(A,M,o){o("0e70f0dd9c467e837d5c"),A.exports=o("c65a88afe77d32cdd3a1")},"001050c0cd8d86fc5cb1":function(A,M,o){"use strict";var h=o("3a4f8a76cd0489772f71"),v=RegExp.prototype.exec,g=String.prototype.replace,m=v,b="lastIndex",S=function(){var P=/a/,D=/b*/g;return v.call(P,"a"),v.call(D,"a"),P[b]!==0||D[b]!==0}(),I=/()??/.exec("")[1]!==void 0,T=S||I;T&&(m=function(D){var U=this,Y,K,X,W;return I&&(K=new RegExp("^"+U.source+"$(?!\\s)",h.call(U))),S&&(Y=U[b]),X=v.call(U,D),S&&X&&(U[b]=U.global?X.index+X[0].length:Y),I&&X&&X.length>1&&g.call(X[0],K,function(){for(W=1;W<arguments.length-2;W++)arguments[W]===void 0&&(X[W]=void 0)}),X}),A.exports=m},"001882e373f9dca8517d":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("3f860e7d8ba88a0566b6"),g=o("018197c10a6ce8e48027"),m=o("3c1abcaf432651c852c0"),b=o("ee380940dab8889d05d0");h(h.S,"Object",{getOwnPropertyDescriptors:function(I){for(var T=g(I),P=m.f,D=v(T),U={},Y=0,K,X;D.length>Y;)X=P(T,K=D[Y++]),X!==void 0&&b(U,K,X);return U}})},"007e2f901f143b0063bb":function(A,M,o){"use strict";o.d(M,"a",function(){return v});var h=o("d11cd0540728c616a05b");const v={ADMIN:"admin",USER:"user",DEVELOPER:"developer",MANAGER:"manager",REVIEWER:"reviewer",ANNOTATOR:"annotator",VIEWER:"viewer"},g={ANNOTATION:"annotation",DOCKER_REGISTRIES:"dockerRegistries",USER_CREDS:"userCreds",GITHUB_ACCOUNT:"githubAccount",FAVORITE_APPS:"favoriteApps"},m={NONE:"none",FREE:"free",CORPORATIVE:"corporative",EDUCATIONAL:"educational"},b={[g.ANNOTATION]:{hotkeys:{toggleFiguresVisibility:[["ctrl","h"]],toggleSelectedFigureVisibility:[["alt","h"]],removeCurrentObject:[["shift","delete"],["shift","d"]],confirmImage:[["ctrl","b"]],acceptImage:[["ctrl","alt","a"]],rejectImage:[["ctrl","alt","r"]],previousImage:[["arrowleft"],["arrowup"]],nextImage:[["arrowright"],["arrowdown"]],decreaseBrightness:[["shift","["],["shift","{"]],increaseBrightness:[["shift","]"],["shift","}"]],complete:[["space"]],undo:[["ctrl","z"]],redo:[["ctrl","shift","z"],["ctrl","y"]],tools:{moveScene:[["1"]],select:[["2"]],moveFigures:[["3"]],tagFigures:[["4"]],[h.a.POINT]:[["5"]],[h.a.RECTANGLE]:[["6"]],[h.a.POLYLINE]:[["7"]],[h.a.POLYGON]:[["8"]],[h.a.BITMAP]:[["9"]],[h.a.SMART]:[["0"]],[h.a.GRAPH]:[["-"]]},toolsOptions:{[h.a.BITMAP]:{brushCreate:[["ctrl","shift","b"]],bucketFill:[["ctrl","shift","f"]]},[h.a.POLYGON]:{consecutive:[["shift","1"]],pointsEraser:[["shift","2"]],pointsOrder:[["shift","3"]],snap:[["shift","4"]]}}}}}},"00f83bf39a29e0b57d1f":function(A,M,o){(function(h,v){var g;/**
* @license
* Lodash <https://lodash.com/>
* Copyright JS Foundation and other contributors <https://js.foundation/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(){var m,b="4.17.10",S=200,I="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",T="Expected a function",P="__lodash_hash_undefined__",D=500,U="__lodash_placeholder__",Y=1,K=2,X=4,W=1,j=2,Q=1,ne=2,ce=4,ee=8,B=16,$=32,oe=64,Se=128,Fe=256,ct=512,He=30,nt="...",Ae=800,Ve=16,Ye=1,st=2,de=3,Ie=1/0,be=9007199254740991,Ce=17976931348623157e292,Ue=0/0,Te=4294967295,Le=Te-1,yt=Te>>>1,Mt=[["ary",Se],["bind",Q],["bindKey",ne],["curry",ee],["curryRight",B],["flip",ct],["partial",$],["partialRight",oe],["rearg",Fe]],$t="[object Arguments]",on="[object Array]",un="[object AsyncFunction]",Bn="[object Boolean]",qn="[object Date]",Rn="[object DOMException]",Fn="[object Error]",ai="[object Function]",hi="[object GeneratorFunction]",Zn="[object Map]",Yn="[object Number]",ei="[object Null]",ki="[object Object]",q="[object Promise]",F="[object Proxy]",N="[object RegExp]",le="[object Set]",Oe="[object String]",re="[object Symbol]",ie="[object Undefined]",De="[object WeakMap]",je="[object WeakSet]",pt="[object ArrayBuffer]",Pt="[object DataView]",Lt="[object Float32Array]",jt="[object Float64Array]",cn="[object Int8Array]",Xn="[object Int16Array]",Li="[object Int32Array]",zn="[object Uint8Array]",Br="[object Uint8ClampedArray]",Qn="[object Uint16Array]",Rs="[object Uint32Array]",bs=/\b__p \+= '';/g,xs=/\b(__p \+=) '' \+/g,ss=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oi=/&(?:amp|lt|gt|quot|#39);/g,Me=/[&<>"']/g,it=RegExp(oi.source),$e=RegExp(Me.source),dt=/<%-([\s\S]+?)%>/g,Rt=/<%([\s\S]+?)%>/g,Bt=/<%=([\s\S]+?)%>/g,Un=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ai=/^\w*$/,Ji=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Di=/[\\^$.*+?()[\]{}|]/g,Ti=RegExp(Di.source),Ar=/^\s+|\s+$/g,or=/^\s+/,oa=/\s+$/,$r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ba=/\{\n\/\* \[wrapped with (.+)\] \*/,xa=/,? & /,ir=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ks=/\\(\\)?/g,as=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qt=/\w*$/,Ft=/^[-+]0x[0-9a-f]+$/i,mn=/^0b[01]+$/i,Gn=/^\[object .+?Constructor\]$/,Kn=/^0o[0-7]+$/i,Tr=/^(?:0|[1-9]\d*)$/,Wi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hn=/($^)/,gr=/['\n\r\u2028\u2029\\]/g,Zr="\\ud800-\\udfff",$s="\\u0300-\\u036f",ua="\\ufe20-\\ufe2f",Hi="\\u20d0-\\u20ff",mo=$s+ua+Hi,go="\\u2700-\\u27bf",tu="a-z\\xdf-\\xf6\\xf8-\\xff",Ea="\\xac\\xb1\\xd7\\xf7",za="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",vo="\\u2000-\\u206f",Vi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",li="A-Z\\xc0-\\xd6\\xd8-\\xde",Ki="\\ufe0e\\ufe0f",os=Ea+za+vo+Vi,Ls="['\u2019]",Sa="["+Zr+"]",ca="["+os+"]",Rr="["+mo+"]",us="\\d+",_o="["+go+"]",Aa="["+tu+"]",nu="[^"+Zr+os+us+go+tu+li+"]",yo="\\ud83c[\\udffb-\\udfff]",iu="(?:"+Rr+"|"+yo+")",jc="[^"+Zr+"]",Hu="(?:\\ud83c[\\udde6-\\uddff]){2}",Yu="[\\ud800-\\udbff][\\udc00-\\udfff]",zr="["+li+"]",bo="\\u200d",xo="(?:"+Aa+"|"+nu+")",Ga="(?:"+zr+"|"+nu+")",Ta="(?:"+Ls+"(?:d|ll|m|re|s|t|ve))?",Eo="(?:"+Ls+"(?:D|LL|M|RE|S|T|VE))?",So=iu+"?",ru="["+Ki+"]?",ld="(?:"+bo+"(?:"+[jc,Hu,Yu].join("|")+")"+ru+So+")*",fd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Es=ru+So+ld,Ii="(?:"+[_o,Hu,Yu].join("|")+")"+Es,Ef="(?:"+[jc+Rr+"?",Rr,Hu,Yu,Sa].join("|")+")",Wc=RegExp(Ls,"g"),la=RegExp(Rr,"g"),Xu=RegExp(yo+"(?="+yo+")|"+Ef+Es,"g"),dd=RegExp([zr+"?"+Aa+"+"+Ta+"(?="+[ca,zr,"$"].join("|")+")",Ga+"+"+Eo+"(?="+[ca,zr+xo,"$"].join("|")+")",zr+"?"+xo+"+"+Ta,zr+"+"+Eo,hd,fd,us,Ii].join("|"),"g"),vr=RegExp("["+bo+Zr+mo+Ki+"]"),Ao=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],su=-1,Ri={};Ri[Lt]=Ri[jt]=Ri[cn]=Ri[Xn]=Ri[Li]=Ri[zn]=Ri[Br]=Ri[Qn]=Ri[Rs]=!0,Ri[$t]=Ri[on]=Ri[pt]=Ri[Bn]=Ri[Pt]=Ri[qn]=Ri[Fn]=Ri[ai]=Ri[Zn]=Ri[Yn]=Ri[ki]=Ri[N]=Ri[le]=Ri[Oe]=Ri[De]=!1;var Ci={};Ci[$t]=Ci[on]=Ci[pt]=Ci[Pt]=Ci[Bn]=Ci[qn]=Ci[Lt]=Ci[jt]=Ci[cn]=Ci[Xn]=Ci[Li]=Ci[Zn]=Ci[Yn]=Ci[ki]=Ci[N]=Ci[le]=Ci[Oe]=Ci[re]=Ci[zn]=Ci[Br]=Ci[Qn]=Ci[Rs]=!0,Ci[Fn]=Ci[ai]=Ci[De]=!1;var Hc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},md={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Sf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},gd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yc=parseFloat,vd=parseInt,Af=typeof h=="object"&&h&&h.Object===Object&&h,Xm=typeof self=="object"&&self&&self.Object===Object&&self,_r=Af||Xm||Function("return this")(),Tf=M&&!M.nodeType&&M,au=Tf&&typeof v=="object"&&v&&!v.nodeType&&v,Xc=au&&au.exports===Tf,ka=Xc&&Af.process,wr=function(){try{var ze=au&&au.require&&au.require("util").types;return ze||ka&&ka.binding&&ka.binding("util")}catch{}}(),wf=wr&&wr.isArrayBuffer,Mf=wr&&wr.isDate,Cf=wr&&wr.isMap,Of=wr&&wr.isRegExp,Pf=wr&&wr.isSet,If=wr&&wr.isTypedArray;function cs(ze,lt,Je){switch(Je.length){case 0:return ze.call(lt);case 1:return ze.call(lt,Je[0]);case 2:return ze.call(lt,Je[0],Je[1]);case 3:return ze.call(lt,Je[0],Je[1],Je[2])}return ze.apply(lt,Je)}function z(ze,lt,Je,tn){for(var Vn=-1,Nn=ze==null?0:ze.length;++Vn<Nn;){var he=ze[Vn];lt(tn,he,Je(he),ze)}return tn}function se(ze,lt){for(var Je=-1,tn=ze==null?0:ze.length;++Je<tn&&lt(ze[Je],Je,ze)!==!1;);return ze}function xe(ze,lt){for(var Je=ze==null?0:ze.length;Je--&&lt(ze[Je],Je,ze)!==!1;);return ze}function Re(ze,lt){for(var Je=-1,tn=ze==null?0:ze.length;++Je<tn;)if(!lt(ze[Je],Je,ze))return!1;return!0}function Xe(ze,lt){for(var Je=-1,tn=ze==null?0:ze.length,Vn=0,Nn=[];++Je<tn;){var he=ze[Je];lt(he,Je,ze)&&(Nn[Vn++]=he)}return Nn}function zt(ze,lt){var Je=ze==null?0:ze.length;return!!Je&&ur(ze,lt,0)>-1}function At(ze,lt,Je){for(var tn=-1,Vn=ze==null?0:ze.length;++tn<Vn;)if(Je(lt,ze[tn]))return!0;return!1}function at(ze,lt){for(var Je=-1,tn=ze==null?0:ze.length,Vn=Array(tn);++Je<tn;)Vn[Je]=lt(ze[Je],Je,ze);return Vn}function ln(ze,lt){for(var Je=-1,tn=lt.length,Vn=ze.length;++Je<tn;)ze[Vn+Je]=lt[Je];return ze}function Kt(ze,lt,Je,tn){var Vn=-1,Nn=ze==null?0:ze.length;for(tn&&Nn&&(Je=ze[++Vn]);++Vn<Nn;)Je=lt(Je,ze[Vn],Vn,ze);return Je}function Sn(ze,lt,Je,tn){var Vn=ze==null?0:ze.length;for(tn&&Vn&&(Je=ze[--Vn]);Vn--;)Je=lt(Je,ze[Vn],Vn,ze);return Je}function Mn(ze,lt){for(var Je=-1,tn=ze==null?0:ze.length;++Je<tn;)if(lt(ze[Je],Je,ze))return!0;return!1}var qi=$u("length");function ii(ze){return ze.split("")}function Lr(ze){return ze.match(ir)||[]}function _n(ze,lt,Je){var tn;return Je(ze,function(Vn,Nn,he){if(lt(Vn,Nn,he))return tn=Nn,!1}),tn}function Gr(ze,lt,Je,tn){for(var Vn=ze.length,Nn=Je+(tn?1:-1);tn?Nn--:++Nn<Vn;)if(lt(ze[Nn],Nn,ze))return Nn;return-1}function ur(ze,lt,Je){return lt===lt?Zc(ze,lt,Je):Gr(ze,To,Je)}function Ku(ze,lt,Je,tn){for(var Vn=Je-1,Nn=ze.length;++Vn<Nn;)if(tn(ze[Vn],lt))return Vn;return-1}function To(ze){return ze!==ze}function ou(ze,lt){var Je=ze==null?0:ze.length;return Je?Yi(ze,lt)/Je:Ue}function $u(ze){return function(lt){return lt==null?m:lt[ze]}}function uu(ze){return function(lt){return ze==null?m:ze[lt]}}function Kc(ze,lt,Je,tn,Vn){return Vn(ze,function(Nn,he,Mi){Je=tn?(tn=!1,Nn):lt(Je,Nn,he,Mi)}),Je}function wa(ze,lt){var Je=ze.length;for(ze.sort(lt);Je--;)ze[Je]=ze[Je].value;return ze}function Yi(ze,lt){for(var Je,tn=-1,Vn=ze.length;++tn<Vn;){var Nn=lt(ze[tn]);Nn!==m&&(Je=Je===m?Nn:Je+Nn)}return Je}function Mr(ze,lt){for(var Je=-1,tn=Array(ze);++Je<ze;)tn[Je]=lt(Je);return tn}function Va(ze,lt){return at(lt,function(Je){return[Je,ze[Je]]})}function $i(ze){return function(lt){return ze(lt)}}function wi(ze,lt){return at(lt,function(Je){return ze[Je]})}function Zu(ze,lt){return ze.has(lt)}function vt(ze,lt){for(var Je=-1,tn=ze.length;++Je<tn&&ur(lt,ze[Je],0)>-1;);return Je}function kr(ze,lt){for(var Je=ze.length;Je--&&ur(lt,ze[Je],0)>-1;);return Je}function Rf(ze,lt){for(var Je=ze.length,tn=0;Je--;)ze[Je]===lt&&++tn;return tn}var _d=uu(Hc),Km=uu(md);function cu(ze){return"\\"+gd[ze]}function Qu(ze,lt){return ze==null?m:ze[lt]}function Ds(ze){return vr.test(ze)}function $c(ze){return Ao.test(ze)}function Lf(ze){for(var lt,Je=[];!(lt=ze.next()).done;)Je.push(lt.value);return Je}function Dr(ze){var lt=-1,Je=Array(ze.size);return ze.forEach(function(tn,Vn){Je[++lt]=[Vn,tn]}),Je}function Df(ze,lt){return function(Je){return ze(lt(Je))}}function Fi(ze,lt){for(var Je=-1,tn=ze.length,Vn=0,Nn=[];++Je<tn;){var he=ze[Je];(he===lt||he===U)&&(ze[Je]=U,Nn[Vn++]=Je)}return Nn}function Ss(ze,lt){return lt=="__proto__"?m:ze[lt]}function wo(ze){var lt=-1,Je=Array(ze.size);return ze.forEach(function(tn){Je[++lt]=tn}),Je}function Ff(ze){var lt=-1,Je=Array(ze.size);return ze.forEach(function(tn){Je[++lt]=[tn,tn]}),Je}function Zc(ze,lt,Je){for(var tn=Je-1,Vn=ze.length;++tn<Vn;)if(ze[tn]===lt)return tn;return-1}function Zt(ze,lt,Je){for(var tn=Je+1;tn--;)if(ze[tn]===lt)return tn;return tn}function Zs(ze){return Ds(ze)?Uf(ze):qi(ze)}function Fs(ze){return Ds(ze)?$m(ze):ii(ze)}var lu=uu(Sf);function Uf(ze){for(var lt=Xu.lastIndex=0;Xu.test(ze);)++lt;return lt}function $m(ze){return ze.match(Xu)||[]}function cr(ze){return ze.match(dd)||[]}var di=function ze(lt){lt=lt==null?_r:Xi.defaults(_r.Object(),lt,Xi.pick(_r,pd));var Je=lt.Array,tn=lt.Date,Vn=lt.Error,Nn=lt.Function,he=lt.Math,Mi=lt.Object,Qc=lt.RegExp,fa=lt.String,lr=lt.TypeError,ha=Je.prototype,Nf=Nn.prototype,Qs=Mi.prototype,Ma=lt["__core-js_shared__"],Ca=Nf.toString,pi=Qs.hasOwnProperty,ja=0,Wa=function(){var a=/[^.]+$/.exec(Ma&&Ma.keys&&Ma.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Ha=Qs.toString,Jc=Ca.call(Mi),qc=_r._,Mo=Qc("^"+Ca.call(pi).replace(Di,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fu=Xc?lt.Buffer:m,Ya=lt.Symbol,Xa=lt.Uint8Array,el=fu?fu.allocUnsafe:m,Us=Df(Mi.getPrototypeOf,Mi),da=Mi.create,tl=Qs.propertyIsEnumerable,Co=ha.splice,Oa=Ya?Ya.isConcatSpreadable:m,Oo=Ya?Ya.iterator:m,pa=Ya?Ya.toStringTag:m,hu=function(){try{var a=Ou(Mi,"defineProperty");return a({},"",{}),a}catch{}}(),nl=lt.clearTimeout!==_r.clearTimeout&&lt.clearTimeout,kn=tn&&tn.now!==_r.Date.now&&tn.now,du=lt.setTimeout!==_r.setTimeout&&lt.setTimeout,ls=he.ceil,il=he.floor,Bf=Mi.getOwnPropertySymbols,Ka=fu?fu.isBuffer:m,rl=lt.isFinite,As=ha.join,yd=Df(Mi.keys,Mi),fr=he.max,rr=he.min,zf=tn.now,Zm=lt.parseInt,Gf=he.random,pu=ha.reverse,Js=Ou(lt,"DataView"),$a=Ou(lt,"Map"),Po=Ou(lt,"Promise"),mu=Ou(lt,"Set"),Ju=Ou(lt,"WeakMap"),gu=Ou(Mi,"create"),qu=Ju&&new Ju,vu={},Qm=js(Js),bd=js($a),ui=js(Po),qs=js(mu),Pa=js(Ju),_u=Ya?Ya.prototype:m,Ts=_u?_u.valueOf:m,Io=_u?_u.toString:m;function te(a){if(Bi(a)&&!jn(a)&&!(a instanceof ti)){if(a instanceof fs)return a;if(pi.call(a,"__wrapped__"))return ro(a)}return new fs(a)}var Ro=function(){function a(){}return function(f){if(!Oi(f))return{};if(da)return da(f);a.prototype=f;var y=new a;return a.prototype=m,y}}();function yu(){}function fs(a,f){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=m}te.templateSettings={escape:dt,evaluate:Rt,interpolate:Bt,variable:"",imports:{_:te}},te.prototype=yu.prototype,te.prototype.constructor=te,fs.prototype=Ro(yu.prototype),fs.prototype.constructor=fs;function ti(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Te,this.__views__=[]}function ea(){var a=new ti(this.__wrapped__);return a.__actions__=hs(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=hs(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=hs(this.__views__),a}function Jm(){if(this.__filtered__){var a=new ti(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Qr(){var a=this.__wrapped__.value(),f=this.__dir__,y=jn(a),L=f<0,Z=y?a.length:0,ue=z_(0,Z,this.__views__),Ee=ue.start,Pe=ue.end,Be=Pe-Ee,ht=L?Pe:Ee-1,mt=this.__iteratees__,Ct=mt.length,Ht=0,nn=rr(Be,this.__takeCount__);if(!y||!L&&Z==Be&&nn==Be)return Gd(a,this.__actions__);var Tn=[];e:for(;Be--&&Ht<nn;){ht+=f;for(var ri=-1,bn=a[ht];++ri<Ct;){var $n=mt[ri],yi=$n.iteratee,Wr=$n.type,ts=yi(bn);if(Wr==st)bn=ts;else if(!ts){if(Wr==Ye)continue e;break e}}Tn[Ht++]=bn}return Tn}ti.prototype=Ro(yu.prototype),ti.prototype.constructor=ti;function er(a){var f=-1,y=a==null?0:a.length;for(this.clear();++f<y;){var L=a[f];this.set(L[0],L[1])}}function hr(){this.__data__=gu?gu(null):{},this.size=0}function sl(a){var f=this.has(a)&&delete this.__data__[a];return this.size-=f?1:0,f}function Ui(a){var f=this.__data__;if(gu){var y=f[a];return y===P?m:y}return pi.call(f,a)?f[a]:m}function R_(a){var f=this.__data__;return gu?f[a]!==m:pi.call(f,a)}function L_(a,f){var y=this.__data__;return this.size+=this.has(a)?0:1,y[a]=gu&&f===m?P:f,this}er.prototype.clear=hr,er.prototype.delete=sl,er.prototype.get=Ui,er.prototype.has=R_,er.prototype.set=L_;function Za(a){var f=-1,y=a==null?0:a.length;for(this.clear();++f<y;){var L=a[f];this.set(L[0],L[1])}}function D_(){this.__data__=[],this.size=0}function xd(a){var f=this.__data__,y=Au(f,a);if(y<0)return!1;var L=f.length-1;return y==L?f.pop():Co.call(f,y,1),--this.size,!0}function F_(a){var f=this.__data__,y=Au(f,a);return y<0?m:f[y][1]}function Ed(a){return Au(this.__data__,a)>-1}function U_(a,f){var y=this.__data__,L=Au(y,a);return L<0?(++this.size,y.push([a,f])):y[L][1]=f,this}Za.prototype.clear=D_,Za.prototype.delete=xd,Za.prototype.get=F_,Za.prototype.has=Ed,Za.prototype.set=U_;function Jt(a){var f=-1,y=a==null?0:a.length;for(this.clear();++f<y;){var L=a[f];this.set(L[0],L[1])}}function N_(){this.size=0,this.__data__={hash:new er,map:new($a||Za),string:new er}}function qm(a){var f=uh(this,a).delete(a);return this.size-=f?1:0,f}function Ns(a){return uh(this,a).get(a)}function kf(a){return uh(this,a).has(a)}function bu(a,f){var y=uh(this,a),L=y.size;return y.set(a,f),this.size+=y.size==L?0:1,this}Jt.prototype.clear=N_,Jt.prototype.delete=qm,Jt.prototype.get=Ns,Jt.prototype.has=kf,Jt.prototype.set=bu;function yr(a){var f=-1,y=a==null?0:a.length;for(this.__data__=new Jt;++f<y;)this.add(a[f])}function ec(a){return this.__data__.set(a,P),this}function Cr(a){return this.__data__.has(a)}yr.prototype.add=yr.prototype.push=ec,yr.prototype.has=Cr;function An(a){var f=this.__data__=new Za(a);this.size=f.size}function Sd(){this.__data__=new Za,this.size=0}function xu(a){var f=this.__data__,y=f.delete(a);return this.size=f.size,y}function Vf(a){return this.__data__.get(a)}function tc(a){return this.__data__.has(a)}function nc(a,f){var y=this.__data__;if(y instanceof Za){var L=y.__data__;if(!$a||L.length<S-1)return L.push([a,f]),this.size=++y.size,this;y=this.__data__=new Jt(L)}return y.set(a,f),this.size=y.size,this}An.prototype.clear=Sd,An.prototype.delete=xu,An.prototype.get=Vf,An.prototype.has=tc,An.prototype.set=nc;function Eu(a,f){var y=jn(a),L=!y&&Ws(a),Z=!y&&!L&&so(a),ue=!y&&!L&&!Z&&Bo(a),Ee=y||L||Z||ue,Pe=Ee?Mr(a.length,fa):[],Be=Pe.length;for(var ht in a)(f||pi.call(a,ht))&&!(Ee&&(ht=="length"||Z&&(ht=="offset"||ht=="parent")||ue&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||io(ht,Be)))&&Pe.push(ht);return Pe}function al(a){var f=a.length;return f?a[Zf(0,f-1)]:m}function ol(a,f){return xl(hs(a),zs(f,0,a.length))}function ul(a){return xl(hs(a))}function Su(a,f,y){(y!==m&&!ta(a[f],y)||y===m&&!(f in a))&&Bs(a,f,y)}function Qa(a,f,y){var L=a[f];(!(pi.call(a,f)&&ta(L,y))||y===m&&!(f in a))&&Bs(a,f,y)}function Au(a,f){for(var y=a.length;y--;)if(ta(a[y][0],f))return y;return-1}function cl(a,f,y,L){return Ja(a,function(Z,ue,Ee){f(L,Z,y(Z),Ee)}),L}function dr(a,f){return a&&ga(f,xr(f),a)}function eg(a,f){return a&&ga(f,es(f),a)}function Bs(a,f,y){f=="__proto__"&&hu?hu(a,f,{configurable:!0,enumerable:!0,value:y,writable:!0}):a[f]=y}function ma(a,f){for(var y=-1,L=f.length,Z=Je(L),ue=a==null;++y<L;)Z[y]=ue?m:Ph(a,f[y]);return Z}function zs(a,f,y){return a===a&&(y!==m&&(a=a<=y?a:y),f!==m&&(a=a>=f?a:f)),a}function Ni(a,f,y,L,Z,ue){var Ee,Pe=f&Y,Be=f&K,ht=f&X;if(y&&(Ee=Z?y(a,L,Z,ue):y(a)),Ee!==m)return Ee;if(!Oi(a))return a;var mt=jn(a);if(mt){if(Ee=k_(a),!Pe)return hs(a,Ee)}else{var Ct=Jr(a),Ht=Ct==ai||Ct==hi;if(so(a))return Vd(a,Pe);if(Ct==ki||Ct==$t||Ht&&!Z){if(Ee=Be||Ht?{}:Bg(a),!Pe)return Be?Cg(a,eg(Ee,a)):Mg(a,dr(Ee,a))}else{if(!Ci[Ct])return Z?a:{};Ee=V_(a,Ct,Pe)}}ue||(ue=new An);var nn=ue.get(a);if(nn)return nn;if(ue.set(a,Ee),Th(a))return a.forEach(function(bn){Ee.add(Ni(bn,f,y,bn,a,ue))}),Ee;if(Uo(a))return a.forEach(function(bn,$n){Ee.set($n,Ni(bn,f,y,$n,a,ue))}),Ee;var Tn=ht?Be?sp:ah:Be?es:xr,ri=mt?m:Tn(a);return se(ri||a,function(bn,$n){ri&&($n=bn,bn=a[$n]),Qa(Ee,$n,Ni(bn,f,y,$n,a,ue))}),Ee}function tg(a){var f=xr(a);return function(y){return jf(y,a,f)}}function jf(a,f,y){var L=y.length;if(a==null)return!L;for(a=Mi(a);L--;){var Z=y[L],ue=f[Z],Ee=a[Z];if(Ee===m&&!(Z in a)||!ue(Ee))return!1}return!0}function Ia(a,f,y){if(typeof a!="function")throw new lr(T);return fc(function(){a.apply(m,y)},f)}function ic(a,f,y,L){var Z=-1,ue=zt,Ee=!0,Pe=a.length,Be=[],ht=f.length;if(!Pe)return Be;y&&(f=at(f,$i(y))),L?(ue=At,Ee=!1):f.length>=S&&(ue=Zu,Ee=!1,f=new yr(f));e:for(;++Z<Pe;){var mt=a[Z],Ct=y==null?mt:y(mt);if(mt=L||mt!==0?mt:0,Ee&&Ct===Ct){for(var Ht=ht;Ht--;)if(f[Ht]===Ct)continue e;Be.push(mt)}else ue(f,Ct,L)||Be.push(mt)}return Be}var Ja=Xd(Gs),Zi=Xd(Wf,!0);function ll(a,f){var y=!0;return Ja(a,function(L,Z,ue){return y=!!f(L,Z,ue),y}),y}function pr(a,f,y){for(var L=-1,Z=a.length;++L<Z;){var ue=a[L],Ee=f(ue);if(Ee!=null&&(Pe===m?Ee===Ee&&!jr(Ee):y(Ee,Pe)))var Pe=Ee,Be=ue}return Be}function Tu(a,f,y,L){var Z=a.length;for(y=Wn(y),y<0&&(y=-y>Z?0:Z+y),L=L===m||L>Z?Z:Wn(L),L<0&&(L+=Z),L=y>L?0:Fu(L);y<L;)a[y++]=f;return a}function Lo(a,f){var y=[];return Ja(a,function(L,Z,ue){f(L,Z,ue)&&y.push(L)}),y}function Fr(a,f,y,L,Z){var ue=-1,Ee=a.length;for(y||(y=W_),Z||(Z=[]);++ue<Ee;){var Pe=a[ue];f>0&&y(Pe)?f>1?Fr(Pe,f-1,y,L,Z):ln(Z,Pe):L||(Z[Z.length]=Pe)}return Z}var wu=Kd(),Ad=Kd(!0);function Gs(a,f){return a&&wu(a,f,xr)}function Wf(a,f){return a&&Ad(a,f,xr)}function fl(a,f){return Xe(f,function(y){return Qi(a[y])})}function ks(a,f){f=to(f,a);for(var y=0,L=f.length;a!=null&&y<L;)a=a[qr(f[y++])];return y&&y==L?a:m}function Do(a,f,y){var L=f(a);return jn(a)?L:ln(L,y(a))}function Or(a){return a==null?a===m?ie:ei:pa&&pa in Mi(a)?B_(a):Q_(a)}function rc(a,f){return a>f}function Td(a,f){return a!=null&&pi.call(a,f)}function ng(a,f){return a!=null&&f in Mi(a)}function qa(a,f,y){return a>=rr(f,y)&&a<fr(f,y)}function Hf(a,f,y){for(var L=y?At:zt,Z=a[0].length,ue=a.length,Ee=ue,Pe=Je(ue),Be=1/0,ht=[];Ee--;){var mt=a[Ee];Ee&&f&&(mt=at(mt,$i(f))),Be=rr(mt.length,Be),Pe[Ee]=!y&&(f||Z>=120&&mt.length>=120)?new yr(Ee&&mt):m}mt=a[0];var Ct=-1,Ht=Pe[0];e:for(;++Ct<Z&&ht.length<Be;){var nn=mt[Ct],Tn=f?f(nn):nn;if(nn=y||nn!==0?nn:0,!(Ht?Zu(Ht,Tn):L(ht,Tn,y))){for(Ee=ue;--Ee;){var ri=Pe[Ee];if(!(ri?Zu(ri,Tn):L(a[Ee],Tn,y)))continue e}Ht&&Ht.push(Tn),ht.push(nn)}}return ht}function ig(a,f,y,L){return Gs(a,function(Z,ue,Ee){f(L,y(Z),ue,Ee)}),L}function sc(a,f,y){f=to(f,a),a=Gt(a,f);var L=a==null?a:a[qr(Ms(f))];return L==null?m:cs(L,a,y)}function wd(a){return Bi(a)&&Or(a)==$t}function rg(a){return Bi(a)&&Or(a)==pt}function sg(a){return Bi(a)&&Or(a)==qn}function ac(a,f,y,L,Z){return a===f?!0:a==null||f==null||!Bi(a)&&!Bi(f)?a!==a&&f!==f:ag(a,f,y,L,ac,Z)}function ag(a,f,y,L,Z,ue){var Ee=jn(a),Pe=jn(f),Be=Ee?on:Jr(a),ht=Pe?on:Jr(f);Be=Be==$t?ki:Be,ht=ht==$t?ki:ht;var mt=Be==ki,Ct=ht==ki,Ht=Be==ht;if(Ht&&so(a)){if(!so(f))return!1;Ee=!0,mt=!1}if(Ht&&!mt)return ue||(ue=new An),Ee||Bo(a)?rp(a,f,y,L,Z,ue):Dg(a,f,Be,y,L,Z,ue);if(!(y&W)){var nn=mt&&pi.call(a,"__wrapped__"),Tn=Ct&&pi.call(f,"__wrapped__");if(nn||Tn){var ri=nn?a.value():a,bn=Tn?f.value():f;return ue||(ue=new An),Z(ri,bn,y,L,ue)}}return Ht?(ue||(ue=new An),Fg(a,f,y,L,Z,ue)):!1}function og(a){return Bi(a)&&Jr(a)==Zn}function Yf(a,f,y,L){var Z=y.length,ue=Z,Ee=!L;if(a==null)return!ue;for(a=Mi(a);Z--;){var Pe=y[Z];if(Ee&&Pe[2]?Pe[1]!==a[Pe[0]]:!(Pe[0]in a))return!1}for(;++Z<ue;){Pe=y[Z];var Be=Pe[0],ht=a[Be],mt=Pe[1];if(Ee&&Pe[2]){if(ht===m&&!(Be in a))return!1}else{var Ct=new An;if(L)var Ht=L(ht,mt,Be,a,f,Ct);if(!(Ht===m?ac(mt,ht,W|j,L,Ct):Ht))return!1}}return!0}function Md(a){if(!Oi(a)||Y_(a))return!1;var f=Qi(a)?Mo:Gn;return f.test(js(a))}function ug(a){return Bi(a)&&Or(a)==N}function cg(a){return Bi(a)&&Jr(a)==le}function lg(a){return Bi(a)&&ao(a.length)&&!!Ri[Or(a)]}function Cd(a){return typeof a=="function"?a:a==null?gs:typeof a=="object"?jn(a)?Id(a[0],a[1]):Pd(a):pm(a)}function Xf(a){if(!bl(a))return yd(a);var f=[];for(var y in Mi(a))pi.call(a,y)&&y!="constructor"&&f.push(y);return f}function fg(a){if(!Oi(a))return Z_(a);var f=bl(a),y=[];for(var L in a)L=="constructor"&&(f||!pi.call(a,L))||y.push(L);return y}function Kf(a,f){return a<f}function Od(a,f){var y=-1,L=ps(a)?Je(a.length):[];return Ja(a,function(Z,ue,Ee){L[++y]=f(Z,ue,Ee)}),L}function Pd(a){var f=op(a);return f.length==1&&f[0][2]?Gg(f[0][0],f[0][1]):function(y){return y===a||Yf(y,a,f)}}function Id(a,f){return cp(a)&&zg(f)?Gg(qr(a),f):function(y){var L=Ph(y,a);return L===m&&L===f?Ul(y,a):ac(f,L,W|j)}}function hl(a,f,y,L,Z){a!==f&&wu(f,function(ue,Ee){if(Oi(ue))Z||(Z=new An),hg(a,f,Ee,y,hl,L,Z);else{var Pe=L?L(Ss(a,Ee),ue,Ee+"",a,f,Z):m;Pe===m&&(Pe=ue),Su(a,Ee,Pe)}},es)}function hg(a,f,y,L,Z,ue,Ee){var Pe=Ss(a,y),Be=Ss(f,y),ht=Ee.get(Be);if(ht){Su(a,y,ht);return}var mt=ue?ue(Pe,Be,y+"",a,f,Ee):m,Ct=mt===m;if(Ct){var Ht=jn(Be),nn=!Ht&&so(Be),Tn=!Ht&&!nn&&Bo(Be);mt=Be,Ht||nn||Tn?jn(Pe)?mt=Pe:ar(Pe)?mt=hs(Pe):nn?(Ct=!1,mt=Vd(Be,!0)):Tn?(Ct=!1,mt=jd(Be,!0)):mt=[]:Du(Be)||Ws(Be)?(mt=Pe,Ws(Pe)?mt=Jp(Pe):(!Oi(Pe)||L&&Qi(Pe))&&(mt=Bg(Be))):Ct=!1}Ct&&(Ee.set(Be,mt),Z(mt,Be,L,ue,Ee),Ee.delete(Be)),Su(a,y,mt)}function Rd(a,f){var y=a.length;if(y)return f+=f<0?y:0,io(f,y)?a[f]:m}function Ld(a,f,y){var L=-1;f=at(f.length?f:[gs],$i(yn()));var Z=Od(a,function(ue,Ee,Pe){var Be=at(f,function(ht){return ht(ue)});return{criteria:Be,index:++L,value:ue}});return wa(Z,function(ue,Ee){return wg(ue,Ee,y)})}function dg(a,f){return Dd(a,f,function(y,L){return Ul(a,L)})}function Dd(a,f,y){for(var L=-1,Z=f.length,ue={};++L<Z;){var Ee=f[L],Pe=ks(a,Ee);y(Pe,Ee)&&oc(ue,to(Ee,a),Pe)}return ue}function pg(a){return function(f){return ks(f,a)}}function $f(a,f,y,L){var Z=L?Ku:ur,ue=-1,Ee=f.length,Pe=a;for(a===f&&(f=hs(f)),y&&(Pe=at(a,$i(y)));++ue<Ee;)for(var Be=0,ht=f[ue],mt=y?y(ht):ht;(Be=Z(Pe,mt,Be,L))>-1;)Pe!==a&&Co.call(Pe,Be,1),Co.call(a,Be,1);return a}function Fd(a,f){for(var y=a?f.length:0,L=y-1;y--;){var Z=f[y];if(y==L||Z!==ue){var ue=Z;io(Z)?Co.call(a,Z,1):qf(a,Z)}}return a}function Zf(a,f){return a+il(Gf()*(f-a+1))}function mg(a,f,y,L){for(var Z=-1,ue=fr(ls((f-a)/(y||1)),0),Ee=Je(ue);ue--;)Ee[L?ue:++Z]=a,a+=y;return Ee}function Qf(a,f){var y="";if(!a||f<1||f>be)return y;do f%2&&(y+=a),f=il(f/2),f&&(a+=a);while(f);return y}function Jn(a,f){return ch(On(a,f,gs),a+"")}function gg(a){return al(Uu(a))}function vg(a,f){var y=Uu(a);return xl(y,zs(f,0,y.length))}function oc(a,f,y,L){if(!Oi(a))return a;f=to(f,a);for(var Z=-1,ue=f.length,Ee=ue-1,Pe=a;Pe!=null&&++Z<ue;){var Be=qr(f[Z]),ht=y;if(Z!=Ee){var mt=Pe[Be];ht=L?L(mt,Be,Pe):m,ht===m&&(ht=Oi(mt)?mt:io(f[Z+1])?[]:{})}Qa(Pe,Be,ht),Pe=Pe[Be]}return a}var Ud=qu?function(a,f){return qu.set(a,f),a}:gs,_g=hu?function(a,f){return hu(a,"toString",{configurable:!0,enumerable:!1,value:Gh(f),writable:!0})}:gs;function yg(a){return xl(Uu(a))}function Vs(a,f,y){var L=-1,Z=a.length;f<0&&(f=-f>Z?0:Z+f),y=y>Z?Z:y,y<0&&(y+=Z),Z=f>y?0:y-f>>>0,f>>>=0;for(var ue=Je(Z);++L<Z;)ue[L]=a[L+f];return ue}function bg(a,f){var y;return Ja(a,function(L,Z,ue){return y=f(L,Z,ue),!y}),!!y}function dl(a,f,y){var L=0,Z=a==null?L:a.length;if(typeof f=="number"&&f===f&&Z<=yt){for(;L<Z;){var ue=L+Z>>>1,Ee=a[ue];Ee!==null&&!jr(Ee)&&(y?Ee<=f:Ee<f)?L=ue+1:Z=ue}return Z}return Jf(a,f,gs,y)}function Jf(a,f,y,L){f=y(f);for(var Z=0,ue=a==null?0:a.length,Ee=f!==f,Pe=f===null,Be=jr(f),ht=f===m;Z<ue;){var mt=il((Z+ue)/2),Ct=y(a[mt]),Ht=Ct!==m,nn=Ct===null,Tn=Ct===Ct,ri=jr(Ct);if(Ee)var bn=L||Tn;else ht?bn=Tn&&(L||Ht):Pe?bn=Tn&&Ht&&(L||!nn):Be?bn=Tn&&Ht&&!nn&&(L||!ri):nn||ri?bn=!1:bn=L?Ct<=f:Ct<f;bn?Z=mt+1:ue=mt}return rr(ue,Le)}function Nd(a,f){for(var y=-1,L=a.length,Z=0,ue=[];++y<L;){var Ee=a[y],Pe=f?f(Ee):Ee;if(!y||!ta(Pe,Be)){var Be=Pe;ue[Z++]=Ee===0?0:Ee}}return ue}function Bd(a){return typeof a=="number"?a:jr(a)?Ue:+a}function ws(a){if(typeof a=="string")return a;if(jn(a))return at(a,ws)+"";if(jr(a))return Io?Io.call(a):"";var f=a+"";return f=="0"&&1/a==-Ie?"-0":f}function eo(a,f,y){var L=-1,Z=zt,ue=a.length,Ee=!0,Pe=[],Be=Pe;if(y)Ee=!1,Z=At;else if(ue>=S){var ht=f?null:Rg(a);if(ht)return wo(ht);Ee=!1,Z=Zu,Be=new yr}else Be=f?[]:Pe;e:for(;++L<ue;){var mt=a[L],Ct=f?f(mt):mt;if(mt=y||mt!==0?mt:0,Ee&&Ct===Ct){for(var Ht=Be.length;Ht--;)if(Be[Ht]===Ct)continue e;f&&Be.push(Ct),Pe.push(mt)}else Z(Be,Ct,y)||(Be!==Pe&&Be.push(Ct),Pe.push(mt))}return Pe}function qf(a,f){return f=to(f,a),a=Gt(a,f),a==null||delete a[qr(Ms(f))]}function zd(a,f,y,L){return oc(a,f,y(ks(a,f)),L)}function pl(a,f,y,L){for(var Z=a.length,ue=L?Z:-1;(L?ue--:++ue<Z)&&f(a[ue],ue,a););return y?Vs(a,L?0:ue,L?ue+1:Z):Vs(a,L?ue+1:0,L?Z:ue)}function Gd(a,f){var y=a;return y instanceof ti&&(y=y.value()),Kt(f,function(L,Z){return Z.func.apply(Z.thisArg,ln([L],Z.args))},y)}function eh(a,f,y){var L=a.length;if(L<2)return L?eo(a[0]):[];for(var Z=-1,ue=Je(L);++Z<L;)for(var Ee=a[Z],Pe=-1;++Pe<L;)Pe!=Z&&(ue[Z]=ic(ue[Z]||Ee,a[Pe],f,y));return eo(Fr(ue,1),f,y)}function kd(a,f,y){for(var L=-1,Z=a.length,ue=f.length,Ee={};++L<Z;){var Pe=L<ue?f[L]:m;y(Ee,a[L],Pe)}return Ee}function th(a){return ar(a)?a:[]}function nh(a){return typeof a=="function"?a:gs}function to(a,f){return jn(a)?a:cp(a,f)?[a]:dp(fi(a))}var xg=Jn;function no(a,f,y){var L=a.length;return y=y===m?L:y,!f&&y>=L?a:Vs(a,f,y)}var Eg=nl||function(a){return _r.clearTimeout(a)};function Vd(a,f){if(f)return a.slice();var y=a.length,L=el?el(y):new a.constructor(y);return a.copy(L),L}function ih(a){var f=new a.constructor(a.byteLength);return new Xa(f).set(new Xa(a)),f}function Sg(a,f){var y=f?ih(a.buffer):a.buffer;return new a.constructor(y,a.byteOffset,a.byteLength)}function Ag(a){var f=new a.constructor(a.source,Qt.exec(a));return f.lastIndex=a.lastIndex,f}function Tg(a){return Ts?Mi(Ts.call(a)):{}}function jd(a,f){var y=f?ih(a.buffer):a.buffer;return new a.constructor(y,a.byteOffset,a.length)}function Wd(a,f){if(a!==f){var y=a!==m,L=a===null,Z=a===a,ue=jr(a),Ee=f!==m,Pe=f===null,Be=f===f,ht=jr(f);if(!Pe&&!ht&&!ue&&a>f||ue&&Ee&&Be&&!Pe&&!ht||L&&Ee&&Be||!y&&Be||!Z)return 1;if(!L&&!ue&&!ht&&a<f||ht&&y&&Z&&!L&&!ue||Pe&&y&&Z||!Ee&&Z||!Be)return-1}return 0}function wg(a,f,y){for(var L=-1,Z=a.criteria,ue=f.criteria,Ee=Z.length,Pe=y.length;++L<Ee;){var Be=Wd(Z[L],ue[L]);if(Be){if(L>=Pe)return Be;var ht=y[L];return Be*(ht=="desc"?-1:1)}}return a.index-f.index}function Hd(a,f,y,L){for(var Z=-1,ue=a.length,Ee=y.length,Pe=-1,Be=f.length,ht=fr(ue-Ee,0),mt=Je(Be+ht),Ct=!L;++Pe<Be;)mt[Pe]=f[Pe];for(;++Z<Ee;)(Ct||Z<ue)&&(mt[y[Z]]=a[Z]);for(;ht--;)mt[Pe++]=a[Z++];return mt}function Yd(a,f,y,L){for(var Z=-1,ue=a.length,Ee=-1,Pe=y.length,Be=-1,ht=f.length,mt=fr(ue-Pe,0),Ct=Je(mt+ht),Ht=!L;++Z<mt;)Ct[Z]=a[Z];for(var nn=Z;++Be<ht;)Ct[nn+Be]=f[Be];for(;++Ee<Pe;)(Ht||Z<ue)&&(Ct[nn+y[Ee]]=a[Z++]);return Ct}function hs(a,f){var y=-1,L=a.length;for(f||(f=Je(L));++y<L;)f[y]=a[y];return f}function ga(a,f,y,L){var Z=!y;y||(y={});for(var ue=-1,Ee=f.length;++ue<Ee;){var Pe=f[ue],Be=L?L(y[Pe],a[Pe],Pe,y,a):m;Be===m&&(Be=a[Pe]),Z?Bs(y,Pe,Be):Qa(y,Pe,Be)}return y}function Mg(a,f){return ga(a,up(a),f)}function Cg(a,f){return ga(a,Ug(a),f)}function ml(a,f){return function(y,L){var Z=jn(y)?z:cl,ue=f?f():{};return Z(y,a,yn(L,2),ue)}}function Mu(a){return Jn(function(f,y){var L=-1,Z=y.length,ue=Z>1?y[Z-1]:m,Ee=Z>2?y[2]:m;for(ue=a.length>3&&typeof ue=="function"?(Z--,ue):m,Ee&&ds(y[0],y[1],Ee)&&(ue=Z<3?m:ue,Z=1),f=Mi(f);++L<Z;){var Pe=y[L];Pe&&a(f,Pe,L,ue)}return f})}function Xd(a,f){return function(y,L){if(y==null)return y;if(!ps(y))return a(y,L);for(var Z=y.length,ue=f?Z:-1,Ee=Mi(y);(f?ue--:++ue<Z)&&L(Ee[ue],ue,Ee)!==!1;);return y}}function Kd(a){return function(f,y,L){for(var Z=-1,ue=Mi(f),Ee=L(f),Pe=Ee.length;Pe--;){var Be=Ee[a?Pe:++Z];if(y(ue[Be],Be,ue)===!1)break}return f}}function Og(a,f,y){var L=f&Q,Z=uc(a);function ue(){var Ee=this&&this!==_r&&this instanceof ue?Z:a;return Ee.apply(L?y:this,arguments)}return ue}function $d(a){return function(f){f=fi(f);var y=Ds(f)?Fs(f):m,L=y?y[0]:f.charAt(0),Z=y?no(y,1).join(""):f.slice(1);return L[a]()+Z}}function Cu(a){return function(f){return Kt(hm(Uh(f).replace(Wc,"")),a,"")}}function uc(a){return function(){var f=arguments;switch(f.length){case 0:return new a;case 1:return new a(f[0]);case 2:return new a(f[0],f[1]);case 3:return new a(f[0],f[1],f[2]);case 4:return new a(f[0],f[1],f[2],f[3]);case 5:return new a(f[0],f[1],f[2],f[3],f[4]);case 6:return new a(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new a(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var y=Ro(a.prototype),L=a.apply(y,f);return Oi(L)?L:y}}function Pg(a,f,y){var L=uc(a);function Z(){for(var ue=arguments.length,Ee=Je(ue),Pe=ue,Be=cc(Z);Pe--;)Ee[Pe]=arguments[Pe];var ht=ue<3&&Ee[0]!==Be&&Ee[ue-1]!==Be?[]:Fi(Ee,Be);if(ue-=ht.length,ue<y)return ep(a,f,gl,Z.placeholder,m,Ee,ht,m,m,y-ue);var mt=this&&this!==_r&&this instanceof Z?L:a;return cs(mt,this,Ee)}return Z}function Zd(a){return function(f,y,L){var Z=Mi(f);if(!ps(f)){var ue=yn(y,3);f=xr(f),y=function(Pe){return ue(Z[Pe],Pe,Z)}}var Ee=a(f,y,L);return Ee>-1?Z[ue?f[Ee]:Ee]:m}}function Qd(a){return La(function(f){var y=f.length,L=y,Z=fs.prototype.thru;for(a&&f.reverse();L--;){var ue=f[L];if(typeof ue!="function")throw new lr(T);if(Z&&!Ee&&oh(ue)=="wrapper")var Ee=new fs([],!0)}for(L=Ee?L:y;++L<y;){ue=f[L];var Pe=oh(ue),Be=Pe=="wrapper"?ap(ue):m;Be&&lp(Be[0])&&Be[1]==(Se|ee|$|Fe)&&!Be[4].length&&Be[9]==1?Ee=Ee[oh(Be[0])].apply(Ee,Be[3]):Ee=ue.length==1&&lp(ue)?Ee[Pe]():Ee.thru(ue)}return function(){var ht=arguments,mt=ht[0];if(Ee&&ht.length==1&&jn(mt))return Ee.plant(mt).value();for(var Ct=0,Ht=y?f[Ct].apply(this,ht):mt;++Ct<y;)Ht=f[Ct].call(this,Ht);return Ht}})}function gl(a,f,y,L,Z,ue,Ee,Pe,Be,ht){var mt=f&Se,Ct=f&Q,Ht=f&ne,nn=f&(ee|B),Tn=f&ct,ri=Ht?m:uc(a);function bn(){for(var $n=arguments.length,yi=Je($n),Wr=$n;Wr--;)yi[Wr]=arguments[Wr];if(nn)var ts=cc(bn),Ur=Rf(yi,ts);if(L&&(yi=Hd(yi,L,Z,nn)),ue&&(yi=Yd(yi,ue,Ee,nn)),$n-=Ur,nn&&$n<ht){var zi=Fi(yi,ts);return ep(a,f,gl,bn.placeholder,y,yi,zi,Pe,Be,ht-$n)}var Hs=Ct?y:this,Ys=Ht?Hs[a]:a;return $n=yi.length,Pe?yi=Vr(yi,Pe):Tn&&$n>1&&yi.reverse(),mt&&Be<$n&&(yi.length=Be),this&&this!==_r&&this instanceof bn&&(Ys=ri||uc(Ys)),Ys.apply(Hs,yi)}return bn}function Jd(a,f){return function(y,L){return ig(y,a,f(L),{})}}function vl(a,f){return function(y,L){var Z;if(y===m&&L===m)return f;if(y!==m&&(Z=y),L!==m){if(Z===m)return L;typeof y=="string"||typeof L=="string"?(y=ws(y),L=ws(L)):(y=Bd(y),L=Bd(L)),Z=a(y,L)}return Z}}function rh(a){return La(function(f){return f=at(f,$i(yn())),Jn(function(y){var L=this;return a(f,function(Z){return cs(Z,L,y)})})})}function _l(a,f){f=f===m?" ":ws(f);var y=f.length;if(y<2)return y?Qf(f,a):f;var L=Qf(f,ls(a/Zs(f)));return Ds(f)?no(Fs(L),0,a).join(""):L.slice(0,a)}function Ig(a,f,y,L){var Z=f&Q,ue=uc(a);function Ee(){for(var Pe=-1,Be=arguments.length,ht=-1,mt=L.length,Ct=Je(mt+Be),Ht=this&&this!==_r&&this instanceof Ee?ue:a;++ht<mt;)Ct[ht]=L[ht];for(;Be--;)Ct[ht++]=arguments[++Pe];return cs(Ht,Z?y:this,Ct)}return Ee}function qd(a){return function(f,y,L){return L&&typeof L!="number"&&ds(f,y,L)&&(y=L=m),f=Da(f),y===m?(y=f,f=0):y=Da(y),L=L===m?f<y?1:-1:Da(L),mg(f,y,L,a)}}function yl(a){return function(f,y){return typeof f=="string"&&typeof y=="string"||(f=Os(f),y=Os(y)),a(f,y)}}function ep(a,f,y,L,Z,ue,Ee,Pe,Be,ht){var mt=f&ee,Ct=mt?Ee:m,Ht=mt?m:Ee,nn=mt?ue:m,Tn=mt?m:ue;f|=mt?$:oe,f&=~(mt?oe:$),f&ce||(f&=~(Q|ne));var ri=[a,f,Z,nn,Ct,Tn,Ht,Pe,Be,ht],bn=y.apply(m,ri);return lp(a)&&lc(bn,ri),bn.placeholder=L,fp(bn,a,f)}function sh(a){var f=he[a];return function(y,L){if(y=Os(y),L=L==null?0:rr(Wn(L),292),L){var Z=(fi(y)+"e").split("e"),ue=f(Z[0]+"e"+(+Z[1]+L));return Z=(fi(ue)+"e").split("e"),+(Z[0]+"e"+(+Z[1]-L))}return f(y)}}var Rg=mu&&1/wo(new mu([,-0]))[1]==Ie?function(a){return new mu(a)}:$l;function tp(a){return function(f){var y=Jr(f);return y==Zn?Dr(f):y==le?Ff(f):Va(f,a(f))}}function Ra(a,f,y,L,Z,ue,Ee,Pe){var Be=f&ne;if(!Be&&typeof a!="function")throw new lr(T);var ht=L?L.length:0;if(ht||(f&=~($|oe),L=Z=m),Ee=Ee===m?Ee:fr(Wn(Ee),0),Pe=Pe===m?Pe:Wn(Pe),ht-=Z?Z.length:0,f&oe){var mt=L,Ct=Z;L=Z=m}var Ht=Be?m:ap(a),nn=[a,f,y,L,Z,mt,Ct,ue,Ee,Pe];if(Ht&&$_(nn,Ht),a=nn[0],f=nn[1],y=nn[2],L=nn[3],Z=nn[4],Pe=nn[9]=nn[9]===m?Be?0:a.length:fr(nn[9]-ht,0),!Pe&&f&(ee|B)&&(f&=~(ee|B)),!f||f==Q)var Tn=Og(a,f,y);else f==ee||f==B?Tn=Pg(a,f,Pe):(f==$||f==(Q|$))&&!Z.length?Tn=Ig(a,f,y,L):Tn=gl.apply(m,nn);var ri=Ht?Ud:lc;return fp(ri(Tn,nn),a,f)}function np(a,f,y,L){return a===m||ta(a,Qs[y])&&!pi.call(L,y)?f:a}function ip(a,f,y,L,Z,ue){return Oi(a)&&Oi(f)&&(ue.set(f,a),hl(a,f,m,ip,ue),ue.delete(f)),a}function Lg(a){return Du(a)?m:a}function rp(a,f,y,L,Z,ue){var Ee=y&W,Pe=a.length,Be=f.length;if(Pe!=Be&&!(Ee&&Be>Pe))return!1;var ht=ue.get(a);if(ht&&ue.get(f))return ht==f;var mt=-1,Ct=!0,Ht=y&j?new yr:m;for(ue.set(a,f),ue.set(f,a);++mt<Pe;){var nn=a[mt],Tn=f[mt];if(L)var ri=Ee?L(Tn,nn,mt,f,a,ue):L(nn,Tn,mt,a,f,ue);if(ri!==m){if(ri)continue;Ct=!1;break}if(Ht){if(!Mn(f,function(bn,$n){if(!Zu(Ht,$n)&&(nn===bn||Z(nn,bn,y,L,ue)))return Ht.push($n)})){Ct=!1;break}}else if(!(nn===Tn||Z(nn,Tn,y,L,ue))){Ct=!1;break}}return ue.delete(a),ue.delete(f),Ct}function Dg(a,f,y,L,Z,ue,Ee){switch(y){case Pt:if(a.byteLength!=f.byteLength||a.byteOffset!=f.byteOffset)return!1;a=a.buffer,f=f.buffer;case pt:return!(a.byteLength!=f.byteLength||!ue(new Xa(a),new Xa(f)));case Bn:case qn:case Yn:return ta(+a,+f);case Fn:return a.name==f.name&&a.message==f.message;case N:case Oe:return a==f+"";case Zn:var Pe=Dr;case le:var Be=L&W;if(Pe||(Pe=wo),a.size!=f.size&&!Be)return!1;var ht=Ee.get(a);if(ht)return ht==f;L|=j,Ee.set(a,f);var mt=rp(Pe(a),Pe(f),L,Z,ue,Ee);return Ee.delete(a),mt;case re:if(Ts)return Ts.call(a)==Ts.call(f)}return!1}function Fg(a,f,y,L,Z,ue){var Ee=y&W,Pe=ah(a),Be=Pe.length,ht=ah(f),mt=ht.length;if(Be!=mt&&!Ee)return!1;for(var Ct=Be;Ct--;){var Ht=Pe[Ct];if(!(Ee?Ht in f:pi.call(f,Ht)))return!1}var nn=ue.get(a);if(nn&&ue.get(f))return nn==f;var Tn=!0;ue.set(a,f),ue.set(f,a);for(var ri=Ee;++Ct<Be;){Ht=Pe[Ct];var bn=a[Ht],$n=f[Ht];if(L)var yi=Ee?L($n,bn,Ht,f,a,ue):L(bn,$n,Ht,a,f,ue);if(!(yi===m?bn===$n||Z(bn,$n,y,L,ue):yi)){Tn=!1;break}ri||(ri=Ht=="constructor")}if(Tn&&!ri){var Wr=a.constructor,ts=f.constructor;Wr!=ts&&"constructor"in a&&"constructor"in f&&!(typeof Wr=="function"&&Wr instanceof Wr&&typeof ts=="function"&&ts instanceof ts)&&(Tn=!1)}return ue.delete(a),ue.delete(f),Tn}function La(a){return ch(On(a,m,Sl),a+"")}function ah(a){return Do(a,xr,up)}function sp(a){return Do(a,es,Ug)}var ap=qu?function(a){return qu.get(a)}:$l;function oh(a){for(var f=a.name+"",y=vu[f],L=pi.call(vu,f)?y.length:0;L--;){var Z=y[L],ue=Z.func;if(ue==null||ue==a)return Z.name}return f}function cc(a){var f=pi.call(te,"placeholder")?te:a;return f.placeholder}function yn(){var a=te.iteratee||kh;return a=a===kh?Cd:a,arguments.length?a(arguments[0],arguments[1]):a}function uh(a,f){var y=a.__data__;return H_(f)?y[typeof f=="string"?"string":"hash"]:y.map}function op(a){for(var f=xr(a),y=f.length;y--;){var L=f[y],Z=a[L];f[y]=[L,Z,zg(Z)]}return f}function Ou(a,f){var y=Qu(a,f);return Md(y)?y:m}function B_(a){var f=pi.call(a,pa),y=a[pa];try{a[pa]=m;var L=!0}catch{}var Z=Ha.call(a);return L&&(f?a[pa]=y:delete a[pa]),Z}var up=Bf?function(a){return a==null?[]:(a=Mi(a),Xe(Bf(a),function(f){return tl.call(a,f)}))}:Ac,Ug=Bf?function(a){for(var f=[];a;)ln(f,up(a)),a=Us(a);return f}:Ac,Jr=Or;(Js&&Jr(new Js(new ArrayBuffer(1)))!=Pt||$a&&Jr(new $a)!=Zn||Po&&Jr(Po.resolve())!=q||mu&&Jr(new mu)!=le||Ju&&Jr(new Ju)!=De)&&(Jr=function(a){var f=Or(a),y=f==ki?a.constructor:m,L=y?js(y):"";if(L)switch(L){case Qm:return Pt;case bd:return Zn;case ui:return q;case qs:return le;case Pa:return De}return f});function z_(a,f,y){for(var L=-1,Z=y.length;++L<Z;){var ue=y[L],Ee=ue.size;switch(ue.type){case"drop":a+=Ee;break;case"dropRight":f-=Ee;break;case"take":f=rr(f,a+Ee);break;case"takeRight":a=fr(a,f-Ee);break}}return{start:a,end:f}}function G_(a){var f=a.match(ba);return f?f[1].split(xa):[]}function Ng(a,f,y){f=to(f,a);for(var L=-1,Z=f.length,ue=!1;++L<Z;){var Ee=qr(f[L]);if(!(ue=a!=null&&y(a,Ee)))break;a=a[Ee]}return ue||++L!=Z?ue:(Z=a==null?0:a.length,!!Z&&ao(Z)&&io(Ee,Z)&&(jn(a)||Ws(a)))}function k_(a){var f=a.length,y=new a.constructor(f);return f&&typeof a[0]=="string"&&pi.call(a,"index")&&(y.index=a.index,y.input=a.input),y}function Bg(a){return typeof a.constructor=="function"&&!bl(a)?Ro(Us(a)):{}}function V_(a,f,y){var L=a.constructor;switch(f){case pt:return ih(a);case Bn:case qn:return new L(+a);case Pt:return Sg(a,y);case Lt:case jt:case cn:case Xn:case Li:case zn:case Br:case Qn:case Rs:return jd(a,y);case Zn:return new L;case Yn:case Oe:return new L(a);case N:return Ag(a);case le:return new L;case re:return Tg(a)}}function j_(a,f){var y=f.length;if(!y)return a;var L=y-1;return f[L]=(y>1?"& ":"")+f[L],f=f.join(y>2?", ":" "),a.replace($r,`{
/* [wrapped with `+f+`] */
`)}function W_(a){return jn(a)||Ws(a)||!!(Oa&&a&&a[Oa])}function io(a,f){var y=typeof a;return f=f==null?be:f,!!f&&(y=="number"||y!="symbol"&&Tr.test(a))&&a>-1&&a%1==0&&a<f}function ds(a,f,y){if(!Oi(y))return!1;var L=typeof f;return(L=="number"?ps(y)&&io(f,y.length):L=="string"&&f in y)?ta(y[f],a):!1}function cp(a,f){if(jn(a))return!1;var y=typeof a;return y=="number"||y=="symbol"||y=="boolean"||a==null||jr(a)?!0:Ai.test(a)||!Un.test(a)||f!=null&&a in Mi(f)}function H_(a){var f=typeof a;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?a!=="__proto__":a===null}function lp(a){var f=oh(a),y=te[f];if(typeof y!="function"||!(f in ti.prototype))return!1;if(a===y)return!0;var L=ap(y);return!!L&&a===L[0]}function Y_(a){return!!Wa&&Wa in a}var X_=Ma?Qi:jh;function bl(a){var f=a&&a.constructor,y=typeof f=="function"&&f.prototype||Qs;return a===y}function zg(a){return a===a&&!Oi(a)}function Gg(a,f){return function(y){return y==null?!1:y[a]===f&&(f!==m||a in Mi(y))}}function K_(a){var f=Ol(a,function(L){return y.size===D&&y.clear(),L}),y=f.cache;return f}function $_(a,f){var y=a[1],L=f[1],Z=y|L,ue=Z<(Q|ne|Se),Ee=L==Se&&y==ee||L==Se&&y==Fe&&a[7].length<=f[8]||L==(Se|Fe)&&f[7].length<=f[8]&&y==ee;if(!(ue||Ee))return a;L&Q&&(a[2]=f[2],Z|=y&Q?0:ce);var Pe=f[3];if(Pe){var Be=a[3];a[3]=Be?Hd(Be,Pe,f[4]):Pe,a[4]=Be?Fi(a[3],U):f[4]}return Pe=f[5],Pe&&(Be=a[5],a[5]=Be?Yd(Be,Pe,f[6]):Pe,a[6]=Be?Fi(a[5],U):f[6]),Pe=f[7],Pe&&(a[7]=Pe),L&Se&&(a[8]=a[8]==null?f[8]:rr(a[8],f[8])),a[9]==null&&(a[9]=f[9]),a[0]=f[0],a[1]=Z,a}function Z_(a){var f=[];if(a!=null)for(var y in Mi(a))f.push(y);return f}function Q_(a){return Ha.call(a)}function On(a,f,y){return f=fr(f===m?a.length-1:f,0),function(){for(var L=arguments,Z=-1,ue=fr(L.length-f,0),Ee=Je(ue);++Z<ue;)Ee[Z]=L[f+Z];Z=-1;for(var Pe=Je(f+1);++Z<f;)Pe[Z]=L[Z];return Pe[f]=y(Ee),cs(a,this,Pe)}}function Gt(a,f){return f.length<2?a:ks(a,Vs(f,0,-1))}function Vr(a,f){for(var y=a.length,L=rr(f.length,y),Z=hs(a);L--;){var ue=f[L];a[L]=io(ue,y)?Z[ue]:m}return a}var lc=hp(Ud),fc=du||function(a,f){return _r.setTimeout(a,f)},ch=hp(_g);function fp(a,f,y){var L=f+"";return ch(a,j_(L,pp(G_(L),y)))}function hp(a){var f=0,y=0;return function(){var L=zf(),Z=Ve-(L-y);if(y=L,Z>0){if(++f>=Ae)return arguments[0]}else f=0;return a.apply(m,arguments)}}function xl(a,f){var y=-1,L=a.length,Z=L-1;for(f=f===m?L:f;++y<f;){var ue=Zf(y,Z),Ee=a[ue];a[ue]=a[y],a[y]=Ee}return a.length=f,a}var dp=K_(function(a){var f=[];return a.charCodeAt(0)===46&&f.push(""),a.replace(Ji,function(y,L,Z,ue){f.push(Z?ue.replace(Ks,"$1"):L||y)}),f});function qr(a){if(typeof a=="string"||jr(a))return a;var f=a+"";return f=="0"&&1/a==-Ie?"-0":f}function js(a){if(a!=null){try{return Ca.call(a)}catch{}try{return a+""}catch{}}return""}function pp(a,f){return se(Mt,function(y){var L="_."+y[0];f&y[1]&&!zt(a,L)&&a.push(L)}),a.sort()}function ro(a){if(a instanceof ti)return a.clone();var f=new fs(a.__wrapped__,a.__chain__);return f.__actions__=hs(a.__actions__),f.__index__=a.__index__,f.__values__=a.__values__,f}function lh(a,f,y){(y?ds(a,f,y):f===m)?f=1:f=fr(Wn(f),0);var L=a==null?0:a.length;if(!L||f<1)return[];for(var Z=0,ue=0,Ee=Je(ls(L/f));Z<L;)Ee[ue++]=Vs(a,Z,Z+=f);return Ee}function mp(a){for(var f=-1,y=a==null?0:a.length,L=0,Z=[];++f<y;){var ue=a[f];ue&&(Z[L++]=ue)}return Z}function fh(){var a=arguments.length;if(!a)return[];for(var f=Je(a-1),y=arguments[0],L=a;L--;)f[L-1]=arguments[L];return ln(jn(y)?hs(y):[y],Fr(f,1))}var Fo=Jn(function(a,f){return ar(a)?ic(a,Fr(f,1,ar,!0)):[]}),Pu=Jn(function(a,f){var y=Ms(f);return ar(y)&&(y=m),ar(a)?ic(a,Fr(f,1,ar,!0),yn(y,2)):[]}),gp=Jn(function(a,f){var y=Ms(f);return ar(y)&&(y=m),ar(a)?ic(a,Fr(f,1,ar,!0),m,y):[]});function vp(a,f,y){var L=a==null?0:a.length;return L?(f=y||f===m?1:Wn(f),Vs(a,f<0?0:f,L)):[]}function kg(a,f,y){var L=a==null?0:a.length;return L?(f=y||f===m?1:Wn(f),f=L-f,Vs(a,0,f<0?0:f)):[]}function _p(a,f){return a&&a.length?pl(a,yn(f,3),!0,!0):[]}function El(a,f){return a&&a.length?pl(a,yn(f,3),!0):[]}function Vg(a,f,y,L){var Z=a==null?0:a.length;return Z?(y&&typeof y!="number"&&ds(a,f,y)&&(y=0,L=Z),Tu(a,f,y,L)):[]}function hh(a,f,y){var L=a==null?0:a.length;if(!L)return-1;var Z=y==null?0:Wn(y);return Z<0&&(Z=fr(L+Z,0)),Gr(a,yn(f,3),Z)}function dh(a,f,y){var L=a==null?0:a.length;if(!L)return-1;var Z=L-1;return y!==m&&(Z=Wn(y),Z=y<0?fr(L+Z,0):rr(Z,L-1)),Gr(a,yn(f,3),Z,!0)}function Sl(a){var f=a==null?0:a.length;return f?Fr(a,1):[]}function jg(a){var f=a==null?0:a.length;return f?Fr(a,Ie):[]}function Wg(a,f){var y=a==null?0:a.length;return y?(f=f===m?1:Wn(f),Fr(a,f)):[]}function Hg(a){for(var f=-1,y=a==null?0:a.length,L={};++f<y;){var Z=a[f];L[Z[0]]=Z[1]}return L}function yp(a){return a&&a.length?a[0]:m}function Yg(a,f,y){var L=a==null?0:a.length;if(!L)return-1;var Z=y==null?0:Wn(y);return Z<0&&(Z=fr(L+Z,0)),ur(a,f,Z)}function Xg(a){var f=a==null?0:a.length;return f?Vs(a,0,-1):[]}var Kg=Jn(function(a){var f=at(a,th);return f.length&&f[0]===a[0]?Hf(f):[]}),$g=Jn(function(a){var f=Ms(a),y=at(a,th);return f===Ms(y)?f=m:y.pop(),y.length&&y[0]===a[0]?Hf(y,yn(f,2)):[]}),Zg=Jn(function(a){var f=Ms(a),y=at(a,th);return f=typeof f=="function"?f:m,f&&y.pop(),y.length&&y[0]===a[0]?Hf(y,m,f):[]});function bp(a,f){return a==null?"":As.call(a,f)}function Ms(a){var f=a==null?0:a.length;return f?a[f-1]:m}function xp(a,f,y){var L=a==null?0:a.length;if(!L)return-1;var Z=L;return y!==m&&(Z=Wn(y),Z=Z<0?fr(L+Z,0):rr(Z,L-1)),f===f?Zt(a,f,Z):Gr(a,To,Z,!0)}function Ep(a,f){return a&&a.length?Rd(a,Wn(f)):m}var Sp=Jn(ph);function ph(a,f){return a&&a.length&&f&&f.length?$f(a,f):a}function Ap(a,f,y){return a&&a.length&&f&&f.length?$f(a,f,yn(y,2)):a}function Tp(a,f,y){return a&&a.length&&f&&f.length?$f(a,f,m,y):a}var wp=La(function(a,f){var y=a==null?0:a.length,L=ma(a,f);return Fd(a,at(f,function(Z){return io(Z,y)?+Z:Z}).sort(Wd)),L});function Iu(a,f){var y=[];if(!(a&&a.length))return y;var L=-1,Z=[],ue=a.length;for(f=yn(f,3);++L<ue;){var Ee=a[L];f(Ee,L,a)&&(y.push(Ee),Z.push(L))}return Fd(a,Z),y}function sr(a){return a==null?a:pu.call(a)}function br(a,f,y){var L=a==null?0:a.length;return L?(y&&typeof y!="number"&&ds(a,f,y)?(f=0,y=L):(f=f==null?0:Wn(f),y=y===m?L:Wn(y)),Vs(a,f,y)):[]}function Al(a,f){return dl(a,f)}function Qg(a,f,y){return Jf(a,f,yn(y,2))}function Jg(a,f){var y=a==null?0:a.length;if(y){var L=dl(a,f);if(L<y&&ta(a[L],f))return L}return-1}function qg(a,f){return dl(a,f,!0)}function e0(a,f,y){return Jf(a,f,yn(y,2),!0)}function t0(a,f){var y=a==null?0:a.length;if(y){var L=dl(a,f,!0)-1;if(ta(a[L],f))return L}return-1}function n0(a){return a&&a.length?Nd(a):[]}function i0(a,f){return a&&a.length?Nd(a,yn(f,2)):[]}function r0(a){var f=a==null?0:a.length;return f?Vs(a,1,f):[]}function s0(a,f,y){return a&&a.length?(f=y||f===m?1:Wn(f),Vs(a,0,f<0?0:f)):[]}function a0(a,f,y){var L=a==null?0:a.length;return L?(f=y||f===m?1:Wn(f),f=L-f,Vs(a,f<0?0:f,L)):[]}function o0(a,f){return a&&a.length?pl(a,yn(f,3),!1,!0):[]}function u0(a,f){return a&&a.length?pl(a,yn(f,3)):[]}var c0=Jn(function(a){return eo(Fr(a,1,ar,!0))}),l0=Jn(function(a){var f=Ms(a);return ar(f)&&(f=m),eo(Fr(a,1,ar,!0),yn(f,2))}),f0=Jn(function(a){var f=Ms(a);return f=typeof f=="function"?f:m,eo(Fr(a,1,ar,!0),m,f)});function h0(a){return a&&a.length?eo(a):[]}function d0(a,f){return a&&a.length?eo(a,yn(f,2)):[]}function p0(a,f){return f=typeof f=="function"?f:m,a&&a.length?eo(a,m,f):[]}function mh(a){if(!(a&&a.length))return[];var f=0;return a=Xe(a,function(y){if(ar(y))return f=fr(y.length,f),!0}),Mr(f,function(y){return at(a,$u(y))})}function Mp(a,f){if(!(a&&a.length))return[];var y=mh(a);return f==null?y:at(y,function(L){return cs(f,m,L)})}var m0=Jn(function(a,f){return ar(a)?ic(a,f):[]}),g0=Jn(function(a){return eh(Xe(a,ar))}),v0=Jn(function(a){var f=Ms(a);return ar(f)&&(f=m),eh(Xe(a,ar),yn(f,2))}),_0=Jn(function(a){var f=Ms(a);return f=typeof f=="function"?f:m,eh(Xe(a,ar),m,f)}),y0=Jn(mh);function b0(a,f){return kd(a||[],f||[],Qa)}function x0(a,f){return kd(a||[],f||[],oc)}var E0=Jn(function(a){var f=a.length,y=f>1?a[f-1]:m;return y=typeof y=="function"?(a.pop(),y):m,Mp(a,y)});function Cp(a){var f=te(a);return f.__chain__=!0,f}function S0(a,f){return f(a),a}function Tl(a,f){return f(a)}var A0=La(function(a){var f=a.length,y=f?a[0]:0,L=this.__wrapped__,Z=function(ue){return ma(ue,a)};return f>1||this.__actions__.length||!(L instanceof ti)||!io(y)?this.thru(Z):(L=L.slice(y,+y+(f?1:0)),L.__actions__.push({func:Tl,args:[Z],thisArg:m}),new fs(L,this.__chain__).thru(function(ue){return f&&!ue.length&&ue.push(m),ue}))});function T0(){return Cp(this)}function w0(){return new fs(this.value(),this.__chain__)}function M0(){this.__values__===m&&(this.__values__=wh(this.value()));var a=this.__index__>=this.__values__.length,f=a?m:this.__values__[this.__index__++];return{done:a,value:f}}function C0(){return this}function O0(a){for(var f,y=this;y instanceof yu;){var L=ro(y);L.__index__=0,L.__values__=m,f?Z.__wrapped__=L:f=L;var Z=L;y=y.__wrapped__}return Z.__wrapped__=a,f}function P0(){var a=this.__wrapped__;if(a instanceof ti){var f=a;return this.__actions__.length&&(f=new ti(this)),f=f.reverse(),f.__actions__.push({func:Tl,args:[sr],thisArg:m}),new fs(f,this.__chain__)}return this.thru(sr)}function I0(){return Gd(this.__wrapped__,this.__actions__)}var R0=ml(function(a,f,y){pi.call(a,y)?++a[y]:Bs(a,y,1)});function L0(a,f,y){var L=jn(a)?Re:ll;return y&&ds(a,f,y)&&(f=m),L(a,yn(f,3))}function D0(a,f){var y=jn(a)?Xe:Lo;return y(a,yn(f,3))}var F0=Zd(hh),gh=Zd(dh);function Op(a,f){return Fr(Ml(a,f),1)}function U0(a,f){return Fr(Ml(a,f),Ie)}function wl(a,f,y){return y=y===m?1:Wn(y),Fr(Ml(a,f),y)}function vh(a,f){var y=jn(a)?se:Ja;return y(a,yn(f,3))}function Pp(a,f){var y=jn(a)?xe:Zi;return y(a,yn(f,3))}var N0=ml(function(a,f,y){pi.call(a,y)?a[y].push(f):Bs(a,y,[f])});function B0(a,f,y,L){a=ps(a)?a:Uu(a),y=y&&!L?Wn(y):0;var Z=a.length;return y<0&&(y=fr(Z+y,0)),No(a)?y<=Z&&a.indexOf(f,y)>-1:!!Z&&ur(a,f,y)>-1}var Ip=Jn(function(a,f,y){var L=-1,Z=typeof f=="function",ue=ps(a)?Je(a.length):[];return Ja(a,function(Ee){ue[++L]=Z?cs(f,Ee,y):sc(Ee,f,y)}),ue}),z0=ml(function(a,f,y){Bs(a,y,f)});function Ml(a,f){var y=jn(a)?at:Od;return y(a,yn(f,3))}function G0(a,f,y,L){return a==null?[]:(jn(f)||(f=f==null?[]:[f]),y=L?m:y,jn(y)||(y=y==null?[]:[y]),Ld(a,f,y))}var k0=ml(function(a,f,y){a[y?0:1].push(f)},function(){return[[],[]]});function V0(a,f,y){var L=jn(a)?Kt:Kc,Z=arguments.length<3;return L(a,yn(f,4),y,Z,Ja)}function hc(a,f,y){var L=jn(a)?Sn:Kc,Z=arguments.length<3;return L(a,yn(f,4),y,Z,Zi)}function Rp(a,f){var y=jn(a)?Xe:Lo;return y(a,Pl(yn(f,3)))}function Lp(a){var f=jn(a)?al:gg;return f(a)}function j0(a,f,y){(y?ds(a,f,y):f===m)?f=1:f=Wn(f);var L=jn(a)?ol:vg;return L(a,f)}function _h(a){var f=jn(a)?ul:yg;return f(a)}function W0(a){if(a==null)return 0;if(ps(a))return No(a)?Zs(a):a.length;var f=Jr(a);return f==Zn||f==le?a.size:Xf(a).length}function H0(a,f,y){var L=jn(a)?Mn:bg;return y&&ds(a,f,y)&&(f=m),L(a,yn(f,3))}var Dp=Jn(function(a,f){if(a==null)return[];var y=f.length;return y>1&&ds(a,f[0],f[1])?f=[]:y>2&&ds(f[0],f[1],f[2])&&(f=[f[0]]),Ld(a,Fr(f,1),[])}),Cl=kn||function(){return _r.Date.now()};function Fp(a,f){if(typeof f!="function")throw new lr(T);return a=Wn(a),function(){if(--a<1)return f.apply(this,arguments)}}function Up(a,f,y){return f=y?m:f,f=a&&f==null?a.length:f,Ra(a,Se,m,m,m,m,f)}function Np(a,f){var y;if(typeof f!="function")throw new lr(T);return a=Wn(a),function(){return--a>0&&(y=f.apply(this,arguments)),a<=1&&(f=m),y}}var yh=Jn(function(a,f,y){var L=Q;if(y.length){var Z=Fi(y,cc(yh));L|=$}return Ra(a,L,f,y,Z)}),Bp=Jn(function(a,f,y){var L=Q|ne;if(y.length){var Z=Fi(y,cc(Bp));L|=$}return Ra(f,L,a,y,Z)});function zp(a,f,y){f=y?m:f;var L=Ra(a,ee,m,m,m,m,m,f);return L.placeholder=zp.placeholder,L}function Gp(a,f,y){f=y?m:f;var L=Ra(a,B,m,m,m,m,m,f);return L.placeholder=Gp.placeholder,L}function kp(a,f,y){var L,Z,ue,Ee,Pe,Be,ht=0,mt=!1,Ct=!1,Ht=!0;if(typeof a!="function")throw new lr(T);f=Os(f)||0,Oi(y)&&(mt=!!y.leading,Ct="maxWait"in y,ue=Ct?fr(Os(y.maxWait)||0,f):ue,Ht="trailing"in y?!!y.trailing:Ht);function nn(zi){var Hs=L,Ys=Z;return L=Z=m,ht=zi,Ee=a.apply(Ys,Hs),Ee}function Tn(zi){return ht=zi,Pe=fc($n,f),mt?nn(zi):Ee}function ri(zi){var Hs=zi-Be,Ys=zi-ht,Em=f-Hs;return Ct?rr(Em,ue-Ys):Em}function bn(zi){var Hs=zi-Be,Ys=zi-ht;return Be===m||Hs>=f||Hs<0||Ct&&Ys>=ue}function $n(){var zi=Cl();if(bn(zi))return yi(zi);Pe=fc($n,ri(zi))}function yi(zi){return Pe=m,Ht&&L?nn(zi):(L=Z=m,Ee)}function Wr(){Pe!==m&&Eg(Pe),ht=0,L=Be=Z=Pe=m}function ts(){return Pe===m?Ee:yi(Cl())}function Ur(){var zi=Cl(),Hs=bn(zi);if(L=arguments,Z=this,Be=zi,Hs){if(Pe===m)return Tn(Be);if(Ct)return Pe=fc($n,f),nn(Be)}return Pe===m&&(Pe=fc($n,f)),Ee}return Ur.cancel=Wr,Ur.flush=ts,Ur}var Y0=Jn(function(a,f){return Ia(a,1,f)}),X0=Jn(function(a,f,y){return Ia(a,Os(f)||0,y)});function K0(a){return Ra(a,ct)}function Ol(a,f){if(typeof a!="function"||f!=null&&typeof f!="function")throw new lr(T);var y=function(){var L=arguments,Z=f?f.apply(this,L):L[0],ue=y.cache;if(ue.has(Z))return ue.get(Z);var Ee=a.apply(this,L);return y.cache=ue.set(Z,Ee)||ue,Ee};return y.cache=new(Ol.Cache||Jt),y}Ol.Cache=Jt;function Pl(a){if(typeof a!="function")throw new lr(T);return function(){var f=arguments;switch(f.length){case 0:return!a.call(this);case 1:return!a.call(this,f[0]);case 2:return!a.call(this,f[0],f[1]);case 3:return!a.call(this,f[0],f[1],f[2])}return!a.apply(this,f)}}function Vp(a){return Np(2,a)}var jp=xg(function(a,f){f=f.length==1&&jn(f[0])?at(f[0],$i(yn())):at(Fr(f,1),$i(yn()));var y=f.length;return Jn(function(L){for(var Z=-1,ue=rr(L.length,y);++Z<ue;)L[Z]=f[Z].call(this,L[Z]);return cs(a,this,L)})}),bh=Jn(function(a,f){var y=Fi(f,cc(bh));return Ra(a,$,m,f,y)}),Wp=Jn(function(a,f){var y=Fi(f,cc(Wp));return Ra(a,oe,m,f,y)}),$0=La(function(a,f){return Ra(a,Fe,m,m,m,f)});function Z0(a,f){if(typeof a!="function")throw new lr(T);return f=f===m?f:Wn(f),Jn(a,f)}function Q0(a,f){if(typeof a!="function")throw new lr(T);return f=f==null?0:fr(Wn(f),0),Jn(function(y){var L=y[f],Z=no(y,0,f);return L&&ln(Z,L),cs(a,this,Z)})}function J0(a,f,y){var L=!0,Z=!0;if(typeof a!="function")throw new lr(T);return Oi(y)&&(L="leading"in y?!!y.leading:L,Z="trailing"in y?!!y.trailing:Z),kp(a,f,{leading:L,maxWait:f,trailing:Z})}function Hp(a){return Up(a,1)}function q0(a,f){return bh(nh(f),a)}function dc(){if(!arguments.length)return[];var a=arguments[0];return jn(a)?a:[a]}function Il(a){return Ni(a,X)}function ev(a,f){return f=typeof f=="function"?f:m,Ni(a,X,f)}function tv(a){return Ni(a,Y|X)}function nv(a,f){return f=typeof f=="function"?f:m,Ni(a,Y|X,f)}function iv(a,f){return f==null||jf(a,f,xr(f))}function ta(a,f){return a===f||a!==a&&f!==f}var rv=yl(rc),sv=yl(function(a,f){return a>=f}),Ws=wd(function(){return arguments}())?wd:function(a){return Bi(a)&&pi.call(a,"callee")&&!tl.call(a,"callee")},jn=Je.isArray,xh=wf?$i(wf):rg;function ps(a){return a!=null&&ao(a.length)&&!Qi(a)}function ar(a){return Bi(a)&&ps(a)}function av(a){return a===!0||a===!1||Bi(a)&&Or(a)==Bn}var so=Ka||jh,ov=Mf?$i(Mf):sg;function Yp(a){return Bi(a)&&a.nodeType===1&&!Du(a)}function uv(a){if(a==null)return!0;if(ps(a)&&(jn(a)||typeof a=="string"||typeof a.splice=="function"||so(a)||Bo(a)||Ws(a)))return!a.length;var f=Jr(a);if(f==Zn||f==le)return!a.size;if(bl(a))return!Xf(a).length;for(var y in a)if(pi.call(a,y))return!1;return!0}function Eh(a,f){return ac(a,f)}function Sh(a,f,y){y=typeof y=="function"?y:m;var L=y?y(a,f):m;return L===m?ac(a,f,m,y):!!L}function Rl(a){if(!Bi(a))return!1;var f=Or(a);return f==Fn||f==Rn||typeof a.message=="string"&&typeof a.name=="string"&&!Du(a)}function Ah(a){return typeof a=="number"&&rl(a)}function Qi(a){if(!Oi(a))return!1;var f=Or(a);return f==ai||f==hi||f==un||f==F}function Cs(a){return typeof a=="number"&&a==Wn(a)}function ao(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=be}function Oi(a){var f=typeof a;return a!=null&&(f=="object"||f=="function")}function Bi(a){return a!=null&&typeof a=="object"}var Uo=Cf?$i(Cf):og;function Ru(a,f){return a===f||Yf(a,f,op(f))}function Lu(a,f,y){return y=typeof y=="function"?y:m,Yf(a,f,op(f),y)}function pc(a){return gc(a)&&a!=+a}function Xp(a){if(X_(a))throw new Vn(I);return Md(a)}function Ll(a){return a===null}function mc(a){return a==null}function gc(a){return typeof a=="number"||Bi(a)&&Or(a)==Yn}function Du(a){if(!Bi(a)||Or(a)!=ki)return!1;var f=Us(a);if(f===null)return!0;var y=pi.call(f,"constructor")&&f.constructor;return typeof y=="function"&&y instanceof y&&Ca.call(y)==Jc}var vc=Of?$i(Of):ug;function Kp(a){return Cs(a)&&a>=-be&&a<=be}var Th=Pf?$i(Pf):cg;function No(a){return typeof a=="string"||!jn(a)&&Bi(a)&&Or(a)==Oe}function jr(a){return typeof a=="symbol"||Bi(a)&&Or(a)==re}var Bo=If?$i(If):lg;function cv(a){return a===m}function $p(a){return Bi(a)&&Jr(a)==De}function Zp(a){return Bi(a)&&Or(a)==je}var Qp=yl(Kf),lv=yl(function(a,f){return a<=f});function wh(a){if(!a)return[];if(ps(a))return No(a)?Fs(a):hs(a);if(Oo&&a[Oo])return Lf(a[Oo]());var f=Jr(a),y=f==Zn?Dr:f==le?wo:Uu;return y(a)}function Da(a){if(!a)return a===0?a:0;if(a=Os(a),a===Ie||a===-Ie){var f=a<0?-1:1;return f*Ce}return a===a?a:0}function Wn(a){var f=Da(a),y=f%1;return f===f?y?f-y:f:0}function Fu(a){return a?zs(Wn(a),0,Te):0}function Os(a){if(typeof a=="number")return a;if(jr(a))return Ue;if(Oi(a)){var f=typeof a.valueOf=="function"?a.valueOf():a;a=Oi(f)?f+"":f}if(typeof a!="string")return a===0?a:+a;a=a.replace(Ar,"");var y=mn.test(a);return y||Kn.test(a)?vd(a.slice(2),y?2:8):Ft.test(a)?Ue:+a}function Jp(a){return ga(a,es(a))}function Mh(a){return a?zs(Wn(a),-be,be):a===0?a:0}function fi(a){return a==null?"":ws(a)}var qp=Mu(function(a,f){if(bl(f)||ps(f)){ga(f,xr(f),a);return}for(var y in f)pi.call(f,y)&&Qa(a,y,f[y])}),Ch=Mu(function(a,f){ga(f,es(f),a)}),zo=Mu(function(a,f,y,L){ga(f,es(f),a,L)}),fv=Mu(function(a,f,y,L){ga(f,xr(f),a,L)}),_c=La(ma);function hv(a,f){var y=Ro(a);return f==null?y:dr(y,f)}var ms=Jn(function(a,f){a=Mi(a);var y=-1,L=f.length,Z=L>2?f[2]:m;for(Z&&ds(f[0],f[1],Z)&&(L=1);++y<L;)for(var ue=f[y],Ee=es(ue),Pe=-1,Be=Ee.length;++Pe<Be;){var ht=Ee[Pe],mt=a[ht];(mt===m||ta(mt,Qs[ht])&&!pi.call(a,ht))&&(a[ht]=ue[ht])}return a}),em=Jn(function(a){return a.push(m,ip),cs(pv,m,a)});function tm(a,f){return _n(a,yn(f,3),Gs)}function nm(a,f){return _n(a,yn(f,3),Wf)}function Oh(a,f){return a==null?a:wu(a,yn(f,3),es)}function Dl(a,f){return a==null?a:Ad(a,yn(f,3),es)}function Go(a,f){return a&&Gs(a,yn(f,3))}function im(a,f){return a&&Wf(a,yn(f,3))}function rm(a){return a==null?[]:fl(a,xr(a))}function Fa(a){return a==null?[]:fl(a,es(a))}function Ph(a,f,y){var L=a==null?m:ks(a,f);return L===m?y:L}function Fl(a,f){return a!=null&&Ng(a,f,Td)}function Ul(a,f){return a!=null&&Ng(a,f,ng)}var Ih=Jd(function(a,f,y){f!=null&&typeof f.toString!="function"&&(f=Ha.call(f)),a[f]=y},Gh(gs)),Nl=Jd(function(a,f,y){f!=null&&typeof f.toString!="function"&&(f=Ha.call(f)),pi.call(a,f)?a[f].push(y):a[f]=[y]},yn),Bl=Jn(sc);function xr(a){return ps(a)?Eu(a):Xf(a)}function es(a){return ps(a)?Eu(a,!0):fg(a)}function dv(a,f){var y={};return f=yn(f,3),Gs(a,function(L,Z,ue){Bs(y,f(L,Z,ue),L)}),y}function J_(a,f){var y={};return f=yn(f,3),Gs(a,function(L,Z,ue){Bs(y,Z,f(L,Z,ue))}),y}var sm=Mu(function(a,f,y){hl(a,f,y)}),pv=Mu(function(a,f,y,L){hl(a,f,y,L)}),Rh=La(function(a,f){var y={};if(a==null)return y;var L=!1;f=at(f,function(ue){return ue=to(ue,a),L||(L=ue.length>1),ue}),ga(a,sp(a),y),L&&(y=Ni(y,Y|K|X,Lg));for(var Z=f.length;Z--;)qf(y,f[Z]);return y});function va(a,f){return am(a,Pl(yn(f)))}var Lh=La(function(a,f){return a==null?{}:dg(a,f)});function am(a,f){if(a==null)return{};var y=at(sp(a),function(L){return[L]});return f=yn(f),Dd(a,y,function(L,Z){return f(L,Z[0])})}function Dh(a,f,y){f=to(f,a);var L=-1,Z=f.length;for(Z||(Z=1,a=m);++L<Z;){var ue=a==null?m:a[qr(f[L])];ue===m&&(L=Z,ue=y),a=Qi(ue)?ue.call(a):ue}return a}function zl(a,f,y){return a==null?a:oc(a,f,y)}function Fh(a,f,y,L){return L=typeof L=="function"?L:m,a==null?a:oc(a,f,y,L)}var Gl=tp(xr),kl=tp(es);function mv(a,f,y){var L=jn(a),Z=L||so(a)||Bo(a);if(f=yn(f,4),y==null){var ue=a&&a.constructor;Z?y=L?new ue:[]:Oi(a)?y=Qi(ue)?Ro(Us(a)):{}:y={}}return(Z?se:Gs)(a,function(Ee,Pe,Be){return f(y,Ee,Pe,Be)}),y}function om(a,f){return a==null?!0:qf(a,f)}function gv(a,f,y){return a==null?a:zd(a,f,nh(y))}function vv(a,f,y,L){return L=typeof L=="function"?L:m,a==null?a:zd(a,f,nh(y),L)}function Uu(a){return a==null?[]:wi(a,xr(a))}function yc(a){return a==null?[]:wi(a,es(a))}function _v(a,f,y){return y===m&&(y=f,f=m),y!==m&&(y=Os(y),y=y===y?y:0),f!==m&&(f=Os(f),f=f===f?f:0),zs(Os(a),f,y)}function yv(a,f,y){return f=Da(f),y===m?(y=f,f=0):y=Da(y),a=Os(a),qa(a,f,y)}function bv(a,f,y){if(y&&typeof y!="boolean"&&ds(a,f,y)&&(f=y=m),y===m&&(typeof f=="boolean"?(y=f,f=m):typeof a=="boolean"&&(y=a,a=m)),a===m&&f===m?(a=0,f=1):(a=Da(a),f===m?(f=a,a=0):f=Da(f)),a>f){var L=a;a=f,f=L}if(y||a%1||f%1){var Z=Gf();return rr(a+Z*(f-a+Yc("1e-"+((Z+"").length-1))),f)}return Zf(a,f)}var xv=Cu(function(a,f,y){return f=f.toLowerCase(),a+(y?Nu(f):f)});function Nu(a){return jo(fi(a).toLowerCase())}function Uh(a){return a=fi(a),a&&a.replace(Wi,_d).replace(la,"")}function Ev(a,f,y){a=fi(a),f=ws(f);var L=a.length;y=y===m?L:zs(Wn(y),0,L);var Z=y;return y-=f.length,y>=0&&a.slice(y,Z)==f}function Nh(a){return a=fi(a),a&&$e.test(a)?a.replace(Me,Km):a}function Sv(a){return a=fi(a),a&&Ti.test(a)?a.replace(Di,"\\$&"):a}var um=Cu(function(a,f,y){return a+(y?"-":"")+f.toLowerCase()}),cm=Cu(function(a,f,y){return a+(y?" ":"")+f.toLowerCase()}),lm=$d("toLowerCase");function Bh(a,f,y){a=fi(a),f=Wn(f);var L=f?Zs(a):0;if(!f||L>=f)return a;var Z=(f-L)/2;return _l(il(Z),y)+a+_l(ls(Z),y)}function Av(a,f,y){a=fi(a),f=Wn(f);var L=f?Zs(a):0;return f&&L<f?a+_l(f-L,y):a}function bc(a,f,y){a=fi(a),f=Wn(f);var L=f?Zs(a):0;return f&&L<f?_l(f-L,y)+a:a}function xc(a,f,y){return y||f==null?f=0:f&&(f=+f),Zm(fi(a).replace(or,""),f||0)}function Vl(a,f,y){return(y?ds(a,f,y):f===m)?f=1:f=Wn(f),Qf(fi(a),f)}function oo(){var a=arguments,f=fi(a[0]);return a.length<3?f:f.replace(a[1],a[2])}var Bu=Cu(function(a,f,y){return a+(y?"_":"")+f.toLowerCase()});function jl(a,f,y){return y&&typeof y!="number"&&ds(a,f,y)&&(f=y=m),y=y===m?Te:y>>>0,y?(a=fi(a),a&&(typeof f=="string"||f!=null&&!vc(f))&&(f=ws(f),!f&&Ds(a))?no(Fs(a),0,y):a.split(f,y)):[]}var uo=Cu(function(a,f,y){return a+(y?" ":"")+jo(f)});function Wl(a,f,y){return a=fi(a),y=y==null?0:zs(Wn(y),0,a.length),f=ws(f),a.slice(y,y+f.length)==f}function Hl(a,f,y){var L=te.templateSettings;y&&ds(a,f,y)&&(f=m),a=fi(a),f=zo({},f,L,np);var Z=zo({},f.imports,L.imports,np),ue=xr(Z),Ee=wi(Z,ue),Pe,Be,ht=0,mt=f.interpolate||hn,Ct="__p += '",Ht=Qc((f.escape||hn).source+"|"+mt.source+"|"+(mt===Bt?as:hn).source+"|"+(f.evaluate||hn).source+"|$","g"),nn="//# sourceURL="+("sourceURL"in f?f.sourceURL:"lodash.templateSources["+ ++su+"]")+`
`;a.replace(Ht,function(bn,$n,yi,Wr,ts,Ur){return yi||(yi=Wr),Ct+=a.slice(ht,Ur).replace(gr,cu),$n&&(Pe=!0,Ct+=`' +
__e(`+$n+`) +
'`),ts&&(Be=!0,Ct+=`';
`+ts+`;
__p += '`),yi&&(Ct+=`' +
((__t = (`+yi+`)) == null ? '' : __t) +
'`),ht=Ur+bn.length,bn}),Ct+=`';
`;var Tn=f.variable;Tn||(Ct=`with (obj) {
`+Ct+`
}
`),Ct=(Be?Ct.replace(bs,""):Ct).replace(xs,"$1").replace(ss,"$1;"),Ct="function("+(Tn||"obj")+`) {
`+(Tn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Pe?", __e = _.escape":"")+(Be?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ct+`return __p
}`;var ri=dm(function(){return Nn(ue,nn+"return "+Ct).apply(m,Ee)});if(ri.source=Ct,Rl(ri))throw ri;return ri}function Yl(a){return fi(a).toLowerCase()}function zh(a){return fi(a).toUpperCase()}function Xl(a,f,y){if(a=fi(a),a&&(y||f===m))return a.replace(Ar,"");if(!a||!(f=ws(f)))return a;var L=Fs(a),Z=Fs(f),ue=vt(L,Z),Ee=kr(L,Z)+1;return no(L,ue,Ee).join("")}function Tv(a,f,y){if(a=fi(a),a&&(y||f===m))return a.replace(oa,"");if(!a||!(f=ws(f)))return a;var L=Fs(a),Z=kr(L,Fs(f))+1;return no(L,0,Z).join("")}function ko(a,f,y){if(a=fi(a),a&&(y||f===m))return a.replace(or,"");if(!a||!(f=ws(f)))return a;var L=Fs(a),Z=vt(L,Fs(f));return no(L,Z).join("")}function wv(a,f){var y=He,L=nt;if(Oi(f)){var Z="separator"in f?f.separator:Z;y="length"in f?Wn(f.length):y,L="omission"in f?ws(f.omission):L}a=fi(a);var ue=a.length;if(Ds(a)){var Ee=Fs(a);ue=Ee.length}if(y>=ue)return a;var Pe=y-Zs(L);if(Pe<1)return L;var Be=Ee?no(Ee,0,Pe).join(""):a.slice(0,Pe);if(Z===m)return Be+L;if(Ee&&(Pe+=Be.length-Pe),vc(Z)){if(a.slice(Pe).search(Z)){var ht,mt=Be;for(Z.global||(Z=Qc(Z.source,fi(Qt.exec(Z))+"g")),Z.lastIndex=0;ht=Z.exec(mt);)var Ct=ht.index;Be=Be.slice(0,Ct===m?Pe:Ct)}}else if(a.indexOf(ws(Z),Pe)!=Pe){var Ht=Be.lastIndexOf(Z);Ht>-1&&(Be=Be.slice(0,Ht))}return Be+L}function fm(a){return a=fi(a),a&&it.test(a)?a.replace(oi,lu):a}var Vo=Cu(function(a,f,y){return a+(y?" ":"")+f.toUpperCase()}),jo=$d("toUpperCase");function hm(a,f,y){return a=fi(a),f=y?m:f,f===m?$c(a)?cr(a):Lr(a):a.match(f)||[]}var dm=Jn(function(a,f){try{return cs(a,m,f)}catch(y){return Rl(y)?y:new Vn(y)}}),Mv=La(function(a,f){return se(f,function(y){y=qr(y),Bs(a,y,yh(a[y],a))}),a});function Cv(a){var f=a==null?0:a.length,y=yn();return a=f?at(a,function(L){if(typeof L[1]!="function")throw new lr(T);return[y(L[0]),L[1]]}):[],Jn(function(L){for(var Z=-1;++Z<f;){var ue=a[Z];if(cs(ue[0],this,L))return cs(ue[1],this,L)}})}function Ov(a){return tg(Ni(a,Y))}function Gh(a){return function(){return a}}function Pv(a,f){return a==null||a!==a?f:a}var Iv=Qd(),Rv=Qd(!0);function gs(a){return a}function kh(a){return Cd(typeof a=="function"?a:Ni(a,Y))}function Vh(a){return Pd(Ni(a,Y))}function Lv(a,f){return Id(a,Ni(f,Y))}var zu=Jn(function(a,f){return function(y){return sc(y,a,f)}}),Dv=Jn(function(a,f){return function(y){return sc(a,y,f)}});function ji(a,f,y){var L=xr(f),Z=fl(f,L);y==null&&!(Oi(f)&&(Z.length||!L.length))&&(y=f,f=a,a=this,Z=fl(f,xr(f)));var ue=!(Oi(y)&&"chain"in y)||!!y.chain,Ee=Qi(a);return se(Z,function(Pe){var Be=f[Pe];a[Pe]=Be,Ee&&(a.prototype[Pe]=function(){var ht=this.__chain__;if(ue||ht){var mt=a(this.__wrapped__),Ct=mt.__actions__=hs(this.__actions__);return Ct.push({func:Be,args:arguments,thisArg:a}),mt.__chain__=ht,mt}return Be.apply(a,ln([this.value()],arguments))})}),a}function Kl(){return _r._===this&&(_r._=qc),this}function $l(){}function Zl(a){return a=Wn(a),Jn(function(f){return Rd(f,a)})}var Ql=rh(at),Fv=rh(Re),Ec=rh(Mn);function pm(a){return cp(a)?$u(qr(a)):pg(a)}function mm(a){return function(f){return a==null?m:ks(a,f)}}var gm=qd(),Sc=qd(!0);function Ac(){return[]}function jh(){return!1}function Ua(){return{}}function vm(){return""}function _m(){return!0}function Jl(a,f){if(a=Wn(a),a<1||a>be)return[];var y=Te,L=rr(a,Te);f=yn(f),a-=Te;for(var Z=Mr(L,f);++y<a;)f(y);return Z}function Uv(a){return jn(a)?at(a,qr):jr(a)?[a]:hs(dp(fi(a)))}function Nv(a){var f=++ja;return fi(a)+f}var ql=vl(function(a,f){return a+f},0),Tc=sh("ceil"),ef=vl(function(a,f){return a/f},1),wc=sh("floor");function Bv(a){return a&&a.length?pr(a,gs,rc):m}function Mc(a,f){return a&&a.length?pr(a,yn(f,2),rc):m}function tf(a){return ou(a,gs)}function nf(a,f){return ou(a,yn(f,2))}function rf(a){return a&&a.length?pr(a,gs,Kf):m}function sf(a,f){return a&&a.length?pr(a,yn(f,2),Kf):m}var ym=vl(function(a,f){return a*f},1),bm=sh("round"),xm=vl(function(a,f){return a-f},0);function zv(a){return a&&a.length?Yi(a,gs):0}function Gv(a,f){return a&&a.length?Yi(a,yn(f,2)):0}return te.after=Fp,te.ary=Up,te.assign=qp,te.assignIn=Ch,te.assignInWith=zo,te.assignWith=fv,te.at=_c,te.before=Np,te.bind=yh,te.bindAll=Mv,te.bindKey=Bp,te.castArray=dc,te.chain=Cp,te.chunk=lh,te.compact=mp,te.concat=fh,te.cond=Cv,te.conforms=Ov,te.constant=Gh,te.countBy=R0,te.create=hv,te.curry=zp,te.curryRight=Gp,te.debounce=kp,te.defaults=ms,te.defaultsDeep=em,te.defer=Y0,te.delay=X0,te.difference=Fo,te.differenceBy=Pu,te.differenceWith=gp,te.drop=vp,te.dropRight=kg,te.dropRightWhile=_p,te.dropWhile=El,te.fill=Vg,te.filter=D0,te.flatMap=Op,te.flatMapDeep=U0,te.flatMapDepth=wl,te.flatten=Sl,te.flattenDeep=jg,te.flattenDepth=Wg,te.flip=K0,te.flow=Iv,te.flowRight=Rv,te.fromPairs=Hg,te.functions=rm,te.functionsIn=Fa,te.groupBy=N0,te.initial=Xg,te.intersection=Kg,te.intersectionBy=$g,te.intersectionWith=Zg,te.invert=Ih,te.invertBy=Nl,te.invokeMap=Ip,te.iteratee=kh,te.keyBy=z0,te.keys=xr,te.keysIn=es,te.map=Ml,te.mapKeys=dv,te.mapValues=J_,te.matches=Vh,te.matchesProperty=Lv,te.memoize=Ol,te.merge=sm,te.mergeWith=pv,te.method=zu,te.methodOf=Dv,te.mixin=ji,te.negate=Pl,te.nthArg=Zl,te.omit=Rh,te.omitBy=va,te.once=Vp,te.orderBy=G0,te.over=Ql,te.overArgs=jp,te.overEvery=Fv,te.overSome=Ec,te.partial=bh,te.partialRight=Wp,te.partition=k0,te.pick=Lh,te.pickBy=am,te.property=pm,te.propertyOf=mm,te.pull=Sp,te.pullAll=ph,te.pullAllBy=Ap,te.pullAllWith=Tp,te.pullAt=wp,te.range=gm,te.rangeRight=Sc,te.rearg=$0,te.reject=Rp,te.remove=Iu,te.rest=Z0,te.reverse=sr,te.sampleSize=j0,te.set=zl,te.setWith=Fh,te.shuffle=_h,te.slice=br,te.sortBy=Dp,te.sortedUniq=n0,te.sortedUniqBy=i0,te.split=jl,te.spread=Q0,te.tail=r0,te.take=s0,te.takeRight=a0,te.takeRightWhile=o0,te.takeWhile=u0,te.tap=S0,te.throttle=J0,te.thru=Tl,te.toArray=wh,te.toPairs=Gl,te.toPairsIn=kl,te.toPath=Uv,te.toPlainObject=Jp,te.transform=mv,te.unary=Hp,te.union=c0,te.unionBy=l0,te.unionWith=f0,te.uniq=h0,te.uniqBy=d0,te.uniqWith=p0,te.unset=om,te.unzip=mh,te.unzipWith=Mp,te.update=gv,te.updateWith=vv,te.values=Uu,te.valuesIn=yc,te.without=m0,te.words=hm,te.wrap=q0,te.xor=g0,te.xorBy=v0,te.xorWith=_0,te.zip=y0,te.zipObject=b0,te.zipObjectDeep=x0,te.zipWith=E0,te.entries=Gl,te.entriesIn=kl,te.extend=Ch,te.extendWith=zo,ji(te,te),te.add=ql,te.attempt=dm,te.camelCase=xv,te.capitalize=Nu,te.ceil=Tc,te.clamp=_v,te.clone=Il,te.cloneDeep=tv,te.cloneDeepWith=nv,te.cloneWith=ev,te.conformsTo=iv,te.deburr=Uh,te.defaultTo=Pv,te.divide=ef,te.endsWith=Ev,te.eq=ta,te.escape=Nh,te.escapeRegExp=Sv,te.every=L0,te.find=F0,te.findIndex=hh,te.findKey=tm,te.findLast=gh,te.findLastIndex=dh,te.findLastKey=nm,te.floor=wc,te.forEach=vh,te.forEachRight=Pp,te.forIn=Oh,te.forInRight=Dl,te.forOwn=Go,te.forOwnRight=im,te.get=Ph,te.gt=rv,te.gte=sv,te.has=Fl,te.hasIn=Ul,te.head=yp,te.identity=gs,te.includes=B0,te.indexOf=Yg,te.inRange=yv,te.invoke=Bl,te.isArguments=Ws,te.isArray=jn,te.isArrayBuffer=xh,te.isArrayLike=ps,te.isArrayLikeObject=ar,te.isBoolean=av,te.isBuffer=so,te.isDate=ov,te.isElement=Yp,te.isEmpty=uv,te.isEqual=Eh,te.isEqualWith=Sh,te.isError=Rl,te.isFinite=Ah,te.isFunction=Qi,te.isInteger=Cs,te.isLength=ao,te.isMap=Uo,te.isMatch=Ru,te.isMatchWith=Lu,te.isNaN=pc,te.isNative=Xp,te.isNil=mc,te.isNull=Ll,te.isNumber=gc,te.isObject=Oi,te.isObjectLike=Bi,te.isPlainObject=Du,te.isRegExp=vc,te.isSafeInteger=Kp,te.isSet=Th,te.isString=No,te.isSymbol=jr,te.isTypedArray=Bo,te.isUndefined=cv,te.isWeakMap=$p,te.isWeakSet=Zp,te.join=bp,te.kebabCase=um,te.last=Ms,te.lastIndexOf=xp,te.lowerCase=cm,te.lowerFirst=lm,te.lt=Qp,te.lte=lv,te.max=Bv,te.maxBy=Mc,te.mean=tf,te.meanBy=nf,te.min=rf,te.minBy=sf,te.stubArray=Ac,te.stubFalse=jh,te.stubObject=Ua,te.stubString=vm,te.stubTrue=_m,te.multiply=ym,te.nth=Ep,te.noConflict=Kl,te.noop=$l,te.now=Cl,te.pad=Bh,te.padEnd=Av,te.padStart=bc,te.parseInt=xc,te.random=bv,te.reduce=V0,te.reduceRight=hc,te.repeat=Vl,te.replace=oo,te.result=Dh,te.round=bm,te.runInContext=ze,te.sample=Lp,te.size=W0,te.snakeCase=Bu,te.some=H0,te.sortedIndex=Al,te.sortedIndexBy=Qg,te.sortedIndexOf=Jg,te.sortedLastIndex=qg,te.sortedLastIndexBy=e0,te.sortedLastIndexOf=t0,te.startCase=uo,te.startsWith=Wl,te.subtract=xm,te.sum=zv,te.sumBy=Gv,te.template=Hl,te.times=Jl,te.toFinite=Da,te.toInteger=Wn,te.toLength=Fu,te.toLower=Yl,te.toNumber=Os,te.toSafeInteger=Mh,te.toString=fi,te.toUpper=zh,te.trim=Xl,te.trimEnd=Tv,te.trimStart=ko,te.truncate=wv,te.unescape=fm,te.uniqueId=Nv,te.upperCase=Vo,te.upperFirst=jo,te.each=vh,te.eachRight=Pp,te.first=yp,ji(te,function(){var a={};return Gs(te,function(f,y){pi.call(te.prototype,y)||(a[y]=f)}),a}(),{chain:!1}),te.VERSION=b,se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){te[a].placeholder=te}),se(["drop","take"],function(a,f){ti.prototype[a]=function(y){y=y===m?1:fr(Wn(y),0);var L=this.__filtered__&&!f?new ti(this):this.clone();return L.__filtered__?L.__takeCount__=rr(y,L.__takeCount__):L.__views__.push({size:rr(y,Te),type:a+(L.__dir__<0?"Right":"")}),L},ti.prototype[a+"Right"]=function(y){return this.reverse()[a](y).reverse()}}),se(["filter","map","takeWhile"],function(a,f){var y=f+1,L=y==Ye||y==de;ti.prototype[a]=function(Z){var ue=this.clone();return ue.__iteratees__.push({iteratee:yn(Z,3),type:y}),ue.__filtered__=ue.__filtered__||L,ue}}),se(["head","last"],function(a,f){var y="take"+(f?"Right":"");ti.prototype[a]=function(){return this[y](1).value()[0]}}),se(["initial","tail"],function(a,f){var y="drop"+(f?"":"Right");ti.prototype[a]=function(){return this.__filtered__?new ti(this):this[y](1)}}),ti.prototype.compact=function(){return this.filter(gs)},ti.prototype.find=function(a){return this.filter(a).head()},ti.prototype.findLast=function(a){return this.reverse().find(a)},ti.prototype.invokeMap=Jn(function(a,f){return typeof a=="function"?new ti(this):this.map(function(y){return sc(y,a,f)})}),ti.prototype.reject=function(a){return this.filter(Pl(yn(a)))},ti.prototype.slice=function(a,f){a=Wn(a);var y=this;return y.__filtered__&&(a>0||f<0)?new ti(y):(a<0?y=y.takeRight(-a):a&&(y=y.drop(a)),f!==m&&(f=Wn(f),y=f<0?y.dropRight(-f):y.take(f-a)),y)},ti.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},ti.prototype.toArray=function(){return this.take(Te)},Gs(ti.prototype,function(a,f){var y=/^(?:filter|find|map|reject)|While$/.test(f),L=/^(?:head|last)$/.test(f),Z=te[L?"take"+(f=="last"?"Right":""):f],ue=L||/^find/.test(f);Z&&(te.prototype[f]=function(){var Ee=this.__wrapped__,Pe=L?[1]:arguments,Be=Ee instanceof ti,ht=Pe[0],mt=Be||jn(Ee),Ct=function($n){var yi=Z.apply(te,ln([$n],Pe));return L&&Ht?yi[0]:yi};mt&&y&&typeof ht=="function"&&ht.length!=1&&(Be=mt=!1);var Ht=this.__chain__,nn=!!this.__actions__.length,Tn=ue&&!Ht,ri=Be&&!nn;if(!ue&&mt){Ee=ri?Ee:new ti(this);var bn=a.apply(Ee,Pe);return bn.__actions__.push({func:Tl,args:[Ct],thisArg:m}),new fs(bn,Ht)}return Tn&&ri?a.apply(this,Pe):(bn=this.thru(Ct),Tn?L?bn.value()[0]:bn.value():bn)})}),se(["pop","push","shift","sort","splice","unshift"],function(a){var f=ha[a],y=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",L=/^(?:pop|shift)$/.test(a);te.prototype[a]=function(){var Z=arguments;if(L&&!this.__chain__){var ue=this.value();return f.apply(jn(ue)?ue:[],Z)}return this[y](function(Ee){return f.apply(jn(Ee)?Ee:[],Z)})}}),Gs(ti.prototype,function(a,f){var y=te[f];if(y){var L=y.name+"",Z=vu[L]||(vu[L]=[]);Z.push({name:f,func:y})}}),vu[gl(m,ne).name]=[{name:"wrapper",func:m}],ti.prototype.clone=ea,ti.prototype.reverse=Jm,ti.prototype.value=Qr,te.prototype.at=A0,te.prototype.chain=T0,te.prototype.commit=w0,te.prototype.next=M0,te.prototype.plant=O0,te.prototype.reverse=P0,te.prototype.toJSON=te.prototype.valueOf=te.prototype.value=I0,te.prototype.first=te.prototype.head,Oo&&(te.prototype[Oo]=C0),te},Xi=di();_r._=Xi,g=function(){return Xi}.call(M,o,M,v),g!==m&&(v.exports=g)}).call(this)}).call(this,o("d8a2b18087957e350ade"),o("6a927222a29e571499a4")(A))},"015c0de8729d1accb6db":function(A,M){},"01795f442034637a4dcf":function(A,M,o){"use strict";var h=o("58439ceabab7ac0bd6c9"),v=o("8e52fe7d9c78070c4cb8"),g="WeakSet";o("5fff38dc6894e11cedd3")(g,function(m){return function(){return m(this,arguments.length>0?arguments[0]:void 0)}},{add:function(b){return h.def(v(this,g),b,!0)}},h,!1,!0)},"018197c10a6ce8e48027":function(A,M,o){var h=o("ba5246ed31a79503d644"),v=o("c445bef4faf25215ffcd");A.exports=function(g){return h(v(g))}},"01d16a391b82cbd5b98a":function(A,M,o){"use strict";(function(h,v){o.d(M,"c",function(){return P}),o.d(M,"a",function(){return j}),o.d(M,"e",function(){return Se}),o.d(M,"d",function(){return ai});var g=o("00f83bf39a29e0b57d1f"),m=o.n(g),b=o("36f0cad020f416714cbb"),S=o("de82b172f89d0f35218f"),I=o("12303d01cb2347d65acd");o.d(M,"b",function(){return I.a});const T="production",P=T==="development",D=T==="production",U=T==="test",Y=h.env.STAGING,K=h.env.COMMUNITY,X=h.env.ENTERPRISE,W=Object.freeze({}),j=Object.freeze([]),Q=Object.freeze(new Map),ne=Object.freeze(new Set);function ce(){return 1}function ee(Me){return Me?Me.id===ce():!1}function B(Me){var it;return Me?ee(Me)||((it=Me.settings)==null?void 0:it.isRoot)===!0||Me.isRoot===!0:!1}function $(Me,...it){return Object(g.flow)([$e=>Object(g.groupBy)($e,Me),$e=>Object(g.map)($e,Object(g.spread)(g.merge))])(Object(g.flatten)(it))}function oe(Me,...it){return Object(g.flow)([$e=>Object(g.groupBy)($e,Me),$e=>Object(g.filter)($e,dt=>dt.length>1),$e=>Object(g.map)($e,Object(g.spread)(g.merge))])(Object(g.flatten)(it))}function Se(){}function Fe(Me){return Me}async function ct(Me,it){try{return await Promise.resolve(Me())}catch($e){return await Promise.resolve(it($e))}}const He=/[|\\{()[^$+*?.-]/g;function nt(Me){return Me.replace(He,"\\$&")}function Ae(Me,it="_"){return Me.replace(/([A-Z])/g,($e,dt)=>`${it}${dt.toLowerCase()}`)}function Ve(Me,it="_"){const $e=new RegExp(`${it}(\\w)`,"g");return Me.replace($e,(dt,Rt)=>`${Rt.toUpperCase()}`)}function Ye(Me){if(!Object(g.isPlainObject)(Me))return Me;const it=Object(g.mapKeys)(Object(g.cloneDeep)(Me),($e,dt)=>dt.replace(/(_\w)/,Rt=>Rt[1].toUpperCase()));return Object(g.mapValues)(it,$e=>Object(g.isPlainObject)($e)?Ye($e):Object(g.isArray)($e)?Object(g.map)($e,Ye):$e)}function st(Me){return encodeURIComponent(Me).replace(/[!'()*]/g,it=>`%${it.charCodeAt(0).toString(16)}`)}const de=/^https?:\/\//;function Ie(Me){let it="",$e=Me;const dt=de.exec(Me);return dt&&([it]=dt,$e=Me.substring(it.length)),it+st($e).replace(/%2F/g,"/").replace(/%3A/,":")}function be(Me,...it){const $e=[],dt=[];return it.forEach(Rt=>{const Bt=typeof Rt;if(Bt==="string")$e.push(Rt);else if(Bt==="object")Array.isArray(Rt)?Rt.forEach(Un=>{const Ai=typeof Un;if(Ai==="string")$e.push(Un);else if(Ai==="object"&&!Array.isArray(Un))dt.push(Un);else throw new TypeError(`Expected string or object, got ${Bt}`)}):dt.push(Rt);else throw new TypeError(`Expected string, object or array, got ${Bt}`)}),$e.length?(dt.forEach(Rt=>$e.forEach(Bt=>{Bt in Rt&&(Me[Bt]=Rt[Bt])})),Me):Object.assign(Me,...dt)}function Ce(Me,it){return typeof it=="number"?it:Me.indexOf(it)}function Ue(Me,it){const $e=new Set,dt=new Set;if(Me.forEach(Rt=>{typeof Rt=="number"?$e.add(Rt):dt.add(Rt)}),dt.size)for(let Rt=0,Bt=it.length;Rt<Bt;++Rt){const Un=it[Rt];if(dt.has(Un)&&(dt.delete(Un),$e.add(Rt),!dt.size))break}return[...$e].sort((Rt,Bt)=>Bt-Rt)}function Te(Me,it,$e=1){return it.sort((dt,Rt)=>Rt-dt).forEach(dt=>Me.splice(dt,$e)),Me}function Le(Me,it){return Object.keys(it).forEach($e=>{$e in Me||(Me[$e]=it[$e])}),Me}function yt(Me,it){Object.keys(Me).forEach($e=>{const dt=Me[$e];return typeof dt=="object"?yt(dt,it):it(dt,$e,Me)})}function Mt(Me,it=2){const $e=Me.split(".");return $e.slice(-($e.length===it?it-1:it)).join(".")}function $t(Me){return Me.replace(/\.[^/.]+$/,"")}function on(Me,it){const $e=new Set(it),dt={},Rt={};return Object.keys(Me).forEach(Bt=>{$e.has(Bt)?dt[Bt]=Me[Bt]:Rt[Bt]=Me[Bt]}),{picked:dt,omitted:Rt}}function un(Me,it,$e,dt=$e){it.on($e,(...Rt)=>Me.emit(dt,...Rt))}function Bn(Me,it,$e){Object.keys($e).forEach(dt=>un(Me,it,dt,$e[dt]))}function qn(Me,it="id",$e=Se){Object.keys(Me).forEach((dt,...Rt)=>{const Bt=Me[dt];Bt[it]=dt,$e(Bt,dt,Me,...Rt)})}function Rn(Me,it=null){return Object.keys(Me).forEach($e=>{Me[$e]=null}),it}function Fn(Me,it=null){return Me.forEach($e=>Rn($e)),it}function ai(Me,it,$e=Fe){return typeof it=="function"?Me.reduce((dt,Rt,Bt,...Un)=>{const Ai=it(Rt,Bt,dt,...Un);return dt.set(Ai,$e(Rt,Ai,Bt,dt,...Un)),dt},new Map):Me.reduce((dt,Rt,Bt,...Un)=>(dt.set(Rt[it],$e(Rt,it,Bt,dt,...Un)),dt),new Map)}function hi(Me,it,$e){it.has(Me)?it.get(Me).push($e):it.set(Me,[$e])}function Zn(Me,it,$e=Fe){return typeof it=="function"?Me.reduce((dt,Rt,Bt,...Un)=>{const Ai=it(Rt,Bt,dt,...Un);return hi(Ai,dt,$e(Rt,Ai,Bt,dt,...Un)),dt},new Map):Me.reduce((dt,Rt,Bt,...Un)=>(hi(Rt[it],dt,$e(Rt,it,Bt,dt,...Un)),dt),new Map)}function Yn(Me,it){return Object.keys(Me).sort(it).reduce(($e,dt)=>($e[dt]=Me[dt],$e),{})}function ei(Me){return Me==null||typeof Me!="object"||typeof Me.pipe!="function"?!1:Me.writable!==!1&&typeof Me._write=="function"&&typeof Me._writableState=="object"||Me.readable!==!1&&typeof Me._read=="function"&&typeof Me._readableState=="object"||typeof Me._transform=="function"&&typeof Me._transformState=="object"}function ki(Me,it=!1){return new Promise(($e,dt)=>{try{let Rt=!0,Bt=!0;Me.on("error",dt),Me.readable!==!1&&typeof Me._read=="function"&&typeof Me._readableState=="object"&&(Rt=!1,Me.on("end",()=>{Rt=!0,Bt&&$e()})),Me.writeable!==!1&&typeof Me._write=="function"&&typeof Me._writableState=="object"&&(Bt=!1,Me.on("finish",()=>{Bt=!0,Rt&&$e()})),it&&typeof Me.resume=="function"&&Me.resume()}catch(Rt){dt(Rt)}})}function q(Me,it){return new Promise(($e,dt)=>{try{let Rt=null;Me.on("error",dt),Me.on("data",async Bt=>{try{Me.pause(),Rt=it(Bt),await Rt,Me.resume()}catch(Un){dt(Un),Me.destroy(Un)}}),Me.on("end",async()=>{try{Rt&&await Rt,$e()}catch(Bt){dt(Bt),Me.destroy(Bt)}})}catch(Rt){dt(Rt)}})}function F(Me,it=null){return new Promise(($e,dt)=>{const Rt=[];Me.on("data",Bt=>{Rt.push(it?it(Bt):Bt)}),Me.on("end",()=>$e(v.concat(Rt))),Me.on("error",dt)})}function N(Me,it='"'){let $e=Me;return Me.charAt(0)!==it&&($e=`${it}${$e}`),$e.charAt($e.length-1)!==it&&($e=`${$e}${it}`),$e}function le(Me,it=6){return Me.length>=it?Me:"0".repeat(it-Me.length)+Me}function Oe(Me,it,$e){Me/=360,it/=100,$e/=100;let dt,Rt,Bt;if(it===0)dt=Rt=Bt=$e;else{const Ai=(Ti,Ar,or)=>(or<0&&(or+=1),or>1&&(or-=1),or<.16666666666666666?Ti+(Ar-Ti)*6*or:or<.5?Ar:or<.6666666666666666?Ti+(Ar-Ti)*(.6666666666666666-or)*6:Ti),Ji=$e<.5?$e*(1+it):$e+it-$e*it,Di=2*$e-Ji;dt=Ai(Di,Ji,Me+1/3),Rt=Ai(Di,Ji,Me),Bt=Ai(Di,Ji,Me-1/3)}const Un=Ai=>{const Ji=Math.round(Ai*255).toString(16);return Ji.length===1?`0${Ji}`:Ji};return`${Un(dt)}${Un(Rt)}${Un(Bt)}`}function re(){return Oe(Object(g.random)(0,360),Object(g.random)(40,100),Object(g.random)(30,70))}function ie(Me){let it=[],$e=Object.getPrototypeOf(Me);for(;$e;)it=it.concat(Object.getOwnPropertyNames($e)),$e=Object.getPrototypeOf($e);return it}function De(Me){return typeof Me<"u"}function je(Me,it=[],$e,dt=De){const Rt=it.length?it:Object.keys(Me);let Bt=$e;return Rt.some(Un=>{const Ai=Object(g.get)(Me,Un);return dt(Ai)?(Bt=Un,!0):!1}),Bt}function pt(Me,it=[],$e,dt=De){let Rt=$e;const Bt=je(Me,it,null,dt);return Bt!=null&&(Rt=Object(g.get)(Me,Bt)),Rt}function Pt(Me,it=[]){const $e=new Set(it),dt=Object.getOwnPropertyDescriptors(Me);return Object.keys(dt).forEach(Rt=>{const Bt=dt[Rt];!Bt.configurable||Bt.enumerable||$e.size&&!$e.has(Rt)||Object.defineProperty(Me,Rt,{...Bt,enumerable:!0})}),Me}function Lt(Me,it=""){let $e=[];return Object.keys(Me).forEach(dt=>{const Rt=Me[dt];let Bt="";if(it&&(Bt=`${it} `),Bt+=Object(g.snakeCase)(dt).split("_").join(" "),!Array.isArray(Rt)){$e=$e.concat(Lt(Rt,dt));return}Rt.forEach(Un=>{if(!Un.length)return;const Ai=Un.length===1?Un[0].toUpperCase():Un.map(Ji=>Ji.toUpperCase());$e.push({title:Bt,hotkey:Ai})})}),$e}const jt=[{title:"decrease bitmap brush size",hotkey:["["]},{title:"increase bitmap brush size",hotkey:["]"]},{title:"decrease points size",hotkey:["alt","-"]},{title:"increase points size",hotkey:["alt","+"]},{title:"increase/decrease points size",hotkey:["alt","mouse wheel"]},{title:"decrease objects opacity",hotkey:["shift","-"]},{title:"increase objects opacity",hotkey:["shift","+"]},{title:"increase/decrease objects opacity",hotkey:["shift","mouse wheel"]},{title:"randomize objects' colors",hotkey:["shift","h"]},{title:"clone objects from previous image",hotkey:["alt","j"]},{title:"deselect current object, cancel tool action",hotkey:["esc"]},{title:"alternative tool action",hotkey:["shift","Left Mouse Button"]},{title:"delete hovered point from current object",hotkey:["delete"]}];function cn(Me){const{user:it=[],classes:$e=[],tags:dt=[]}=Me,Rt=Lt(it);return $e.filter(Bt=>Bt.hotkey).map(Bt=>({title:`"${Bt.title}" class`,hotkey:Bt.hotkey.toUpperCase()})).concat(dt.filter(Bt=>Bt.hotkey).map(Bt=>({title:`"${Bt.title}" tag`,hotkey:Bt.hotkey.toUpperCase()}))).concat(Rt).concat(jt.map(Bt=>({...Bt,hotkey:Bt.hotkey.map(Un=>Un.toUpperCase())})))}function Xn(Me,it){if(!Me)return!0;let[$e]=it.split(".");return $e=parseInt($e,10),!(Number.isFinite($e)&&$e!==Me)}function Li(Me,it){it.forEach($e=>{Object(g.hasIn)(Me,$e)&&Object(g.unset)(Me,$e)})}function zn(Me){Me.keys().forEach(it=>Me(it))}function Br(Me){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(Me)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(Me)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(Me)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(Me)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(Me)||/^f[cd][0-9a-f]{2}:/i.test(Me)||/^fe80:/i.test(Me)||/^::1$/.test(Me)||/^::$/.test(Me)}function Qn(Me,it){if(Me<=0)return-1;let $e=it;return $e<0?($e%=Me,$e!==0&&($e+=Me)):$e>=Me&&($e%=Me),$e}function Rs(Me,it){return Me<=0?-1:it<0?0:it>=Me?Me-1:it}function bs(Me,it,$e=Number.EPSILON){return Math.abs(Me-it)<$e}const xs=[8,4,4,4,12];function ss(Me){if(!Me)return!1;const it=Me.split("-").map($e=>$e.length);return!(it.length!==5||!it.every(($e,dt)=>$e===xs[dt]))}function oi(Me){return new Promise(it=>setTimeout(it,Me))}}).call(this,o("1a654c89165c3fdd23e9"),o("8a5451793be8532373e7").Buffer)},"03bded7537006b17ba62":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.P,"Array",{copyWithin:o("86cbdc6ff16180d66de4")}),o("7f1f5a90a2ecaf92a049")("copyWithin")},"03cdf004f8ef8c702f67":function(A,M,o){var h=o("30b8e0406acca1d79148"),v=o("fdf9ec15fb80cd9b8df9")("toStringTag"),g=h(function(){return arguments}())=="Arguments",m=function(b,S){try{return b[S]}catch{}};A.exports=function(b){var S,I,T;return b===void 0?"Undefined":b===null?"Null":typeof(I=m(S=Object(b),v))=="string"?I:g?h(S):(T=h(S))=="Object"&&typeof S.callee=="function"?"Arguments":T}},"04aabd2475089fa3cacd":function(A,M){var o=A.exports={version:"2.6.12"};typeof __e=="number"&&(__e=o)},"04ee658d61b391909b37":function(A,M){A.exports=Math.sign||function(h){return(h=+h)==0||h!=h?h:h<0?-1:1}},"05b5af7f8fd72818ee7c":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Reflect",{ownKeys:o("3f860e7d8ba88a0566b6")})},"062ebb4cd1f064f475b1":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S+h.F,"Object",{assign:o("cce97c855f847adf6492")})},"08135168150974c8d830":function(A,M,o){var h=o("04aabd2475089fa3cacd"),v=o("e9323032e98511a09e82"),g="__core-js_shared__",m=v[g]||(v[g]={});(A.exports=function(b,S){return m[b]||(m[b]=S!==void 0?S:{})})("versions",[]).push({version:h.version,mode:o("5ac187c343d34c84f217")?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},"0963fd6a7fb1ad061e74":function(A,M,o){var h=o("90a3d97e5a4a4439345b");A.exports=function(v,g){return new(h(v))(g)}},"09bed7c447c8f2f0a270":function(A,M,o){o("314a04d472cfb0837bef"),A.exports=o("bde4caa0455b2360b39e").f("asyncIterator")},"0a850ab3e6aa8900d3c4":function(A,M){A.exports={}},"0a93e1753ab882f1bcc1":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8"),v=o("c815b7eba88e00c1c07a").onFreeze;o("de1b22d97612a36416e3")("seal",function(g){return function(b){return g&&h(b)?g(v(b)):b}})},"0be694b91b40b5d52b18":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Number",{isInteger:o("65a4885fa6702342655b")})},"0c6bdb2f1e107b092ad8":function(A,M){A.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},"0d78116f6468c8b148b7":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("c021bf2eaf2f2e721a6e"),g=o("45e95ff7deb186b1032c"),m=(o("e9323032e98511a09e82").Reflect||{}).apply,b=Function.apply;h(h.S+h.F*!o("126be16bb2f5f1c18403")(function(){m(function(){})}),"Reflect",{apply:function(I,T,P){var D=v(I),U=g(P);return m?m(D,T,U):b.call(D,T,U)}})},"0d987979b708b96c588c":function(A,M,o){"use strict";var h=o("45e95ff7deb186b1032c"),v=o("9bbb799f204bee898f0a"),g="number";A.exports=function(m){if(m!=="string"&&m!==g&&m!=="default")throw TypeError("Incorrect hint");return v(h(this),m!=g)}},"0e5f35ac88b1c833962e":function(A,M,o){var h=o("0a850ab3e6aa8900d3c4"),v=o("fdf9ec15fb80cd9b8df9")("iterator"),g=Array.prototype;A.exports=function(m){return m!==void 0&&(h.Array===m||g[v]===m)}},"0e70f0dd9c467e837d5c":function(A,M,o){"use strict";o("51725718c931bf2403ad");var h=v(o("5a5e6190b21cadaba93e"));function v(g){return g&&g.__esModule?g:{default:g}}h.default._babelPolyfill&&typeof console<"u"&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),h.default._babelPolyfill=!0},"0fa305f27f1c8e9bde24":function(A,M){M.read=function(o,h,v,g,m){var b,S,I=m*8-g-1,T=(1<<I)-1,P=T>>1,D=-7,U=v?m-1:0,Y=v?-1:1,K=o[h+U];for(U+=Y,b=K&(1<<-D)-1,K>>=-D,D+=I;D>0;b=b*256+o[h+U],U+=Y,D-=8);for(S=b&(1<<-D)-1,b>>=-D,D+=g;D>0;S=S*256+o[h+U],U+=Y,D-=8);if(b===0)b=1-P;else{if(b===T)return S?NaN:(K?-1:1)*(1/0);S=S+Math.pow(2,g),b=b-P}return(K?-1:1)*S*Math.pow(2,b-g)},M.write=function(o,h,v,g,m,b){var S,I,T,P=b*8-m-1,D=(1<<P)-1,U=D>>1,Y=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=g?0:b-1,X=g?1:-1,W=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(I=isNaN(h)?1:0,S=D):(S=Math.floor(Math.log(h)/Math.LN2),h*(T=Math.pow(2,-S))<1&&(S--,T*=2),S+U>=1?h+=Y/T:h+=Y*Math.pow(2,1-U),h*T>=2&&(S++,T/=2),S+U>=D?(I=0,S=D):S+U>=1?(I=(h*T-1)*Math.pow(2,m),S=S+U):(I=h*Math.pow(2,U-1)*Math.pow(2,m),S=0));m>=8;o[v+K]=I&255,K+=X,I/=256,m-=8);for(S=S<<m|I,P+=m;P>0;o[v+K]=S&255,K+=X,S/=256,P-=8);o[v+K-X]|=W*128}},"0ff8b5373850ca308e02":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("e5f3df9816caf4a19edb"),g=o("45e95ff7deb186b1032c");h(h.S,"Reflect",{getPrototypeOf:function(b){return v(g(b))}})},"10056bba30cd518ff6cb":function(A,M,o){"use strict";const h={UNTAGGED:"untagged"},v={ALL:"all",IMAGES_ONLY:"imagesOnly",OBJECTS_ONLY:"objectsOnly"}},"1017580665ebda702ba4":function(A,P,o){var h=o("a8ecafe71e21295d1184"),v=o("31d88529d569d67159e9"),g=o("0e5f35ac88b1c833962e"),m=o("45e95ff7deb186b1032c"),b=o("87ca1990df7e5ce5f6d4"),S=o("29e1c134e25d7d250cb8"),I={},T={},P=A.exports=function(D,U,Y,K,X){var W=X?function(){return D}:S(D),j=h(Y,K,U?2:1),Q=0,ne,ce,ee,B;if(typeof W!="function")throw TypeError(D+" is not iterable!");if(g(W)){for(ne=b(D.length);ne>Q;Q++)if(B=U?j(m(ce=D[Q])[0],ce[1]):j(D[Q]),B===I||B===T)return B}else for(ee=W.call(D);!(ce=ee.next()).done;)if(B=v(ee,j,ce.value,U),B===I||B===T)return B};P.BREAK=I,P.RETURN=T},"117d0ed1e2d52362e335":function(A,M){},"11df586ec83e36f29e62":function(A,M,o){"use strict";const h=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],v=["pdf","doc","docx","ppt","pptx"]},"12303d01cb2347d65acd":function(A,M,o){"use strict";o.d(M,"a",function(){return h});class h extends Error{constructor(T,...P){const D={message:""};typeof T=="string"?D.message=T:Object.assign(D,T),P.forEach(K=>{Object.assign(D,K)});const{message:U,...Y}=D;super(U),Object.assign(this,Y),this.message=U||this.defaultMessage,this.message=this.formatMessage(),super.captureStackTrace&&super.captureStackTrace(this,this.constructor)}get name(){return this.constructor===h?"Error":this.constructor.name}get defaultMessage(){return""}formatMessage(){return this.message}}class v extends Error{}function g(I,T,P){return T=m(T),T in I?Object.defineProperty(I,T,{value:P,enumerable:!0,configurable:!0,writable:!0}):I[T]=P,I}function m(I){var T=b(I,"string");return typeof T=="symbol"?T:String(T)}function b(I,T){if(typeof I!="object"||I===null)return I;var P=I[Symbol.toPrimitive];if(P!==void 0){var D=P.call(I,T||"default");if(typeof D!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(I)}class S extends Error{constructor(...T){super(...T),g(this,"canceled",!0)}}},"126be16bb2f5f1c18403":function(A,M){A.exports=function(o){try{return!!o()}catch{return!0}}},"12c08cd1c1bfb264dfd3":function(A,M,o){var h=o("7964b54be5616e0032b3"),v=o("e5f3df9816caf4a19edb");o("de1b22d97612a36416e3")("getPrototypeOf",function(){return function(m){return v(h(m))}})},"1381daceeb3edb5d5ae6":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("65a4885fa6702342655b"),g=Math.abs;h(h.S,"Number",{isSafeInteger:function(b){return v(b)&&g(b)<=9007199254740991}})},"13856750cdf35b593067":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("87ca1990df7e5ce5f6d4"),g=o("1c4b62b15b2568a573b4"),m="endsWith",b=""[m];h(h.P+h.F*o("5bb6cfbb6a15beb75e86")(m),"String",{endsWith:function(I){var T=g(this,I,m),P=arguments.length>1?arguments[1]:void 0,D=v(T.length),U=P===void 0?D:Math.min(v(P),D),Y=String(I);return b?b.call(T,Y,U):T.slice(U-Y.length,U)===Y}})},"144a4c52161809512414":function(A,M){},"155fc47f5eef242ee51b":function(A,M,o){"use strict";var h=o("126be16bb2f5f1c18403");A.exports=function(v,g){return!!v&&h(function(){g?v.call(null,function(){},1):v.call(null)})}},"15bc2b4f6cdaf31bd83a":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("5182e0db115b52539b17");h(h.P+h.F*!o("155fc47f5eef242ee51b")([].reduceRight,!0),"Array",{reduceRight:function(m){return v(this,m,arguments.length,arguments[1],!0)}})},"160ccb785c60ef5e2657":function(A,M,o){"use strict";var h=o("196ca7010a0a30f36bdf"),v=o("9ba7c6b5067bc2a0c49c"),g=o("e5a005c5c5eff4a503bf"),m={};o("fa9e288138e317a7a504")(m,o("fdf9ec15fb80cd9b8df9")("iterator"),function(){return this}),A.exports=function(b,S,I){b.prototype=h(m,{next:v(1,I)}),g(b,S+" Iterator")}},"170abb7a40430821904d":function(A,M){A.exports=function(o,h,v){var g=v===void 0;switch(h.length){case 0:return g?o():o.call(v);case 1:return g?o(h[0]):o.call(v,h[0]);case 2:return g?o(h[0],h[1]):o.call(v,h[0],h[1]);case 3:return g?o(h[0],h[1],h[2]):o.call(v,h[0],h[1],h[2]);case 4:return g?o(h[0],h[1],h[2],h[3]):o.call(v,h[0],h[1],h[2],h[3])}return o.apply(v,h)}},"17d815db3d84abcca145":function(A,M){},"196ca7010a0a30f36bdf":function(A,M,o){var h=o("45e95ff7deb186b1032c"),v=o("bfe744ff6a7d3fb8b3b6"),g=o("97d0c7cef3162c18013d"),m=o("50afc5b514699956f7a1")("IE_PROTO"),b=function(){},S="prototype",I=function(){var T=o("e3529c4c6a770b1dc792")("iframe"),P=g.length,D="<",U=">",Y;for(T.style.display="none",o("e9c07d0897a4ff4b404d").appendChild(T),T.src="javascript:",Y=T.contentWindow.document,Y.open(),Y.write(D+"script"+U+"document.F=Object"+D+"/script"+U),Y.close(),I=Y.F;P--;)delete I[S][g[P]];return I()};A.exports=Object.create||function(P,D){var U;return P!==null?(b[S]=h(P),U=new b,b[S]=null,U[m]=P):U=I(),D===void 0?U:v(U,D)}},"19eb7b800fa77b859a22":function(A,M){},"1a1f53511f7dbd263920":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("931ac916c4b89621b3bd");v&&h(h.S,"Reflect",{setPrototypeOf:function(m,b){v.check(m,b);try{return v.set(m,b),!0}catch{return!1}}})},"1a654c89165c3fdd23e9":function(A,M){var o=A.exports={},h,v;function g(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?h=setTimeout:h=g}catch{h=g}try{typeof clearTimeout=="function"?v=clearTimeout:v=m}catch{v=m}})();function b(W){if(h===setTimeout)return setTimeout(W,0);if((h===g||!h)&&setTimeout)return h=setTimeout,setTimeout(W,0);try{return h(W,0)}catch{try{return h.call(null,W,0)}catch{return h.call(this,W,0)}}}function S(W){if(v===clearTimeout)return clearTimeout(W);if((v===m||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(W);try{return v(W)}catch{try{return v.call(null,W)}catch{return v.call(this,W)}}}var I=[],T=!1,P,D=-1;function U(){!T||!P||(T=!1,P.length?I=P.concat(I):D=-1,I.length&&Y())}function Y(){if(!T){var W=b(U);T=!0;for(var j=I.length;j;){for(P=I,I=[];++D<j;)P&&P[D].run();D=-1,j=I.length}P=null,T=!1,S(W)}}o.nextTick=function(W){var j=new Array(arguments.length-1);if(arguments.length>1)for(var Q=1;Q<arguments.length;Q++)j[Q-1]=arguments[Q];I.push(new K(W,j)),I.length===1&&!T&&b(Y)};function K(W,j){this.fun=W,this.array=j}K.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function X(){}o.on=X,o.addListener=X,o.once=X,o.off=X,o.removeListener=X,o.removeAllListeners=X,o.emit=X,o.prependListener=X,o.prependOnceListener=X,o.listeners=function(W){return[]},o.binding=function(W){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(W){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"1b726e7ce4061546ecfc":function(A,M,o){"use strict";(function(h){o.d(M,"a",function(){return K});function v(oe){return`${h.env.BUCKETS_PREFIX}-${oe}`}const g={NONUNIQUE:"NONUNIQUE",NOT_FOUND:"NOT_FOUND",NOT_IMPLEMENTED:"NOT_IMPLEMENTED",NODES_LIMIT_EXCEEDED:"NODES_LIMIT_EXCEEDED",INVALID_FILE_TYPE:"INVALID_FILE_TYPE",NOT_ACTIVATED:"NOT_ACTIVATED",DISABLED:"DISABLED",LAST_GROUP_ADMIN:"LAST_GROUP_ADMIN",REQUIRE_TEAM_ID:"REQUIRE_TEAM_ID",REGISTRY_NOT_ALLOWED:"REGISTRY_NOT_ALLOWED",REGISTRY_NOT_FOUND:"REGISTRY_NOT_FOUND",REGISTRY_IMAGE_NOT_FOUND:"REGISTRY_IMAGE_NOT_FOUND",REGISTRY_AUTH:"REGISTRY_AUTH",USERS_LIMIT_EXCEEDED:"USERS_LIMIT_EXCEEDED",IS_LOCAL:"IS_LOCAL",ACTIVE_USERS_LIMIT_EXCEEDED:"ACTIVE_USERS_LIMIT_EXCEEDED",EXPERIMENTS_LIMIT_EXCEEDED:"EXPERIMENTS_LIMIT_EXCEEDED",JOB_IMAGE_TAGS_LIMIT_EXCEEDED:"JOB_IMAGE_TAGS_LIMIT_EXCEEDED",LICENSE_REQUIRED:"LICENSE_REQUIRED",DATABASE_UNRESPONSIVE:"DATABASE_UNRESPONSIVE"},m={FS:"fs",GOOGLE:"google",AZURE:"azure",MINIO:"minio",HTTP:"http"},b={PUBLIC:v("public"),PRIVATE:v("private")},S={IMAGES_ORIGINAL:"images/original",IMAGES_PREVIEW:"images/preview",IMAGES_CONVERTED:"images/converted",FIGURES_GEOMETRIES:"figures/geometries",MODELS_PREVIEW:"models/preview",FILES_IMPORT:"tasks/import",EXPORT:"tasks/export",INFERENCE:"tasks/inference",TRAIN:"tasks/train",TASKS_FILES:"tasks/files",TASKS_ARCHIVES:"tasks/archives",TASKS_CUSTOM_DATA:"tasks/custom_data",TASKS_MODELS:"tasks/models",MODELS_DATA:"models/data",MODELS_ARCHIVES:"models/archives",PROJECT_README_IMAGES:"assets/projects/images",NOTEBOOKS:"notebooks",NOTEBOOKS_ARCHIVES:"notebooks/archives",AGENTS:"agents",LABELING_FILES:"labeling_materials/files",VIDEOS:"videos",POINT_CLOUDS:"point_clouds",TEAMS_STORAGE:"teams_storage",JOB_IMAGES_DEBUG_BACKUP:"debug_backups/jobs",APPS_POSTERS:"images/app_posters_storage",ECOSYSTEM_MODULES:"ecosystem/modules"},I={IMAGES:"images",FIGURES:"figures"},T=["Image Segmentation","Instance Segmentation","Text Detection","Object Detection","Classification"],P={10:"fatal",20:"error",30:"warn",40:"info",50:"debug",60:"trace"},D=Object.keys(P).reduce((oe,Se)=>(oe[P[Se]]=parseInt(Se,10),oe),{}),U={};Object.keys(P).forEach(oe=>{oe>40||(U[oe]=P[oe])});const Y=U,K={CONSECUTIVE:"consecutive",CLOSESTSEGMENT:"closestSegment",POINTSERASER:"pointsEraser",POINTSORDER:"pointsOrder",SNAP:"snap"},X={BOOLEAN:"boolean",NUMBER:"number",STRING:"string",TEXT_AREA:"text-area",SELECT:"select",COLOR_PICKER:"color-picker",STRINGS_ARRAY:"strings_array"},W={WORKSPACE:"workspace",PROJECT:"project",DATASET:"dataset",DTL_ARCHIVE:"dtl_archive",MODEL:"model",TASK_CHECKPOINT:"task_checkpoint",UNUSED_CHECKPOINT:"unused_checkpoint",PYTHON_NOTEBOOK:"python_notebook",PYTHON_NOTEBBOK_ARCHIVE:"python_notebook_archive"},j={IMAGES_FILENAME:"images_filename",IMAGES_TAG:"images_tag",IMAGES_SIZE:"images_size",IMAGES_CREATED:"images_created",OBJECTS_CLASS:"objects_class",OBJECTS_TAG:"objects_tag",OBJECTS_ANNOTATOR:"objects_annotator",TAGGED_BY_ANNOTATOR:"tagged_by_annotator",ISSUES_COUNT:"issues_count",JOB_IMAGE_STATUS:"job_image_status"},Q={TRACKING_ERROR:"videos:tracking-error",FETCH_FIGURES_IN_RANGE:"videos:fetch-figures-in-range"},ne={FIGURES_CREATED:"figures-created",FIGURES_UPDATED:"figures-updated",FIGURES_REMOVED:"figures-removed",IMAGE_TAG_ADDED:"image-tag-added",IMAGE_TAG_UPDATED:"image-tag-updated",IMAGE_TAG_REMOVED:"image-tag-removed",FIGURE_TAG_ADDED:"figure-tag-added",FIGURE_TAG_UPDATED:"figure-tag-updated",FIGURE_TAG_REMOVED:"figure-tag-removed",FIGURES_RESTORED:"figures-restored",IMAGES_FETCH_ANNOTATIONS:"images-fetch-annotations",PROJECT_META_UPDATED:"project-meta-updated",RUN_ACTION:"run-action"},ce={SET_FIGURE:"figures/setFigure",SET_TOOL:"tools/setTool",SET_CLASS:"classes/setClass",NEXT_ENTITY:"entities/nextEntity",PREV_ENTITY:"entities/prevEntity",SET_ENTITY:"entities/setEntity",NEXT_IMAGE:"images/nextImage",PREV_IMAGE:"images/prevImage",SET_IMAGE:"images/setImage",SET_VIEWPORT:"scene/setViewport",ZOOM_TO_OBJECT:"scene/zoomToObject",ZOOM_TO_FIGURE:"scene/zoomToFigure"},ee={MANUAL_SELECTED_IMAGE_CHANGED:"manual_selected_image_changed",MANUAL_SELECTED_FIGURE_CHANGED:"manual_selected_figure_changed"},B={PAGE:"page",TOKEN:"token"},$={VOLUMES:"volumes",IMAGES_V2:"images-v2",VIDEOS_V2:"videos-v2",VIDEOS_V3:"videos-v3",POINT_CLOUDS:"point-clouds",POINT_CLOUDS_TRACKING:"point-clouds-tracking"}}).call(this,o("1a654c89165c3fdd23e9"))},"1b8114f09abda03dc70b":function(A,M,o){o("3c57b024b26022754cbd")("Int32",4,function(h){return function(g,m,b){return h(this,g,m,b)}})},"1ba25d39d0ba5c9fa8cc":function(A,M,o){var h=o("6ae02b075e3300a8a961"),v=o("c445bef4faf25215ffcd");A.exports=function(g){return function(m,b){var S=String(v(m)),I=h(b),T=S.length,P,D;return I<0||I>=T?g?"":void 0:(P=S.charCodeAt(I),P<55296||P>56319||I+1===T||(D=S.charCodeAt(I+1))<56320||D>57343?g?S.charAt(I):P:g?S.slice(I,I+2):(P-55296<<10)+(D-56320)+65536)}}},"1bacb4cc0c5a30b0d9bc":function(A,M,o){"use strict";var h=o("df3e2598ae077b6ef2e9"),v=o.n(h),g=v.a},"1c4b62b15b2568a573b4":function(A,M,o){var h=o("abe6c77689592409700a"),v=o("c445bef4faf25215ffcd");A.exports=function(g,m,b){if(h(m))throw TypeError("String#"+b+" doesn't accept regex!");return String(v(g))}},"1c84413533b434a33065":function(A,M,o){"use strict";const h={NN:"Neural Network",OPEN_CV:"OpenCV",CLONE:"Clone",INTERPOLATE:"Interpolate"},v={INTERPOLATION:"interpolation",TRACKING:"tracking"},g=new Set(Object.values(v)),m={ONLY_AUTO_GENERATED:"only-auto",YES:"yes",NO:"no"},b={FORWARD:"forward",BACKWARD:"backward"},S={CLONE_COPY:"clone_copy",CLONE_ON_NEXT:"clone_on_next",TRACKING:"tracking"}},"1d38117166ab109cd06a":function(A,M){},"1d7f3399faa607526bcf":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Object",{create:o("196ca7010a0a30f36bdf")})},"1de892d5d25be2b2ee16":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("d7a3c56d6fced4c51eb9")(!1),g=[].indexOf,m=!!g&&1/[1].indexOf(1,-0)<0;h(h.P+h.F*(m||!o("155fc47f5eef242ee51b")(g)),"Array",{indexOf:function(S){return m?g.apply(this,arguments)||0:v(this,S,arguments[1])}})},"1f24b1c1631adced2f18":function(A,M,o){"use strict";const h={UNTAGGED_ALL:"untagged_all",UNTAGGED_SOME:"untagged_some"}},"1f598190b9f7d363a1ea":function(A,M){var o=A.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=o)},"1fdd1d1f4ae40187e23a":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8"),v=o("c815b7eba88e00c1c07a").onFreeze;o("de1b22d97612a36416e3")("freeze",function(g){return function(b){return g&&h(b)?g(v(b)):b}})},"2132b7a92754e3fc960f":function(A,M,o){"use strict";var h=o("989a42060903e47c0cff");const v={...[...h.a].reduce((b,S)=>(b[S]="customDockerImage",b),{}),[h.c.TRAIN]:"trainImage",[h.c.INFERENCE]:"inferenceImage",[h.c.DEPLOY_MODEL]:"deployImage",[h.c.SMART_TOOL]:"deploySmartImage"},g=Object.keys(v).reduce((b,S)=>(b[v[S]]=S,b),{});g.customDockerImage=h.c.CUSTOM;const m=Object.keys(g)},"213f26f2eeabf1ab6b8d":function(A,M,o){"use strict";const h={MARKDOWN:"markdown",TABLE:"table",PLOTLY:"plotly",NOTIFICATION:"notification",LINE_CHART:"line-chart",GALLERY:"gallery",TASK_LOGS:"task-logs",ELEMENT:"element"}},"21c9b9dc8d994c745f44":function(A,M){},"223d2d46998a5ea6eb7c":function(A,M,o){o("e07efe23259ec1cddf5e"),A.exports=o("04aabd2475089fa3cacd").Object.entries},"227b3982f26a4c2a19df":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("04aabd2475089fa3cacd"),g=o("e9323032e98511a09e82"),m=o("5760c5a16066c01be8f5"),b=o("8925210aa0f0d3044001");h(h.P+h.R,"Promise",{finally:function(S){var I=m(this,v.Promise||g.Promise),T=typeof S=="function";return this.then(T?function(P){return b(I,S()).then(function(){return P})}:S,T?function(P){return b(I,S()).then(function(){throw P})}:S)}})},"23113e976a9e8f622baf":function(A,M,o){"use strict";var h=o("aeebf6797391ce13e889");const v={GITHUB:"github",SLY_GITEA:"sly_gitea",GITLAB:"gitlab",SUPERVISELY:"supervisely"},g={MODEL:"model",APP:"app",NOTEBOOK:"notebook",PLUGIN:"plugin",PROJECT:"project",COLLECTION:"collection",ANNOTATION_TOOL:"annotation_tool"},m={"GPL-3.0":"https://choosealicense.com/licenses/gpl-3.0/","AGPL-3.0":"https://choosealicense.com/licenses/agpl-3.0/","Apache-2.0":"https://choosealicense.com/licenses/apache-2.0/","BSD-3-Clause":"https://choosealicense.com/licenses/bsd-3-clause/",MIT:"https://choosealicense.com/licenses/mit/"},b={IMAGES_PROJECT:"images_project",VIDEOS_PROJECT:"videos_project",POINT_CLOUDS_PROJECT:"point_cloud_project",POINT_CLOUD_EPISODES_PROJECT:"point_cloud_episodes_project",VOLUMES_PROJECT:"volumes_project",IMAGES_DATASET:"images_dataset",VIDEOS_DATASET:"videos_dataset",POINT_CLOUDS_DATASET:"point_cloud_dataset",POINT_CLOUD_EPISODES_DATASET:"point_cloud_episodes_dataset",VOLUMES_DATASET:"volumes_dataset",LABELING_JOB:"labeling_job",FILES_FOLDER:"files_folder",FILES_FILE:"files_file",TEAM_MEMBER:"team_member",TEAM:"team",WORKSPACE:"workspace",ECOSYSTEM:"ecosystem",AGENT_FOLDER:"agent_folder",AGENT_FILE:"agent_file"},S={[b.IMAGES_PROJECT]:"Images project",[b.VIDEOS_PROJECT]:"Videos project",[b.POINT_CLOUDS_PROJECT]:"Point cloud project",[b.VOLUMES_PROJECT]:"Volumes project",[b.IMAGES_DATASET]:"Images dataset",[b.VIDEOS_DATASET]:"Videos dataset",[b.POINT_CLOUDS_DATASET]:"Point cloud dataset",[b.VOLUMES_DATASET]:"Volumes dataset",[b.LABELING_JOB]:"Labeling job",[b.FILES_FOLDER]:"File manager folder",[b.FILES_FILE]:"File manager file",[b.TEAM_MEMBER]:"Team member",[b.TEAM]:"Team",[b.WORKSPACE]:"Workspace",[b.AGENT_FOLDER]:"Agent folder",[b.AGENT_FILE]:"Agent file"},I={[h.b.IMAGES]:b.IMAGES_PROJECT,[h.b.VIDEOS]:b.VIDEOS_PROJECT,[h.b.POINT_CLOUDS]:b.POINT_CLOUDS_PROJECT,[h.b.POINT_CLOUD_EPISODES]:b.POINT_CLOUD_EPISODES_PROJECT,[h.b.VOLUMES]:b.VOLUMES_PROJECT},T={[h.b.IMAGES]:b.IMAGES_DATASET,[h.b.VIDEOS]:b.VIDEOS_DATASET,[h.b.POINT_CLOUDS]:b.POINT_CLOUDS_DATASET,[h.b.POINT_CLOUD_EPISODES]:b.POINT_CLOUD_EPISODES_DATASET,[h.b.VOLUMES]:b.VOLUMES_DATASET},P={DOWNLOAD_AS:"Download as",RUN_APP:"Run App",REPORTS:"Report",NN:"Neural Networks"},D={PANEL:"panel",FILE_MANAGER:"files",STANDALONE:"standalone",DATA_COMMANDER:"data_commander",ANNOTATION_TOOL_IMAGES:"image_annotation_tool",ANNOTATION_TOOL_VIDEOS:"video_annotation_tool",ANNOTATION_TOOL_VOLUMES:"dicom_annotation_tool",ANNOTATION_TOOL_POINT_CLOUDS:"pointcloud_annotation_tool"},U={NEURAL_NETWORKS:"neural-network",LABELING:"labeling",IMPORT:"import",EXPORT:"export",DEVELOPMENT:"development",COLLABORATION:"collaboration",DATA_OPERATIONS:"data-operations",SYNTHETIC_DATA:"synthetic",VISUALIZATION:"visualization-stats",OTHER:"other"},Y={SIDEBAR:"sidebar",LEFT:"left",RIGHT:"right"},K={[U.NEURAL_NETWORKS]:["neural network"],[U.LABELING]:["labeling"],[U.IMPORT]:["import"],[U.EXPORT]:["export"],[U.DEVELOPMENT]:["development"],[U.COLLABORATION]:["collaboration"],[U.DATA_OPERATIONS]:["data transformation","annotation transformation","synthetic","augmentation","modalities","project management"],[U.SYNTHETIC_DATA]:["synthetic"],[U.VISUALIZATION]:["visualization","exploration","statistics"]},X=Object.keys(K).reduce((Q,ne)=>(Q[ne]=new Set(K[ne].map(ce=>ce.toLowerCase())),Q),{}),W={[h.a.IMAGES_V1]:{isNewImageAnnTool:!1},[h.a.IMAGES_V2]:{isNewImageAnnTool:!0},[h.a.VIDEOS_V1]:{isNewVideoAnnTool:!1},[h.a.VIDEOS_V2]:{isNewVideoAnnTool:!0},[h.a.VIDEOS_V3]:{annToolVersion:"v3"},[h.a.VOLUMES_V1]:{},[h.a.POINT_CLOUDS_V1]:{},[h.a.POINT_CLOUD_EPISODES_V1]:{}},j={REQUIRED:"required",PREFERRED:"preferred",NO:"no"}},"231fc3d41bac5fd7193b":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("409f063042ff82279e38")(1);h(h.P+h.F*!o("155fc47f5eef242ee51b")([].map,!0),"Array",{map:function(m){return v(this,m,arguments[1])}})},"239a0bdef8c7a5331efc":function(A,M,o){"use strict";var h=o("e9323032e98511a09e82"),v=o("409f063042ff82279e38")(0),g=o("26949bccb98fdb02c86a"),m=o("c815b7eba88e00c1c07a"),b=o("cce97c855f847adf6492"),S=o("58439ceabab7ac0bd6c9"),I=o("0c6bdb2f1e107b092ad8"),T=o("8e52fe7d9c78070c4cb8"),P=o("8e52fe7d9c78070c4cb8"),D=!h.ActiveXObject&&"ActiveXObject"in h,U="WeakMap",Y=m.getWeak,K=Object.isExtensible,X=S.ufstore,W,j=function(ce){return function(){return ce(this,arguments.length>0?arguments[0]:void 0)}},Q={get:function(ee){if(I(ee)){var B=Y(ee);return B===!0?X(T(this,U)).get(ee):B?B[this._i]:void 0}},set:function(ee,B){return S.def(T(this,U),ee,B)}},ne=A.exports=o("5fff38dc6894e11cedd3")(U,j,Q,S,!0,!0);P&&D&&(W=S.getConstructor(j,U),b(W.prototype,Q),m.NEED=!0,v(["delete","has","get","set"],function(ce){var ee=ne.prototype,B=ee[ce];g(ee,ce,function($,oe){if(I($)&&!K($)){this._f||(this._f=new W);var Se=this._f[ce]($,oe);return ce=="set"?this:Se}return B.call(this,$,oe)})}))},"23ffeadd01de75e61cb9":function(A,M){},"24f066b8f816cf2f62d5":function(A,M,o){"use strict";var h=o("5ad613f51b5371adff79"),v=o.n(h),g=v.a},"2552c24b020126fc6ce1":function(A,M){},"2589b998897fb766bd14":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("ee380940dab8889d05d0");h(h.S+h.F*o("126be16bb2f5f1c18403")(function(){function g(){}return!(Array.of.call(g)instanceof g)}),"Array",{of:function(){for(var m=0,b=arguments.length,S=new(typeof this=="function"?this:Array)(b);b>m;)v(S,m,arguments[m++]);return S.length=b,S}})},"26015173042bd44a5ea1":function(A,M){},"26113a95acaf36fd4c65":function(A,M,o){"use strict";Object.defineProperty(M,"__esModule",{value:!0});const h=o("ab553d61d5aeaf067ee3"),v=o("d7f0821154b37b060f0b"),g=o("450b3767e93be2043860"),m=()=>{},b=new v.default.TimeoutError;class S extends h{constructor(T){if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=m,this._resolveIdle=m,T=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:g.default},T),!(typeof T.intervalCap=="number"&&T.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${T.intervalCap}\` (${typeof T.intervalCap})`);if(T.interval===void 0||!(Number.isFinite(T.interval)&&T.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${T.interval}\` (${typeof T.interval})`);this._carryoverConcurrencyCount=T.carryoverConcurrencyCount,this._isIntervalIgnored=T.intervalCap===1/0||T.interval===0,this._intervalCap=T.intervalCap,this._interval=T.interval,this._queue=new T.queueClass,this._queueClass=T.queueClass,this.concurrency=T.concurrency,this._timeout=T.timeout,this._throwOnTimeout=T.throwOnTimeout===!0,this._isPaused=T.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=m,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=m)}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const T=Date.now();if(this._intervalId===void 0){const P=this._intervalEnd-T;if(P<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},P)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const T=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this._queue.dequeue()(),T&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(T){if(!(typeof T=="number"&&T>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${T}\` (${typeof T})`);this._concurrency=T,this._processQueue()}async add(T,P={}){return new Promise((D,U)=>{const Y=async()=>{this._pendingCount++,this._intervalCount++;try{const K=this._timeout===void 0&&P.timeout===void 0?T():v.default(Promise.resolve(T()),P.timeout===void 0?this._timeout:P.timeout,()=>{(P.throwOnTimeout===void 0?this._throwOnTimeout:P.throwOnTimeout)&&U(b)});D(await K)}catch(K){U(K)}this._next()};this._queue.enqueue(Y,P),this._tryToStartAnother()})}async addAll(T,P){return Promise.all(T.map(async D=>this.add(D,P)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(T=>{const P=this._resolveEmpty;this._resolveEmpty=()=>{P(),T()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(T=>{const P=this._resolveIdle;this._resolveIdle=()=>{P(),T()}})}get size(){return this._queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}set timeout(T){this._timeout=T}get timeout(){return this._timeout}}M.default=S},"26949bccb98fdb02c86a":function(A,M,o){var h=o("e9323032e98511a09e82"),v=o("fa9e288138e317a7a504"),g=o("5e7f3152dbd5f68ea917"),m=o("d3a44d49545c5d8bf631")("src"),b=o("a6838f960a4a720a39ef"),S="toString",I=(""+b).split(S);o("04aabd2475089fa3cacd").inspectSource=function(T){return b.call(T)},(A.exports=function(T,P,D,U){var Y=typeof D=="function";Y&&(g(D,"name")||v(D,"name",P)),T[P]!==D&&(Y&&(g(D,m)||v(D,m,T[P]?""+T[P]:I.join(String(P)))),T===h?T[P]=D:U?T[P]?T[P]=D:v(T,P,D):(delete T[P],v(T,P,D)))})(Function.prototype,S,function(){return typeof this=="function"&&this[m]||b.call(this)})},"26d753a9604d80c3170c":function(A,M){},"27c6b71bfad7bcdd7446":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Math",{trunc:function(g){return(g>0?Math.floor:Math.ceil)(g)}})},"27cb60849c9c0ac2ac5a":function(A,M,o){var h=o("a8ecafe71e21295d1184"),v=o("170abb7a40430821904d"),g=o("e9c07d0897a4ff4b404d"),m=o("e3529c4c6a770b1dc792"),b=o("e9323032e98511a09e82"),S=b.process,I=b.setImmediate,T=b.clearImmediate,P=b.MessageChannel,D=b.Dispatch,U=0,Y={},K="onreadystatechange",X,W,j,Q=function(){var ce=+this;if(Y.hasOwnProperty(ce)){var ee=Y[ce];delete Y[ce],ee()}},ne=function(ce){Q.call(ce.data)};(!I||!T)&&(I=function(ee){for(var B=[],$=1;arguments.length>$;)B.push(arguments[$++]);return Y[++U]=function(){v(typeof ee=="function"?ee:Function(ee),B)},X(U),U},T=function(ee){delete Y[ee]},o("30b8e0406acca1d79148")(S)=="process"?X=function(ce){S.nextTick(h(Q,ce,1))}:D&&D.now?X=function(ce){D.now(h(Q,ce,1))}:P?(W=new P,j=W.port2,W.port1.onmessage=ne,X=h(j.postMessage,j,1)):b.addEventListener&&typeof postMessage=="function"&&!b.importScripts?(X=function(ce){b.postMessage(ce+"","*")},b.addEventListener("message",ne,!1)):K in m("script")?X=function(ce){g.appendChild(m("script"))[K]=function(){g.removeChild(this),Q.call(ce)}}:X=function(ce){setTimeout(h(Q,ce,1),0)}),A.exports={set:I,clear:T}},"28a0a538e4afd2700160":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("1c4b62b15b2568a573b4"),g="includes";h(h.P+h.F*o("5bb6cfbb6a15beb75e86")(g),"String",{includes:function(b){return!!~v(this,b,g).indexOf(b,arguments.length>1?arguments[1]:void 0)}})},"29c91b56491d3b41e5b7":function(A,M){var o=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(o){var h=new Uint8Array(16);A.exports=function(){return o(h),h}}else{var v=new Array(16);A.exports=function(){for(var m=0,b;m<16;m++)m&3||(b=Math.random()*4294967296),v[m]=b>>>((m&3)<<3)&255;return v}}},"29e1c134e25d7d250cb8":function(A,M,o){var h=o("03cdf004f8ef8c702f67"),v=o("fdf9ec15fb80cd9b8df9")("iterator"),g=o("0a850ab3e6aa8900d3c4");A.exports=o("04aabd2475089fa3cacd").getIteratorMethod=function(m){if(m!=null)return m[v]||m["@@iterator"]||g[h(m)]}},"2adb16b6b2c933a04d61":function(A,M,o){var h=function(v){"use strict";var g=Object.prototype,m=g.hasOwnProperty,b=Object.defineProperty||function(be,Ce,Ue){be[Ce]=Ue.value},S,I=typeof Symbol=="function"?Symbol:{},T=I.iterator||"@@iterator",P=I.asyncIterator||"@@asyncIterator",D=I.toStringTag||"@@toStringTag";function U(be,Ce,Ue){return Object.defineProperty(be,Ce,{value:Ue,enumerable:!0,configurable:!0,writable:!0}),be[Ce]}try{U({},"")}catch{U=function(Ce,Ue,Te){return Ce[Ue]=Te}}function Y(be,Ce,Ue,Te){var Le=Ce&&Ce.prototype instanceof ce?Ce:ce,yt=Object.create(Le.prototype),Mt=new st(Te||[]);return b(yt,"_invoke",{value:nt(be,Ue,Mt)}),yt}v.wrap=Y;function K(be,Ce,Ue){try{return{type:"normal",arg:be.call(Ce,Ue)}}catch(Te){return{type:"throw",arg:Te}}}var X="suspendedStart",W="suspendedYield",j="executing",Q="completed",ne={};function ce(){}function ee(){}function B(){}var $={};U($,T,function(){return this});var oe=Object.getPrototypeOf,Se=oe&&oe(oe(de([])));Se&&Se!==g&&m.call(Se,T)&&($=Se);var Fe=B.prototype=ce.prototype=Object.create($);ee.prototype=B,b(Fe,"constructor",{value:B,configurable:!0}),b(B,"constructor",{value:ee,configurable:!0}),ee.displayName=U(B,D,"GeneratorFunction");function ct(be){["next","throw","return"].forEach(function(Ce){U(be,Ce,function(Ue){return this._invoke(Ce,Ue)})})}v.isGeneratorFunction=function(be){var Ce=typeof be=="function"&&be.constructor;return Ce?Ce===ee||(Ce.displayName||Ce.name)==="GeneratorFunction":!1},v.mark=function(be){return Object.setPrototypeOf?Object.setPrototypeOf(be,B):(be.__proto__=B,U(be,D,"GeneratorFunction")),be.prototype=Object.create(Fe),be},v.awrap=function(be){return{__await:be}};function He(be,Ce){function Ue(yt,Mt,$t,on){var un=K(be[yt],be,Mt);if(un.type==="throw")on(un.arg);else{var Bn=un.arg,qn=Bn.value;return qn&&typeof qn=="object"&&m.call(qn,"__await")?Ce.resolve(qn.__await).then(function(Rn){Ue("next",Rn,$t,on)},function(Rn){Ue("throw",Rn,$t,on)}):Ce.resolve(qn).then(function(Rn){Bn.value=Rn,$t(Bn)},function(Rn){return Ue("throw",Rn,$t,on)})}}var Te;function Le(yt,Mt){function $t(){return new Ce(function(on,un){Ue(yt,Mt,on,un)})}return Te=Te?Te.then($t,$t):$t()}b(this,"_invoke",{value:Le})}ct(He.prototype),U(He.prototype,P,function(){return this}),v.AsyncIterator=He,v.async=function(be,Ce,Ue,Te,Le){Le===void 0&&(Le=Promise);var yt=new He(Y(be,Ce,Ue,Te),Le);return v.isGeneratorFunction(Ce)?yt:yt.next().then(function(Mt){return Mt.done?Mt.value:yt.next()})};function nt(be,Ce,Ue){var Te=X;return function(yt,Mt){if(Te===j)throw new Error("Generator is already running");if(Te===Q){if(yt==="throw")throw Mt;return Ie()}for(Ue.method=yt,Ue.arg=Mt;;){var $t=Ue.delegate;if($t){var on=Ae($t,Ue);if(on){if(on===ne)continue;return on}}if(Ue.method==="next")Ue.sent=Ue._sent=Ue.arg;else if(Ue.method==="throw"){if(Te===X)throw Te=Q,Ue.arg;Ue.dispatchException(Ue.arg)}else Ue.method==="return"&&Ue.abrupt("return",Ue.arg);Te=j;var un=K(be,Ce,Ue);if(un.type==="normal"){if(Te=Ue.done?Q:W,un.arg===ne)continue;return{value:un.arg,done:Ue.done}}else un.type==="throw"&&(Te=Q,Ue.method="throw",Ue.arg=un.arg)}}}function Ae(be,Ce){var Ue=Ce.method,Te=be.iterator[Ue];if(Te===S)return Ce.delegate=null,Ue==="throw"&&be.iterator.return&&(Ce.method="return",Ce.arg=S,Ae(be,Ce),Ce.method==="throw")||Ue!=="return"&&(Ce.method="throw",Ce.arg=new TypeError("The iterator does not provide a '"+Ue+"' method")),ne;var Le=K(Te,be.iterator,Ce.arg);if(Le.type==="throw")return Ce.method="throw",Ce.arg=Le.arg,Ce.delegate=null,ne;var yt=Le.arg;if(!yt)return Ce.method="throw",Ce.arg=new TypeError("iterator result is not an object"),Ce.delegate=null,ne;if(yt.done)Ce[be.resultName]=yt.value,Ce.next=be.nextLoc,Ce.method!=="return"&&(Ce.method="next",Ce.arg=S);else return yt;return Ce.delegate=null,ne}ct(Fe),U(Fe,D,"Generator"),U(Fe,T,function(){return this}),U(Fe,"toString",function(){return"[object Generator]"});function Ve(be){var Ce={tryLoc:be[0]};1 in be&&(Ce.catchLoc=be[1]),2 in be&&(Ce.finallyLoc=be[2],Ce.afterLoc=be[3]),this.tryEntries.push(Ce)}function Ye(be){var Ce=be.completion||{};Ce.type="normal",delete Ce.arg,be.completion=Ce}function st(be){this.tryEntries=[{tryLoc:"root"}],be.forEach(Ve,this),this.reset(!0)}v.keys=function(be){var Ce=Object(be),Ue=[];for(var Te in Ce)Ue.push(Te);return Ue.reverse(),function Le(){for(;Ue.length;){var yt=Ue.pop();if(yt in Ce)return Le.value=yt,Le.done=!1,Le}return Le.done=!0,Le}};function de(be){if(be){var Ce=be[T];if(Ce)return Ce.call(be);if(typeof be.next=="function")return be;if(!isNaN(be.length)){var Ue=-1,Te=function Le(){for(;++Ue<be.length;)if(m.call(be,Ue))return Le.value=be[Ue],Le.done=!1,Le;return Le.value=S,Le.done=!0,Le};return Te.next=Te}}return{next:Ie}}v.values=de;function Ie(){return{value:S,done:!0}}return st.prototype={constructor:st,reset:function(be){if(this.prev=0,this.next=0,this.sent=this._sent=S,this.done=!1,this.delegate=null,this.method="next",this.arg=S,this.tryEntries.forEach(Ye),!be)for(var Ce in this)Ce.charAt(0)==="t"&&m.call(this,Ce)&&!isNaN(+Ce.slice(1))&&(this[Ce]=S)},stop:function(){this.done=!0;var be=this.tryEntries[0],Ce=be.completion;if(Ce.type==="throw")throw Ce.arg;return this.rval},dispatchException:function(be){if(this.done)throw be;var Ce=this;function Ue(on,un){return yt.type="throw",yt.arg=be,Ce.next=on,un&&(Ce.method="next",Ce.arg=S),!!un}for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Le=this.tryEntries[Te],yt=Le.completion;if(Le.tryLoc==="root")return Ue("end");if(Le.tryLoc<=this.prev){var Mt=m.call(Le,"catchLoc"),$t=m.call(Le,"finallyLoc");if(Mt&&$t){if(this.prev<Le.catchLoc)return Ue(Le.catchLoc,!0);if(this.prev<Le.finallyLoc)return Ue(Le.finallyLoc)}else if(Mt){if(this.prev<Le.catchLoc)return Ue(Le.catchLoc,!0)}else if($t){if(this.prev<Le.finallyLoc)return Ue(Le.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(be,Ce){for(var Ue=this.tryEntries.length-1;Ue>=0;--Ue){var Te=this.tryEntries[Ue];if(Te.tryLoc<=this.prev&&m.call(Te,"finallyLoc")&&this.prev<Te.finallyLoc){var Le=Te;break}}Le&&(be==="break"||be==="continue")&&Le.tryLoc<=Ce&&Ce<=Le.finallyLoc&&(Le=null);var yt=Le?Le.completion:{};return yt.type=be,yt.arg=Ce,Le?(this.method="next",this.next=Le.finallyLoc,ne):this.complete(yt)},complete:function(be,Ce){if(be.type==="throw")throw be.arg;return be.type==="break"||be.type==="continue"?this.next=be.arg:be.type==="return"?(this.rval=this.arg=be.arg,this.method="return",this.next="end"):be.type==="normal"&&Ce&&(this.next=Ce),ne},finish:function(be){for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var Ue=this.tryEntries[Ce];if(Ue.finallyLoc===be)return this.complete(Ue.completion,Ue.afterLoc),Ye(Ue),ne}},catch:function(be){for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var Ue=this.tryEntries[Ce];if(Ue.tryLoc===be){var Te=Ue.completion;if(Te.type==="throw"){var Le=Te.arg;Ye(Ue)}return Le}}throw new Error("illegal catch attempt")},delegateYield:function(be,Ce,Ue){return this.delegate={iterator:de(be),resultName:Ce,nextLoc:Ue},this.method==="next"&&(this.arg=S),ne}},v}(A.exports);try{regeneratorRuntime=h}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=h:Function("r","regeneratorRuntime = r")(h)}},"2b120026aa412fb5cb8e":function(A,M,o){"use strict";var h=o("45e95ff7deb186b1032c"),v=o("7964b54be5616e0032b3"),g=o("87ca1990df7e5ce5f6d4"),m=o("6ae02b075e3300a8a961"),b=o("d53b0841ddd3afd3477d"),S=o("cd27c57942366dd9e816"),I=Math.max,T=Math.min,P=Math.floor,D=/\$([$&`']|\d\d?|<[^>]*>)/g,U=/\$([$&`']|\d\d?)/g,Y=function(K){return K===void 0?K:String(K)};o("6e329e616ad9c45fb7bd")("replace",2,function(K,X,W,j){return[function(ce,ee){var B=K(this),$=ce==null?void 0:ce[X];return $!==void 0?$.call(ce,B,ee):W.call(String(B),ce,ee)},function(ne,ce){var ee=j(W,ne,this,ce);if(ee.done)return ee.value;var B=h(ne),$=String(this),oe=typeof ce=="function";oe||(ce=String(ce));var Se=B.global;if(Se){var Fe=B.unicode;B.lastIndex=0}for(var ct=[];;){var He=S(B,$);if(He===null||(ct.push(He),!Se))break;var nt=String(He[0]);nt===""&&(B.lastIndex=b($,g(B.lastIndex),Fe))}for(var Ae="",Ve=0,Ye=0;Ye<ct.length;Ye++){He=ct[Ye];for(var st=String(He[0]),de=I(T(m(He.index),$.length),0),Ie=[],be=1;be<He.length;be++)Ie.push(Y(He[be]));var Ce=He.groups;if(oe){var Ue=[st].concat(Ie,de,$);Ce!==void 0&&Ue.push(Ce);var Te=String(ce.apply(void 0,Ue))}else Te=Q(st,$,de,Ie,Ce,ce);de>=Ve&&(Ae+=$.slice(Ve,de)+Te,Ve=de+st.length)}return Ae+$.slice(Ve)}];function Q(ne,ce,ee,B,$,oe){var Se=ee+ne.length,Fe=B.length,ct=U;return $!==void 0&&($=v($),ct=D),W.call(oe,ct,function(He,nt){var Ae;switch(nt.charAt(0)){case"$":return"$";case"&":return ne;case"`":return ce.slice(0,ee);case"'":return ce.slice(Se);case"<":Ae=$[nt.slice(1,-1)];break;default:var Ve=+nt;if(Ve===0)return He;if(Ve>Fe){var Ye=P(Ve/10);return Ye===0?He:Ye<=Fe?B[Ye-1]===void 0?nt.charAt(1):B[Ye-1]+nt.charAt(1):He}Ae=B[Ve-1]}return Ae===void 0?"":Ae})}})},"2b521e652ec97b3b1e3d":function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("italics",function(h){return function(){return h(this,"i","","")}})},"2c9e099ec16690e18dba":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8");o("de1b22d97612a36416e3")("isFrozen",function(v){return function(m){return h(m)?v?v(m):!1:!0}})},"2ce6c2b0f7511319300d":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("018197c10a6ce8e48027"),g=o("87ca1990df7e5ce5f6d4");h(h.S,"String",{raw:function(b){for(var S=v(b.raw),I=g(S.length),T=arguments.length,P=[],D=0;I>D;)P.push(String(S[D++])),D<T&&P.push(String(arguments[D]));return P.join("")}})},"2d639e7503de7c56ad49":function(A,M){A.exports=function(o){try{return!!o()}catch{return!0}}},"2e10a432ac9e5ef82d8c":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("86db799eb9110d390c68");h(h.P+h.F*(Date.prototype.toISOString!==v),"Date",{toISOString:v})},"2e899ef6b64c1edfb532":function(A,M){},"2ecd84c8cd25e23da709":function(A,M){},"2fc08ef14d334fbecb33":function(A,M,o){var h=o("4d435970f504c4554c69"),v=o("97d0c7cef3162c18013d");A.exports=Object.keys||function(m){return h(m,v)}},"30706da34b5ad9786ce4":function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("fixed",function(h){return function(){return h(this,"tt","","")}})},"3091fc82fc780b1e9f35":function(A,M,o){var h=o("e9323032e98511a09e82"),v=o("04aabd2475089fa3cacd"),g=o("fa9e288138e317a7a504"),m=o("26949bccb98fdb02c86a"),b=o("a8ecafe71e21295d1184"),S="prototype",I=function(T,P,D){var U=T&I.F,Y=T&I.G,K=T&I.S,X=T&I.P,W=T&I.B,j=Y?h:K?h[P]||(h[P]={}):(h[P]||{})[S],Q=Y?v:v[P]||(v[P]={}),ne=Q[S]||(Q[S]={}),ce,ee,B,$;Y&&(D=P);for(ce in D)ee=!U&&j&&j[ce]!==void 0,B=(ee?j:D)[ce],$=W&&ee?b(B,h):X&&typeof B=="function"?b(Function.call,B):B,j&&m(j,ce,B,T&I.U),Q[ce]!=B&&g(Q,ce,$),X&&ne[ce]!=B&&(ne[ce]=B)};h.core=v,I.F=1,I.G=2,I.S=4,I.P=8,I.B=16,I.W=32,I.U=64,I.R=128,A.exports=I},"30b8e0406acca1d79148":function(A,M){var o={}.toString;A.exports=function(h){return o.call(h).slice(8,-1)}},"314a04d472cfb0837bef":function(A,M,o){o("cf000b6dbe8f01de602b")("asyncIterator")},"31d88529d569d67159e9":function(A,M,o){var h=o("45e95ff7deb186b1032c");A.exports=function(v,g,m,b){try{return b?g(h(m)[0],m[1]):g(m)}catch(I){var S=v.return;throw S!==void 0&&h(S.call(v)),I}}},"3293ee358506ec9b7d32":function(A,M,o){var h=o("e9323032e98511a09e82"),v=h.navigator;A.exports=v&&v.userAgent||""},"33a6e78da69756968b6d":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=Math.asinh;function g(m){return!isFinite(m=+m)||m==0?m:m<0?-g(-m):Math.log(m+Math.sqrt(m*m+1))}h(h.S+h.F*!(v&&1/v(0)>0),"Math",{asinh:g})},"344a6b9a921b83349b58":function(A,M,o){"use strict";var h=o("c021bf2eaf2f2e721a6e");function v(g){var m,b;this.promise=new g(function(S,I){if(m!==void 0||b!==void 0)throw TypeError("Bad Promise constructor");m=S,b=I}),this.resolve=h(m),this.reject=h(b)}A.exports.f=function(g){return new v(g)}},"35f042f04afc916e7b70":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("27cb60849c9c0ac2ac5a");h(h.G+h.B,{setImmediate:v.set,clearImmediate:v.clear})},"36dcda5e30871a360b8c":function(A,M,o){A.exports=!o("2d639e7503de7c56ad49")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"36f0cad020f416714cbb":function(A,M,o){"use strict";function h(g){return new Promise(m=>setTimeout(m,Math.max(g,0)||0))}var v=function(g,m,{getNextArgs:b,leading:S=!0}={}){let I=b;I||(I=(K,X)=>X);let T,P=h(S?0:m),D=null,U=NaN;function Y(){U=Date.now(),D=null;const K=T;return T=null,P=g(...K),P}return async(...K)=>(T=T?I(T,[...K]):[...K],D||(D=Promise.all([P,h(U+m-Date.now())]).then(Y,Y)),D)}},"37a0149f2367a1aade6b":function(A,M,o){o("3c57b024b26022754cbd")("Uint16",2,function(h){return function(g,m,b){return h(this,g,m,b)}})},"384615f8398e34c53dc1":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8"),v=o("c815b7eba88e00c1c07a").onFreeze;o("de1b22d97612a36416e3")("preventExtensions",function(g){return function(b){return g&&h(b)?g(v(b)):b}})},"38b88b4f2a5574824808":function(A,M,o){"use strict";A.exports=(h,v)=>(v=v||(()=>{}),h.then(g=>new Promise(m=>{m(v())}).then(()=>g),g=>new Promise(m=>{m(v())}).then(()=>{throw g})))},"38dacb239717b0d63581":function(A,M,o){var h=o("f8cf2e7afd370478f99e"),v=o("3091fc82fc780b1e9f35"),g=o("45e95ff7deb186b1032c"),m=o("9bbb799f204bee898f0a");v(v.S+v.F*o("126be16bb2f5f1c18403")(function(){Reflect.defineProperty(h.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(S,I,T){g(S),I=m(I,!0),g(T);try{return h.f(S,I,T),!0}catch{return!1}}})},"38e8f2237f70a4d445da":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8");o("de1b22d97612a36416e3")("isSealed",function(v){return function(m){return h(m)?v?v(m):!1:!0}})},"3960012d53d35dc6bc9a":function(A,M,o){o("6b4d0505d51aabe15cdc"),A.exports=o("04aabd2475089fa3cacd").Object.values},"398dab085f4bd5e07c44":function(module,exports,__webpack_require__){(function(process,global,setImmediate){/* @preserve
* The MIT License (MIT)
* 
* Copyright (c) 2013-2017 Petka Antonov
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
* 
*/(function(A){if(!0)module.exports=A();else var M})(function(){var define,module,exports;return function A(M,o,h){function v(b,S){if(!o[b]){if(!M[b]){var I=typeof _dereq_=="function"&&_dereq_;if(!S&&I)return I(b,!0);if(g)return g(b,!0);var T=new Error("Cannot find module '"+b+"'");throw T.code="MODULE_NOT_FOUND",T}var P=o[b]={exports:{}};M[b][0].call(P.exports,function(D){var U=M[b][1][D];return v(U||D)},P,P.exports,A,M,o,h)}return o[b].exports}for(var g=typeof _dereq_=="function"&&_dereq_,m=0;m<h.length;m++)v(h[m]);return v}({1:[function(A,M,o){"use strict";M.exports=function(h){var v=h._SomePromiseArray;function g(m){var b=new v(m),S=b.promise();return b.setHowMany(1),b.setUnwrap(),b.init(),S}h.any=function(m){return g(m)},h.prototype.any=function(){return g(this)}}},{}],2:[function(A,M,o){"use strict";var h;try{throw new Error}catch(P){h=P}var v=A("./schedule"),g=A("./queue"),m=A("./util");function b(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new g(16),this._normalQueue=new g(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var P=this;this.drainQueues=function(){P._drainQueues()},this._schedule=v}b.prototype.setScheduler=function(P){var D=this._schedule;return this._schedule=P,this._customScheduler=!0,D},b.prototype.hasCustomScheduler=function(){return this._customScheduler},b.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},b.prototype.disableTrampolineIfNecessary=function(){m.hasDevTools&&(this._trampolineEnabled=!1)},b.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},b.prototype.fatalError=function(P,D){D?(process.stderr.write("Fatal "+(P instanceof Error?P.stack:P)+`
`),process.exit(2)):this.throwLater(P)},b.prototype.throwLater=function(P,D){if(arguments.length===1&&(D=P,P=function(){throw D}),typeof setTimeout<"u")setTimeout(function(){P(D)},0);else try{this._schedule(function(){P(D)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function S(P,D,U){this._lateQueue.push(P,D,U),this._queueTick()}function I(P,D,U){this._normalQueue.push(P,D,U),this._queueTick()}function T(P){this._normalQueue._pushOne(P),this._queueTick()}m.hasDevTools?(b.prototype.invokeLater=function(P,D,U){this._trampolineEnabled?S.call(this,P,D,U):this._schedule(function(){setTimeout(function(){P.call(D,U)},100)})},b.prototype.invoke=function(P,D,U){this._trampolineEnabled?I.call(this,P,D,U):this._schedule(function(){P.call(D,U)})},b.prototype.settlePromises=function(P){this._trampolineEnabled?T.call(this,P):this._schedule(function(){P._settlePromises()})}):(b.prototype.invokeLater=S,b.prototype.invoke=I,b.prototype.settlePromises=T),b.prototype._drainQueue=function(P){for(;P.length()>0;){var D=P.shift();if(typeof D!="function"){D._settlePromises();continue}var U=P.shift(),Y=P.shift();D.call(U,Y)}},b.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},b.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},b.prototype._reset=function(){this._isTickUsed=!1},M.exports=b,M.exports.firstLineError=h},{"./queue":26,"./schedule":29,"./util":36}],3:[function(A,M,o){"use strict";M.exports=function(h,v,g,m){var b=!1,S=function(D,U){this._reject(U)},I=function(D,U){U.promiseRejectionQueued=!0,U.bindingPromise._then(S,S,null,this,D)},T=function(D,U){this._bitField&50397184||this._resolveCallback(U.target)},P=function(D,U){U.promiseRejectionQueued||this._reject(D)};h.prototype.bind=function(D){b||(b=!0,h.prototype._propagateFrom=m.propagateFromFunction(),h.prototype._boundValue=m.boundValueFunction());var U=g(D),Y=new h(v);Y._propagateFrom(this,1);var K=this._target();if(Y._setBoundTo(U),U instanceof h){var X={promiseRejectionQueued:!1,promise:Y,target:K,bindingPromise:U};K._then(v,I,void 0,Y,X),U._then(T,P,void 0,Y,X),Y._setOnCancel(U)}else Y._resolveCallback(K);return Y},h.prototype._setBoundTo=function(D){D!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=D):this._bitField=this._bitField&-2097153},h.prototype._isBound=function(){return(this._bitField&2097152)===2097152},h.bind=function(D,U){return h.resolve(U).bind(D)}}},{}],4:[function(A,M,o){"use strict";var h;typeof Promise<"u"&&(h=Promise);function v(){try{Promise===g&&(Promise=h)}catch{}return g}var g=A("./promise")();g.noConflict=v,M.exports=g},{"./promise":22}],5:[function(A,M,o){"use strict";var h=Object.create;if(h){var v=h(null),g=h(null);v[" size"]=g[" size"]=0}M.exports=function(m){var b=A("./util"),S=b.canEvaluate,I=b.isIdentifier,T,P;if(!1)var D,U,Y;function K(Q,ne){var ce;if(Q!=null&&(ce=Q[ne]),typeof ce!="function"){var ee="Object "+b.classString(Q)+" has no method '"+b.toString(ne)+"'";throw new m.TypeError(ee)}return ce}function X(Q){var ne=this.pop(),ce=K(Q,ne);return ce.apply(Q,this)}m.prototype.call=function(Q){var ne=[].slice.call(arguments,1);if(!1)var ce;return ne.push(Q),this._then(X,void 0,void 0,ne,void 0)};function W(Q){return Q[this]}function j(Q){var ne=+this;return ne<0&&(ne=Math.max(0,ne+Q.length)),Q[ne]}m.prototype.get=function(Q){var ne=typeof Q=="number",ce;if(ne)ce=j;else if(S){var ee=P(Q);ce=ee!==null?ee:W}else ce=W;return this._then(ce,void 0,void 0,Q,void 0)}}},{"./util":36}],6:[function(A,M,o){"use strict";M.exports=function(h,v,g,m){var b=A("./util"),S=b.tryCatch,I=b.errorObj,T=h._async;h.prototype.break=h.prototype.cancel=function(){if(!m.cancellation())return this._warn("cancellation is disabled");for(var P=this,D=P;P._isCancellable();){if(!P._cancelBy(D)){D._isFollowing()?D._followee().cancel():D._cancelBranched();break}var U=P._cancellationParent;if(U==null||!U._isCancellable()){P._isFollowing()?P._followee().cancel():P._cancelBranched();break}else P._isFollowing()&&P._followee().cancel(),P._setWillBeCancelled(),D=P,P=U}},h.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},h.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},h.prototype._cancelBy=function(P){return P===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},h.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},h.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),T.invoke(this._cancelPromises,this,void 0))},h.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},h.prototype._unsetOnCancel=function(){this._onCancelField=void 0},h.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},h.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},h.prototype._doInvokeOnCancel=function(P,D){if(b.isArray(P))for(var U=0;U<P.length;++U)this._doInvokeOnCancel(P[U],D);else if(P!==void 0)if(typeof P=="function"){if(!D){var Y=S(P).call(this._boundValue());Y===I&&(this._attachExtraTrace(Y.e),T.throwLater(Y.e))}}else P._resultCancelled(this)},h.prototype._invokeOnCancel=function(){var P=this._onCancel();this._unsetOnCancel(),T.invoke(this._doInvokeOnCancel,this,P)},h.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},h.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(A,M,o){"use strict";M.exports=function(h){var v=A("./util"),g=A("./es5").keys,m=v.tryCatch,b=v.errorObj;function S(I,T,P){return function(D){var U=P._boundValue();e:for(var Y=0;Y<I.length;++Y){var K=I[Y];if(K===Error||K!=null&&K.prototype instanceof Error){if(D instanceof K)return m(T).call(U,D)}else if(typeof K=="function"){var X=m(K).call(U,D);if(X===b)return X;if(X)return m(T).call(U,D)}else if(v.isObject(D)){for(var W=g(K),j=0;j<W.length;++j){var Q=W[j];if(K[Q]!=D[Q])continue e}return m(T).call(U,D)}}return h}}return S}},{"./es5":13,"./util":36}],8:[function(A,M,o){"use strict";M.exports=function(h){var v=!1,g=[];h.prototype._promiseCreated=function(){},h.prototype._pushContext=function(){},h.prototype._popContext=function(){return null},h._peekContext=h.prototype._peekContext=function(){};function m(){this._trace=new m.CapturedTrace(S())}m.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,g.push(this._trace))},m.prototype._popContext=function(){if(this._trace!==void 0){var I=g.pop(),T=I._promiseCreated;return I._promiseCreated=null,T}return null};function b(){if(v)return new m}function S(){var I=g.length-1;if(I>=0)return g[I]}return m.CapturedTrace=null,m.create=b,m.deactivateLongStackTraces=function(){},m.activateLongStackTraces=function(){var I=h.prototype._pushContext,T=h.prototype._popContext,P=h._peekContext,D=h.prototype._peekContext,U=h.prototype._promiseCreated;m.deactivateLongStackTraces=function(){h.prototype._pushContext=I,h.prototype._popContext=T,h._peekContext=P,h.prototype._peekContext=D,h.prototype._promiseCreated=U,v=!1},v=!0,h.prototype._pushContext=m.prototype._pushContext,h.prototype._popContext=m.prototype._popContext,h._peekContext=h.prototype._peekContext=S,h.prototype._promiseCreated=function(){var Y=this._peekContext();Y&&Y._promiseCreated==null&&(Y._promiseCreated=this)}},m}},{}],9:[function(A,M,o){"use strict";M.exports=function(h,v){var g=h._getDomain,m=h._async,b=A("./errors").Warning,S=A("./util"),I=S.canAttachTrace,T,P,D=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,U=/\((?:timers\.js):\d+:\d+\)/,Y=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,K=null,X=null,W=!1,j,Q=S.env("BLUEBIRD_DEBUG")!=0,ne=!!(S.env("BLUEBIRD_WARNINGS")!=0&&(Q||S.env("BLUEBIRD_WARNINGS"))),ce=!!(S.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(Q||S.env("BLUEBIRD_LONG_STACK_TRACES"))),ee=S.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(ne||!!S.env("BLUEBIRD_W_FORGOTTEN_RETURN"));h.prototype.suppressUnhandledRejections=function(){var re=this._target();re._bitField=re._bitField&-1048577|524288},h.prototype._ensurePossibleRejectionHandled=function(){if(!(this._bitField&524288)){this._setRejectionIsUnhandled();var re=this;setTimeout(function(){re._notifyUnhandledRejection()},1)}},h.prototype._notifyUnhandledRejectionIsHandled=function(){ai("rejectionHandled",T,void 0,this)},h.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},h.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},h.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var re=this._settledValue();this._setUnhandledRejectionIsNotified(),ai("unhandledRejection",P,re,this)}},h.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},h.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},h.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},h.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},h.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},h.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},h.prototype._warn=function(re,ie,De){return Mt(re,ie,De||this)},h.onPossiblyUnhandledRejection=function(re){var ie=g();P=typeof re=="function"?ie===null?re:S.domainBind(ie,re):void 0},h.onUnhandledRejectionHandled=function(re){var ie=g();T=typeof re=="function"?ie===null?re:S.domainBind(ie,re):void 0};var B=function(){};h.longStackTraces=function(){if(m.haveItemsQueued()&&!Oe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!Oe.longStackTraces&&Yn()){var re=h.prototype._captureStackTrace,ie=h.prototype._attachExtraTrace;Oe.longStackTraces=!0,B=function(){if(m.haveItemsQueued()&&!Oe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);h.prototype._captureStackTrace=re,h.prototype._attachExtraTrace=ie,v.deactivateLongStackTraces(),m.enableTrampoline(),Oe.longStackTraces=!1},h.prototype._captureStackTrace=Ue,h.prototype._attachExtraTrace=Te,v.activateLongStackTraces(),m.disableTrampolineIfNecessary()}},h.hasLongStackTraces=function(){return Oe.longStackTraces&&Yn()};var $=function(){try{if(typeof CustomEvent=="function"){var re=new CustomEvent("CustomEvent");return S.global.dispatchEvent(re),function(ie,De){var je=new CustomEvent(ie.toLowerCase(),{detail:De,cancelable:!0});return!S.global.dispatchEvent(je)}}else if(typeof Event=="function"){var re=new Event("CustomEvent");return S.global.dispatchEvent(re),function(De,je){var pt=new Event(De.toLowerCase(),{cancelable:!0});return pt.detail=je,!S.global.dispatchEvent(pt)}}else{var re=document.createEvent("CustomEvent");return re.initCustomEvent("testingtheevent",!1,!0,{}),S.global.dispatchEvent(re),function(De,je){var pt=document.createEvent("CustomEvent");return pt.initCustomEvent(De.toLowerCase(),!1,!0,je),!S.global.dispatchEvent(pt)}}}catch{}return function(){return!1}}(),oe=function(){return S.isNode?function(){return process.emit.apply(process,arguments)}:S.global?function(re){var ie="on"+re.toLowerCase(),De=S.global[ie];return De?(De.apply(S.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}();function Se(re,ie){return{promise:ie}}var Fe={promiseCreated:Se,promiseFulfilled:Se,promiseRejected:Se,promiseResolved:Se,promiseCancelled:Se,promiseChained:function(re,ie,De){return{promise:ie,child:De}},warning:function(re,ie){return{warning:ie}},unhandledRejection:function(re,ie,De){return{reason:ie,promise:De}},rejectionHandled:Se},ct=function(re){var ie=!1;try{ie=oe.apply(null,arguments)}catch(je){m.throwLater(je),ie=!0}var De=!1;try{De=$(re,Fe[re].apply(null,arguments))}catch(je){m.throwLater(je),De=!0}return De||ie};h.config=function(re){if(re=Object(re),"longStackTraces"in re&&(re.longStackTraces?h.longStackTraces():!re.longStackTraces&&h.hasLongStackTraces()&&B()),"warnings"in re){var ie=re.warnings;Oe.warnings=!!ie,ee=Oe.warnings,S.isObject(ie)&&"wForgottenReturn"in ie&&(ee=!!ie.wForgottenReturn)}if("cancellation"in re&&re.cancellation&&!Oe.cancellation){if(m.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");h.prototype._clearCancellationData=st,h.prototype._propagateFrom=de,h.prototype._onCancel=Ve,h.prototype._setOnCancel=Ye,h.prototype._attachCancellationCallback=Ae,h.prototype._execute=nt,be=de,Oe.cancellation=!0}return"monitoring"in re&&(re.monitoring&&!Oe.monitoring?(Oe.monitoring=!0,h.prototype._fireEvent=ct):!re.monitoring&&Oe.monitoring&&(Oe.monitoring=!1,h.prototype._fireEvent=He)),h};function He(){return!1}h.prototype._fireEvent=He,h.prototype._execute=function(re,ie,De){try{re(ie,De)}catch(je){return je}},h.prototype._onCancel=function(){},h.prototype._setOnCancel=function(re){},h.prototype._attachCancellationCallback=function(re){},h.prototype._captureStackTrace=function(){},h.prototype._attachExtraTrace=function(){},h.prototype._clearCancellationData=function(){},h.prototype._propagateFrom=function(re,ie){};function nt(re,ie,De){var je=this;try{re(ie,De,function(pt){if(typeof pt!="function")throw new TypeError("onCancel must be a function, got: "+S.toString(pt));je._attachCancellationCallback(pt)})}catch(pt){return pt}}function Ae(re){if(!this._isCancellable())return this;var ie=this._onCancel();ie!==void 0?S.isArray(ie)?ie.push(re):this._setOnCancel([ie,re]):this._setOnCancel(re)}function Ve(){return this._onCancelField}function Ye(re){this._onCancelField=re}function st(){this._cancellationParent=void 0,this._onCancelField=void 0}function de(re,ie){if(ie&1){this._cancellationParent=re;var De=re._branchesRemainingToCancel;De===void 0&&(De=0),re._branchesRemainingToCancel=De+1}ie&2&&re._isBound()&&this._setBoundTo(re._boundTo)}function Ie(re,ie){ie&2&&re._isBound()&&this._setBoundTo(re._boundTo)}var be=Ie;function Ce(){var re=this._boundTo;return re!==void 0&&re instanceof h?re.isFulfilled()?re.value():void 0:re}function Ue(){this._trace=new N(this._peekContext())}function Te(re,ie){if(I(re)){var De=this._trace;if(De!==void 0&&ie&&(De=De._parent),De!==void 0)De.attachExtraTrace(re);else if(!re.__stackCleaned__){var je=Rn(re);S.notEnumerableProp(re,"stack",je.message+`
`+je.stack.join(`
`)),S.notEnumerableProp(re,"__stackCleaned__",!0)}}}function Le(re,ie,De,je,pt){if(re===void 0&&ie!==null&&ee){if(pt!==void 0&&pt._returnedNonUndefined()||!(je._bitField&65535))return;De&&(De=De+" ");var Pt="",Lt="";if(ie._trace){for(var jt=ie._trace.stack.split(`
`),cn=Bn(jt),Xn=cn.length-1;Xn>=0;--Xn){var Li=cn[Xn];if(!U.test(Li)){var zn=Li.match(Y);zn&&(Pt="at "+zn[1]+":"+zn[2]+":"+zn[3]+" ");break}}if(cn.length>0){for(var Br=cn[0],Xn=0;Xn<jt.length;++Xn)if(jt[Xn]===Br){Xn>0&&(Lt=`
`+jt[Xn-1]);break}}}var Qn="a promise was created in a "+De+"handler "+Pt+"but was not returned from it, see http://goo.gl/rRqMUw"+Lt;je._warn(Qn,!0,ie)}}function yt(re,ie){var De=re+" is deprecated and will be removed in a future version.";return ie&&(De+=" Use "+ie+" instead."),Mt(De)}function Mt(re,ie,De){if(Oe.warnings){var je=new b(re),pt;if(ie)De._attachExtraTrace(je);else if(Oe.longStackTraces&&(pt=h._peekContext()))pt.attachExtraTrace(je);else{var Pt=Rn(je);je.stack=Pt.message+`
`+Pt.stack.join(`
`)}ct("warning",je)||Fn(je,"",!0)}}function $t(re,ie){for(var De=0;De<ie.length-1;++De)ie[De].push("From previous event:"),ie[De]=ie[De].join(`
`);return De<ie.length&&(ie[De]=ie[De].join(`
`)),re+`
`+ie.join(`
`)}function on(re){for(var ie=0;ie<re.length;++ie)(re[ie].length===0||ie+1<re.length&&re[ie][0]===re[ie+1][0])&&(re.splice(ie,1),ie--)}function un(re){for(var ie=re[0],De=1;De<re.length;++De){for(var je=re[De],pt=ie.length-1,Pt=ie[pt],Lt=-1,jt=je.length-1;jt>=0;--jt)if(je[jt]===Pt){Lt=jt;break}for(var jt=Lt;jt>=0;--jt){var cn=je[jt];if(ie[pt]===cn)ie.pop(),pt--;else break}ie=je}}function Bn(re){for(var ie=[],De=0;De<re.length;++De){var je=re[De],pt=je==="    (No stack trace)"||K.test(je),Pt=pt&&ei(je);pt&&!Pt&&(W&&je.charAt(0)!==" "&&(je="    "+je),ie.push(je))}return ie}function qn(re){for(var ie=re.stack.replace(/\s+$/g,"").split(`
`),De=0;De<ie.length;++De){var je=ie[De];if(je==="    (No stack trace)"||K.test(je))break}return De>0&&re.name!="SyntaxError"&&(ie=ie.slice(De)),ie}function Rn(re){var ie=re.stack,De=re.toString();return ie=typeof ie=="string"&&ie.length>0?qn(re):["    (No stack trace)"],{message:De,stack:re.name=="SyntaxError"?ie:Bn(ie)}}function Fn(re,ie,De){if(typeof console<"u"){var je;if(S.isObject(re)){var pt=re.stack;je=ie+X(pt,re)}else je=ie+String(re);typeof j=="function"?j(je,De):(typeof console.log=="function"||typeof console.log=="object")&&console.log(je)}}function ai(re,ie,De,je){var pt=!1;try{typeof ie=="function"&&(pt=!0,re==="rejectionHandled"?ie(je):ie(De,je))}catch(Pt){m.throwLater(Pt)}re==="unhandledRejection"?!ct(re,De,je)&&!pt&&Fn(De,"Unhandled rejection "):ct(re,je)}function hi(re){var ie;if(typeof re=="function")ie="[function "+(re.name||"anonymous")+"]";else{ie=re&&typeof re.toString=="function"?re.toString():S.toString(re);var De=/\[object [a-zA-Z0-9$_]+\]/;if(De.test(ie))try{var je=JSON.stringify(re);ie=je}catch{}ie.length===0&&(ie="(empty array)")}return"(<"+Zn(ie)+">, no stack trace)"}function Zn(re){var ie=41;return re.length<ie?re:re.substr(0,ie-3)+"..."}function Yn(){return typeof le=="function"}var ei=function(){return!1},ki=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function q(re){var ie=re.match(ki);if(ie)return{fileName:ie[1],line:parseInt(ie[2],10)}}function F(re,ie){if(Yn()){for(var De=re.stack.split(`
`),je=ie.stack.split(`
`),pt=-1,Pt=-1,Lt,jt,cn=0;cn<De.length;++cn){var Xn=q(De[cn]);if(Xn){Lt=Xn.fileName,pt=Xn.line;break}}for(var cn=0;cn<je.length;++cn){var Xn=q(je[cn]);if(Xn){jt=Xn.fileName,Pt=Xn.line;break}}pt<0||Pt<0||!Lt||!jt||Lt!==jt||pt>=Pt||(ei=function(Li){if(D.test(Li))return!0;var zn=q(Li);return!!(zn&&zn.fileName===Lt&&pt<=zn.line&&zn.line<=Pt)})}}function N(re){this._parent=re,this._promisesCreated=0;var ie=this._length=1+(re===void 0?0:re._length);le(this,N),ie>32&&this.uncycle()}S.inherits(N,Error),v.CapturedTrace=N,N.prototype.uncycle=function(){var re=this._length;if(!(re<2)){for(var ie=[],De={},je=0,pt=this;pt!==void 0;++je)ie.push(pt),pt=pt._parent;re=this._length=je;for(var je=re-1;je>=0;--je){var Pt=ie[je].stack;De[Pt]===void 0&&(De[Pt]=je)}for(var je=0;je<re;++je){var Lt=ie[je].stack,jt=De[Lt];if(jt!==void 0&&jt!==je){jt>0&&(ie[jt-1]._parent=void 0,ie[jt-1]._length=1),ie[je]._parent=void 0,ie[je]._length=1;var cn=je>0?ie[je-1]:this;jt<re-1?(cn._parent=ie[jt+1],cn._parent.uncycle(),cn._length=cn._parent._length+1):(cn._parent=void 0,cn._length=1);for(var Xn=cn._length+1,Li=je-2;Li>=0;--Li)ie[Li]._length=Xn,Xn++;return}}}},N.prototype.attachExtraTrace=function(re){if(!re.__stackCleaned__){this.uncycle();for(var ie=Rn(re),De=ie.message,je=[ie.stack],pt=this;pt!==void 0;)je.push(Bn(pt.stack.split(`
`))),pt=pt._parent;un(je),on(je),S.notEnumerableProp(re,"stack",$t(De,je)),S.notEnumerableProp(re,"__stackCleaned__",!0)}};var le=function(){var ie=/^\s*at\s*/,De=function(Lt,jt){return typeof Lt=="string"?Lt:jt.name!==void 0&&jt.message!==void 0?jt.toString():hi(jt)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,K=ie,X=De;var je=Error.captureStackTrace;return ei=function(Lt){return D.test(Lt)},function(Lt,jt){Error.stackTraceLimit+=6,je(Lt,jt),Error.stackTraceLimit-=6}}var pt=new Error;if(typeof pt.stack=="string"&&pt.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return K=/@/,X=De,W=!0,function(jt){jt.stack=new Error().stack};var Pt;try{throw new Error}catch(Lt){Pt="stack"in Lt}return!("stack"in pt)&&Pt&&typeof Error.stackTraceLimit=="number"?(K=ie,X=De,function(jt){Error.stackTraceLimit+=6;try{throw new Error}catch(cn){jt.stack=cn.stack}Error.stackTraceLimit-=6}):(X=function(Lt,jt){return typeof Lt=="string"?Lt:(typeof jt=="object"||typeof jt=="function")&&jt.name!==void 0&&jt.message!==void 0?jt.toString():hi(jt)},null)}([]);typeof console<"u"&&typeof console.warn<"u"&&(j=function(re){console.warn(re)},S.isNode&&process.stderr.isTTY?j=function(re,ie){var De=ie?"\x1B[33m":"\x1B[31m";console.warn(De+re+`\x1B[0m
`)}:!S.isNode&&typeof new Error().stack=="string"&&(j=function(re,ie){console.warn("%c"+re,ie?"color: darkorange":"color: red")}));var Oe={warnings:ne,longStackTraces:!1,cancellation:!1,monitoring:!1};return ce&&h.longStackTraces(),{longStackTraces:function(){return Oe.longStackTraces},warnings:function(){return Oe.warnings},cancellation:function(){return Oe.cancellation},monitoring:function(){return Oe.monitoring},propagateFromFunction:function(){return be},boundValueFunction:function(){return Ce},checkForgottenReturns:Le,setBounds:F,warn:Mt,deprecated:yt,CapturedTrace:N,fireDomEvent:$,fireGlobalEvent:oe}}},{"./errors":12,"./util":36}],10:[function(A,M,o){"use strict";M.exports=function(h){function v(){return this.value}function g(){throw this.reason}h.prototype.return=h.prototype.thenReturn=function(m){return m instanceof h&&m.suppressUnhandledRejections(),this._then(v,void 0,void 0,{value:m},void 0)},h.prototype.throw=h.prototype.thenThrow=function(m){return this._then(g,void 0,void 0,{reason:m},void 0)},h.prototype.catchThrow=function(m){if(arguments.length<=1)return this._then(void 0,g,void 0,{reason:m},void 0);var b=arguments[1],S=function(){throw b};return this.caught(m,S)},h.prototype.catchReturn=function(m){if(arguments.length<=1)return m instanceof h&&m.suppressUnhandledRejections(),this._then(void 0,v,void 0,{value:m},void 0);var b=arguments[1];b instanceof h&&b.suppressUnhandledRejections();var S=function(){return b};return this.caught(m,S)}}},{}],11:[function(A,M,o){"use strict";M.exports=function(h,v){var g=h.reduce,m=h.all;function b(){return m(this)}function S(I,T){return g(I,T,v,v)}h.prototype.each=function(I){return g(this,I,v,0)._then(b,void 0,void 0,this,void 0)},h.prototype.mapSeries=function(I){return g(this,I,v,v)},h.each=function(I,T){return g(I,T,v,0)._then(b,void 0,void 0,I,void 0)},h.mapSeries=S}},{}],12:[function(A,M,o){"use strict";var h=A("./es5"),v=h.freeze,g=A("./util"),m=g.inherits,b=g.notEnumerableProp;function S(ne,ce){function ee(B){if(!(this instanceof ee))return new ee(B);b(this,"message",typeof B=="string"?B:ce),b(this,"name",ne),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return m(ee,Error),ee}var I,T,P=S("Warning","warning"),D=S("CancellationError","cancellation error"),U=S("TimeoutError","timeout error"),Y=S("AggregateError","aggregate error");try{I=TypeError,T=RangeError}catch{I=S("TypeError","type error"),T=S("RangeError","range error")}for(var K="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),X=0;X<K.length;++X)typeof Array.prototype[K[X]]=="function"&&(Y.prototype[K[X]]=Array.prototype[K[X]]);h.defineProperty(Y.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),Y.prototype.isOperational=!0;var W=0;Y.prototype.toString=function(){var ne=Array(W*4+1).join(" "),ce=`
`+ne+`AggregateError of:
`;W++,ne=Array(W*4+1).join(" ");for(var ee=0;ee<this.length;++ee){for(var B=this[ee]===this?"[Circular AggregateError]":this[ee]+"",$=B.split(`
`),oe=0;oe<$.length;++oe)$[oe]=ne+$[oe];B=$.join(`
`),ce+=B+`
`}return W--,ce};function j(ne){if(!(this instanceof j))return new j(ne);b(this,"name","OperationalError"),b(this,"message",ne),this.cause=ne,this.isOperational=!0,ne instanceof Error?(b(this,"message",ne.message),b(this,"stack",ne.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}m(j,Error);var Q=Error.__BluebirdErrorTypes__;Q||(Q=v({CancellationError:D,TimeoutError:U,OperationalError:j,RejectionError:j,AggregateError:Y}),h.defineProperty(Error,"__BluebirdErrorTypes__",{value:Q,writable:!1,enumerable:!1,configurable:!1})),M.exports={Error,TypeError:I,RangeError:T,CancellationError:Q.CancellationError,OperationalError:Q.OperationalError,TimeoutError:Q.TimeoutError,AggregateError:Q.AggregateError,Warning:P}},{"./es5":13,"./util":36}],13:[function(A,M,o){var h=function(){"use strict";return this===void 0}();if(h)M.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:h,propertyIsWritable:function(U,Y){var K=Object.getOwnPropertyDescriptor(U,Y);return!!(!K||K.writable||K.set)}};else{var v={}.hasOwnProperty,g={}.toString,m={}.constructor.prototype,b=function(U){var Y=[];for(var K in U)v.call(U,K)&&Y.push(K);return Y},S=function(U,Y){return{value:U[Y]}},I=function(U,Y,K){return U[Y]=K.value,U},T=function(U){return U},P=function(U){try{return Object(U).constructor.prototype}catch{return m}},D=function(U){try{return g.call(U)==="[object Array]"}catch{return!1}};M.exports={isArray:D,keys:b,names:b,defineProperty:I,getDescriptor:S,freeze:T,getPrototypeOf:P,isES5:h,propertyIsWritable:function(){return!0}}}},{}],14:[function(A,M,o){"use strict";M.exports=function(h,v){var g=h.map;h.prototype.filter=function(m,b){return g(this,m,b,v)},h.filter=function(m,b,S){return g(m,b,S,v)}}},{}],15:[function(A,M,o){"use strict";M.exports=function(h,v,g){var m=A("./util"),b=h.CancellationError,S=m.errorObj,I=A("./catch_filter")(g);function T(X,W,j){this.promise=X,this.type=W,this.handler=j,this.called=!1,this.cancelPromise=null}T.prototype.isFinallyHandler=function(){return this.type===0};function P(X){this.finallyHandler=X}P.prototype._resultCancelled=function(){D(this.finallyHandler)};function D(X,W){return X.cancelPromise!=null?(arguments.length>1?X.cancelPromise._reject(W):X.cancelPromise._cancel(),X.cancelPromise=null,!0):!1}function U(){return K.call(this,this.promise._target()._settledValue())}function Y(X){if(!D(this,X))return S.e=X,S}function K(X){var W=this.promise,j=this.handler;if(!this.called){this.called=!0;var Q=this.isFinallyHandler()?j.call(W._boundValue()):j.call(W._boundValue(),X);if(Q===g)return Q;if(Q!==void 0){W._setReturnedNonUndefined();var ne=v(Q,W);if(ne instanceof h){if(this.cancelPromise!=null)if(ne._isCancelled()){var ce=new b("late cancellation observer");return W._attachExtraTrace(ce),S.e=ce,S}else ne.isPending()&&ne._attachCancellationCallback(new P(this));return ne._then(U,Y,void 0,this,void 0)}}}return W.isRejected()?(D(this),S.e=X,S):(D(this),X)}return h.prototype._passThrough=function(X,W,j,Q){return typeof X!="function"?this.then():this._then(j,Q,void 0,new T(this,W,X),void 0)},h.prototype.lastly=h.prototype.finally=function(X){return this._passThrough(X,0,K,K)},h.prototype.tap=function(X){return this._passThrough(X,1,K)},h.prototype.tapCatch=function(X){var W=arguments.length;if(W===1)return this._passThrough(X,1,void 0,K);var j=new Array(W-1),Q=0,ne;for(ne=0;ne<W-1;++ne){var ce=arguments[ne];if(m.isObject(ce))j[Q++]=ce;else return h.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+m.classString(ce)))}j.length=Q;var ee=arguments[ne];return this._passThrough(I(j,ee,this),1,void 0,K)},T}},{"./catch_filter":7,"./util":36}],16:[function(A,M,o){"use strict";M.exports=function(h,v,g,m,b,S){var I=A("./errors"),T=I.TypeError,P=A("./util"),D=P.errorObj,U=P.tryCatch,Y=[];function K(W,j,Q){for(var ne=0;ne<j.length;++ne){Q._pushContext();var ce=U(j[ne])(W);if(Q._popContext(),ce===D){Q._pushContext();var ee=h.reject(D.e);return Q._popContext(),ee}var B=m(ce,Q);if(B instanceof h)return B}return null}function X(W,j,Q,ne){if(S.cancellation()){var ce=new h(g),ee=this._finallyPromise=new h(g);this._promise=ce.lastly(function(){return ee}),ce._captureStackTrace(),ce._setOnCancel(this)}else{var B=this._promise=new h(g);B._captureStackTrace()}this._stack=ne,this._generatorFunction=W,this._receiver=j,this._generator=void 0,this._yieldHandlers=typeof Q=="function"?[Q].concat(Y):Y,this._yieldedPromise=null,this._cancellationPhase=!1}P.inherits(X,b),X.prototype._isResolved=function(){return this._promise===null},X.prototype._cleanup=function(){this._promise=this._generator=null,S.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},X.prototype._promiseCancelled=function(){if(!this._isResolved()){var W=typeof this._generator.return<"u",j;if(W)this._promise._pushContext(),j=U(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var Q=new h.CancellationError("generator .return() sentinel");h.coroutine.returnSentinel=Q,this._promise._attachExtraTrace(Q),this._promise._pushContext(),j=U(this._generator.throw).call(this._generator,Q),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(j)}},X.prototype._promiseFulfilled=function(W){this._yieldedPromise=null,this._promise._pushContext();var j=U(this._generator.next).call(this._generator,W);this._promise._popContext(),this._continue(j)},X.prototype._promiseRejected=function(W){this._yieldedPromise=null,this._promise._attachExtraTrace(W),this._promise._pushContext();var j=U(this._generator.throw).call(this._generator,W);this._promise._popContext(),this._continue(j)},X.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof h){var W=this._yieldedPromise;this._yieldedPromise=null,W.cancel()}},X.prototype.promise=function(){return this._promise},X.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},X.prototype._continue=function(W){var j=this._promise;if(W===D)return this._cleanup(),this._cancellationPhase?j.cancel():j._rejectCallback(W.e,!1);var Q=W.value;if(W.done===!0)return this._cleanup(),this._cancellationPhase?j.cancel():j._resolveCallback(Q);var ne=m(Q,this._promise);if(!(ne instanceof h)&&(ne=K(ne,this._yieldHandlers,this._promise),ne===null)){this._promiseRejected(new T(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",String(Q))+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}ne=ne._target();var ce=ne._bitField;ce&50397184?ce&33554432?h._async.invoke(this._promiseFulfilled,this,ne._value()):ce&16777216?h._async.invoke(this._promiseRejected,this,ne._reason()):this._promiseCancelled():(this._yieldedPromise=ne,ne._proxy(this,null))},h.coroutine=function(W,j){if(typeof W!="function")throw new T(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var Q=Object(j).yieldHandler,ne=X,ce=new Error().stack;return function(){var ee=W.apply(this,arguments),B=new ne(void 0,void 0,Q,ce),$=B.promise();return B._generator=ee,B._promiseFulfilled(void 0),$}},h.coroutine.addYieldHandler=function(W){if(typeof W!="function")throw new T("expecting a function but got "+P.classString(W));Y.push(W)},h.spawn=function(W){if(S.deprecated("Promise.spawn()","Promise.coroutine()"),typeof W!="function")return v(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var j=new X(W,this),Q=j.promise();return j._run(h.spawn),Q}}},{"./errors":12,"./util":36}],17:[function(A,M,o){"use strict";M.exports=function(h,v,g,m,b,S){var I=A("./util"),T=I.canEvaluate,P=I.tryCatch,D=I.errorObj,U;if(!1)var Y,K,X,W,j,Q,ne;h.join=function(){var ce=arguments.length-1,ee;if(ce>0&&typeof arguments[ce]=="function"&&(ee=arguments[ce],!1))var B,$,oe,Se,Fe,ct,He,Ae;var nt=[].slice.call(arguments);ee&&nt.pop();var Ae=new v(nt).promise();return ee!==void 0?Ae.spread(ee):Ae}}},{"./util":36}],18:[function(A,M,o){"use strict";M.exports=function(h,v,g,m,b,S){var I=h._getDomain,T=A("./util"),P=T.tryCatch,D=T.errorObj,U=h._async;function Y(X,W,j,Q){this.constructor$(X),this._promise._captureStackTrace();var ne=I();this._callback=ne===null?W:T.domainBind(ne,W),this._preservedValues=Q===b?new Array(this.length()):null,this._limit=j,this._inFlight=0,this._queue=[],U.invoke(this._asyncInit,this,void 0)}T.inherits(Y,v),Y.prototype._asyncInit=function(){this._init$(void 0,-2)},Y.prototype._init=function(){},Y.prototype._promiseFulfilled=function(X,W){var j=this._values,Q=this.length(),ne=this._preservedValues,ce=this._limit;if(W<0){if(W=W*-1-1,j[W]=X,ce>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(ce>=1&&this._inFlight>=ce)return j[W]=X,this._queue.push(W),!1;ne!==null&&(ne[W]=X);var ee=this._promise,B=this._callback,$=ee._boundValue();ee._pushContext();var oe=P(B).call($,X,W,Q),Se=ee._popContext();if(S.checkForgottenReturns(oe,Se,ne!==null?"Promise.filter":"Promise.map",ee),oe===D)return this._reject(oe.e),!0;var Fe=m(oe,this._promise);if(Fe instanceof h){Fe=Fe._target();var ct=Fe._bitField;if(ct&50397184)if(ct&33554432)oe=Fe._value();else return ct&16777216?(this._reject(Fe._reason()),!0):(this._cancel(),!0);else return ce>=1&&this._inFlight++,j[W]=Fe,Fe._proxy(this,(W+1)*-1),!1}j[W]=oe}var He=++this._totalResolved;return He>=Q?(ne!==null?this._filter(j,ne):this._resolve(j),!0):!1},Y.prototype._drainQueue=function(){for(var X=this._queue,W=this._limit,j=this._values;X.length>0&&this._inFlight<W;){if(this._isResolved())return;var Q=X.pop();this._promiseFulfilled(j[Q],Q)}},Y.prototype._filter=function(X,W){for(var j=W.length,Q=new Array(j),ne=0,ce=0;ce<j;++ce)X[ce]&&(Q[ne++]=W[ce]);Q.length=ne,this._resolve(Q)},Y.prototype.preservedValues=function(){return this._preservedValues};function K(X,W,j,Q){if(typeof W!="function")return g("expecting a function but got "+T.classString(W));var ne=0;if(j!==void 0)if(typeof j=="object"&&j!==null){if(typeof j.concurrency!="number")return h.reject(new TypeError("'concurrency' must be a number but it is "+T.classString(j.concurrency)));ne=j.concurrency}else return h.reject(new TypeError("options argument must be an object but it is "+T.classString(j)));return ne=typeof ne=="number"&&isFinite(ne)&&ne>=1?ne:0,new Y(X,W,ne,Q).promise()}h.prototype.map=function(X,W){return K(this,X,W,null)},h.map=function(X,W,j,Q){return K(X,W,j,Q)}}},{"./util":36}],19:[function(A,M,o){"use strict";M.exports=function(h,v,g,m,b){var S=A("./util"),I=S.tryCatch;h.method=function(T){if(typeof T!="function")throw new h.TypeError("expecting a function but got "+S.classString(T));return function(){var P=new h(v);P._captureStackTrace(),P._pushContext();var D=I(T).apply(this,arguments),U=P._popContext();return b.checkForgottenReturns(D,U,"Promise.method",P),P._resolveFromSyncValue(D),P}},h.attempt=h.try=function(T){if(typeof T!="function")return m("expecting a function but got "+S.classString(T));var P=new h(v);P._captureStackTrace(),P._pushContext();var D;if(arguments.length>1){b.deprecated("calling Promise.try with more than 1 argument");var U=arguments[1],Y=arguments[2];D=S.isArray(U)?I(T).apply(Y,U):I(T).call(Y,U)}else D=I(T)();var K=P._popContext();return b.checkForgottenReturns(D,K,"Promise.try",P),P._resolveFromSyncValue(D),P},h.prototype._resolveFromSyncValue=function(T){T===S.errorObj?this._rejectCallback(T.e,!1):this._resolveCallback(T,!0)}}},{"./util":36}],20:[function(A,M,o){"use strict";var h=A("./util"),v=h.maybeWrapAsError,g=A("./errors"),m=g.OperationalError,b=A("./es5");function S(D){return D instanceof Error&&b.getPrototypeOf(D)===Error.prototype}var I=/^(?:name|message|stack|cause)$/;function T(D){var U;if(S(D)){U=new m(D),U.name=D.name,U.message=D.message,U.stack=D.stack;for(var Y=b.keys(D),K=0;K<Y.length;++K){var X=Y[K];I.test(X)||(U[X]=D[X])}return U}return h.markAsOriginatingFromRejection(D),D}function P(D,U){return function(Y,K){if(D!==null){if(Y){var X=T(v(Y));D._attachExtraTrace(X),D._reject(X)}else if(!U)D._fulfill(K);else{var W=[].slice.call(arguments,1);D._fulfill(W)}D=null}}}M.exports=P},{"./errors":12,"./es5":13,"./util":36}],21:[function(A,M,o){"use strict";M.exports=function(h){var v=A("./util"),g=h._async,m=v.tryCatch,b=v.errorObj;function S(P,D){var U=this;if(!v.isArray(P))return I.call(U,P,D);var Y=m(D).apply(U._boundValue(),[null].concat(P));Y===b&&g.throwLater(Y.e)}function I(P,D){var U=this,Y=U._boundValue(),K=P===void 0?m(D).call(Y,null):m(D).call(Y,null,P);K===b&&g.throwLater(K.e)}function T(P,D){var U=this;if(!P){var Y=new Error(P+"");Y.cause=P,P=Y}var K=m(D).call(U._boundValue(),P);K===b&&g.throwLater(K.e)}h.prototype.asCallback=h.prototype.nodeify=function(P,D){if(typeof P=="function"){var U=I;D!==void 0&&Object(D).spread&&(U=S),this._then(U,T,void 0,this,P)}return this}}},{"./util":36}],22:[function(A,M,o){"use strict";M.exports=function(){var h=function(){return new Y(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},v=function(){return new Ae.PromiseInspection(this._target())},g=function(de){return Ae.reject(new Y(de))};function m(){}var b={},S=A("./util"),I;S.isNode?I=function(){var de=process.domain;return de===void 0&&(de=null),de}:I=function(){return null},S.notEnumerableProp(Ae,"_getDomain",I);var T=A("./es5"),P=A("./async"),D=new P;T.defineProperty(Ae,"_async",{value:D});var U=A("./errors"),Y=Ae.TypeError=U.TypeError;Ae.RangeError=U.RangeError;var K=Ae.CancellationError=U.CancellationError;Ae.TimeoutError=U.TimeoutError,Ae.OperationalError=U.OperationalError,Ae.RejectionError=U.OperationalError,Ae.AggregateError=U.AggregateError;var X=function(){},W={},j={},Q=A("./thenables")(Ae,X),ne=A("./promise_array")(Ae,X,Q,g,m),ce=A("./context")(Ae),ee=ce.create,B=A("./debuggability")(Ae,ce),$=B.CapturedTrace,oe=A("./finally")(Ae,Q,j),Se=A("./catch_filter")(j),Fe=A("./nodeback"),ct=S.errorObj,He=S.tryCatch;function nt(de,Ie){if(de==null||de.constructor!==Ae)throw new Y(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`);if(typeof Ie!="function")throw new Y("expecting a function but got "+S.classString(Ie))}function Ae(de){de!==X&&nt(this,de),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(de),this._promiseCreated(),this._fireEvent("promiseCreated",this)}Ae.prototype.toString=function(){return"[object Promise]"},Ae.prototype.caught=Ae.prototype.catch=function(de){var Ie=arguments.length;if(Ie>1){var be=new Array(Ie-1),Ce=0,Ue;for(Ue=0;Ue<Ie-1;++Ue){var Te=arguments[Ue];if(S.isObject(Te))be[Ce++]=Te;else return g("Catch statement predicate: expecting an object but got "+S.classString(Te))}return be.length=Ce,de=arguments[Ue],this.then(void 0,Se(be,de,this))}return this.then(void 0,de)},Ae.prototype.reflect=function(){return this._then(v,v,void 0,this,void 0)},Ae.prototype.then=function(de,Ie){if(B.warnings()&&arguments.length>0&&typeof de!="function"&&typeof Ie!="function"){var be=".then() only accepts functions but was passed: "+S.classString(de);arguments.length>1&&(be+=", "+S.classString(Ie)),this._warn(be)}return this._then(de,Ie,void 0,void 0,void 0)},Ae.prototype.done=function(de,Ie){var be=this._then(de,Ie,void 0,void 0,void 0);be._setIsFinal()},Ae.prototype.spread=function(de){return typeof de!="function"?g("expecting a function but got "+S.classString(de)):this.all()._then(de,void 0,void 0,W,void 0)},Ae.prototype.toJSON=function(){var de={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(de.fulfillmentValue=this.value(),de.isFulfilled=!0):this.isRejected()&&(de.rejectionReason=this.reason(),de.isRejected=!0),de},Ae.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new ne(this).promise()},Ae.prototype.error=function(de){return this.caught(S.originatesFromRejection,de)},Ae.getNewLibraryCopy=M.exports,Ae.is=function(de){return de instanceof Ae},Ae.fromNode=Ae.fromCallback=function(de){var Ie=new Ae(X);Ie._captureStackTrace();var be=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,Ce=He(de)(Fe(Ie,be));return Ce===ct&&Ie._rejectCallback(Ce.e,!0),Ie._isFateSealed()||Ie._setAsyncGuaranteed(),Ie},Ae.all=function(de){return new ne(de).promise()},Ae.cast=function(de){var Ie=Q(de);return Ie instanceof Ae||(Ie=new Ae(X),Ie._captureStackTrace(),Ie._setFulfilled(),Ie._rejectionHandler0=de),Ie},Ae.resolve=Ae.fulfilled=Ae.cast,Ae.reject=Ae.rejected=function(de){var Ie=new Ae(X);return Ie._captureStackTrace(),Ie._rejectCallback(de,!0),Ie},Ae.setScheduler=function(de){if(typeof de!="function")throw new Y("expecting a function but got "+S.classString(de));return D.setScheduler(de)},Ae.prototype._then=function(de,Ie,be,Ce,Ue){var Te=Ue!==void 0,Le=Te?Ue:new Ae(X),yt=this._target(),Mt=yt._bitField;Te||(Le._propagateFrom(this,3),Le._captureStackTrace(),Ce===void 0&&this._bitField&2097152&&(Mt&50397184?Ce=this._boundValue():Ce=yt===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,Le));var $t=I();if(Mt&50397184){var on,un,Bn=yt._settlePromiseCtx;Mt&33554432?(un=yt._rejectionHandler0,on=de):Mt&16777216?(un=yt._fulfillmentHandler0,on=Ie,yt._unsetRejectionIsUnhandled()):(Bn=yt._settlePromiseLateCancellationObserver,un=new K("late cancellation observer"),yt._attachExtraTrace(un),on=Ie),D.invoke(Bn,yt,{handler:$t===null?on:typeof on=="function"&&S.domainBind($t,on),promise:Le,receiver:Ce,value:un})}else yt._addCallbacks(de,Ie,Le,Ce,$t);return Le},Ae.prototype._length=function(){return this._bitField&65535},Ae.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},Ae.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},Ae.prototype._setLength=function(de){this._bitField=this._bitField&-65536|de&65535},Ae.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},Ae.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},Ae.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},Ae.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},Ae.prototype._isFinal=function(){return(this._bitField&4194304)>0},Ae.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},Ae.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},Ae.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},Ae.prototype._setAsyncGuaranteed=function(){D.hasCustomScheduler()||(this._bitField=this._bitField|134217728)},Ae.prototype._receiverAt=function(de){var Ie=de===0?this._receiver0:this[de*4-4+3];if(Ie!==b)return Ie===void 0&&this._isBound()?this._boundValue():Ie},Ae.prototype._promiseAt=function(de){return this[de*4-4+2]},Ae.prototype._fulfillmentHandlerAt=function(de){return this[de*4-4+0]},Ae.prototype._rejectionHandlerAt=function(de){return this[de*4-4+1]},Ae.prototype._boundValue=function(){},Ae.prototype._migrateCallback0=function(de){var Ie=de._bitField,be=de._fulfillmentHandler0,Ce=de._rejectionHandler0,Ue=de._promise0,Te=de._receiverAt(0);Te===void 0&&(Te=b),this._addCallbacks(be,Ce,Ue,Te,null)},Ae.prototype._migrateCallbackAt=function(de,Ie){var be=de._fulfillmentHandlerAt(Ie),Ce=de._rejectionHandlerAt(Ie),Ue=de._promiseAt(Ie),Te=de._receiverAt(Ie);Te===void 0&&(Te=b),this._addCallbacks(be,Ce,Ue,Te,null)},Ae.prototype._addCallbacks=function(de,Ie,be,Ce,Ue){var Te=this._length();if(Te>=65535-4&&(Te=0,this._setLength(0)),Te===0)this._promise0=be,this._receiver0=Ce,typeof de=="function"&&(this._fulfillmentHandler0=Ue===null?de:S.domainBind(Ue,de)),typeof Ie=="function"&&(this._rejectionHandler0=Ue===null?Ie:S.domainBind(Ue,Ie));else{var Le=Te*4-4;this[Le+2]=be,this[Le+3]=Ce,typeof de=="function"&&(this[Le+0]=Ue===null?de:S.domainBind(Ue,de)),typeof Ie=="function"&&(this[Le+1]=Ue===null?Ie:S.domainBind(Ue,Ie))}return this._setLength(Te+1),Te},Ae.prototype._proxy=function(de,Ie){this._addCallbacks(void 0,void 0,Ie,de,null)},Ae.prototype._resolveCallback=function(de,Ie){if(!(this._bitField&117506048)){if(de===this)return this._rejectCallback(h(),!1);var be=Q(de,this);if(!(be instanceof Ae))return this._fulfill(de);Ie&&this._propagateFrom(be,2);var Ce=be._target();if(Ce===this){this._reject(h());return}var Ue=Ce._bitField;if(Ue&50397184)if(Ue&33554432)this._fulfill(Ce._value());else if(Ue&16777216)this._reject(Ce._reason());else{var yt=new K("late cancellation observer");Ce._attachExtraTrace(yt),this._reject(yt)}else{var Te=this._length();Te>0&&Ce._migrateCallback0(this);for(var Le=1;Le<Te;++Le)Ce._migrateCallbackAt(this,Le);this._setFollowing(),this._setLength(0),this._setFollowee(Ce)}}},Ae.prototype._rejectCallback=function(de,Ie,be){var Ce=S.ensureErrorObject(de),Ue=Ce===de;if(!Ue&&!be&&B.warnings()){var Te="a promise was rejected with a non-error: "+S.classString(de);this._warn(Te,!0)}this._attachExtraTrace(Ce,Ie?Ue:!1),this._reject(de)},Ae.prototype._resolveFromExecutor=function(de){if(de!==X){var Ie=this;this._captureStackTrace(),this._pushContext();var be=!0,Ce=this._execute(de,function(Ue){Ie._resolveCallback(Ue)},function(Ue){Ie._rejectCallback(Ue,be)});be=!1,this._popContext(),Ce!==void 0&&Ie._rejectCallback(Ce,!0)}},Ae.prototype._settlePromiseFromHandler=function(de,Ie,be,Ce){var Ue=Ce._bitField;if(!(Ue&65536)){Ce._pushContext();var Te;Ie===W?!be||typeof be.length!="number"?(Te=ct,Te.e=new Y("cannot .spread() a non-array: "+S.classString(be))):Te=He(de).apply(this._boundValue(),be):Te=He(de).call(Ie,be);var Le=Ce._popContext();Ue=Ce._bitField,!(Ue&65536)&&(Te===j?Ce._reject(be):Te===ct?Ce._rejectCallback(Te.e,!1):(B.checkForgottenReturns(Te,Le,"",Ce,this),Ce._resolveCallback(Te)))}},Ae.prototype._target=function(){for(var de=this;de._isFollowing();)de=de._followee();return de},Ae.prototype._followee=function(){return this._rejectionHandler0},Ae.prototype._setFollowee=function(de){this._rejectionHandler0=de},Ae.prototype._settlePromise=function(de,Ie,be,Ce){var Ue=de instanceof Ae,Te=this._bitField,Le=(Te&134217728)!==0;Te&65536?(Ue&&de._invokeInternalOnCancel(),be instanceof oe&&be.isFinallyHandler()?(be.cancelPromise=de,He(Ie).call(be,Ce)===ct&&de._reject(ct.e)):Ie===v?de._fulfill(v.call(be)):be instanceof m?be._promiseCancelled(de):Ue||de instanceof ne?de._cancel():be.cancel()):typeof Ie=="function"?Ue?(Le&&de._setAsyncGuaranteed(),this._settlePromiseFromHandler(Ie,be,Ce,de)):Ie.call(be,Ce,de):be instanceof m?be._isResolved()||(Te&33554432?be._promiseFulfilled(Ce,de):be._promiseRejected(Ce,de)):Ue&&(Le&&de._setAsyncGuaranteed(),Te&33554432?de._fulfill(Ce):de._reject(Ce))},Ae.prototype._settlePromiseLateCancellationObserver=function(de){var Ie=de.handler,be=de.promise,Ce=de.receiver,Ue=de.value;typeof Ie=="function"?be instanceof Ae?this._settlePromiseFromHandler(Ie,Ce,Ue,be):Ie.call(Ce,Ue,be):be instanceof Ae&&be._reject(Ue)},Ae.prototype._settlePromiseCtx=function(de){this._settlePromise(de.promise,de.handler,de.receiver,de.value)},Ae.prototype._settlePromise0=function(de,Ie,be){var Ce=this._promise0,Ue=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(Ce,de,Ue,Ie)},Ae.prototype._clearCallbackDataAtIndex=function(de){var Ie=de*4-4;this[Ie+2]=this[Ie+3]=this[Ie+0]=this[Ie+1]=void 0},Ae.prototype._fulfill=function(de){var Ie=this._bitField;if(!((Ie&117506048)>>>16)){if(de===this){var be=h();return this._attachExtraTrace(be),this._reject(be)}this._setFulfilled(),this._rejectionHandler0=de,(Ie&65535)>0&&(Ie&134217728?this._settlePromises():D.settlePromises(this))}},Ae.prototype._reject=function(de){var Ie=this._bitField;if(!((Ie&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=de,this._isFinal())return D.fatalError(de,S.isNode);(Ie&65535)>0?D.settlePromises(this):this._ensurePossibleRejectionHandled()}},Ae.prototype._fulfillPromises=function(de,Ie){for(var be=1;be<de;be++){var Ce=this._fulfillmentHandlerAt(be),Ue=this._promiseAt(be),Te=this._receiverAt(be);this._clearCallbackDataAtIndex(be),this._settlePromise(Ue,Ce,Te,Ie)}},Ae.prototype._rejectPromises=function(de,Ie){for(var be=1;be<de;be++){var Ce=this._rejectionHandlerAt(be),Ue=this._promiseAt(be),Te=this._receiverAt(be);this._clearCallbackDataAtIndex(be),this._settlePromise(Ue,Ce,Te,Ie)}},Ae.prototype._settlePromises=function(){var de=this._bitField,Ie=de&65535;if(Ie>0){if(de&16842752){var be=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,be,de),this._rejectPromises(Ie,be)}else{var Ce=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,Ce,de),this._fulfillPromises(Ie,Ce)}this._setLength(0)}this._clearCancellationData()},Ae.prototype._settledValue=function(){var de=this._bitField;if(de&33554432)return this._rejectionHandler0;if(de&16777216)return this._fulfillmentHandler0};function Ve(de){this.promise._resolveCallback(de)}function Ye(de){this.promise._rejectCallback(de,!1)}Ae.defer=Ae.pending=function(){B.deprecated("Promise.defer","new Promise");var de=new Ae(X);return{promise:de,resolve:Ve,reject:Ye}},S.notEnumerableProp(Ae,"_makeSelfResolutionError",h),A("./method")(Ae,X,Q,g,B),A("./bind")(Ae,X,Q,B),A("./cancel")(Ae,ne,g,B),A("./direct_resolve")(Ae),A("./synchronous_inspection")(Ae),A("./join")(Ae,ne,Q,X,D,I),Ae.Promise=Ae,Ae.version="3.5.1",A("./map.js")(Ae,ne,g,Q,X,B),A("./call_get.js")(Ae),A("./using.js")(Ae,g,Q,ee,X,B),A("./timers.js")(Ae,X,B),A("./generators.js")(Ae,g,X,Q,m,B),A("./nodeify.js")(Ae),A("./promisify.js")(Ae,X),A("./props.js")(Ae,ne,Q,g),A("./race.js")(Ae,X,Q,g),A("./reduce.js")(Ae,ne,g,Q,X,B),A("./settle.js")(Ae,ne,B),A("./some.js")(Ae,ne,g),A("./filter.js")(Ae,X),A("./each.js")(Ae,X),A("./any.js")(Ae),S.toFastProperties(Ae),S.toFastProperties(Ae.prototype);function st(de){var Ie=new Ae(X);Ie._fulfillmentHandler0=de,Ie._rejectionHandler0=de,Ie._promise0=de,Ie._receiver0=de}return st({a:1}),st({b:2}),st({c:3}),st(1),st(function(){}),st(void 0),st(!1),st(new Ae(X)),B.setBounds(P.firstLineError,S.lastLineError),Ae}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(A,M,o){"use strict";M.exports=function(h,v,g,m,b){var S=A("./util"),I=S.isArray;function T(D){switch(D){case-2:return[];case-3:return{};case-6:return new Map}}function P(D){var U=this._promise=new h(v);D instanceof h&&U._propagateFrom(D,3),U._setOnCancel(this),this._values=D,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return S.inherits(P,b),P.prototype.length=function(){return this._length},P.prototype.promise=function(){return this._promise},P.prototype._init=function D(U,Y){var K=g(this._values,this._promise);if(K instanceof h){K=K._target();var X=K._bitField;if(this._values=K,X&50397184)if(X&33554432)K=K._value();else return X&16777216?this._reject(K._reason()):this._cancel();else return this._promise._setAsyncGuaranteed(),K._then(D,this._reject,void 0,this,Y)}if(K=S.asArray(K),K===null){var W=m("expecting an array or an iterable object but got "+S.classString(K)).reason();this._promise._rejectCallback(W,!1);return}if(K.length===0){Y===-5?this._resolveEmptyArray():this._resolve(T(Y));return}this._iterate(K)},P.prototype._iterate=function(D){var U=this.getActualLength(D.length);this._length=U,this._values=this.shouldCopyValues()?new Array(U):this._values;for(var Y=this._promise,K=!1,X=null,W=0;W<U;++W){var j=g(D[W],Y);j instanceof h?(j=j._target(),X=j._bitField):X=null,K?X!==null&&j.suppressUnhandledRejections():X!==null?X&50397184?X&33554432?K=this._promiseFulfilled(j._value(),W):X&16777216?K=this._promiseRejected(j._reason(),W):K=this._promiseCancelled(W):(j._proxy(this,W),this._values[W]=j):K=this._promiseFulfilled(j,W)}K||Y._setAsyncGuaranteed()},P.prototype._isResolved=function(){return this._values===null},P.prototype._resolve=function(D){this._values=null,this._promise._fulfill(D)},P.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},P.prototype._reject=function(D){this._values=null,this._promise._rejectCallback(D,!1)},P.prototype._promiseFulfilled=function(D,U){this._values[U]=D;var Y=++this._totalResolved;return Y>=this._length?(this._resolve(this._values),!0):!1},P.prototype._promiseCancelled=function(){return this._cancel(),!0},P.prototype._promiseRejected=function(D){return this._totalResolved++,this._reject(D),!0},P.prototype._resultCancelled=function(){if(!this._isResolved()){var D=this._values;if(this._cancel(),D instanceof h)D.cancel();else for(var U=0;U<D.length;++U)D[U]instanceof h&&D[U].cancel()}},P.prototype.shouldCopyValues=function(){return!0},P.prototype.getActualLength=function(D){return D},P}},{"./util":36}],24:[function(A,M,o){"use strict";M.exports=function(h,v){var g={},m=A("./util"),b=A("./nodeback"),S=m.withAppended,I=m.maybeWrapAsError,T=m.canEvaluate,P=A("./errors").TypeError,D="Async",U={__isPromisified__:!0},Y=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],K=new RegExp("^(?:"+Y.join("|")+")$"),X=function(Ve){return m.isIdentifier(Ve)&&Ve.charAt(0)!=="_"&&Ve!=="constructor"};function W(Ve){return!K.test(Ve)}function j(Ve){try{return Ve.__isPromisified__===!0}catch{return!1}}function Q(Ve,Ye,st){var de=m.getDataPropertyOrDefault(Ve,Ye+st,U);return de?j(de):!1}function ne(Ve,Ye,st){for(var de=0;de<Ve.length;de+=2){var Ie=Ve[de];if(st.test(Ie)){for(var be=Ie.replace(st,""),Ce=0;Ce<Ve.length;Ce+=2)if(Ve[Ce]===be)throw new P(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",Ye))}}}function ce(Ve,Ye,st,de){for(var Ie=m.inheritedDataKeys(Ve),be=[],Ce=0;Ce<Ie.length;++Ce){var Ue=Ie[Ce],Te=Ve[Ue],Le=de===X?!0:X(Ue,Te,Ve);typeof Te=="function"&&!j(Te)&&!Q(Ve,Ue,Ye)&&de(Ue,Te,Ve,Le)&&be.push(Ue,Te)}return ne(be,Ye,st),be}var ee=function(Ve){return Ve.replace(/([$])/,"\\$")},B;if(!1)var $,oe,Se,Fe;function ct(Ve,Ye,st,de,Ie,be){var Ce=function(){return this}(),Ue=Ve;typeof Ue=="string"&&(Ve=de);function Te(){var Le=Ye;Ye===g&&(Le=this);var yt=new h(v);yt._captureStackTrace();var Mt=typeof Ue=="string"&&this!==Ce?this[Ue]:Ve,$t=b(yt,be);try{Mt.apply(Le,S(arguments,$t))}catch(on){yt._rejectCallback(I(on),!0,!0)}return yt._isFateSealed()||yt._setAsyncGuaranteed(),yt}return m.notEnumerableProp(Te,"__isPromisified__",!0),Te}var He=T?B:ct;function nt(Ve,Ye,st,de,Ie){for(var be=new RegExp(ee(Ye)+"$"),Ce=ce(Ve,Ye,be,st),Ue=0,Te=Ce.length;Ue<Te;Ue+=2){var Le=Ce[Ue],yt=Ce[Ue+1],Mt=Le+Ye;if(de===He)Ve[Mt]=He(Le,g,Le,yt,Ye,Ie);else{var $t=de(yt,function(){return He(Le,g,Le,yt,Ye,Ie)});m.notEnumerableProp($t,"__isPromisified__",!0),Ve[Mt]=$t}}return m.toFastProperties(Ve),Ve}function Ae(Ve,Ye,st){return He(Ve,Ye,void 0,Ve,null,st)}h.promisify=function(Ve,Ye){if(typeof Ve!="function")throw new P("expecting a function but got "+m.classString(Ve));if(j(Ve))return Ve;Ye=Object(Ye);var st=Ye.context===void 0?g:Ye.context,de=!!Ye.multiArgs,Ie=Ae(Ve,st,de);return m.copyDescriptors(Ve,Ie,W),Ie},h.promisifyAll=function(Ve,Ye){if(typeof Ve!="function"&&typeof Ve!="object")throw new P(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);Ye=Object(Ye);var st=!!Ye.multiArgs,de=Ye.suffix;typeof de!="string"&&(de=D);var Ie=Ye.filter;typeof Ie!="function"&&(Ie=X);var be=Ye.promisifier;if(typeof be!="function"&&(be=He),!m.isIdentifier(de))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var Ce=m.inheritedDataKeys(Ve),Ue=0;Ue<Ce.length;++Ue){var Te=Ve[Ce[Ue]];Ce[Ue]!=="constructor"&&m.isClass(Te)&&(nt(Te.prototype,de,Ie,be,st),nt(Te,de,Ie,be,st))}return nt(Ve,de,Ie,be,st)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(A,M,o){"use strict";M.exports=function(h,v,g,m){var b=A("./util"),S=b.isObject,I=A("./es5"),T;typeof Map=="function"&&(T=Map);var P=function(){var K=0,X=0;function W(j,Q){this[K]=j,this[K+X]=Q,K++}return function(Q){X=Q.size,K=0;var ne=new Array(Q.size*2);return Q.forEach(W,ne),ne}}(),D=function(K){for(var X=new T,W=K.length/2|0,j=0;j<W;++j){var Q=K[W+j],ne=K[j];X.set(Q,ne)}return X};function U(K){var X=!1,W;if(T!==void 0&&K instanceof T)W=P(K),X=!0;else{var j=I.keys(K),Q=j.length;W=new Array(Q*2);for(var ne=0;ne<Q;++ne){var ce=j[ne];W[ne]=K[ce],W[ne+Q]=ce}}this.constructor$(W),this._isMap=X,this._init$(void 0,X?-6:-3)}b.inherits(U,v),U.prototype._init=function(){},U.prototype._promiseFulfilled=function(K,X){this._values[X]=K;var W=++this._totalResolved;if(W>=this._length){var j;if(this._isMap)j=D(this._values);else{j={};for(var Q=this.length(),ne=0,ce=this.length();ne<ce;++ne)j[this._values[ne+Q]]=this._values[ne]}return this._resolve(j),!0}return!1},U.prototype.shouldCopyValues=function(){return!1},U.prototype.getActualLength=function(K){return K>>1};function Y(K){var X,W=g(K);if(S(W))W instanceof h?X=W._then(h.props,void 0,void 0,void 0,void 0):X=new U(W).promise();else return m(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return W instanceof h&&X._propagateFrom(W,2),X}h.prototype.props=function(){return Y(this)},h.props=function(K){return Y(K)}}},{"./es5":13,"./util":36}],26:[function(A,M,o){"use strict";function h(g,m,b,S,I){for(var T=0;T<I;++T)b[T+S]=g[T+m],g[T+m]=void 0}function v(g){this._capacity=g,this._length=0,this._front=0}v.prototype._willBeOverCapacity=function(g){return this._capacity<g},v.prototype._pushOne=function(g){var m=this.length();this._checkCapacity(m+1);var b=this._front+m&this._capacity-1;this[b]=g,this._length=m+1},v.prototype.push=function(g,m,b){var S=this.length()+3;if(this._willBeOverCapacity(S)){this._pushOne(g),this._pushOne(m),this._pushOne(b);return}var I=this._front+S-3;this._checkCapacity(S);var T=this._capacity-1;this[I+0&T]=g,this[I+1&T]=m,this[I+2&T]=b,this._length=S},v.prototype.shift=function(){var g=this._front,m=this[g];return this[g]=void 0,this._front=g+1&this._capacity-1,this._length--,m},v.prototype.length=function(){return this._length},v.prototype._checkCapacity=function(g){this._capacity<g&&this._resizeTo(this._capacity<<1)},v.prototype._resizeTo=function(g){var m=this._capacity;this._capacity=g;var b=this._front,S=this._length,I=b+S&m-1;h(this,0,this,m,I)},M.exports=v},{}],27:[function(A,M,o){"use strict";M.exports=function(h,v,g,m){var b=A("./util"),S=function(T){return T.then(function(P){return I(P,T)})};function I(T,P){var D=g(T);if(D instanceof h)return S(D);if(T=b.asArray(T),T===null)return m("expecting an array or an iterable object but got "+b.classString(T));var U=new h(v);P!==void 0&&U._propagateFrom(P,3);for(var Y=U._fulfill,K=U._reject,X=0,W=T.length;X<W;++X){var j=T[X];j===void 0&&!(X in T)||h.cast(j)._then(Y,K,void 0,U,null)}return U}h.race=function(T){return I(T,void 0)},h.prototype.race=function(){return I(this,void 0)}}},{"./util":36}],28:[function(A,M,o){"use strict";M.exports=function(h,v,g,m,b,S){var I=h._getDomain,T=A("./util"),P=T.tryCatch;function D(W,j,Q,ne){this.constructor$(W);var ce=I();this._fn=ce===null?j:T.domainBind(ce,j),Q!==void 0&&(Q=h.resolve(Q),Q._attachCancellationCallback(this)),this._initialValue=Q,this._currentCancellable=null,ne===b?this._eachValues=Array(this._length):ne===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}T.inherits(D,v),D.prototype._gotAccum=function(W){this._eachValues!==void 0&&this._eachValues!==null&&W!==b&&this._eachValues.push(W)},D.prototype._eachComplete=function(W){return this._eachValues!==null&&this._eachValues.push(W),this._eachValues},D.prototype._init=function(){},D.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},D.prototype.shouldCopyValues=function(){return!1},D.prototype._resolve=function(W){this._promise._resolveCallback(W),this._values=null},D.prototype._resultCancelled=function(W){if(W===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof h&&this._currentCancellable.cancel(),this._initialValue instanceof h&&this._initialValue.cancel())},D.prototype._iterate=function(W){this._values=W;var j,Q,ne=W.length;if(this._initialValue!==void 0?(j=this._initialValue,Q=0):(j=h.resolve(W[0]),Q=1),this._currentCancellable=j,!j.isRejected())for(;Q<ne;++Q){var ce={accum:null,value:W[Q],index:Q,length:ne,array:this};j=j._then(K,void 0,void 0,ce,void 0)}this._eachValues!==void 0&&(j=j._then(this._eachComplete,void 0,void 0,this,void 0)),j._then(U,U,void 0,j,this)},h.prototype.reduce=function(W,j){return Y(this,W,j,null)},h.reduce=function(W,j,Q,ne){return Y(W,j,Q,ne)};function U(W,j){this.isFulfilled()?j._resolve(W):j._reject(W)}function Y(W,j,Q,ne){if(typeof j!="function")return g("expecting a function but got "+T.classString(j));var ce=new D(W,j,Q,ne);return ce.promise()}function K(W){this.accum=W,this.array._gotAccum(W);var j=m(this.value,this.array._promise);return j instanceof h?(this.array._currentCancellable=j,j._then(X,void 0,void 0,this,void 0)):X.call(this,j)}function X(W){var j=this.array,Q=j._promise,ne=P(j._fn);Q._pushContext();var ce;j._eachValues!==void 0?ce=ne.call(Q._boundValue(),W,this.index,this.length):ce=ne.call(Q._boundValue(),this.accum,W,this.index,this.length),ce instanceof h&&(j._currentCancellable=ce);var ee=Q._popContext();return S.checkForgottenReturns(ce,ee,j._eachValues!==void 0?"Promise.each":"Promise.reduce",Q),ce}}},{"./util":36}],29:[function(A,M,o){"use strict";var h=A("./util"),v,g=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},m=h.getNativePromise();if(h.isNode&&typeof MutationObserver>"u"){var b=global.setImmediate,S=process.nextTick;v=h.isRecentNode?function(T){b.call(global,T)}:function(T){S.call(process,T)}}else if(typeof m=="function"&&typeof m.resolve=="function"){var I=m.resolve();v=function(T){I.then(T)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))?v=function(){var T=document.createElement("div"),P={attributes:!0},D=!1,U=document.createElement("div"),Y=new MutationObserver(function(){T.classList.toggle("foo"),D=!1});Y.observe(U,P);var K=function(){D||(D=!0,U.classList.toggle("foo"))};return function(W){var j=new MutationObserver(function(){j.disconnect(),W()});j.observe(T,P),K()}}():typeof setImmediate<"u"?v=function(T){setImmediate(T)}:typeof setTimeout<"u"?v=function(T){setTimeout(T,0)}:v=g;M.exports=v},{"./util":36}],30:[function(A,M,o){"use strict";M.exports=function(h,v,g){var m=h.PromiseInspection,b=A("./util");function S(I){this.constructor$(I)}b.inherits(S,v),S.prototype._promiseResolved=function(I,T){this._values[I]=T;var P=++this._totalResolved;return P>=this._length?(this._resolve(this._values),!0):!1},S.prototype._promiseFulfilled=function(I,T){var P=new m;return P._bitField=33554432,P._settledValueField=I,this._promiseResolved(T,P)},S.prototype._promiseRejected=function(I,T){var P=new m;return P._bitField=16777216,P._settledValueField=I,this._promiseResolved(T,P)},h.settle=function(I){return g.deprecated(".settle()",".reflect()"),new S(I).promise()},h.prototype.settle=function(){return h.settle(this)}}},{"./util":36}],31:[function(A,M,o){"use strict";M.exports=function(h,v,g){var m=A("./util"),b=A("./errors").RangeError,S=A("./errors").AggregateError,I=m.isArray,T={};function P(U){this.constructor$(U),this._howMany=0,this._unwrap=!1,this._initialized=!1}m.inherits(P,v),P.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var U=I(this._values);!this._isResolved()&&U&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},P.prototype.init=function(){this._initialized=!0,this._init()},P.prototype.setUnwrap=function(){this._unwrap=!0},P.prototype.howMany=function(){return this._howMany},P.prototype.setHowMany=function(U){this._howMany=U},P.prototype._promiseFulfilled=function(U){return this._addFulfilled(U),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},P.prototype._promiseRejected=function(U){return this._addRejected(U),this._checkOutcome()},P.prototype._promiseCancelled=function(){return this._values instanceof h||this._values==null?this._cancel():(this._addRejected(T),this._checkOutcome())},P.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var U=new S,Y=this.length();Y<this._values.length;++Y)this._values[Y]!==T&&U.push(this._values[Y]);return U.length>0?this._reject(U):this._cancel(),!0}return!1},P.prototype._fulfilled=function(){return this._totalResolved},P.prototype._rejected=function(){return this._values.length-this.length()},P.prototype._addRejected=function(U){this._values.push(U)},P.prototype._addFulfilled=function(U){this._values[this._totalResolved++]=U},P.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},P.prototype._getRangeError=function(U){var Y="Input array must contain at least "+this._howMany+" items but contains only "+U+" items";return new b(Y)},P.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function D(U,Y){if((Y|0)!==Y||Y<0)return g(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var K=new P(U),X=K.promise();return K.setHowMany(Y),K.init(),X}h.some=function(U,Y){return D(U,Y)},h.prototype.some=function(U){return D(this,U)},h._SomePromiseArray=P}},{"./errors":12,"./util":36}],32:[function(A,M,o){"use strict";M.exports=function(h){function v(P){P!==void 0?(P=P._target(),this._bitField=P._bitField,this._settledValueField=P._isFateSealed()?P._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}v.prototype._settledValue=function(){return this._settledValueField};var g=v.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},m=v.prototype.error=v.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},b=v.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},S=v.prototype.isRejected=function(){return(this._bitField&16777216)!==0},I=v.prototype.isPending=function(){return(this._bitField&50397184)===0},T=v.prototype.isResolved=function(){return(this._bitField&50331648)!==0};v.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},h.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},h.prototype._isCancelled=function(){return this._target().__isCancelled()},h.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},h.prototype.isPending=function(){return I.call(this._target())},h.prototype.isRejected=function(){return S.call(this._target())},h.prototype.isFulfilled=function(){return b.call(this._target())},h.prototype.isResolved=function(){return T.call(this._target())},h.prototype.value=function(){return g.call(this._target())},h.prototype.reason=function(){var P=this._target();return P._unsetRejectionIsUnhandled(),m.call(P)},h.prototype._value=function(){return this._settledValue()},h.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},h.PromiseInspection=v}},{}],33:[function(A,M,o){"use strict";M.exports=function(h,v){var g=A("./util"),m=g.errorObj,b=g.isObject;function S(Y,K){if(b(Y)){if(Y instanceof h)return Y;var X=T(Y);if(X===m){K&&K._pushContext();var W=h.reject(X.e);return K&&K._popContext(),W}else if(typeof X=="function"){if(D(Y)){var W=new h(v);return Y._then(W._fulfill,W._reject,void 0,W,null),W}return U(Y,X,K)}}return Y}function I(Y){return Y.then}function T(Y){try{return I(Y)}catch(K){return m.e=K,m}}var P={}.hasOwnProperty;function D(Y){try{return P.call(Y,"_promise0")}catch{return!1}}function U(Y,K,X){var W=new h(v),j=W;X&&X._pushContext(),W._captureStackTrace(),X&&X._popContext();var Q=!0,ne=g.tryCatch(K).call(Y,ce,ee);Q=!1,W&&ne===m&&(W._rejectCallback(ne.e,!0,!0),W=null);function ce(B){W&&(W._resolveCallback(B),W=null)}function ee(B){W&&(W._rejectCallback(B,Q,!0),W=null)}return j}return S}},{"./util":36}],34:[function(A,M,o){"use strict";M.exports=function(h,v,g){var m=A("./util"),b=h.TimeoutError;function S(Y){this.handle=Y}S.prototype._resultCancelled=function(){clearTimeout(this.handle)};var I=function(Y){return T(+this).thenReturn(Y)},T=h.delay=function(Y,K){var X,W;return K!==void 0?(X=h.resolve(K)._then(I,null,null,Y,void 0),g.cancellation()&&K instanceof h&&X._setOnCancel(K)):(X=new h(v),W=setTimeout(function(){X._fulfill()},+Y),g.cancellation()&&X._setOnCancel(new S(W)),X._captureStackTrace()),X._setAsyncGuaranteed(),X};h.prototype.delay=function(Y){return T(Y,this)};var P=function(Y,K,X){var W;typeof K!="string"?K instanceof Error?W=K:W=new b("operation timed out"):W=new b(K),m.markAsOriginatingFromRejection(W),Y._attachExtraTrace(W),Y._reject(W),X!=null&&X.cancel()};function D(Y){return clearTimeout(this.handle),Y}function U(Y){throw clearTimeout(this.handle),Y}h.prototype.timeout=function(Y,K){Y=+Y;var X,W,j=new S(setTimeout(function(){X.isPending()&&P(X,K,W)},Y));return g.cancellation()?(W=this.then(),X=W._then(D,U,void 0,j,void 0),X._setOnCancel(j)):X=this._then(D,U,void 0,j,void 0),X}}},{"./util":36}],35:[function(A,M,o){"use strict";M.exports=function(h,v,g,m,b,S){var I=A("./util"),T=A("./errors").TypeError,P=A("./util").inherits,D=I.errorObj,U=I.tryCatch,Y={};function K(ee){setTimeout(function(){throw ee},0)}function X(ee){var B=g(ee);return B!==ee&&typeof ee._isDisposable=="function"&&typeof ee._getDisposer=="function"&&ee._isDisposable()&&B._setDisposable(ee._getDisposer()),B}function W(ee,B){var $=0,oe=ee.length,Se=new h(b);function Fe(){if($>=oe)return Se._fulfill();var ct=X(ee[$++]);if(ct instanceof h&&ct._isDisposable()){try{ct=g(ct._getDisposer().tryDispose(B),ee.promise)}catch(He){return K(He)}if(ct instanceof h)return ct._then(Fe,K,null,null,null)}Fe()}return Fe(),Se}function j(ee,B,$){this._data=ee,this._promise=B,this._context=$}j.prototype.data=function(){return this._data},j.prototype.promise=function(){return this._promise},j.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():Y},j.prototype.tryDispose=function(ee){var B=this.resource(),$=this._context;$!==void 0&&$._pushContext();var oe=B!==Y?this.doDispose(B,ee):null;return $!==void 0&&$._popContext(),this._promise._unsetDisposable(),this._data=null,oe},j.isDisposer=function(ee){return ee!=null&&typeof ee.resource=="function"&&typeof ee.tryDispose=="function"};function Q(ee,B,$){this.constructor$(ee,B,$)}P(Q,j),Q.prototype.doDispose=function(ee,B){var $=this.data();return $.call(ee,ee,B)};function ne(ee){return j.isDisposer(ee)?(this.resources[this.index]._setDisposable(ee),ee.promise()):ee}function ce(ee){this.length=ee,this.promise=null,this[ee-1]=null}ce.prototype._resultCancelled=function(){for(var ee=this.length,B=0;B<ee;++B){var $=this[B];$ instanceof h&&$.cancel()}},h.using=function(){var ee=arguments.length;if(ee<2)return v("you must pass at least 2 arguments to Promise.using");var B=arguments[ee-1];if(typeof B!="function")return v("expecting a function but got "+I.classString(B));var $,oe=!0;ee===2&&Array.isArray(arguments[0])?($=arguments[0],ee=$.length,oe=!1):($=arguments,ee--);for(var Se=new ce(ee),Fe=0;Fe<ee;++Fe){var ct=$[Fe];if(j.isDisposer(ct)){var He=ct;ct=ct.promise(),ct._setDisposable(He)}else{var nt=g(ct);nt instanceof h&&(ct=nt._then(ne,null,null,{resources:Se,index:Fe},void 0))}Se[Fe]=ct}for(var Ae=new Array(Se.length),Fe=0;Fe<Ae.length;++Fe)Ae[Fe]=h.resolve(Se[Fe]).reflect();var Ve=h.all(Ae).then(function(st){for(var de=0;de<st.length;++de){var Ie=st[de];if(Ie.isRejected())return D.e=Ie.error(),D;if(!Ie.isFulfilled()){Ve.cancel();return}st[de]=Ie.value()}Ye._pushContext(),B=U(B);var be=oe?B.apply(void 0,st):B(st),Ce=Ye._popContext();return S.checkForgottenReturns(be,Ce,"Promise.using",Ye),be}),Ye=Ve.lastly(function(){var st=new h.PromiseInspection(Ve);return W(Se,st)});return Se.promise=Ye,Ye._setOnCancel(Se),Ye},h.prototype._setDisposable=function(ee){this._bitField=this._bitField|131072,this._disposer=ee},h.prototype._isDisposable=function(){return(this._bitField&131072)>0},h.prototype._getDisposer=function(){return this._disposer},h.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},h.prototype.disposer=function(ee){if(typeof ee=="function")return new Q(ee,this,m());throw new T}}},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){"use strict";var es5=_dereq_("./es5"),canEvaluate=typeof navigator>"u",errorObj={e:{}},tryCatchTarget,globalObject=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:this!==void 0?this:null;function tryCatcher(){try{var A=tryCatchTarget;return tryCatchTarget=null,A.apply(this,arguments)}catch(M){return errorObj.e=M,errorObj}}function tryCatch(A){return tryCatchTarget=A,tryCatcher}var inherits=function(A,M){var o={}.hasOwnProperty;function h(){this.constructor=A,this.constructor$=M;for(var v in M.prototype)o.call(M.prototype,v)&&v.charAt(v.length-1)!=="$"&&(this[v+"$"]=M.prototype[v])}return h.prototype=M.prototype,A.prototype=new h,A.prototype};function isPrimitive(A){return A==null||A===!0||A===!1||typeof A=="string"||typeof A=="number"}function isObject(A){return typeof A=="function"||typeof A=="object"&&A!==null}function maybeWrapAsError(A){return isPrimitive(A)?new Error(safeToString(A)):A}function withAppended(A,M){var o=A.length,h=new Array(o+1),v;for(v=0;v<o;++v)h[v]=A[v];return h[v]=M,h}function getDataPropertyOrDefault(A,M,o){if(es5.isES5){var h=Object.getOwnPropertyDescriptor(A,M);if(h!=null)return h.get==null&&h.set==null?h.value:o}else return{}.hasOwnProperty.call(A,M)?A[M]:void 0}function notEnumerableProp(A,M,o){if(isPrimitive(A))return A;var h={value:o,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(A,M,h),A}function thrower(A){throw A}var inheritedDataKeys=function(){var A=[Array.prototype,Object.prototype,Function.prototype],M=function(v){for(var g=0;g<A.length;++g)if(A[g]===v)return!0;return!1};if(es5.isES5){var o=Object.getOwnPropertyNames;return function(v){for(var g=[],m=Object.create(null);v!=null&&!M(v);){var b;try{b=o(v)}catch{return g}for(var S=0;S<b.length;++S){var I=b[S];if(!m[I]){m[I]=!0;var T=Object.getOwnPropertyDescriptor(v,I);T!=null&&T.get==null&&T.set==null&&g.push(I)}}v=es5.getPrototypeOf(v)}return g}}else{var h={}.hasOwnProperty;return function(v){if(M(v))return[];var g=[];e:for(var m in v)if(h.call(v,m))g.push(m);else{for(var b=0;b<A.length;++b)if(h.call(A[b],m))continue e;g.push(m)}return g}}}(),thisAssignmentPattern=/this\s*\.\s*\S+\s*=/;function isClass(A){try{if(typeof A=="function"){var M=es5.names(A.prototype),o=es5.isES5&&M.length>1,h=M.length>0&&!(M.length===1&&M[0]==="constructor"),v=thisAssignmentPattern.test(A+"")&&es5.names(A).length>0;if(o||h||v)return!0}return!1}catch{return!1}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;for(var l=8;l--;)new FakeConstructor;return obj}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(A){return rident.test(A)}function filledRange(A,M,o){for(var h=new Array(A),v=0;v<A;++v)h[v]=M+v+o;return h}function safeToString(A){try{return A+""}catch{return"[no string representation]"}}function isError(A){return A instanceof Error||A!==null&&typeof A=="object"&&typeof A.message=="string"&&typeof A.name=="string"}function markAsOriginatingFromRejection(A){try{notEnumerableProp(A,"isOperational",!0)}catch{}}function originatesFromRejection(A){return A==null?!1:A instanceof Error.__BluebirdErrorTypes__.OperationalError||A.isOperational===!0}function canAttachTrace(A){return isError(A)&&es5.propertyIsWritable(A,"stack")}var ensureErrorObject=function(){return"stack"in new Error?function(A){return canAttachTrace(A)?A:new Error(safeToString(A))}:function(A){if(canAttachTrace(A))return A;try{throw new Error(safeToString(A))}catch(M){return M}}}();function classString(A){return{}.toString.call(A)}function copyDescriptors(A,M,o){for(var h=es5.names(A),v=0;v<h.length;++v){var g=h[v];if(o(g))try{es5.defineProperty(M,g,es5.getDescriptor(A,g))}catch{}}}var asArray=function(A){return es5.isArray(A)?A:null};if(typeof Symbol<"u"&&Symbol.iterator){var ArrayFrom=typeof Array.from=="function"?function(A){return Array.from(A)}:function(A){for(var M=[],o=A[Symbol.iterator](),h;!(h=o.next()).done;)M.push(h.value);return M};asArray=function(A){return es5.isArray(A)?A:A!=null&&typeof A[Symbol.iterator]=="function"?ArrayFrom(A):null}}var isNode=typeof process<"u"&&classString(process).toLowerCase()==="[object process]",hasEnvVariables=typeof process<"u"&&typeof process.env<"u";function env(A){return hasEnvVariables?process.env[A]:void 0}function getNativePromise(){if(typeof Promise=="function")try{var A=new Promise(function(){});if({}.toString.call(A)==="[object Promise]")return Promise}catch{}}function domainBind(A,M){return A.bind(M)}var ret={isClass,isIdentifier,inheritedDataKeys,getDataPropertyOrDefault,thrower,isArray:es5.isArray,asArray,notEnumerableProp,isPrimitive,isObject,isError,canEvaluate,errorObj,tryCatch,inherits,withAppended,maybeWrapAsError,toFastProperties,filledRange,toString:safeToString,canAttachTrace,ensureErrorObject,originatesFromRejection,markAsOriginatingFromRejection,classString,copyDescriptors,hasDevTools:typeof chrome<"u"&&chrome&&typeof chrome.loadTimes=="function",isNode,hasEnvVariables,env,global:globalObject,getNativePromise,domainBind};ret.isRecentNode=ret.isNode&&function(){var A=process.versions.node.split(".").map(Number);return A[0]===0&&A[1]>10||A[0]>0}(),ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(A){ret.lastLineError=A}module.exports=ret},{"./es5":13}]},{},[4])(4)}),typeof window<"u"&&window!==null?window.P=window.Promise:typeof self<"u"&&self!==null&&(self.P=self.Promise)}).call(this,__webpack_require__("1a654c89165c3fdd23e9"),__webpack_require__("d8a2b18087957e350ade"),__webpack_require__("f89ea08855b945937e0d").setImmediate)},"3a4039aaa40cb7a7a7ef":function(A,M,o){"use strict";const h={MODEL:"model",NODE:"node",PROJECT:"project",PLUGIN:"plugin",WORKSPACE:"workspace",NOTEBOOK:"notebook"}},"3a4f8a76cd0489772f71":function(A,M,o){"use strict";var h=o("45e95ff7deb186b1032c");A.exports=function(){var v=h(this),g="";return v.global&&(g+="g"),v.ignoreCase&&(g+="i"),v.multiline&&(g+="m"),v.unicode&&(g+="u"),v.sticky&&(g+="y"),g}},"3af61898f92c68583af6":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S+h.F*!o("c4e1172cd86cf1507638"),"Object",{defineProperties:o("bfe744ff6a7d3fb8b3b6")})},"3c1abcaf432651c852c0":function(A,M,o){var h=o("777583f135984e6aaced"),v=o("9ba7c6b5067bc2a0c49c"),g=o("018197c10a6ce8e48027"),m=o("9bbb799f204bee898f0a"),b=o("5e7f3152dbd5f68ea917"),S=o("513ff0a21cbd89023aaa"),I=Object.getOwnPropertyDescriptor;M.f=o("c4e1172cd86cf1507638")?I:function(P,D){if(P=g(P),D=m(D,!0),S)try{return I(P,D)}catch{}if(b(P,D))return v(!h.f.call(P,D),P[D])}},"3c57b024b26022754cbd":function(A,M,o){"use strict";if(o("c4e1172cd86cf1507638")){var h=o("5ac187c343d34c84f217"),v=o("e9323032e98511a09e82"),g=o("126be16bb2f5f1c18403"),m=o("3091fc82fc780b1e9f35"),b=o("fe764323ef07c8632dee"),S=o("b69b6a982b1b19fc5d05"),I=o("a8ecafe71e21295d1184"),T=o("dde7c1ae034e12bce98a"),P=o("9ba7c6b5067bc2a0c49c"),D=o("fa9e288138e317a7a504"),U=o("5d61e0aac58adeaf65c8"),Y=o("6ae02b075e3300a8a961"),K=o("87ca1990df7e5ce5f6d4"),X=o("a76cc99c600b948806ec"),W=o("dff1687ed27eabf28b37"),j=o("9bbb799f204bee898f0a"),Q=o("5e7f3152dbd5f68ea917"),ne=o("03cdf004f8ef8c702f67"),ce=o("0c6bdb2f1e107b092ad8"),ee=o("7964b54be5616e0032b3"),B=o("0e5f35ac88b1c833962e"),$=o("196ca7010a0a30f36bdf"),oe=o("e5f3df9816caf4a19edb"),Se=o("f231974c81033140970d").f,Fe=o("29e1c134e25d7d250cb8"),ct=o("d3a44d49545c5d8bf631"),He=o("fdf9ec15fb80cd9b8df9"),nt=o("409f063042ff82279e38"),Ae=o("d7a3c56d6fced4c51eb9"),Ve=o("5760c5a16066c01be8f5"),Ye=o("ae69b05663ee2a381de0"),st=o("0a850ab3e6aa8900d3c4"),de=o("78c9141ecce69548150c"),Ie=o("648f39bb5d52ff46b948"),be=o("7dbfcf0fa32544819713"),Ce=o("86cbdc6ff16180d66de4"),Ue=o("f8cf2e7afd370478f99e"),Te=o("3c1abcaf432651c852c0"),Le=Ue.f,yt=Te.f,Mt=v.RangeError,$t=v.TypeError,on=v.Uint8Array,un="ArrayBuffer",Bn="Shared"+un,qn="BYTES_PER_ELEMENT",Rn="prototype",Fn=Array[Rn],ai=S.ArrayBuffer,hi=S.DataView,Zn=nt(0),Yn=nt(2),ei=nt(3),ki=nt(4),q=nt(5),F=nt(6),N=Ae(!0),le=Ae(!1),Oe=Ye.values,re=Ye.keys,ie=Ye.entries,De=Fn.lastIndexOf,je=Fn.reduce,pt=Fn.reduceRight,Pt=Fn.join,Lt=Fn.sort,jt=Fn.slice,cn=Fn.toString,Xn=Fn.toLocaleString,Li=He("iterator"),zn=He("toStringTag"),Br=ct("typed_constructor"),Qn=ct("def_constructor"),Rs=b.CONSTR,bs=b.TYPED,xs=b.VIEW,ss="Wrong length!",oi=nt(1,function(Qt,Ft){return Rt(Ve(Qt,Qt[Qn]),Ft)}),Me=g(function(){return new on(new Uint16Array([1]).buffer)[0]===1}),it=!!on&&!!on[Rn].set&&g(function(){new on(1).set({})}),$e=function(Qt,Ft){var mn=Y(Qt);if(mn<0||mn%Ft)throw Mt("Wrong offset!");return mn},dt=function(Qt){if(ce(Qt)&&bs in Qt)return Qt;throw $t(Qt+" is not a typed array!")},Rt=function(Qt,Ft){if(!(ce(Qt)&&Br in Qt))throw $t("It is not a typed array constructor!");return new Qt(Ft)},Bt=function(Qt,Ft){return Un(Ve(Qt,Qt[Qn]),Ft)},Un=function(Qt,Ft){for(var mn=0,Gn=Ft.length,Kn=Rt(Qt,Gn);Gn>mn;)Kn[mn]=Ft[mn++];return Kn},Ai=function(Qt,Ft,mn){Le(Qt,Ft,{get:function(){return this._d[mn]}})},Ji=function(Ft){var mn=ee(Ft),Gn=arguments.length,Kn=Gn>1?arguments[1]:void 0,Tr=Kn!==void 0,Wi=Fe(mn),hn,gr,Zr,$s,ua,Hi;if(Wi!=null&&!B(Wi)){for(Hi=Wi.call(mn),Zr=[],hn=0;!(ua=Hi.next()).done;hn++)Zr.push(ua.value);mn=Zr}for(Tr&&Gn>2&&(Kn=I(Kn,arguments[2],2)),hn=0,gr=K(mn.length),$s=Rt(this,gr);gr>hn;hn++)$s[hn]=Tr?Kn(mn[hn],hn):mn[hn];return $s},Di=function(){for(var Ft=0,mn=arguments.length,Gn=Rt(this,mn);mn>Ft;)Gn[Ft]=arguments[Ft++];return Gn},Ti=!!on&&g(function(){Xn.call(new on(1))}),Ar=function(){return Xn.apply(Ti?jt.call(dt(this)):dt(this),arguments)},or={copyWithin:function(Ft,mn){return Ce.call(dt(this),Ft,mn,arguments.length>2?arguments[2]:void 0)},every:function(Ft){return ki(dt(this),Ft,arguments.length>1?arguments[1]:void 0)},fill:function(Ft){return be.apply(dt(this),arguments)},filter:function(Ft){return Bt(this,Yn(dt(this),Ft,arguments.length>1?arguments[1]:void 0))},find:function(Ft){return q(dt(this),Ft,arguments.length>1?arguments[1]:void 0)},findIndex:function(Ft){return F(dt(this),Ft,arguments.length>1?arguments[1]:void 0)},forEach:function(Ft){Zn(dt(this),Ft,arguments.length>1?arguments[1]:void 0)},indexOf:function(Ft){return le(dt(this),Ft,arguments.length>1?arguments[1]:void 0)},includes:function(Ft){return N(dt(this),Ft,arguments.length>1?arguments[1]:void 0)},join:function(Ft){return Pt.apply(dt(this),arguments)},lastIndexOf:function(Ft){return De.apply(dt(this),arguments)},map:function(Ft){return oi(dt(this),Ft,arguments.length>1?arguments[1]:void 0)},reduce:function(Ft){return je.apply(dt(this),arguments)},reduceRight:function(Ft){return pt.apply(dt(this),arguments)},reverse:function(){for(var Ft=this,mn=dt(Ft).length,Gn=Math.floor(mn/2),Kn=0,Tr;Kn<Gn;)Tr=Ft[Kn],Ft[Kn++]=Ft[--mn],Ft[mn]=Tr;return Ft},some:function(Ft){return ei(dt(this),Ft,arguments.length>1?arguments[1]:void 0)},sort:function(Ft){return Lt.call(dt(this),Ft)},subarray:function(Ft,mn){var Gn=dt(this),Kn=Gn.length,Tr=W(Ft,Kn);return new(Ve(Gn,Gn[Qn]))(Gn.buffer,Gn.byteOffset+Tr*Gn.BYTES_PER_ELEMENT,K((mn===void 0?Kn:W(mn,Kn))-Tr))}},oa=function(Ft,mn){return Bt(this,jt.call(dt(this),Ft,mn))},$r=function(Ft){dt(this);var mn=$e(arguments[1],1),Gn=this.length,Kn=ee(Ft),Tr=K(Kn.length),Wi=0;if(Tr+mn>Gn)throw Mt(ss);for(;Wi<Tr;)this[mn+Wi]=Kn[Wi++]},ba={entries:function(){return ie.call(dt(this))},keys:function(){return re.call(dt(this))},values:function(){return Oe.call(dt(this))}},xa=function(Qt,Ft){return ce(Qt)&&Qt[bs]&&typeof Ft!="symbol"&&Ft in Qt&&String(+Ft)==String(Ft)},ir=function(Ft,mn){return xa(Ft,mn=j(mn,!0))?P(2,Ft[mn]):yt(Ft,mn)},Ks=function(Ft,mn,Gn){return xa(Ft,mn=j(mn,!0))&&ce(Gn)&&Q(Gn,"value")&&!Q(Gn,"get")&&!Q(Gn,"set")&&!Gn.configurable&&(!Q(Gn,"writable")||Gn.writable)&&(!Q(Gn,"enumerable")||Gn.enumerable)?(Ft[mn]=Gn.value,Ft):Le(Ft,mn,Gn)};Rs||(Te.f=ir,Ue.f=Ks),m(m.S+m.F*!Rs,"Object",{getOwnPropertyDescriptor:ir,defineProperty:Ks}),g(function(){cn.call({})})&&(cn=Xn=function(){return Pt.call(this)});var as=U({},or);U(as,ba),D(as,Li,ba.values),U(as,{slice:oa,set:$r,constructor:function(){},toString:cn,toLocaleString:Ar}),Ai(as,"buffer","b"),Ai(as,"byteOffset","o"),Ai(as,"byteLength","l"),Ai(as,"length","e"),Le(as,zn,{get:function(){return this[bs]}}),A.exports=function(Qt,Ft,mn,Gn){Gn=!!Gn;var Kn=Qt+(Gn?"Clamped":"")+"Array",Tr="get"+Qt,Wi="set"+Qt,hn=v[Kn],gr=hn||{},Zr=hn&&oe(hn),$s=!hn||!b.ABV,ua={},Hi=hn&&hn[Rn],mo=function(Vi,li){var Ki=Vi._d;return Ki.v[Tr](li*Ft+Ki.o,Me)},go=function(Vi,li,Ki){var os=Vi._d;Gn&&(Ki=(Ki=Math.round(Ki))<0?0:Ki>255?255:Ki&255),os.v[Wi](li*Ft+os.o,Ki,Me)},tu=function(Vi,li){Le(Vi,li,{get:function(){return mo(this,li)},set:function(Ki){return go(this,li,Ki)},enumerable:!0})};$s?(hn=mn(function(Vi,li,Ki,os){T(Vi,hn,Kn,"_d");var Ls=0,Sa=0,ca,Rr,us,_o;if(!ce(li))us=X(li),Rr=us*Ft,ca=new ai(Rr);else if(li instanceof ai||(_o=ne(li))==un||_o==Bn){ca=li,Sa=$e(Ki,Ft);var Aa=li.byteLength;if(os===void 0){if(Aa%Ft||(Rr=Aa-Sa,Rr<0))throw Mt(ss)}else if(Rr=K(os)*Ft,Rr+Sa>Aa)throw Mt(ss);us=Rr/Ft}else return bs in li?Un(hn,li):Ji.call(hn,li);for(D(Vi,"_d",{b:ca,o:Sa,l:Rr,e:us,v:new hi(ca)});Ls<us;)tu(Vi,Ls++)}),Hi=hn[Rn]=$(as),D(Hi,"constructor",hn)):(!g(function(){hn(1)})||!g(function(){new hn(-1)})||!de(function(Vi){new hn,new hn(null),new hn(1.5),new hn(Vi)},!0))&&(hn=mn(function(Vi,li,Ki,os){T(Vi,hn,Kn);var Ls;return ce(li)?li instanceof ai||(Ls=ne(li))==un||Ls==Bn?os!==void 0?new gr(li,$e(Ki,Ft),os):Ki!==void 0?new gr(li,$e(Ki,Ft)):new gr(li):bs in li?Un(hn,li):Ji.call(hn,li):new gr(X(li))}),Zn(Zr!==Function.prototype?Se(gr).concat(Se(Zr)):Se(gr),function(Vi){Vi in hn||D(hn,Vi,gr[Vi])}),hn[Rn]=Hi,h||(Hi.constructor=hn));var Ea=Hi[Li],za=!!Ea&&(Ea.name=="values"||Ea.name==null),vo=ba.values;D(hn,Br,!0),D(Hi,bs,Kn),D(Hi,xs,!0),D(Hi,Qn,hn),(Gn?new hn(1)[zn]!=Kn:!(zn in Hi))&&Le(Hi,zn,{get:function(){return Kn}}),ua[Kn]=hn,m(m.G+m.W+m.F*(hn!=gr),ua),m(m.S,Kn,{BYTES_PER_ELEMENT:Ft}),m(m.S+m.F*g(function(){gr.of.call(hn,1)}),Kn,{from:Ji,of:Di}),qn in Hi||D(Hi,qn,Ft),m(m.P,Kn,or),Ie(Kn),m(m.P+m.F*it,Kn,{set:$r}),m(m.P+m.F*!za,Kn,ba),!h&&Hi.toString!=cn&&(Hi.toString=cn),m(m.P+m.F*g(function(){new hn(1).slice()}),Kn,{slice:oa}),m(m.P+m.F*(g(function(){return[1,2].toLocaleString()!=new hn([1,2]).toLocaleString()})||!g(function(){Hi.toLocaleString.call([1,2])})),Kn,{toLocaleString:Ar}),st[Kn]=za?Ea:vo,!h&&!za&&D(Hi,Li,vo)}}else A.exports=function(){}},"3d4013cb89bb50c024c0":function(A,M){},"3e13b2bb8e94bc2421cc":function(A,M,o){o("3c57b024b26022754cbd")("Uint8",1,function(h){return function(g,m,b){return h(this,g,m,b)}},!0)},"3e2a70dfbaa4ecfe828b":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.P,"Array",{fill:o("7dbfcf0fa32544819713")}),o("7f1f5a90a2ecaf92a049")("fill")},"3ed595a38226ae2a3783":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("c445bef4faf25215ffcd"),g=o("126be16bb2f5f1c18403"),m=o("5711e5187c61473cfa4a"),b="["+m+"]",S="\u200B\x85",I=RegExp("^"+b+b+"*"),T=RegExp(b+b+"*$"),P=function(U,Y,K){var X={},W=g(function(){return!!m[U]()||S[U]()!=S}),j=X[U]=W?Y(D):m[U];K&&(X[K]=j),h(h.P+h.F*W,"String",X)},D=P.trim=function(U,Y){return U=String(v(U)),Y&1&&(U=U.replace(I,"")),Y&2&&(U=U.replace(T,"")),U};A.exports=P},"3f860e7d8ba88a0566b6":function(A,M,o){var h=o("f231974c81033140970d"),v=o("7057fe086dddfd19f86c"),g=o("45e95ff7deb186b1032c"),m=o("e9323032e98511a09e82").Reflect;A.exports=m&&m.ownKeys||function(S){var I=h.f(g(S)),T=v.f;return T?I.concat(T(S)):I}},"3fa6bbcfed98f0ce2dcc":function(A,M,o){o("3c57b024b26022754cbd")("Uint8",1,function(h){return function(g,m,b){return h(this,g,m,b)}})},"407762f419b7b83c5128":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("6ae02b075e3300a8a961"),g=o("c15b1b5fb34fea6d7f41"),m=o("7aff271e08d81419a9f8"),b=1 .toFixed,S=Math.floor,I=[0,0,0,0,0,0],T="Number.toFixed: incorrect invocation!",P="0",D=function(W,j){for(var Q=-1,ne=j;++Q<6;)ne+=W*I[Q],I[Q]=ne%1e7,ne=S(ne/1e7)},U=function(W){for(var j=6,Q=0;--j>=0;)Q+=I[j],I[j]=S(Q/W),Q=Q%W*1e7},Y=function(){for(var W=6,j="";--W>=0;)if(j!==""||W===0||I[W]!==0){var Q=String(I[W]);j=j===""?Q:j+m.call(P,7-Q.length)+Q}return j},K=function(W,j,Q){return j===0?Q:j%2===1?K(W,j-1,Q*W):K(W*W,j/2,Q)},X=function(W){for(var j=0,Q=W;Q>=4096;)j+=12,Q/=4096;for(;Q>=2;)j+=1,Q/=2;return j};h(h.P+h.F*(!!b&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!o("126be16bb2f5f1c18403")(function(){b.call({})})),"Number",{toFixed:function(j){var Q=g(this,T),ne=v(j),ce="",ee=P,B,$,oe,Se;if(ne<0||ne>20)throw RangeError(T);if(Q!=Q)return"NaN";if(Q<=-1e21||Q>=1e21)return String(Q);if(Q<0&&(ce="-",Q=-Q),Q>1e-21)if(B=X(Q*K(2,69,1))-69,$=B<0?Q*K(2,-B,1):Q/K(2,B,1),$*=4503599627370496,B=52-B,B>0){for(D(0,$),oe=ne;oe>=7;)D(1e7,0),oe-=7;for(D(K(10,oe,1),0),oe=B-1;oe>=23;)U(1<<23),oe-=23;U(1<<oe),D(1,1),U(2),ee=Y()}else D(0,$),D(1<<-B,0),ee=Y()+m.call(P,ne);return ne>0?(Se=ee.length,ee=ce+(Se<=ne?"0."+m.call(P,ne-Se)+ee:ee.slice(0,Se-ne)+"."+ee.slice(Se-ne))):ee=ce+ee,ee}})},"40847ada58467826e6ac":function(A,M,o){"use strict";var h=o("a8ecafe71e21295d1184"),v=o("3091fc82fc780b1e9f35"),g=o("7964b54be5616e0032b3"),m=o("31d88529d569d67159e9"),b=o("0e5f35ac88b1c833962e"),S=o("87ca1990df7e5ce5f6d4"),I=o("ee380940dab8889d05d0"),T=o("29e1c134e25d7d250cb8");v(v.S+v.F*!o("78c9141ecce69548150c")(function(P){Array.from(P)}),"Array",{from:function(D){var U=g(D),Y=typeof this=="function"?this:Array,K=arguments.length,X=K>1?arguments[1]:void 0,W=X!==void 0,j=0,Q=T(U),ne,ce,ee,B;if(W&&(X=h(X,K>2?arguments[2]:void 0,2)),Q!=null&&!(Y==Array&&b(Q)))for(B=Q.call(U),ce=new Y;!(ee=B.next()).done;j++)I(ce,j,W?m(B,X,[ee.value,j],!0):ee.value);else for(ne=S(U.length),ce=new Y(ne);ne>j;j++)I(ce,j,W?X(U[j],j):U[j]);return ce.length=j,ce}})},"409f063042ff82279e38":function(A,M,o){var h=o("a8ecafe71e21295d1184"),v=o("ba5246ed31a79503d644"),g=o("7964b54be5616e0032b3"),m=o("87ca1990df7e5ce5f6d4"),b=o("0963fd6a7fb1ad061e74");A.exports=function(S,I){var T=S==1,P=S==2,D=S==3,U=S==4,Y=S==6,K=S==5||Y,X=I||b;return function(W,j,Q){for(var ne=g(W),ce=v(ne),ee=h(j,Q,3),B=m(ce.length),$=0,oe=T?X(W,B):P?X(W,0):void 0,Se,Fe;B>$;$++)if((K||$ in ce)&&(Se=ce[$],Fe=ee(Se,$,ne),S)){if(T)oe[$]=Fe;else if(Fe)switch(S){case 3:return!0;case 5:return Se;case 6:return $;case 2:oe.push(Se)}else if(U)return!1}return Y?-1:D||U?U:oe}}},"41213ed7cbab04f4f6b8":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Number",{EPSILON:Math.pow(2,-52)})},"4159678bf1ccecc082b5":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},"41ad9bf124e8c96e655a":function(A,M){},"41b11af1442716978a08":function(A,M,o){"use strict";(function(h){o.d(M,"b",function(){return P}),o.d(M,"a",function(){return ce}),o.d(M,"c",function(){return ct});var v=o("00f83bf39a29e0b57d1f"),g=o.n(v),m=o("510c97a2832dee6670a2"),b=o("725e816b46da86ed4ba1");const S=self.crypto||self.msCrypto,I=new TextEncoder;let T=null;function P(){return T||(T=h||setTimeout),new Promise((He,nt)=>{try{T(()=>{He()})}catch(Ae){nt(Ae)}})}function D(He,nt,Ae,...Ve){return He?typeof He==="string"?nt[He]===Ae[He]:He(nt,Ae,...Ve):nt===Ae}function U(He,nt,Ae,Ve,Ye=!1){const st=[],de=[],Ie=[],be=[],Ce=new Set,Ue=Ye?new WeakMap:null;return He.forEach((Te,Le)=>{const yt=nt.findIndex((Mt,$t,...on)=>D(Ae,Te,Mt,$t,...on));yt!==-1?(D(Ve,Te,nt[yt],yt,nt)?(de.push(Te),Ce.add(yt)):Ie.push(Te),Ue&&Ue.set(Te,{before:yt,after:Le})):st.push(Te)}),nt.forEach((Te,Le)=>{He.findIndex((yt,Mt,...$t)=>D(Ae,Te,yt,Mt,...$t))===-1&&!Ce.has(Le)&&(be.push(Te),Ue&&Ue.set(Te,{before:Le,after:-1}))}),{added:st,changed:de,unchanged:Ie,removed:be,indexMap:Ue,isChanged:(st.length||de.length||be.length)>0}}function Y(He,...nt){const Ae=Object.keys(He);return nt.reduce((Ve,Ye)=>(Ae.forEach(st=>{if(!(st in Ye))return;const de=Ye[st];He[st]!==de&&(Ve[st]=de)}),Ve),{})}function K(He={},nt,...Ae){const Ve=Object.assign({setter:null,include:new Set,exclude:new Set,recursive:!1},typeof He=="function"?{setter:He}:He);if(typeof Ve.setter!="function")throw new TypeError("setter has to be a function!");Ve.include&&(Ve.include=new Set(Ve.include)),Ve.exclude&&(Ve.exclude=new Set(Ve.exclude)),Ae.forEach(Ye=>Object.keys(Ye).forEach(st=>{if(Ve.include.size&&!Ve.include.has(st)||Ve.exclude.has(st))return;const de=nt[st],Ie=Ye[st];Ve.recursive&&Object(v.isPlainObject)(de)&&Object(v.isPlainObject)(Ie)?K(Ve,de,Ie):Ve.setter(nt,st,Ye[st])}))}function X(He,nt=He.size,Ae){return new Promise((Ve,Ye)=>{const st=new FileReader;let de=0;st.onerror=Ye,st.onload=async Ie=>{if(Ie.target.error==null)de+=Ie.target.result.byteLength,Ae&&await Promise.resolve(Ae(Ie.target.result));else{Ye(Ie.target.error);return}if(de>=He.size){Ve(He);return}st.readAsArrayBuffer(He.slice(de,nt+de))},st.readAsArrayBuffer(He.slice(de,nt+de))})}async function W(He,nt="utf-8"){let Ae=null;return await X(He,He.size,Ye=>{Ae=Ye}),Ae?new TextDecoder(nt).decode(Ae):""}function j(He,nt=!1){let Ae=!1,Ve=He;const Ye=new Image;return Object.assign(new Promise(async(st,de)=>{try{nt&&!Ve.includes("?")&&(Ve+=`?${new Date().getTime()}`),Ye.crossOrigin="anonymous",Ye.onload=()=>(Ye.onerror=null,Ye.onload=null,URL.revokeObjectURL(Ve),st(Ye)),Ye.onerror=Ie=>{Ye.onload=null,Ye.onerror=null,URL.revokeObjectURL(Ve);let be;Ae?(be=new Error("Image downloading has been canceled"),be.canceled=!0):be=new Error("Couldn't load the image"),be.event=Ie,de(be)},Ye.src=Ve}catch(Ie){Ie.url=Ve,de(Ie)}}),{cancel(){return Ae||(Ye.src="",Ae=!0),this}})}function Q(He){const nt=URL.createObjectURL(new Blob([He]));return j(nt)}function ne(He,nt,Ae={},Ve=document.createElement("canvas")){Ve.width=He.width,Ve.height=He.height;const Ye=Ve.getContext("2d",Ae);Ye.imageSmoothingEnabled=!1;let st=0,de=0;if(nt!=null){const Ie=Object(m.a)(Ve,nt);Ie&&({sourceX:st=0,sourceY:de=0}=Ie)}return Ye.drawImage(He,st,de),Ve}function ce(He,nt={}){const{force:Ae,exifOrientation:Ve,canvas:Ye,ctxOpts:st}=nt;let de=!1,Ie;return Object.assign(new Promise(async(be,Ce)=>{try{Ie=j(He,Ae);const Ue=await Ie;Ie=null;const Te=ne(Ue,Ve,st,Ye);if(await P(),de){const Le=new Error("Canvas rendering has been canceled");throw Le.canceled=!0,Le}be(Te)}catch(Ue){Ue.url||(Ue.url=He),Ce(Ue)}}),{cancel(){return de||(Ie&&Ie.cancel(),de=!0),this}})}function ee(He,nt){const Ae=window.URL.createObjectURL(He),Ve=document.createElement("a");Ve.style="display: none",Ve.href=Ae,Ve.download=nt,document.body.appendChild(Ve),Ve.click(),window.URL.revokeObjectURL(Ae),document.body.removeChild(Ve)}function B(He,nt){const Ae=document.createElement("a"),[Ve]=He.split(".").slice(-1);Ae.download=`${nt}.${Ve}`,Ae.href=He,Ae.click()}function $(){var He,nt,Ae;window.getSelection?(He=window.getSelection())!=null&&He.empty?window.getSelection().empty():(nt=window.getSelection())!=null&&nt.removeAllRanges&&window.getSelection().removeAllRanges():(Ae=document.selection)!=null&&Ae.empty&&document.selection.empty()}function oe(He){return window.btoa(new Uint8Array(He).reduce((nt,Ae)=>(nt.push(String.fromCharCode(Ae)),nt),[]).join(""))}async function Se(He,nt="SHA-256"){const Ae=typeof He;let Ve=He;Ae==="string"&&(Ve=I.encode(He));const Ye=await S.subtle.digest(nt,Ve);return oe(Ye)}const Fe=/^https?:\/\//;function ct(He){return Fe.test(He)?new URL(He):He.startsWith("/")?new URL(`${window.location.origin}${He}`):new URL(`${window.location.protocol}//${He}`)}}).call(this,o("f89ea08855b945937e0d").setImmediate)},"43dc208e88e30c9ffe7c":function(A,M,o){var h=o("87f7dcf567f6cc8e89ee");h(h.G,{global:o("1f598190b9f7d363a1ea")})},"43f03bbf7c8e2a7f6ddf":function(A,M){},"4472e7ddf5c6f4211d31":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("5882750e43d284620759"),g=Math.sqrt,m=Math.acosh;h(h.S+h.F*!(m&&Math.floor(m(Number.MAX_VALUE))==710&&m(1/0)==1/0),"Math",{acosh:function(S){return(S=+S)<1?NaN:S>9490626562425156e-8?Math.log(S)+Math.LN2:v(S-1+g(S-1)*g(S+1))}})},"44adedfa5e20cf4677ed":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("45e95ff7deb186b1032c"),g=Object.isExtensible;h(h.S,"Reflect",{isExtensible:function(b){return v(b),g?g(b):!0}})},"450b3767e93be2043860":function(A,M,o){"use strict";Object.defineProperty(M,"__esModule",{value:!0});const h=o("9d404a039029e9c320b2");class v{constructor(){this._queue=[]}enqueue(m,b){b=Object.assign({priority:0},b);const S={priority:b.priority,run:m};if(this.size&&this._queue[this.size-1].priority>=b.priority){this._queue.push(S);return}const I=h.default(this._queue,S,(T,P)=>P.priority-T.priority);this._queue.splice(I,0,S)}dequeue(){const m=this._queue.shift();return m&&m.run}get size(){return this._queue.length}}M.default=v},"45735fe721a4414435b2":function(A,M,o){o("f7f403ac48646c865a3e"),A.exports=o("04aabd2475089fa3cacd").Array.includes},"45e95ff7deb186b1032c":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8");A.exports=function(v){if(!h(v))throw TypeError(v+" is not an object!");return v}},"461c54c481961b5ed32b":function(A,M,o){var h=o("04ee658d61b391909b37"),v=Math.pow,g=v(2,-52),m=v(2,-23),b=v(2,127)*(2-m),S=v(2,-126),I=function(T){return T+1/g-1/g};A.exports=Math.fround||function(P){var D=Math.abs(P),U=h(P),Y,K;return D<S?U*I(D/S/m)*S*m:(Y=(1+m/g)*D,K=Y-(Y-D),K>b||K!=K?U*(1/0):U*K)}},"478c749716ad84331e6a":function(A,M,o){"use strict";var h=o("001050c0cd8d86fc5cb1");o("3091fc82fc780b1e9f35")({target:"RegExp",proto:!0,forced:h!==/./.exec},{exec:h})},"47ae23487d4b5e1ce60f":function(A,M){A.exports=Object.is||function(h,v){return h===v?h!==0||1/h===1/v:h!=h&&v!=v}},"47b1068e56d5f6625317":function(A,M,o){var h=o("87ca1990df7e5ce5f6d4"),v=o("7aff271e08d81419a9f8"),g=o("c445bef4faf25215ffcd");A.exports=function(m,b,S,I){var T=String(g(m)),P=T.length,D=S===void 0?" ":String(S),U=h(b);if(U<=P||D=="")return T;var Y=U-P,K=v.call(D,Math.ceil(Y/D.length));return K.length>Y&&(K=K.slice(0,Y)),I?K+T:T+K}},"47bc0b222ebc3b6db170":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=Math.abs;h(h.S,"Math",{hypot:function(m,b){for(var S=0,I=0,T=arguments.length,P=0,D,U;I<T;)D=v(arguments[I++]),P<D?(U=P/D,S=S*U*U+1,P=D):D>0?(U=D/P,S+=U*U):S+=D;return P===1/0?1/0:P*Math.sqrt(S)}})},"47dee86e2dd0d0ba81b0":function(A,M,o){"use strict";const h={ISSUE_CREATED:"issue_created",ISSUE_REMOVED:"issue_removed",OPENED:"opened",CLOSED:"closed",TAG_ADDED:"tag_added",TAG_REMOVED:"tag_removed",USER_ADDED:"user_added",USER_REMOVED:"user_removed",RENAMED:"renamed"}},"4a38cde5edb0024dff2d":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=Math.imul;h(h.S+h.F*o("126be16bb2f5f1c18403")(function(){return v(4294967295,5)!=-5||v.length!=2}),"Math",{imul:function(m,b){var S=65535,I=+m,T=+b,P=S&I,D=S&T;return 0|P*D+((S&I>>>16)*D+P*(S&T>>>16)<<16>>>0)}})},"4c97911b94deff98664d":function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("link",function(h){return function(g){return h(this,"a","href",g)}})},"4d27b4350a6aceebaebf":function(A,M,o){"use strict";const h={PASSED:"passed",FAILED:"failed"}},"4d435970f504c4554c69":function(A,M,o){var h=o("5e7f3152dbd5f68ea917"),v=o("018197c10a6ce8e48027"),g=o("d7a3c56d6fced4c51eb9")(!1),m=o("50afc5b514699956f7a1")("IE_PROTO");A.exports=function(b,S){var I=v(b),T=0,P=[],D;for(D in I)D!=m&&h(I,D)&&P.push(D);for(;S.length>T;)h(I,D=S[T++])&&(~g(P,D)||P.push(D));return P}},"4ed4f586f2caef2fd7a7":function(A,M,o){"use strict";const h={STOPPED:"stopped",RUNNING:"running"}},"4ed7163225e62e4f84b5":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("e9323032e98511a09e82").isFinite;h(h.S,"Number",{isFinite:function(m){return typeof m=="number"&&v(m)}})},"4f5240ab2841b269e5a3":function(A,M){},"4fd7a8c5b2fd7d7acd3f":function(A,M,o){},"4fd8fc0d281c748c8847":function(A,M,o){"use strict";var h=o("e9323032e98511a09e82"),v=o("5e7f3152dbd5f68ea917"),g=o("c4e1172cd86cf1507638"),m=o("3091fc82fc780b1e9f35"),b=o("26949bccb98fdb02c86a"),S=o("c815b7eba88e00c1c07a").KEY,I=o("126be16bb2f5f1c18403"),T=o("08135168150974c8d830"),P=o("e5a005c5c5eff4a503bf"),D=o("d3a44d49545c5d8bf631"),U=o("fdf9ec15fb80cd9b8df9"),Y=o("bde4caa0455b2360b39e"),K=o("cf000b6dbe8f01de602b"),X=o("c158e3d9570919e57f44"),W=o("a4bb2f14abe3755fd395"),j=o("45e95ff7deb186b1032c"),Q=o("0c6bdb2f1e107b092ad8"),ne=o("7964b54be5616e0032b3"),ce=o("018197c10a6ce8e48027"),ee=o("9bbb799f204bee898f0a"),B=o("9ba7c6b5067bc2a0c49c"),$=o("196ca7010a0a30f36bdf"),oe=o("ac7065bf7cbe983177aa"),Se=o("3c1abcaf432651c852c0"),Fe=o("7057fe086dddfd19f86c"),ct=o("f8cf2e7afd370478f99e"),He=o("2fc08ef14d334fbecb33"),nt=Se.f,Ae=ct.f,Ve=oe.f,Ye=h.Symbol,st=h.JSON,de=st&&st.stringify,Ie="prototype",be=U("_hidden"),Ce=U("toPrimitive"),Ue={}.propertyIsEnumerable,Te=T("symbol-registry"),Le=T("symbols"),yt=T("op-symbols"),Mt=Object[Ie],$t=typeof Ye=="function"&&!!Fe.f,on=h.QObject,un=!on||!on[Ie]||!on[Ie].findChild,Bn=g&&I(function(){return $(Ae({},"a",{get:function(){return Ae(this,"a",{value:7}).a}})).a!=7})?function(re,ie,De){var je=nt(Mt,ie);je&&delete Mt[ie],Ae(re,ie,De),je&&re!==Mt&&Ae(Mt,ie,je)}:Ae,qn=function(re){var ie=Le[re]=$(Ye[Ie]);return ie._k=re,ie},Rn=$t&&typeof Ye.iterator=="symbol"?function(re){return typeof re=="symbol"}:function(re){return re instanceof Ye},Fn=function(ie,De,je){return ie===Mt&&Fn(yt,De,je),j(ie),De=ee(De,!0),j(je),v(Le,De)?(je.enumerable?(v(ie,be)&&ie[be][De]&&(ie[be][De]=!1),je=$(je,{enumerable:B(0,!1)})):(v(ie,be)||Ae(ie,be,B(1,{})),ie[be][De]=!0),Bn(ie,De,je)):Ae(ie,De,je)},ai=function(ie,De){j(ie);for(var je=X(De=ce(De)),pt=0,Pt=je.length,Lt;Pt>pt;)Fn(ie,Lt=je[pt++],De[Lt]);return ie},hi=function(ie,De){return De===void 0?$(ie):ai($(ie),De)},Zn=function(ie){var De=Ue.call(this,ie=ee(ie,!0));return this===Mt&&v(Le,ie)&&!v(yt,ie)?!1:De||!v(this,ie)||!v(Le,ie)||v(this,be)&&this[be][ie]?De:!0},Yn=function(ie,De){if(ie=ce(ie),De=ee(De,!0),!(ie===Mt&&v(Le,De)&&!v(yt,De))){var je=nt(ie,De);return je&&v(Le,De)&&!(v(ie,be)&&ie[be][De])&&(je.enumerable=!0),je}},ei=function(ie){for(var De=Ve(ce(ie)),je=[],pt=0,Pt;De.length>pt;)!v(Le,Pt=De[pt++])&&Pt!=be&&Pt!=S&&je.push(Pt);return je},ki=function(ie){for(var De=ie===Mt,je=Ve(De?yt:ce(ie)),pt=[],Pt=0,Lt;je.length>Pt;)v(Le,Lt=je[Pt++])&&(!De||v(Mt,Lt))&&pt.push(Le[Lt]);return pt};$t||(Ye=function(){if(this instanceof Ye)throw TypeError("Symbol is not a constructor!");var ie=D(arguments.length>0?arguments[0]:void 0),De=function(je){this===Mt&&De.call(yt,je),v(this,be)&&v(this[be],ie)&&(this[be][ie]=!1),Bn(this,ie,B(1,je))};return g&&un&&Bn(Mt,ie,{configurable:!0,set:De}),qn(ie)},b(Ye[Ie],"toString",function(){return this._k}),Se.f=Yn,ct.f=Fn,o("f231974c81033140970d").f=oe.f=ei,o("777583f135984e6aaced").f=Zn,Fe.f=ki,g&&!o("5ac187c343d34c84f217")&&b(Mt,"propertyIsEnumerable",Zn,!0),Y.f=function(re){return qn(U(re))}),m(m.G+m.W+m.F*!$t,{Symbol:Ye});for(var q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),F=0;q.length>F;)U(q[F++]);for(var N=He(U.store),le=0;N.length>le;)K(N[le++]);m(m.S+m.F*!$t,"Symbol",{for:function(re){return v(Te,re+="")?Te[re]:Te[re]=Ye(re)},keyFor:function(ie){if(!Rn(ie))throw TypeError(ie+" is not a symbol!");for(var De in Te)if(Te[De]===ie)return De},useSetter:function(){un=!0},useSimple:function(){un=!1}}),m(m.S+m.F*!$t,"Object",{create:hi,defineProperty:Fn,defineProperties:ai,getOwnPropertyDescriptor:Yn,getOwnPropertyNames:ei,getOwnPropertySymbols:ki});var Oe=I(function(){Fe.f(1)});m(m.S+m.F*Oe,"Object",{getOwnPropertySymbols:function(ie){return Fe.f(ne(ie))}}),st&&m(m.S+m.F*(!$t||I(function(){var re=Ye();return de([re])!="[null]"||de({a:re})!="{}"||de(Object(re))!="{}"})),"JSON",{stringify:function(ie){for(var De=[ie],je=1,pt,Pt;arguments.length>je;)De.push(arguments[je++]);if(Pt=pt=De[1],!(!Q(pt)&&ie===void 0||Rn(ie)))return W(pt)||(pt=function(Lt,jt){if(typeof Pt=="function"&&(jt=Pt.call(this,Lt,jt)),!Rn(jt))return jt}),De[1]=pt,de.apply(st,De)}}),Ye[Ie][Ce]||o("fa9e288138e317a7a504")(Ye[Ie],Ce,Ye[Ie].valueOf),P(Ye,"Symbol"),P(Math,"Math",!0),P(h.JSON,"JSON",!0)},"503c1434b44b1a06d784":function(A,M){},"50632b5842f0e33f1900":function(A,M){},"508754ba5205778b9691":function(A,M,o){var h=o("018197c10a6ce8e48027"),v=o("3c1abcaf432651c852c0").f;o("de1b22d97612a36416e3")("getOwnPropertyDescriptor",function(){return function(m,b){return v(h(m),b)}})},"50afc5b514699956f7a1":function(A,M,o){var h=o("08135168150974c8d830")("keys"),v=o("d3a44d49545c5d8bf631");A.exports=function(g){return h[g]||(h[g]=v(g))}},"50ed7ca79dd21f190d8c":function(A,M,o){o("b79a51580fec545385a2"),A.exports=o("04aabd2475089fa3cacd").String.padEnd},"510c97a2832dee6670a2":function(A,M,o){"use strict";o.d(M,"b",function(){return T}),o.d(M,"a",function(){return W}),o.d(M,"c",function(){return ce});function h(B,$,oe){for(let Se=0;Se<$;++Se)if(B[oe*$*4+Se*4+3]!==0)return!1;return!0}function v(B,$,oe){for(let Se=0;Se<$;++Se)if(B.getImageData(Se,oe,1,1).data[3]!==0)return!1;return!0}function g(B,$,oe,Se,Fe){for(let ct=Se;ct<Fe;++ct)if(B[ct*$*4+oe*4+3]!==0)return!1;return!0}function m(B,$,oe,Se){for(let Fe=oe;Fe<Se;++Fe)if(B.getImageData($,Fe,1,1).data[3]!==0)return!1;return!0}function b(B,$,oe,Se={}){const Fe={left:0,top:0,right:$,bottom:oe,...Se};for(;Fe.top<Fe.bottom&&h(B,$,Fe.top);)Fe.top+=1;for(;Fe.bottom-1>Fe.top&&h(B,$,Fe.bottom-1);)Fe.bottom-=1;for(;Fe.left<Fe.right&&g(B,$,Fe.left,Fe.top,Fe.bottom);)Fe.left+=1;for(;Fe.right-1>Fe.left&&g(B,$,Fe.right-1,Fe.top,Fe.bottom);)Fe.right-=1;return Fe}function S(B,$={}){const oe={left:0,top:0,right:B.width,bottom:B.height,...$},Se=B.getContext("2d");for(;oe.top<oe.bottom&&v(Se,B.width,oe.top);)oe.top+=1;for(;oe.bottom-1>oe.top&&v(Se,B.width,oe.bottom-1);)oe.bottom-=1;for(;oe.left<oe.right&&m(Se,oe.left,oe.top,oe.bottom);)oe.left+=1;for(;oe.right-1>oe.left&&m(Se,oe.right-1,oe.top,oe.bottom);)oe.right-=1;return oe}function I(B){const $=B.getContext("webgl"),oe=new Uint8Array($.drawingBufferWidth*$.drawingBufferHeight*4);$.readPixels(0,0,$.drawingBufferWidth,$.drawingBufferHeight,$.RGBA,$.UNSIGNED_BYTE,oe);const Se=new ImageData(new Uint8ClampedArray(oe),$.drawingBufferWidth,$.drawingBufferHeight),Fe=document.createElement("canvas");Fe.width=$.drawingBufferWidth,Fe.height=$.drawingBufferHeight,Fe.getContext("2d").putImageData(Se,0,0);const He=document.createElement("canvas"),nt=He.getContext("2d");return He.width=Fe.width,He.height=Fe.height,nt.scale(1,-1),nt.drawImage(Fe,0,-Fe.height),He}function T(B=1,$=1,oe={}){const Se=document.createElement("canvas");return Se.width=B,Se.height=$,Se.getContext("2d",oe).clearRect(0,0,Se.width,Se.height),Se}function P(B,$){const Se=B.getContext("2d").getImageData($.left,$.top,$.width,$.height),Fe=document.createElement("canvas");return Fe.width=$.width,Fe.height=$.height,Fe.getContext("2d").putImageData(Se,0,0),Fe}function D(B){let $=B;$.getContext("2d")||($=I($));const oe=$.getContext("2d").getImageData(0,0,$.width,$.height).data,Se=b(oe,$.width,$.height),Fe={...Se,width:Se.right-Se.left,height:Se.bottom-Se.top};return!Fe.width||!Fe.height?{data:$,rect:{left:0,top:0,right:0,bottom:0}}:{data:P($,Fe),rect:Se}}function U(B,$=document.createElement("canvas")){if(B===$)return $;const oe=B.getContext("2d"),Se=$.getContext("2d",oe.getContextAttributes());Se.imageSmoothingEnabled=oe.imageSmoothingEnabled,Se.clearRect(0,0,$.width,$.height),$.width=B.width,$.height=B.height;const Fe=oe.getImageData(0,0,B.width,B.height);return Se.putImageData(Fe,0,0),$}function Y(B,$=B.width,oe=B.height){const Fe=B.getContext("2d").getImageData(0,0,$,oe).data;for(let ct=0;ct<oe;++ct)for(let He=0;He<$;++He){const nt=(ct*$+He)*4;if(Fe[nt+3]===255)return{left:He,top:ct}}return null}function K(B,$){const oe=B.getContext("2d");for(let Se=$.left;Se<=$.right;++Se)if(oe.getImageData(Se,$.bottom,1,1).data[3]===255)return{left:Se,top:$.bottom};return null}const X={2:(B,{width:$})=>{B.translate($,0),B.scale(-1,1)},3:(B,{width:$,height:oe})=>{B.translate($,oe),B.rotate(Math.PI)},4:(B,{height:$})=>{B.translate(0,$),B.scale(1,-1)},5:B=>{B.rotate(.5*Math.PI),B.scale(1,-1)},6:(B,{width:$,height:oe})=>(B.rotate(.5*Math.PI),B.translate(0,-oe),{sourceY:oe-$}),7:(B,{width:$,height:oe})=>(B.rotate(.5*Math.PI),B.translate($,-oe),B.scale(-1,1),{sourceX:$-oe,sourceY:oe-$}),8:(B,{width:$,height:oe})=>(B.rotate(-.5*Math.PI),B.translate(-$,0),{sourceX:$-oe})};function W(B,$){const oe=X[$];if(!oe)return null;if($>4){const Se=B.width;B.width=B.height,B.height=Se}return oe(B.getContext("2d"),B)}let j=null;const Q=["webgl2","webgl","experimental-webgl"];function ne(B,$){return!!document.createElement("canvas").getContext(B,$)}function ce(){var B;if(j)return j;const $={HW:!1,context:null,gl:null,supportedContexts:[]},oe={failIfMajorPerformanceCaveat:!0};if(Q.forEach(Se=>{ne(Se)&&($.supportedContexts.push(Se),$.HW||($.HW=ne(Se,oe)))}),$.supportedContexts.length&&($.context=$.supportedContexts[0]),(B=$.context)!=null&&B.includes("gl")){const Se=document.createElement("canvas").getContext($.context),Fe=Se.getExtension("WEBGL_debug_renderer_info");Object.assign($,{gl:Se,debugInfo:Fe,vendor:Se.getParameter(Fe.UNMASKED_VENDOR_WEBGL),renderer:Se.getParameter(Fe.UNMASKED_RENDERER_WEBGL),maxDimension:Se.getParameter(Se.MAX_TEXTURE_SIZE)})}return j=$,j}function ee(B,$){return B.getContext("2d").getImageData($.x,$.y,1,1).data[3]!==255}},"513ff0a21cbd89023aaa":function(A,M,o){A.exports=!o("c4e1172cd86cf1507638")&&!o("126be16bb2f5f1c18403")(function(){return Object.defineProperty(o("e3529c4c6a770b1dc792")("div"),"a",{get:function(){return 7}}).a!=7})},"514c53a7f7ee5bb3f19c":function(A,M){},"51725718c931bf2403ad":function(A,M,o){"use strict";o("6bb100c8669d039879cc"),o("45735fe721a4414435b2"),o("da66b305989709f1ddae"),o("999f40c905f47478492e"),o("50ed7ca79dd21f190d8c"),o("ee17858ad5a5249b6394"),o("89d7075fd9d79fd622e8"),o("09bed7c447c8f2f0a270"),o("b6577707b4602dd7f707"),o("3960012d53d35dc6bc9a"),o("223d2d46998a5ea6eb7c"),o("6f072a5af9a31516a723"),o("9ed3fe8e5d6c7be2b02f"),o("2adb16b6b2c933a04d61")},"5182e0db115b52539b17":function(A,M,o){var h=o("c021bf2eaf2f2e721a6e"),v=o("7964b54be5616e0032b3"),g=o("ba5246ed31a79503d644"),m=o("87ca1990df7e5ce5f6d4");A.exports=function(b,S,I,T,P){h(S);var D=v(b),U=g(D),Y=m(D.length),K=P?Y-1:0,X=P?-1:1;if(I<2)for(;;){if(K in U){T=U[K],K+=X;break}if(K+=X,P?K<0:Y<=K)throw TypeError("Reduce of empty array with no initial value")}for(;P?K>=0:Y>K;K+=X)K in U&&(T=S(T,U[K],K,D));return T}},"5184b29ba7901b1fa0ba":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("dff1687ed27eabf28b37"),g=String.fromCharCode,m=String.fromCodePoint;h(h.S+h.F*(!!m&&m.length!=1),"String",{fromCodePoint:function(S){for(var I=[],T=arguments.length,P=0,D;T>P;){if(D=+arguments[P++],v(D,1114111)!==D)throw RangeError(D+" is not a valid code point");I.push(D<65536?g(D):g(((D-=65536)>>10)+55296,D%1024+56320))}return I.join("")}})},"51e20fe704a825a381e6":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Object",{setPrototypeOf:o("931ac916c4b89621b3bd").set})},"5354c482095f5ead6005":function(A,M,o){"use strict";var h=o("00f83bf39a29e0b57d1f"),v=o.n(h),g=o("007e2f901f143b0063bb"),m=o("01d16a391b82cbd5b98a");const b={DEFAULT:"DEFAULT",GENERAL:"GENERAL",PROJECTS:"PROJECTS",DATASETS:"DATASETS",CLASSES:"CLASSES",PROJECTS_TAGS:"PROJECTS_TAGS",IMAGES:"IMAGES",FIGURES:"FIGURES",NODES:"NODES",MEMBERS:"MEMBERS",TEAMS:"TEAMS",WORKSPACES:"WORKSPACES",JOBS:"JOBS",TASKS:"TASKS",PLUGINS:"PLUGINS",ISSUES:"ISSUES",PYTHON_NOTEBOOKS:"PYTHON_NOTEBOOKS"},S={[b.DEFAULT]:"default",[b.GENERAL]:{NN:"nn",DTL:"dtl",NODES:"nodes",IMPORT:"import"},[b.PROJECTS]:{LIST:"projects.list",VIEW:"projects.view",CREATE:"projects.create",UPDATE:"projects.update",REMOVE:"projects.remove",REMOVE_ALL:"projects.removeAll"},[b.TEAMS]:{CREATE:"teams.create",UPDATE:"teams.update",REMOVE:"teams.remove",REMOVE_ALL:"teams.removeAll"},[b.WORKSPACES]:{LIST:"workspaces.list",VIEW:"workspaces.view",CREATE:"workspaces.create",UPDATE:"workspaces.update",REMOVE:"workspaces.remove",REMOVE_ALL:"workspaces.removeAll"},[b.MEMBERS]:{LIST:"members.list",VIEW:"members.view",CREATE:"members.create",UPDATE:"members.update",REMOVE:"members.remove",REMOVE_ALL:"members.removeAll"},[b.PLUGINS]:{LIST:"plugins.list",VIEW:"plugins.view",CREATE:"plugins.create",UPDATE:"plugins.update",REMOVE:"plugins.remove",REMOVE_ALL:"plugins.removeAll"},[b.DATASETS]:{LIST:"datasets.list",VIEW:"datasets.view",CREATE:"datasets.create",UPDATE:"datasets.update",REMOVE:"datasets.remove"},[b.CLASSES]:{LIST:"classes.list",VIEW:"classes.view",CREATE:"classes.create",UPDATE:"classes.update",REMOVE:"classes.remove"},[b.PROJECTS_TAGS]:{LIST:"projects_tags.list",VIEW:"projects_tags.view",CREATE:"projects_tags.create",UPDATE:"projects_tags.update",REMOVE:"projects_tags.remove"},[b.IMAGES]:{LIST:"images.list",VIEW:"images.view",CREATE:"images.create",UPDATE:"images.update",REMOVE:"images.remove"},[b.FIGURES]:{LIST:"figures.list",VIEW:"figures.view",CREATE:"figures.create",UPDATE:"figures.update",REMOVE:"figures.remove",REMOVE_ALL:"figures.removeAll"},[b.NODES]:{LIST:"nodes.list",VIEW:"nodes.view",CREATE:"nodes.create",UPDATE:"nodes.update",REMOVE:"nodes.remove"},[b.JOBS]:{LIST:"jobs.list",LIST_ALL:"jobs.listAll",VIEW:"jobs.view",CREATE:"jobs.create",UPDATE:"jobs.update",REMOVE:"jobs.remove",FINISH_DISABLED:"jobs.finishDisabled"},[b.TASKS]:{LIST:"tasks.list"},[b.PYTHON_NOTEBOOKS]:{LIST:"python_notebooks.list"},[b.ISSUES]:{LIST:"issues.list",VIEW:"issues.view",CREATE:"issues.create",UPDATE:"issues.update",UPDATE_ALL:"issues.updateAll",REMOVE:"issues.remove",REMOVE_ALL:"issues.removeAll"}},I={},T=new Set;Object(h.each)(S,(Q,ne)=>{if(typeof Q=="string"){I[Q]=ne;return}Object(h.each)(Q,ce=>{if(m.c&&T.has(ce))throw new Error(`Duplicate path "${ce}" in ACL_ACTIONS`);T.add(ce),I[ce]=ne})});const P=Object.keys(Object(h.omit)(I,"default")).filter(Q=>Q!==S.JOBS.FINISH_DISABLED).map(Q=>({action:Q})),D=[S.MEMBERS.UPDATE,S.MEMBERS.CREATE,S.ISSUES.UPDATE_ALL,S.MEMBERS.REMOVE_ALL,S.JOBS.FINISH_DISABLED],U=P.filter(Q=>Q.action===S.FIGURES.REMOVE_ALL?!0:!(Q.action.includes("removeAll")||D.includes(Q.action))),Y=[{action:S.PROJECTS.VIEW},{action:S.DATASETS.LIST},{action:S.DATASETS.VIEW},{action:S.CLASSES.LIST},{action:S.CLASSES.VIEW},{action:S.PROJECTS_TAGS.LIST},{action:S.PROJECTS_TAGS.VIEW},{action:S.IMAGES.LIST},{action:S.IMAGES.VIEW},{action:S.IMAGES.UPDATE},{action:S.FIGURES.LIST},{action:S.FIGURES.VIEW},{action:S.NODES.LIST},{action:S.NODES.VIEW},{action:S.WORKSPACES.VIEW},{action:S.JOBS.LIST},{action:S.JOBS.VIEW},{action:S.JOBS.UPDATE},{action:S.FIGURES.CREATE},{action:S.FIGURES.UPDATE},{action:S.FIGURES.REMOVE},{action:S.ISSUES.LIST},{action:S.ISSUES.VIEW},{action:S.ISSUES.CREATE},{action:S.ISSUES.UPDATE},{action:S.ISSUES.REMOVE}],K=[{action:S.WORKSPACES.LIST},{action:S.WORKSPACES.VIEW},{action:S.PROJECTS.LIST},{action:S.PROJECTS.VIEW},{action:S.DATASETS.LIST},{action:S.DATASETS.VIEW},{action:S.CLASSES.LIST},{action:S.CLASSES.VIEW},{action:S.PROJECTS_TAGS.LIST},{action:S.PROJECTS_TAGS.VIEW},{action:S.IMAGES.LIST},{action:S.IMAGES.VIEW},{action:S.FIGURES.LIST},{action:S.FIGURES.VIEW},{action:S.ISSUES.LIST},{action:S.ISSUES.VIEW}],X=[...K,{action:S.PROJECTS.UPDATE},{action:S.DATASETS.UPDATE},{action:S.CLASSES.UPDATE},{action:S.PROJECTS_TAGS.CREATE},{action:S.PROJECTS_TAGS.UPDATE},{action:S.IMAGES.UPDATE},{action:S.FIGURES.CREATE},{action:S.FIGURES.UPDATE},{action:S.FIGURES.REMOVE},{action:S.FIGURES.REMOVE_ALL},{action:S.NODES.UPDATE},{action:S.TEAMS.UPDATE},{action:S.WORKSPACES.UPDATE},{action:S.JOBS.LIST_ALL},{action:S.JOBS.LIST},{action:S.JOBS.VIEW},{action:S.JOBS.CREATE},{action:S.JOBS.UPDATE},{action:S.JOBS.REMOVE},{action:S.MEMBERS.LIST},{action:S.MEMBERS.VIEW},{action:S.MEMBERS.CREATE},{action:S.MEMBERS.UPDATE},{action:S.MEMBERS.REMOVE},{action:S.ISSUES.CREATE},{action:S.ISSUES.UPDATE},{action:S.ISSUES.REMOVE}],W=[...Y,{action:S.JOBS.LIST_ALL},{action:S.JOBS.CREATE}],j={[g.a.ADMIN]:P,[g.a.DEVELOPER]:U,[g.a.MANAGER]:X,[g.a.REVIEWER]:W,[g.a.ANNOTATOR]:Y,[g.a.VIEWER]:K}},"535ac84cb5f48966583a":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("196ca7010a0a30f36bdf"),g=o("c021bf2eaf2f2e721a6e"),m=o("45e95ff7deb186b1032c"),b=o("0c6bdb2f1e107b092ad8"),S=o("126be16bb2f5f1c18403"),I=o("a04bbd0adfe65b3c1c6b"),T=(o("e9323032e98511a09e82").Reflect||{}).construct,P=S(function(){function U(){}return!(T(function(){},[],U)instanceof U)}),D=!S(function(){T(function(){})});h(h.S+h.F*(P||D),"Reflect",{construct:function(Y,K){g(Y),m(K);var X=arguments.length<3?Y:g(arguments[2]);if(D&&!P)return T(Y,K,X);if(Y==X){switch(K.length){case 0:return new Y;case 1:return new Y(K[0]);case 2:return new Y(K[0],K[1]);case 3:return new Y(K[0],K[1],K[2]);case 4:return new Y(K[0],K[1],K[2],K[3])}var W=[null];return W.push.apply(W,K),new(I.apply(Y,W))}var j=X.prototype,Q=v(b(j)?j:Object.prototype),ne=Function.apply.call(Y,Q,K);return b(ne)?ne:Q}})},"54cfdce5cc3857e21734":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Array",{isArray:o("a4bb2f14abe3755fd395")})},"554e5f3efd77c5c38f33":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=Math.atanh;h(h.S+h.F*!(v&&1/v(-0)<0),"Math",{atanh:function(m){return(m=+m)==0?m:Math.log((1+m)/(1-m))/2}})},"564382267519ae7fa9d8":function(A,M){(function(){A.exports=window.Vue})()},"5711e5187c61473cfa4a":function(A,M){A.exports=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},"5760c5a16066c01be8f5":function(A,M,o){var h=o("45e95ff7deb186b1032c"),v=o("c021bf2eaf2f2e721a6e"),g=o("fdf9ec15fb80cd9b8df9")("species");A.exports=function(m,b){var S=h(m).constructor,I;return S===void 0||(I=h(S)[g])==null?b:v(I)}},"58120975311f29ad6be8":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("5182e0db115b52539b17");h(h.P+h.F*!o("155fc47f5eef242ee51b")([].reduce,!0),"Array",{reduce:function(m){return v(this,m,arguments.length,arguments[1],!1)}})},"58439ceabab7ac0bd6c9":function(A,M,o){"use strict";var h=o("5d61e0aac58adeaf65c8"),v=o("c815b7eba88e00c1c07a").getWeak,g=o("45e95ff7deb186b1032c"),m=o("0c6bdb2f1e107b092ad8"),b=o("dde7c1ae034e12bce98a"),S=o("1017580665ebda702ba4"),I=o("409f063042ff82279e38"),T=o("5e7f3152dbd5f68ea917"),P=o("8e52fe7d9c78070c4cb8"),D=I(5),U=I(6),Y=0,K=function(j){return j._l||(j._l=new X)},X=function(){this.a=[]},W=function(j,Q){return D(j.a,function(ne){return ne[0]===Q})};X.prototype={get:function(j){var Q=W(this,j);if(Q)return Q[1]},has:function(j){return!!W(this,j)},set:function(j,Q){var ne=W(this,j);ne?ne[1]=Q:this.a.push([j,Q])},delete:function(j){var Q=U(this.a,function(ne){return ne[0]===j});return~Q&&this.a.splice(Q,1),!!~Q}},A.exports={getConstructor:function(j,Q,ne,ce){var ee=j(function(B,$){b(B,ee,Q,"_i"),B._t=Q,B._i=Y++,B._l=void 0,$!=null&&S($,ne,B[ce],B)});return h(ee.prototype,{delete:function(B){if(!m(B))return!1;var $=v(B);return $===!0?K(P(this,Q)).delete(B):$&&T($,this._i)&&delete $[this._i]},has:function($){if(!m($))return!1;var oe=v($);return oe===!0?K(P(this,Q)).has($):oe&&T(oe,this._i)}}),ee},def:function(j,Q,ne){var ce=v(g(Q),!0);return ce===!0?K(j).set(Q,ne):ce[j._i]=ne,j},ufstore:K}},"5876083bb9ee654f7a47":function(A,M,o){"use strict";var h=o("abe6c77689592409700a"),v=o("45e95ff7deb186b1032c"),g=o("5760c5a16066c01be8f5"),m=o("d53b0841ddd3afd3477d"),b=o("87ca1990df7e5ce5f6d4"),S=o("cd27c57942366dd9e816"),I=o("001050c0cd8d86fc5cb1"),T=o("126be16bb2f5f1c18403"),P=Math.min,D=[].push,U="split",Y="length",K="lastIndex",X=4294967295,W=!T(function(){RegExp(X,"y")});o("6e329e616ad9c45fb7bd")("split",2,function(j,Q,ne,ce){var ee;return"abbc"[U](/(b)*/)[1]=="c"||"test"[U](/(?:)/,-1)[Y]!=4||"ab"[U](/(?:ab)*/)[Y]!=2||"."[U](/(.?)(.?)/)[Y]!=4||"."[U](/()()/)[Y]>1||""[U](/.?/)[Y]?ee=function(B,$){var oe=String(this);if(B===void 0&&$===0)return[];if(!h(B))return ne.call(oe,B,$);for(var Se=[],Fe=(B.ignoreCase?"i":"")+(B.multiline?"m":"")+(B.unicode?"u":"")+(B.sticky?"y":""),ct=0,He=$===void 0?X:$>>>0,nt=new RegExp(B.source,Fe+"g"),Ae,Ve,Ye;(Ae=I.call(nt,oe))&&(Ve=nt[K],!(Ve>ct&&(Se.push(oe.slice(ct,Ae.index)),Ae[Y]>1&&Ae.index<oe[Y]&&D.apply(Se,Ae.slice(1)),Ye=Ae[0][Y],ct=Ve,Se[Y]>=He)));)nt[K]===Ae.index&&nt[K]++;return ct===oe[Y]?(Ye||!nt.test(""))&&Se.push(""):Se.push(oe.slice(ct)),Se[Y]>He?Se.slice(0,He):Se}:"0"[U](void 0,0)[Y]?ee=function(B,$){return B===void 0&&$===0?[]:ne.call(this,B,$)}:ee=ne,[function($,oe){var Se=j(this),Fe=$==null?void 0:$[Q];return Fe!==void 0?Fe.call($,Se,oe):ee.call(String(Se),$,oe)},function(B,$){var oe=ce(ee,B,this,$,ee!==ne);if(oe.done)return oe.value;var Se=v(B),Fe=String(this),ct=g(Se,RegExp),He=Se.unicode,nt=(Se.ignoreCase?"i":"")+(Se.multiline?"m":"")+(Se.unicode?"u":"")+(W?"y":"g"),Ae=new ct(W?Se:"^(?:"+Se.source+")",nt),Ve=$===void 0?X:$>>>0;if(Ve===0)return[];if(Fe.length===0)return S(Ae,Fe)===null?[Fe]:[];for(var Ye=0,st=0,de=[];st<Fe.length;){Ae.lastIndex=W?st:0;var Ie=S(Ae,W?Fe:Fe.slice(st)),be;if(Ie===null||(be=P(b(Ae.lastIndex+(W?0:st)),Fe.length))===Ye)st=m(Fe,st,He);else{if(de.push(Fe.slice(Ye,st)),de.length===Ve)return de;for(var Ce=1;Ce<=Ie.length-1;Ce++)if(de.push(Ie[Ce]),de.length===Ve)return de;st=Ye=be}}return de.push(Fe.slice(Ye)),de}]})},"5882750e43d284620759":function(A,M){A.exports=Math.log1p||function(h){return(h=+h)>-1e-8&&h<1e-8?h-h*h/2:Math.log(1+h)}},"59548a76725c1a44390b":function(A,M,o){"use strict";const h={UPLOADED:"uploaded",UPLOADING:"uploading",AGENT:"agent",SCHEDULED:"scheduled"}},"59f1b6605b24f530994c":function(A,M){},"5a5e6190b21cadaba93e":function(A,M,o){o("43dc208e88e30c9ffe7c"),A.exports=o("a7e34d1f69e759ea99df").global},"5ac187c343d34c84f217":function(A,M){A.exports=!1},"5ad613f51b5371adff79":function(A,M,o){},"5ae4526fd42355c63c48":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Reflect",{has:function(g,m){return m in g}})},"5bb6cfbb6a15beb75e86":function(A,M,o){var h=o("fdf9ec15fb80cd9b8df9")("match");A.exports=function(v){var g=/./;try{"/./"[v](g)}catch{try{return g[h]=!1,!"/./"[v](g)}catch{}}return!0}},"5caa81c6f36584a9fe4e":function(A,M,o){"use strict";const h=o("b23b3840b87c6a4cbe4f"),v=Symbol("max"),g=Symbol("length"),m=Symbol("lengthCalculator"),b=Symbol("allowStale"),S=Symbol("maxAge"),I=Symbol("dispose"),T=Symbol("noDisposeOnSet"),P=Symbol("lruList"),D=Symbol("cache"),U=Symbol("updateAgeOnGet"),Y=()=>1;class K{constructor(B){if(typeof B=="number"&&(B={max:B}),B||(B={}),B.max&&(typeof B.max!="number"||B.max<0))throw new TypeError("max must be a non-negative number");const $=this[v]=B.max||1/0,oe=B.length||Y;if(this[m]=typeof oe!="function"?Y:oe,this[b]=B.stale||!1,B.maxAge&&typeof B.maxAge!="number")throw new TypeError("maxAge must be a number");this[S]=B.maxAge||0,this[I]=B.dispose,this[T]=B.noDisposeOnSet||!1,this[U]=B.updateAgeOnGet||!1,this.reset()}set max(B){if(typeof B!="number"||B<0)throw new TypeError("max must be a non-negative number");this[v]=B||1/0,j(this)}get max(){return this[v]}set allowStale(B){this[b]=!!B}get allowStale(){return this[b]}set maxAge(B){if(typeof B!="number")throw new TypeError("maxAge must be a non-negative number");this[S]=B,j(this)}get maxAge(){return this[S]}set lengthCalculator(B){typeof B!="function"&&(B=Y),B!==this[m]&&(this[m]=B,this[g]=0,this[P].forEach($=>{$.length=this[m]($.value,$.key),this[g]+=$.length})),j(this)}get lengthCalculator(){return this[m]}get length(){return this[g]}get itemCount(){return this[P].length}rforEach(B,$){$=$||this;for(let oe=this[P].tail;oe!==null;){const Se=oe.prev;ce(this,B,oe,$),oe=Se}}forEach(B,$){$=$||this;for(let oe=this[P].head;oe!==null;){const Se=oe.next;ce(this,B,oe,$),oe=Se}}keys(){return this[P].toArray().map(B=>B.key)}values(){return this[P].toArray().map(B=>B.value)}reset(){this[I]&&this[P]&&this[P].length&&this[P].forEach(B=>this[I](B.key,B.value)),this[D]=new Map,this[P]=new h,this[g]=0}dump(){return this[P].map(B=>W(this,B)?!1:{k:B.key,v:B.value,e:B.now+(B.maxAge||0)}).toArray().filter(B=>B)}dumpLru(){return this[P]}set(B,$,oe){if(oe=oe||this[S],oe&&typeof oe!="number")throw new TypeError("maxAge must be a number");const Se=oe?Date.now():0,Fe=this[m]($,B);if(this[D].has(B)){if(Fe>this[v])return Q(this,this[D].get(B)),!1;const nt=this[D].get(B).value;return this[I]&&(this[T]||this[I](B,nt.value)),nt.now=Se,nt.maxAge=oe,nt.value=$,this[g]+=Fe-nt.length,nt.length=Fe,this.get(B),j(this),!0}const ct=new ne(B,$,Fe,Se,oe);return ct.length>this[v]?(this[I]&&this[I](B,$),!1):(this[g]+=ct.length,this[P].unshift(ct),this[D].set(B,this[P].head),j(this),!0)}has(B){if(!this[D].has(B))return!1;const $=this[D].get(B).value;return!W(this,$)}get(B){return X(this,B,!0)}peek(B){return X(this,B,!1)}pop(){const B=this[P].tail;return B?(Q(this,B),B.value):null}del(B){Q(this,this[D].get(B))}load(B){this.reset();const $=Date.now();for(let oe=B.length-1;oe>=0;oe--){const Se=B[oe],Fe=Se.e||0;if(Fe===0)this.set(Se.k,Se.v);else{const ct=Fe-$;ct>0&&this.set(Se.k,Se.v,ct)}}}prune(){this[D].forEach((B,$)=>X(this,$,!1))}}const X=(ee,B,$)=>{const oe=ee[D].get(B);if(oe){const Se=oe.value;if(W(ee,Se)){if(Q(ee,oe),!ee[b])return}else $&&(ee[U]&&(oe.value.now=Date.now()),ee[P].unshiftNode(oe));return Se.value}},W=(ee,B)=>{if(!B||!B.maxAge&&!ee[S])return!1;const $=Date.now()-B.now;return B.maxAge?$>B.maxAge:ee[S]&&$>ee[S]},j=ee=>{if(ee[g]>ee[v])for(let B=ee[P].tail;ee[g]>ee[v]&&B!==null;){const $=B.prev;Q(ee,B),B=$}},Q=(ee,B)=>{if(B){const $=B.value;ee[I]&&ee[I]($.key,$.value),ee[g]-=$.length,ee[D].delete($.key),ee[P].removeNode(B)}};class ne{constructor(B,$,oe,Se,Fe){this.key=B,this.value=$,this.length=oe,this.now=Se,this.maxAge=Fe||0}}const ce=(ee,B,$,oe)=>{let Se=$.value;W(ee,Se)&&(Q(ee,$),ee[b]||(Se=void 0)),Se&&B.call(oe,Se.value,Se.key,ee)};A.exports=K},"5d1a9382f9802de0586b":function(A,M){},"5d61e0aac58adeaf65c8":function(A,M,o){var h=o("26949bccb98fdb02c86a");A.exports=function(v,g,m){for(var b in g)h(v,b,g[b],m);return v}},"5e7f3152dbd5f68ea917":function(A,M){var o={}.hasOwnProperty;A.exports=function(h,v){return o.call(h,v)}},"5e9485937437b41756f7":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("45e95ff7deb186b1032c"),g=Object.preventExtensions;h(h.S,"Reflect",{preventExtensions:function(b){v(b);try{return g&&g(b),!0}catch{return!1}}})},"5fe27eddff92ec2dbac5":function(A,M,o){"use strict";const h={APPROVED:"approved",REJECTED:"rejected",REVIEWABLE:"reviewable",NONE:"none"},v={title:{label:"Title",column:"title",direction:"asc"},updatedAt:{label:"Updated at",column:"updatedAt",direction:"desc"},objectsCount:{label:"Figures count",column:"objectsCount",direction:"desc"}},g={SAGITTAL:"sagittal",CORONAL:"coronal",AXIAL:"axial"},m={LOCAL:1,REMOTE:2}},"5fff38dc6894e11cedd3":function(A,M,o){"use strict";var h=o("e9323032e98511a09e82"),v=o("3091fc82fc780b1e9f35"),g=o("26949bccb98fdb02c86a"),m=o("5d61e0aac58adeaf65c8"),b=o("c815b7eba88e00c1c07a"),S=o("1017580665ebda702ba4"),I=o("dde7c1ae034e12bce98a"),T=o("0c6bdb2f1e107b092ad8"),P=o("126be16bb2f5f1c18403"),D=o("78c9141ecce69548150c"),U=o("e5a005c5c5eff4a503bf"),Y=o("cd27856869d7952ccbe4");A.exports=function(K,X,W,j,Q,ne){var ce=h[K],ee=ce,B=Q?"set":"add",$=ee&&ee.prototype,oe={},Se=function(Ve){var Ye=$[Ve];g($,Ve,Ve=="delete"?function(st){return ne&&!T(st)?!1:Ye.call(this,st===0?0:st)}:Ve=="has"?function(de){return ne&&!T(de)?!1:Ye.call(this,de===0?0:de)}:Ve=="get"?function(de){return ne&&!T(de)?void 0:Ye.call(this,de===0?0:de)}:Ve=="add"?function(de){return Ye.call(this,de===0?0:de),this}:function(de,Ie){return Ye.call(this,de===0?0:de,Ie),this})};if(typeof ee!="function"||!(ne||$.forEach&&!P(function(){new ee().entries().next()})))ee=j.getConstructor(X,K,Q,B),m(ee.prototype,W),b.NEED=!0;else{var Fe=new ee,ct=Fe[B](ne?{}:-0,1)!=Fe,He=P(function(){Fe.has(1)}),nt=D(function(Ve){new ee(Ve)}),Ae=!ne&&P(function(){for(var Ve=new ee,Ye=5;Ye--;)Ve[B](Ye,Ye);return!Ve.has(-0)});nt||(ee=X(function(Ve,Ye){I(Ve,ee,K);var st=Y(new ce,Ve,ee);return Ye!=null&&S(Ye,Q,st[B],st),st}),ee.prototype=$,$.constructor=ee),(He||Ae)&&(Se("delete"),Se("has"),Q&&Se("get")),(Ae||ct)&&Se(B),ne&&$.clear&&delete $.clear}return U(ee,K),oe[K]=ee,v(v.G+v.W+v.F*(ee!=ce),oe),ne||j.setStrong(ee,K,Q),ee}},"61cdea2d1e51a5b243cc":function(A,M,o){"use strict";o("3ed595a38226ae2a3783")("trimLeft",function(h){return function(){return h(this,1)}},"trimStart")},"61f7f1a0425956683498":function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("fontcolor",function(h){return function(g){return h(this,"font","color",g)}})},"648f39bb5d52ff46b948":function(A,M,o){"use strict";var h=o("e9323032e98511a09e82"),v=o("f8cf2e7afd370478f99e"),g=o("c4e1172cd86cf1507638"),m=o("fdf9ec15fb80cd9b8df9")("species");A.exports=function(b){var S=h[b];g&&S&&!S[m]&&v.f(S,m,{configurable:!0,get:function(){return this}})}},"65a4885fa6702342655b":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8"),v=Math.floor;A.exports=function(m){return!h(m)&&isFinite(m)&&v(m)===m}},"66e4032f81bde6d04705":function(A,M,o){"use strict";var h=o("9e0829ebb5f4d9754370");const v=[h.TASK_STATUS.DEPLOYED,h.TASK_STATUS.STARTED,h.TASK_STATUS.CONSUMED,h.TASK_STATUS.QUEUED],g=5,m=10*60*1e3},"6701f4ec6c20f421ba7e":function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("bold",function(h){return function(){return h(this,"b","","")}})},"6726a24e1f919f00a22d":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.G+h.W+h.F*!o("fe764323ef07c8632dee").ABV,{DataView:o("b69b6a982b1b19fc5d05").DataView})},"6a927222a29e571499a4":function(A,M){A.exports=function(o){return o.webpackPolyfill||(o.deprecate=function(){},o.paths=[],o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function(){return o.i}}),o.webpackPolyfill=1),o}},"6ae02b075e3300a8a961":function(A,M){var o=Math.ceil,h=Math.floor;A.exports=function(v){return isNaN(v=+v)?0:(v>0?h:o)(v)}},"6b2cac041904481ec760":function(A,M){A.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},"6b4d0505d51aabe15cdc":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("e62dc567c284e4bc74ce")(!1);h(h.S,"Object",{values:function(m){return v(m)}})},"6bb100c8669d039879cc":function(A,M,o){o("4fd8fc0d281c748c8847"),o("1d7f3399faa607526bcf"),o("9d50a62ba428c5ce2b9a"),o("3af61898f92c68583af6"),o("508754ba5205778b9691"),o("12c08cd1c1bfb264dfd3"),o("9019a25da5c83bba91f5"),o("7a8c0a2ddedb2e5173f7"),o("1fdd1d1f4ae40187e23a"),o("0a93e1753ab882f1bcc1"),o("384615f8398e34c53dc1"),o("2c9e099ec16690e18dba"),o("38e8f2237f70a4d445da"),o("fe476b93fc81da67ab58"),o("062ebb4cd1f064f475b1"),o("e5b971bc8bb0de02fc32"),o("51e20fe704a825a381e6"),o("837318cf930116dad7c8"),o("c5b98fbfdccc42a05514"),o("9f08e9001860e8298a1e"),o("b63c7fc01af95038896e"),o("89da558eb419a20b34fa"),o("ac1d26ab250b2816f917"),o("ea4541a64899b388d99e"),o("407762f419b7b83c5128"),o("8d4bcdca9e41ff6073d3"),o("41213ed7cbab04f4f6b8"),o("4ed7163225e62e4f84b5"),o("0be694b91b40b5d52b18"),o("88734153ed272633da95"),o("1381daceeb3edb5d5ae6"),o("9b4be2be45237b9b063c"),o("4159678bf1ccecc082b5"),o("7758eac80019eeaedca3"),o("a08f35325b69240b6708"),o("4472e7ddf5c6f4211d31"),o("33a6e78da69756968b6d"),o("554e5f3efd77c5c38f33"),o("d2c53214e38be825b200"),o("95922b3ca6d07125e633"),o("c2206f450d5acd9005bb"),o("800e03bea47105b47084"),o("a8252bdb36ad211e45c8"),o("47bc0b222ebc3b6db170"),o("4a38cde5edb0024dff2d"),o("85603e2079f30ad6951f"),o("6cf95dd29f8562db60d2"),o("c8df7166b31cd74f9370"),o("887fb8f78bb3b846744d"),o("eecfd43fe1eb02019c64"),o("ff393f9713515a894575"),o("27c6b71bfad7bcdd7446"),o("5184b29ba7901b1fa0ba"),o("2ce6c2b0f7511319300d"),o("75bb2ef820cf0cf3e71f"),o("d183bd276413858f65a2"),o("89fc59158ec6ce874009"),o("13856750cdf35b593067"),o("28a0a538e4afd2700160"),o("d26a97cc4ba74aafd904"),o("f502a2c38396f007c6a7"),o("a8aa164a5b18213dd613"),o("c6243458ed115fa89147"),o("fe4423369110d999364f"),o("6701f4ec6c20f421ba7e"),o("30706da34b5ad9786ce4"),o("61f7f1a0425956683498"),o("aa2ddfdc77fbdd850fc6"),o("2b521e652ec97b3b1e3d"),o("4c97911b94deff98664d"),o("f5c330229109f090ccbb"),o("dca99cbc945b0bcf9943"),o("c45f65fd1d2862799856"),o("de5c1fcbe332feb4e867"),o("b67e039c3485635fb25d"),o("d78041f21fabadba9cdd"),o("2e10a432ac9e5ef82d8c"),o("d6282c20c3a716bb4d6e"),o("97a1e10f13654fb102b2"),o("54cfdce5cc3857e21734"),o("40847ada58467826e6ac"),o("2589b998897fb766bd14"),o("a87f574281231bdc4f86"),o("fdfd04fea7fd66d8827a"),o("750389d638265f4d2691"),o("be1cb19a024036404bc8"),o("231fc3d41bac5fd7193b"),o("aee866c649d1fbfdb85e"),o("7e1f163f9d0c5905dcba"),o("6befd8a5e9fed39bcf0a"),o("58120975311f29ad6be8"),o("15bc2b4f6cdaf31bd83a"),o("1de892d5d25be2b2ee16"),o("cf662a5f72286150b4ab"),o("03bded7537006b17ba62"),o("3e2a70dfbaa4ecfe828b"),o("e9d111c27df40fd87819"),o("bcdf52108f8898bbcfd0"),o("ee85e0acda45d892f72d"),o("ae69b05663ee2a381de0"),o("7c0e1d7b05d19145c76d"),o("478c749716ad84331e6a"),o("9cfb42aa9f0141d2f922"),o("78937e5a384dd7a10b59"),o("9ecc4731eaeedd6a41c0"),o("2b120026aa412fb5cb8e"),o("c719983161461ad179dd"),o("5876083bb9ee654f7a47"),o("ceb9404fbd5bba41e4d6"),o("bf4ed8f48832d41bc412"),o("71090a31fb824e55293c"),o("239a0bdef8c7a5331efc"),o("01795f442034637a4dcf"),o("c4afccdce7577be3341e"),o("6726a24e1f919f00a22d"),o("8be8cdc11a00d01b3161"),o("3fa6bbcfed98f0ce2dcc"),o("3e13b2bb8e94bc2421cc"),o("91d22327985d5da62a58"),o("37a0149f2367a1aade6b"),o("1b8114f09abda03dc70b"),o("8a9c7e9ee5e3f7caeb76"),o("971815932f7a815ff1bc"),o("74505d56e010af4fe96a"),o("0d78116f6468c8b148b7"),o("535ac84cb5f48966583a"),o("38dacb239717b0d63581"),o("e474a9b56e694461e21b"),o("c96345244e1eeef5e549"),o("739490ae4ee27a9bb2b1"),o("8047fb208d950d6b7042"),o("0ff8b5373850ca308e02"),o("5ae4526fd42355c63c48"),o("44adedfa5e20cf4677ed"),o("05b5af7f8fd72818ee7c"),o("5e9485937437b41756f7"),o("b4800bc516820359bad3"),o("1a1f53511f7dbd263920"),A.exports=o("04aabd2475089fa3cacd")},"6befd8a5e9fed39bcf0a":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("409f063042ff82279e38")(4);h(h.P+h.F*!o("155fc47f5eef242ee51b")([].every,!0),"Array",{every:function(m){return v(this,m,arguments[1])}})},"6cd6cd0d97104941b84f":function(A,M){},"6cf95dd29f8562db60d2":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Math",{log1p:o("5882750e43d284620759")})},"6d30f70e740934193417":function(A,M){},"6e329e616ad9c45fb7bd":function(A,M,o){"use strict";o("478c749716ad84331e6a");var h=o("26949bccb98fdb02c86a"),v=o("fa9e288138e317a7a504"),g=o("126be16bb2f5f1c18403"),m=o("c445bef4faf25215ffcd"),b=o("fdf9ec15fb80cd9b8df9"),S=o("001050c0cd8d86fc5cb1"),I=b("species"),T=!g(function(){var D=/./;return D.exec=function(){var U=[];return U.groups={a:"7"},U},"".replace(D,"$<a>")!=="7"}),P=function(){var D=/(?:)/,U=D.exec;D.exec=function(){return U.apply(this,arguments)};var Y="ab".split(D);return Y.length===2&&Y[0]==="a"&&Y[1]==="b"}();A.exports=function(D,U,Y){var K=b(D),X=!g(function(){var ee={};return ee[K]=function(){return 7},""[D](ee)!=7}),W=X?!g(function(){var ee=!1,B=/a/;return B.exec=function(){return ee=!0,null},D==="split"&&(B.constructor={},B.constructor[I]=function(){return B}),B[K](""),!ee}):void 0;if(!X||!W||D==="replace"&&!T||D==="split"&&!P){var j=/./[K],Q=Y(m,K,""[D],function(B,$,oe,Se,Fe){return $.exec===S?X&&!Fe?{done:!0,value:j.call($,oe,Se)}:{done:!0,value:B.call(oe,$,Se)}:{done:!1}}),ne=Q[0],ce=Q[1];h(String.prototype,D,ne),v(RegExp.prototype,K,U==2?function(ee,B){return ce.call(ee,this,B)}:function(ee){return ce.call(ee,this)})}}},"6f072a5af9a31516a723":function(A,M,o){"use strict";o("ceb9404fbd5bba41e4d6"),o("227b3982f26a4c2a19df"),A.exports=o("04aabd2475089fa3cacd").Promise.finally},"7057fe086dddfd19f86c":function(A,M){M.f=Object.getOwnPropertySymbols},"71090a31fb824e55293c":function(A,M,o){"use strict";var h=o("82e7c27256e2d57d24b0"),v=o("8e52fe7d9c78070c4cb8"),g="Set";A.exports=o("5fff38dc6894e11cedd3")(g,function(m){return function(){return m(this,arguments.length>0?arguments[0]:void 0)}},{add:function(b){return h.def(v(this,g),b=b===0?0:b,b)}},h)},"7136a8f26d904c5f7ded":function(A,M,o){"use strict";var h=window.URL||window.webkitURL;A.exports=function(v,g){try{try{var m;try{var b=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;m=new b,m.append(v),m=m.getBlob()}catch{m=new Blob([v])}return new Worker(h.createObjectURL(m))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(v))}}catch{if(!g)throw Error("Inline worker is not supported");return new Worker(g)}}},"725e816b46da86ed4ba1":function(A,M,o){"use strict";var h=o("510c97a2832dee6670a2")},"739490ae4ee27a9bb2b1":function(A,M,o){var h=o("3c1abcaf432651c852c0"),v=o("e5f3df9816caf4a19edb"),g=o("5e7f3152dbd5f68ea917"),m=o("3091fc82fc780b1e9f35"),b=o("0c6bdb2f1e107b092ad8"),S=o("45e95ff7deb186b1032c");function I(T,P){var D=arguments.length<3?T:arguments[2],U,Y;if(S(T)===D)return T[P];if(U=h.f(T,P))return g(U,"value")?U.value:U.get!==void 0?U.get.call(D):void 0;if(b(Y=v(T)))return I(Y,P,D)}m(m.S,"Reflect",{get:I})},"74505d56e010af4fe96a":function(A,M,o){o("3c57b024b26022754cbd")("Float64",8,function(h){return function(g,m,b){return h(this,g,m,b)}})},"750389d638265f4d2691":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("c021bf2eaf2f2e721a6e"),g=o("7964b54be5616e0032b3"),m=o("126be16bb2f5f1c18403"),b=[].sort,S=[1,2,3];h(h.P+h.F*(m(function(){S.sort(void 0)})||!m(function(){S.sort(null)})||!o("155fc47f5eef242ee51b")(b)),"Array",{sort:function(T){return T===void 0?b.call(g(this)):b.call(g(this),v(T))}})},"75bb2ef820cf0cf3e71f":function(A,M,o){"use strict";o("3ed595a38226ae2a3783")("trim",function(h){return function(){return h(this,3)}})},"7758eac80019eeaedca3":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("b12675786789dbc02df7");h(h.S+h.F*(Number.parseFloat!=v),"Number",{parseFloat:v})},"777583f135984e6aaced":function(A,M){M.f={}.propertyIsEnumerable},"7829c6aaa67683b96e21":function(A,M){},"78937e5a384dd7a10b59":function(A,M,o){o("c4e1172cd86cf1507638")&&/./g.flags!="g"&&o("f8cf2e7afd370478f99e").f(RegExp.prototype,"flags",{configurable:!0,get:o("3a4f8a76cd0489772f71")})},"78c9141ecce69548150c":function(A,M,o){var h=o("fdf9ec15fb80cd9b8df9")("iterator"),v=!1;try{var g=[7][h]();g.return=function(){v=!0},Array.from(g,function(){throw 2})}catch{}A.exports=function(m,b){if(!b&&!v)return!1;var S=!1;try{var I=[7],T=I[h]();T.next=function(){return{done:S=!0}},I[h]=function(){return T},m(I)}catch{}return S}},"79036b6f230fe5b6ba23":function(A,M,o){"use strict";var h=o("989a42060903e47c0cff");const v={WAITING:"waiting",IDLE:"idle",RUNNING:"running",ERROR:"error"},g={CLEAN_IMAGES:"clean_images",CLEAN_ALL_MODELS:"clean_checkpoints",CLEAN_UNUSED_MODELS:"remove_checkpoints",CLEAN_TASKS_DATA:"clean_tasks",CLEAN_OLD_CHECKPOINTS:"clean_old_checkpoints",PURGE_QUEUED_TASKS:"purge_queued_tasks"},m={ALWAYS:"always",IF_AVAILABLE:"ifavailable",IF_NOT_PRESENT:"ifnotpresent",NEVER:"never"},b={LOGS:"logs"},S={[h.c.IMPORT]:"Import",[h.c.IMPORT_AGENT]:"Import from agent",[h.c.EXPORT]:"DTL",[h.c.TRAIN]:"Train",[h.c.INFERENCE]:"Inference",[h.c.DEPLOY_MODEL]:"Deploy Model",[h.c.CUSTOM]:"Custom",[h.c.PIPELINE]:"Pipeline",[h.c.PYTHON]:"Python",[h.c.APP]:"Application",[h.c.APP_GPU]:"GPU Application"},I={SLY_AGENT:"sly_agent",KUBERNETES:"kubernetes"},T={CUSTOM:"custom",NGINX:"nginx"}},"7929edb069e080c2f886":function(A,M,o){A.exports=function(){return o("7136a8f26d904c5f7ded")(`(function(A){var w={};function p(r){if(w[r])return w[r].exports;var R=w[r]={i:r,l:!1,exports:{}};return A[r].call(R.exports,R,R.exports,p),R.l=!0,R.exports}return p.m=A,p.c=w,p.d=function(r,R,g){p.o(r,R)||Object.defineProperty(r,R,{enumerable:!0,get:g})},p.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},p.t=function(r,R){if(R&1&&(r=p(r)),R&8||R&4&&typeof r=="object"&&r&&r.__esModule)return r;var g=Object.create(null);if(p.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:r}),R&2&&typeof r!="string")for(var a in r)p.d(g,a,function(T){return r[T]}.bind(null,a));return g},p.n=function(r){var R=r&&r.__esModule?function(){return r.default}:function(){return r};return p.d(R,"a",R),R},p.o=function(r,R){return Object.prototype.hasOwnProperty.call(r,R)},p.p="/",p(p.s="02d03cc65a5b1a2d55df")})({"007e2f901f143b0063bb":function(A,w,p){"use strict";p.d(w,"a",function(){return R});var r=p("d11cd0540728c616a05b");const R={ADMIN:"admin",USER:"user",DEVELOPER:"developer",MANAGER:"manager",REVIEWER:"reviewer",ANNOTATOR:"annotator",VIEWER:"viewer"},g={ANNOTATION:"annotation",DOCKER_REGISTRIES:"dockerRegistries",USER_CREDS:"userCreds",GITHUB_ACCOUNT:"githubAccount",FAVORITE_APPS:"favoriteApps"},a={NONE:"none",FREE:"free",CORPORATIVE:"corporative",EDUCATIONAL:"educational"},T={[g.ANNOTATION]:{hotkeys:{toggleFiguresVisibility:[["ctrl","h"]],toggleSelectedFigureVisibility:[["alt","h"]],removeCurrentObject:[["shift","delete"],["shift","d"]],confirmImage:[["ctrl","b"]],acceptImage:[["ctrl","alt","a"]],rejectImage:[["ctrl","alt","r"]],previousImage:[["arrowleft"],["arrowup"]],nextImage:[["arrowright"],["arrowdown"]],decreaseBrightness:[["shift","["],["shift","{"]],increaseBrightness:[["shift","]"],["shift","}"]],complete:[["space"]],undo:[["ctrl","z"]],redo:[["ctrl","shift","z"],["ctrl","y"]],tools:{moveScene:[["1"]],select:[["2"]],moveFigures:[["3"]],tagFigures:[["4"]],[r.a.POINT]:[["5"]],[r.a.RECTANGLE]:[["6"]],[r.a.POLYLINE]:[["7"]],[r.a.POLYGON]:[["8"]],[r.a.BITMAP]:[["9"]],[r.a.SMART]:[["0"]],[r.a.GRAPH]:[["-"]]},toolsOptions:{[r.a.BITMAP]:{brushCreate:[["ctrl","shift","b"]],bucketFill:[["ctrl","shift","f"]]},[r.a.POLYGON]:{consecutive:[["shift","1"]],pointsEraser:[["shift","2"]],pointsOrder:[["shift","3"]],snap:[["shift","4"]]}}}}}},"00f83bf39a29e0b57d1f":function(A,w,p){(function(r,R){var g;/**
* @license
* Lodash <https://lodash.com/>
* Copyright JS Foundation and other contributors <https://js.foundation/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(){var a,T="4.17.10",c=200,N="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",_="Expected a function",E="__lodash_hash_undefined__",P=500,D="__lodash_placeholder__",F=1,M=2,m=4,I=1,k=2,B=1,Y=2,ee=4,z=8,$=16,re=32,ae=64,ue=128,me=256,De=512,Me=30,je="...",Q=800,ge=16,Ie=1,we=2,K=3,Z=1/0,fe=9007199254740991,de=17976931348623157e292,be=0/0,ve=4294967295,Le=ve-1,Ue=ve>>>1,et=[["ary",ue],["bind",B],["bindKey",Y],["curry",z],["curryRight",$],["flip",De],["partial",re],["partialRight",ae],["rearg",me]],Ze="[object Arguments]",We="[object Array]",Xe="[object AsyncFunction]",Ve="[object Boolean]",Je="[object Date]",Ot="[object DOMException]",pt="[object Error]",ze="[object Function]",st="[object GeneratorFunction]",nt="[object Map]",ct="[object Number]",dt="[object Null]",J="[object Object]",d="[object Promise]",s="[object Proxy]",u="[object RegExp]",L="[object Set]",j="[object String]",x="[object Symbol]",U="[object Undefined]",te="[object WeakMap]",le="[object WeakSet]",ye="[object ArrayBuffer]",Ce="[object DataView]",Pe="[object Float32Array]",Be="[object Float64Array]",S="[object Int8Array]",_e="[object Int16Array]",Te="[object Int32Array]",Re="[object Uint8Array]",H="[object Uint8ClampedArray]",ce="[object Uint16Array]",v="[object Uint32Array]",Ae=/\\b__p \\+= '';/g,Ge=/\\b(__p \\+=) '' \\+/g,i=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g,ie=/&(?:amp|lt|gt|quot|#39);/g,b=/[&<>"']/g,f=RegExp(ie.source),O=RegExp(b.source),G=/<%-([\\s\\S]+?)%>/g,oe=/<%([\\s\\S]+?)%>/g,ne=/<%=([\\s\\S]+?)%>/g,Oe=/\\.|\\[(?:[^[\\]]*|(["'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,ke=/^\\w*$/,yt=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,ut=/[\\\\^$.*+?()[\\]{}|]/g,Qe=RegExp(ut.source),Et=/^\\s+|\\s+$/g,ft=/^\\s+/,Lt=/\\s+$/,mn=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,Nn=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,St=/,? & /,Bt=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,Ct=/\\\\(\\\\)?/g,Qt=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,kt=/\\w*$/,nr=/^[-+]0x[0-9a-f]+$/i,Oa=/^0b[01]+$/i,fi=/^\\[object .+?Constructor\\]$/,Aa=/^0o[0-7]+$/i,ya=/^(?:0|[1-9]\\d*)$/,li=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,rr=/($^)/,Hs=/['\\n\\r\\u2028\\u2029\\\\]/g,Ar="\\\\ud800-\\\\udfff",zs="\\\\u0300-\\\\u036f",Zs="\\\\ufe20-\\\\ufe2f",Js="\\\\u20d0-\\\\u20ff",Sa=zs+Zs+Js,ma="\\\\u2700-\\\\u27bf",ba="a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff",$s="\\\\xac\\\\xb1\\\\xd7\\\\xf7",Xs="\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf",Qs="\\\\u2000-\\\\u206f",qs=" \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000",Ia="A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde",Ra="\\\\ufe0e\\\\ufe0f",wa=$s+Xs+Qs+qs,ci="['\\u2019]",eu="["+Ar+"]",Ca="["+wa+"]",yr="["+Sa+"]",Da="\\\\d+",tu="["+ma+"]",Pa="["+ba+"]",xa="[^"+Ar+wa+Da+ma+ba+Ia+"]",_i="\\\\ud83c[\\\\udffb-\\\\udfff]",nu="(?:"+yr+"|"+_i+")",La="[^"+Ar+"]",hi="(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}",di="[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]",Kn="["+Ia+"]",Ma="\\\\u200d",Na="(?:"+Pa+"|"+xa+")",ru="(?:"+Kn+"|"+xa+")",Ua="(?:"+ci+"(?:d|ll|m|re|s|t|ve))?",Fa="(?:"+ci+"(?:D|LL|M|RE|S|T|VE))?",Ba=nu+"?",ka="["+Ra+"]?",iu="(?:"+Ma+"(?:"+[La,hi,di].join("|")+")"+ka+Ba+")*",au="\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])",ou="\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])",Ga=ka+Ba+iu,su="(?:"+[tu,hi,di].join("|")+")"+Ga,uu="(?:"+[La+yr+"?",yr,hi,di,eu].join("|")+")",fu=RegExp(ci,"g"),lu=RegExp(yr,"g"),pi=RegExp(_i+"(?="+_i+")|"+uu+Ga,"g"),cu=RegExp([Kn+"?"+Pa+"+"+Ua+"(?="+[Ca,Kn,"$"].join("|")+")",ru+"+"+Fa+"(?="+[Ca,Kn+Na,"$"].join("|")+")",Kn+"?"+Na+"+"+Ua,Kn+"+"+Fa,ou,au,Da,su].join("|"),"g"),_u=RegExp("["+Ma+Ar+Sa+Ra+"]"),hu=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,du=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pu=-1,At={};At[Pe]=At[Be]=At[S]=At[_e]=At[Te]=At[Re]=At[H]=At[ce]=At[v]=!0,At[Ze]=At[We]=At[ye]=At[Ve]=At[Ce]=At[Je]=At[pt]=At[ze]=At[nt]=At[ct]=At[J]=At[u]=At[L]=At[j]=At[te]=!1;var vt={};vt[Ze]=vt[We]=vt[ye]=vt[Ce]=vt[Ve]=vt[Je]=vt[Pe]=vt[Be]=vt[S]=vt[_e]=vt[Te]=vt[nt]=vt[ct]=vt[J]=vt[u]=vt[L]=vt[j]=vt[x]=vt[Re]=vt[H]=vt[ce]=vt[v]=!0,vt[pt]=vt[ze]=vt[te]=!1;var Eu={\\u00C0:"A",\\u00C1:"A",\\u00C2:"A",\\u00C3:"A",\\u00C4:"A",\\u00C5:"A",\\u00E0:"a",\\u00E1:"a",\\u00E2:"a",\\u00E3:"a",\\u00E4:"a",\\u00E5:"a",\\u00C7:"C",\\u00E7:"c",\\u00D0:"D",\\u00F0:"d",\\u00C8:"E",\\u00C9:"E",\\u00CA:"E",\\u00CB:"E",\\u00E8:"e",\\u00E9:"e",\\u00EA:"e",\\u00EB:"e",\\u00CC:"I",\\u00CD:"I",\\u00CE:"I",\\u00CF:"I",\\u00EC:"i",\\u00ED:"i",\\u00EE:"i",\\u00EF:"i",\\u00D1:"N",\\u00F1:"n",\\u00D2:"O",\\u00D3:"O",\\u00D4:"O",\\u00D5:"O",\\u00D6:"O",\\u00D8:"O",\\u00F2:"o",\\u00F3:"o",\\u00F4:"o",\\u00F5:"o",\\u00F6:"o",\\u00F8:"o",\\u00D9:"U",\\u00DA:"U",\\u00DB:"U",\\u00DC:"U",\\u00F9:"u",\\u00FA:"u",\\u00FB:"u",\\u00FC:"u",\\u00DD:"Y",\\u00FD:"y",\\u00FF:"y",\\u00C6:"Ae",\\u00E6:"ae",\\u00DE:"Th",\\u00FE:"th",\\u00DF:"ss",\\u0100:"A",\\u0102:"A",\\u0104:"A",\\u0101:"a",\\u0103:"a",\\u0105:"a",\\u0106:"C",\\u0108:"C",\\u010A:"C",\\u010C:"C",\\u0107:"c",\\u0109:"c",\\u010B:"c",\\u010D:"c",\\u010E:"D",\\u0110:"D",\\u010F:"d",\\u0111:"d",\\u0112:"E",\\u0114:"E",\\u0116:"E",\\u0118:"E",\\u011A:"E",\\u0113:"e",\\u0115:"e",\\u0117:"e",\\u0119:"e",\\u011B:"e",\\u011C:"G",\\u011E:"G",\\u0120:"G",\\u0122:"G",\\u011D:"g",\\u011F:"g",\\u0121:"g",\\u0123:"g",\\u0124:"H",\\u0126:"H",\\u0125:"h",\\u0127:"h",\\u0128:"I",\\u012A:"I",\\u012C:"I",\\u012E:"I",\\u0130:"I",\\u0129:"i",\\u012B:"i",\\u012D:"i",\\u012F:"i",\\u0131:"i",\\u0134:"J",\\u0135:"j",\\u0136:"K",\\u0137:"k",\\u0138:"k",\\u0139:"L",\\u013B:"L",\\u013D:"L",\\u013F:"L",\\u0141:"L",\\u013A:"l",\\u013C:"l",\\u013E:"l",\\u0140:"l",\\u0142:"l",\\u0143:"N",\\u0145:"N",\\u0147:"N",\\u014A:"N",\\u0144:"n",\\u0146:"n",\\u0148:"n",\\u014B:"n",\\u014C:"O",\\u014E:"O",\\u0150:"O",\\u014D:"o",\\u014F:"o",\\u0151:"o",\\u0154:"R",\\u0156:"R",\\u0158:"R",\\u0155:"r",\\u0157:"r",\\u0159:"r",\\u015A:"S",\\u015C:"S",\\u015E:"S",\\u0160:"S",\\u015B:"s",\\u015D:"s",\\u015F:"s",\\u0161:"s",\\u0162:"T",\\u0164:"T",\\u0166:"T",\\u0163:"t",\\u0165:"t",\\u0167:"t",\\u0168:"U",\\u016A:"U",\\u016C:"U",\\u016E:"U",\\u0170:"U",\\u0172:"U",\\u0169:"u",\\u016B:"u",\\u016D:"u",\\u016F:"u",\\u0171:"u",\\u0173:"u",\\u0174:"W",\\u0175:"w",\\u0176:"Y",\\u0177:"y",\\u0178:"Y",\\u0179:"Z",\\u017B:"Z",\\u017D:"Z",\\u017A:"z",\\u017C:"z",\\u017E:"z",\\u0132:"IJ",\\u0133:"ij",\\u0152:"Oe",\\u0153:"oe",\\u0149:"'n",\\u017F:"s"},gu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tu={"\\\\":"\\\\","'":"'","\\n":"n","\\r":"r","\\u2028":"u2028","\\u2029":"u2029"},Ou=parseFloat,Au=parseInt,Wa=typeof r=="object"&&r&&r.Object===Object&&r,yu=typeof self=="object"&&self&&self.Object===Object&&self,Mt=Wa||yu||Function("return this")(),Ya=w&&!w.nodeType&&w,ir=Ya&&typeof R=="object"&&R&&!R.nodeType&&R,Ka=ir&&ir.exports===Ya,Ei=Ka&&Wa.process,qt=function(){try{var X=ir&&ir.require&&ir.require("util").types;return X||Ei&&Ei.binding&&Ei.binding("util")}catch{}}(),ja=qt&&qt.isArrayBuffer,Va=qt&&qt.isDate,Ha=qt&&qt.isMap,za=qt&&qt.isRegExp,Za=qt&&qt.isSet,Ja=qt&&qt.isTypedArray;function Zt(X,he,se){switch(se.length){case 0:return X.call(he);case 1:return X.call(he,se[0]);case 2:return X.call(he,se[0],se[1]);case 3:return X.call(he,se[0],se[1],se[2])}return X.apply(he,se)}function Su(X,he,se,Ne){for(var $e=-1,lt=X==null?0:X.length;++$e<lt;){var Dt=X[$e];he(Ne,Dt,se(Dt),X)}return Ne}function en(X,he){for(var se=-1,Ne=X==null?0:X.length;++se<Ne&&he(X[se],se,X)!==!1;);return X}function mu(X,he){for(var se=X==null?0:X.length;se--&&he(X[se],se,X)!==!1;);return X}function $a(X,he){for(var se=-1,Ne=X==null?0:X.length;++se<Ne;)if(!he(X[se],se,X))return!1;return!0}function bn(X,he){for(var se=-1,Ne=X==null?0:X.length,$e=0,lt=[];++se<Ne;){var Dt=X[se];he(Dt,se,X)&&(lt[$e++]=Dt)}return lt}function Sr(X,he){var se=X==null?0:X.length;return!!se&&jn(X,he,0)>-1}function gi(X,he,se){for(var Ne=-1,$e=X==null?0:X.length;++Ne<$e;)if(se(he,X[Ne]))return!0;return!1}function mt(X,he){for(var se=-1,Ne=X==null?0:X.length,$e=Array(Ne);++se<Ne;)$e[se]=he(X[se],se,X);return $e}function In(X,he){for(var se=-1,Ne=he.length,$e=X.length;++se<Ne;)X[$e+se]=he[se];return X}function vi(X,he,se,Ne){var $e=-1,lt=X==null?0:X.length;for(Ne&&lt&&(se=X[++$e]);++$e<lt;)se=he(se,X[$e],$e,X);return se}function bu(X,he,se,Ne){var $e=X==null?0:X.length;for(Ne&&$e&&(se=X[--$e]);$e--;)se=he(se,X[$e],$e,X);return se}function Ti(X,he){for(var se=-1,Ne=X==null?0:X.length;++se<Ne;)if(he(X[se],se,X))return!0;return!1}var Iu=Oi("length");function Ru(X){return X.split("")}function wu(X){return X.match(Bt)||[]}function Xa(X,he,se){var Ne;return se(X,function($e,lt,Dt){if(he($e,lt,Dt))return Ne=lt,!1}),Ne}function mr(X,he,se,Ne){for(var $e=X.length,lt=se+(Ne?1:-1);Ne?lt--:++lt<$e;)if(he(X[lt],lt,X))return lt;return-1}function jn(X,he,se){return he===he?Gu(X,he,se):mr(X,Qa,se)}function Cu(X,he,se,Ne){for(var $e=se-1,lt=X.length;++$e<lt;)if(Ne(X[$e],he))return $e;return-1}function Qa(X){return X!==X}function qa(X,he){var se=X==null?0:X.length;return se?yi(X,he)/se:be}function Oi(X){return function(he){return he==null?a:he[X]}}function Ai(X){return function(he){return X==null?a:X[he]}}function eo(X,he,se,Ne,$e){return $e(X,function(lt,Dt,gt){se=Ne?(Ne=!1,lt):he(se,lt,Dt,gt)}),se}function Du(X,he){var se=X.length;for(X.sort(he);se--;)X[se]=X[se].value;return X}function yi(X,he){for(var se,Ne=-1,$e=X.length;++Ne<$e;){var lt=he(X[Ne]);lt!==a&&(se=se===a?lt:se+lt)}return se}function Si(X,he){for(var se=-1,Ne=Array(X);++se<X;)Ne[se]=he(se);return Ne}function Pu(X,he){return mt(he,function(se){return[se,X[se]]})}function Jt(X){return function(he){return X(he)}}function mi(X,he){return mt(he,function(se){return X[se]})}function ar(X,he){return X.has(he)}function to(X,he){for(var se=-1,Ne=X.length;++se<Ne&&jn(he,X[se],0)>-1;);return se}function no(X,he){for(var se=X.length;se--&&jn(he,X[se],0)>-1;);return se}function xu(X,he){for(var se=X.length,Ne=0;se--;)X[se]===he&&++Ne;return Ne}var Lu=Ai(Eu),Mu=Ai(gu);function Nu(X){return"\\\\"+Tu[X]}function Uu(X,he){return X==null?a:X[he]}function Vn(X){return _u.test(X)}function Fu(X){return hu.test(X)}function Bu(X){for(var he,se=[];!(he=X.next()).done;)se.push(he.value);return se}function bi(X){var he=-1,se=Array(X.size);return X.forEach(function(Ne,$e){se[++he]=[$e,Ne]}),se}function ro(X,he){return function(se){return X(he(se))}}function Rn(X,he){for(var se=-1,Ne=X.length,$e=0,lt=[];++se<Ne;){var Dt=X[se];(Dt===he||Dt===D)&&(X[se]=D,lt[$e++]=se)}return lt}function Ii(X,he){return he=="__proto__"?a:X[he]}function br(X){var he=-1,se=Array(X.size);return X.forEach(function(Ne){se[++he]=Ne}),se}function ku(X){var he=-1,se=Array(X.size);return X.forEach(function(Ne){se[++he]=[Ne,Ne]}),se}function Gu(X,he,se){for(var Ne=se-1,$e=X.length;++Ne<$e;)if(X[Ne]===he)return Ne;return-1}function Wu(X,he,se){for(var Ne=se+1;Ne--;)if(X[Ne]===he)return Ne;return Ne}function Hn(X){return Vn(X)?Ku(X):Iu(X)}function un(X){return Vn(X)?ju(X):Ru(X)}var Yu=Ai(vu);function Ku(X){for(var he=pi.lastIndex=0;pi.test(X);)++he;return he}function ju(X){return X.match(pi)||[]}function Vu(X){return X.match(cu)||[]}var Hu=function X(he){he=he==null?Mt:Ir.defaults(Mt.Object(),he,Ir.pick(Mt,du));var se=he.Array,Ne=he.Date,$e=he.Error,lt=he.Function,Dt=he.Math,gt=he.Object,Ri=he.RegExp,zu=he.String,tn=he.TypeError,Rr=se.prototype,Zu=lt.prototype,zn=gt.prototype,wr=he["__core-js_shared__"],Cr=Zu.toString,Tt=zn.hasOwnProperty,Ju=0,io=function(){var e=/[^.]+$/.exec(wr&&wr.keys&&wr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Dr=zn.toString,$u=Cr.call(gt),Xu=Mt._,Qu=Ri("^"+Cr.call(Tt).replace(ut,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$"),Pr=Ka?he.Buffer:a,wn=he.Symbol,xr=he.Uint8Array,ao=Pr?Pr.allocUnsafe:a,Lr=ro(gt.getPrototypeOf,gt),oo=gt.create,so=zn.propertyIsEnumerable,Mr=Rr.splice,uo=wn?wn.isConcatSpreadable:a,or=wn?wn.iterator:a,Un=wn?wn.toStringTag:a,Nr=function(){try{var e=Gn(gt,"defineProperty");return e({},"",{}),e}catch{}}(),qu=he.clearTimeout!==Mt.clearTimeout&&he.clearTimeout,ef=Ne&&Ne.now!==Mt.Date.now&&Ne.now,tf=he.setTimeout!==Mt.setTimeout&&he.setTimeout,Ur=Dt.ceil,Fr=Dt.floor,wi=gt.getOwnPropertySymbols,nf=Pr?Pr.isBuffer:a,rf=he.isFinite,af=Rr.join,of=ro(gt.keys,gt),Pt=Dt.max,Ut=Dt.min,sf=Ne.now,uf=he.parseInt,fo=Dt.random,ff=Rr.reverse,Ci=Gn(he,"DataView"),sr=Gn(he,"Map"),Di=Gn(he,"Promise"),Zn=Gn(he,"Set"),ur=Gn(he,"WeakMap"),fr=Gn(gt,"create"),Br=ur&&new ur,lr={},lf=Wn(Ci),cf=Wn(sr),_f=Wn(Di),hf=Wn(Zn),df=Wn(ur),kr=wn?wn.prototype:a,cr=kr?kr.valueOf:a,lo=kr?kr.toString:a;function y(e){if(It(e)&&!qe(e)&&!(e instanceof ot)){if(e instanceof nn)return e;if(Tt.call(e,"__wrapped__"))return cs(e)}return new nn(e)}var Jn=function(){function e(){}return function(t){if(!bt(t))return{};if(oo)return oo(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function Gr(){}function nn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}y.templateSettings={escape:G,evaluate:oe,interpolate:ne,variable:"",imports:{_:y}},y.prototype=Gr.prototype,y.prototype.constructor=y,nn.prototype=Jn(Gr.prototype),nn.prototype.constructor=nn;function ot(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ve,this.__views__=[]}function pf(){var e=new ot(this.__wrapped__);return e.__actions__=jt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=jt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=jt(this.__views__),e}function Ef(){if(this.__filtered__){var e=new ot(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function gf(){var e=this.__wrapped__.value(),t=this.__dir__,n=qe(e),o=t<0,h=n?e.length:0,C=Dl(0,h,this.__views__),W=C.start,V=C.end,q=V-W,Ee=o?V:W-1,pe=this.__iteratees__,Se=pe.length,xe=0,Fe=Ut(q,this.__takeCount__);if(!n||!o&&h==q&&Fe==q)return No(e,this.__actions__);var He=[];e:for(;q--&&xe<Fe;){Ee+=t;for(var it=-1,Ke=e[Ee];++it<Se;){var at=pe[it],ht=at.iteratee,Yt=at.type,Kt=ht(Ke);if(Yt==we)Ke=Kt;else if(!Kt){if(Yt==Ie)continue e;break e}}He[xe++]=Ke}return He}ot.prototype=Jn(Gr.prototype),ot.prototype.constructor=ot;function Fn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function vf(){this.__data__=fr?fr(null):{},this.size=0}function Tf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Of(e){var t=this.__data__;if(fr){var n=t[e];return n===E?a:n}return Tt.call(t,e)?t[e]:a}function Af(e){var t=this.__data__;return fr?t[e]!==a:Tt.call(t,e)}function yf(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=fr&&t===a?E:t,this}Fn.prototype.clear=vf,Fn.prototype.delete=Tf,Fn.prototype.get=Of,Fn.prototype.has=Af,Fn.prototype.set=yf;function pn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Sf(){this.__data__=[],this.size=0}function mf(e){var t=this.__data__,n=Wr(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():Mr.call(t,n,1),--this.size,!0}function bf(e){var t=this.__data__,n=Wr(t,e);return n<0?a:t[n][1]}function If(e){return Wr(this.__data__,e)>-1}function Rf(e,t){var n=this.__data__,o=Wr(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}pn.prototype.clear=Sf,pn.prototype.delete=mf,pn.prototype.get=bf,pn.prototype.has=If,pn.prototype.set=Rf;function En(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function wf(){this.size=0,this.__data__={hash:new Fn,map:new(sr||pn),string:new Fn}}function Cf(e){var t=qr(this,e).delete(e);return this.size-=t?1:0,t}function Df(e){return qr(this,e).get(e)}function Pf(e){return qr(this,e).has(e)}function xf(e,t){var n=qr(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}En.prototype.clear=wf,En.prototype.delete=Cf,En.prototype.get=Df,En.prototype.has=Pf,En.prototype.set=xf;function Bn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new En;++t<n;)this.add(e[t])}function Lf(e){return this.__data__.set(e,E),this}function Mf(e){return this.__data__.has(e)}Bn.prototype.add=Bn.prototype.push=Lf,Bn.prototype.has=Mf;function fn(e){var t=this.__data__=new pn(e);this.size=t.size}function Nf(){this.__data__=new pn,this.size=0}function Uf(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Ff(e){return this.__data__.get(e)}function Bf(e){return this.__data__.has(e)}function kf(e,t){var n=this.__data__;if(n instanceof pn){var o=n.__data__;if(!sr||o.length<c-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new En(o)}return n.set(e,t),this.size=n.size,this}fn.prototype.clear=Nf,fn.prototype.delete=Uf,fn.prototype.get=Ff,fn.prototype.has=Bf,fn.prototype.set=kf;function co(e,t){var n=qe(e),o=!n&&Yn(e),h=!n&&!o&&Ln(e),C=!n&&!o&&!h&&er(e),W=n||o||h||C,V=W?Si(e.length,zu):[],q=V.length;for(var Ee in e)(t||Tt.call(e,Ee))&&!(W&&(Ee=="length"||h&&(Ee=="offset"||Ee=="parent")||C&&(Ee=="buffer"||Ee=="byteLength"||Ee=="byteOffset")||On(Ee,q)))&&V.push(Ee);return V}function _o(e){var t=e.length;return t?e[Wi(0,t-1)]:a}function Gf(e,t){return ei(jt(e),kn(t,0,e.length))}function Wf(e){return ei(jt(e))}function Pi(e,t,n){(n!==a&&!ln(e[t],n)||n===a&&!(t in e))&&gn(e,t,n)}function _r(e,t,n){var o=e[t];(!(Tt.call(e,t)&&ln(o,n))||n===a&&!(t in e))&&gn(e,t,n)}function Wr(e,t){for(var n=e.length;n--;)if(ln(e[n][0],t))return n;return-1}function Yf(e,t,n,o){return Cn(e,function(h,C,W){t(o,h,n(h),W)}),o}function ho(e,t){return e&&hn(t,xt(t),e)}function Kf(e,t){return e&&hn(t,Ht(t),e)}function gn(e,t,n){t=="__proto__"&&Nr?Nr(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function xi(e,t){for(var n=-1,o=t.length,h=se(o),C=e==null;++n<o;)h[n]=C?a:ca(e,t[n]);return h}function kn(e,t,n){return e===e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function rn(e,t,n,o,h,C){var W,V=t&F,q=t&M,Ee=t&m;if(n&&(W=h?n(e,o,h,C):n(e)),W!==a)return W;if(!bt(e))return e;var pe=qe(e);if(pe){if(W=xl(e),!V)return jt(e,W)}else{var Se=Ft(e),xe=Se==ze||Se==st;if(Ln(e))return Fo(e,V);if(Se==J||Se==Ze||xe&&!h){if(W=q||xe?{}:ns(e),!V)return q?Al(e,Kf(W,e)):Ol(e,ho(W,e))}else{if(!vt[Se])return h?e:{};W=Ll(e,Se,V)}}C||(C=new fn);var Fe=C.get(e);if(Fe)return Fe;if(C.set(e,W),Ps(e))return e.forEach(function(Ke){W.add(rn(Ke,t,n,Ke,e,C))}),W;if(Cs(e))return e.forEach(function(Ke,at){W.set(at,rn(Ke,t,n,at,e,C))}),W;var He=Ee?q?Qi:Xi:q?Ht:xt,it=pe?a:He(e);return en(it||e,function(Ke,at){it&&(at=Ke,Ke=e[at]),_r(W,at,rn(Ke,t,n,at,e,C))}),W}function jf(e){var t=xt(e);return function(n){return po(n,e,t)}}function po(e,t,n){var o=n.length;if(e==null)return!o;for(e=gt(e);o--;){var h=n[o],C=t[h],W=e[h];if(W===a&&!(h in e)||!C(W))return!1}return!0}function Eo(e,t,n){if(typeof e!="function")throw new tn(_);return Tr(function(){e.apply(a,n)},t)}function hr(e,t,n,o){var h=-1,C=Sr,W=!0,V=e.length,q=[],Ee=t.length;if(!V)return q;n&&(t=mt(t,Jt(n))),o?(C=gi,W=!1):t.length>=c&&(C=ar,W=!1,t=new Bn(t));e:for(;++h<V;){var pe=e[h],Se=n==null?pe:n(pe);if(pe=o||pe!==0?pe:0,W&&Se===Se){for(var xe=Ee;xe--;)if(t[xe]===Se)continue e;q.push(pe)}else C(t,Se,o)||q.push(pe)}return q}var Cn=Yo(_n),go=Yo(Mi,!0);function Vf(e,t){var n=!0;return Cn(e,function(o,h,C){return n=!!t(o,h,C),n}),n}function Yr(e,t,n){for(var o=-1,h=e.length;++o<h;){var C=e[o],W=t(C);if(W!=null&&(V===a?W===W&&!Xt(W):n(W,V)))var V=W,q=C}return q}function Hf(e,t,n,o){var h=e.length;for(n=tt(n),n<0&&(n=-n>h?0:h+n),o=o===a||o>h?h:tt(o),o<0&&(o+=h),o=n>o?0:Ls(o);n<o;)e[n++]=t;return e}function vo(e,t){var n=[];return Cn(e,function(o,h,C){t(o,h,C)&&n.push(o)}),n}function Nt(e,t,n,o,h){var C=-1,W=e.length;for(n||(n=Nl),h||(h=[]);++C<W;){var V=e[C];t>0&&n(V)?t>1?Nt(V,t-1,n,o,h):In(h,V):o||(h[h.length]=V)}return h}var Li=Ko(),To=Ko(!0);function _n(e,t){return e&&Li(e,t,xt)}function Mi(e,t){return e&&To(e,t,xt)}function Kr(e,t){return bn(t,function(n){return An(e[n])})}function $n(e,t){t=Pn(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[dn(t[n++])];return n&&n==o?e:a}function Oo(e,t,n){var o=t(e);return qe(e)?o:In(o,n(e))}function Gt(e){return e==null?e===a?U:dt:Un&&Un in gt(e)?Cl(e):Yl(e)}function Ni(e,t){return e>t}function zf(e,t){return e!=null&&Tt.call(e,t)}function Zf(e,t){return e!=null&&t in gt(e)}function Jf(e,t,n){return e>=Ut(t,n)&&e<Pt(t,n)}function Ui(e,t,n){for(var o=n?gi:Sr,h=e[0].length,C=e.length,W=C,V=se(C),q=1/0,Ee=[];W--;){var pe=e[W];W&&t&&(pe=mt(pe,Jt(t))),q=Ut(pe.length,q),V[W]=!n&&(t||h>=120&&pe.length>=120)?new Bn(W&&pe):a}pe=e[0];var Se=-1,xe=V[0];e:for(;++Se<h&&Ee.length<q;){var Fe=pe[Se],He=t?t(Fe):Fe;if(Fe=n||Fe!==0?Fe:0,!(xe?ar(xe,He):o(Ee,He,n))){for(W=C;--W;){var it=V[W];if(!(it?ar(it,He):o(e[W],He,n)))continue e}xe&&xe.push(He),Ee.push(Fe)}}return Ee}function $f(e,t,n,o){return _n(e,function(h,C,W){t(o,n(h),C,W)}),o}function dr(e,t,n){t=Pn(t,e),e=os(e,t);var o=e==null?e:e[dn(on(t))];return o==null?a:Zt(o,e,n)}function Ao(e){return It(e)&&Gt(e)==Ze}function Xf(e){return It(e)&&Gt(e)==ye}function Qf(e){return It(e)&&Gt(e)==Je}function pr(e,t,n,o,h){return e===t?!0:e==null||t==null||!It(e)&&!It(t)?e!==e&&t!==t:qf(e,t,n,o,pr,h)}function qf(e,t,n,o,h,C){var W=qe(e),V=qe(t),q=W?We:Ft(e),Ee=V?We:Ft(t);q=q==Ze?J:q,Ee=Ee==Ze?J:Ee;var pe=q==J,Se=Ee==J,xe=q==Ee;if(xe&&Ln(e)){if(!Ln(t))return!1;W=!0,pe=!1}if(xe&&!pe)return C||(C=new fn),W||er(e)?qo(e,t,n,o,h,C):Rl(e,t,q,n,o,h,C);if(!(n&I)){var Fe=pe&&Tt.call(e,"__wrapped__"),He=Se&&Tt.call(t,"__wrapped__");if(Fe||He){var it=Fe?e.value():e,Ke=He?t.value():t;return C||(C=new fn),h(it,Ke,n,o,C)}}return xe?(C||(C=new fn),wl(e,t,n,o,h,C)):!1}function el(e){return It(e)&&Ft(e)==nt}function Fi(e,t,n,o){var h=n.length,C=h,W=!o;if(e==null)return!C;for(e=gt(e);h--;){var V=n[h];if(W&&V[2]?V[1]!==e[V[0]]:!(V[0]in e))return!1}for(;++h<C;){V=n[h];var q=V[0],Ee=e[q],pe=V[1];if(W&&V[2]){if(Ee===a&&!(q in e))return!1}else{var Se=new fn;if(o)var xe=o(Ee,pe,q,e,t,Se);if(!(xe===a?pr(pe,Ee,I|k,o,Se):xe))return!1}}return!0}function yo(e){if(!bt(e)||Fl(e))return!1;var t=An(e)?Qu:fi;return t.test(Wn(e))}function tl(e){return It(e)&&Gt(e)==u}function nl(e){return It(e)&&Ft(e)==L}function rl(e){return It(e)&&oi(e.length)&&!!At[Gt(e)]}function So(e){return typeof e=="function"?e:e==null?zt:typeof e=="object"?qe(e)?Io(e[0],e[1]):bo(e):js(e)}function Bi(e){if(!vr(e))return of(e);var t=[];for(var n in gt(e))Tt.call(e,n)&&n!="constructor"&&t.push(n);return t}function il(e){if(!bt(e))return Wl(e);var t=vr(e),n=[];for(var o in e)o=="constructor"&&(t||!Tt.call(e,o))||n.push(o);return n}function ki(e,t){return e<t}function mo(e,t){var n=-1,o=Vt(e)?se(e.length):[];return Cn(e,function(h,C,W){o[++n]=t(h,C,W)}),o}function bo(e){var t=ea(e);return t.length==1&&t[0][2]?is(t[0][0],t[0][1]):function(n){return n===e||Fi(n,e,t)}}function Io(e,t){return na(e)&&rs(t)?is(dn(e),t):function(n){var o=ca(n,e);return o===a&&o===t?_a(n,e):pr(t,o,I|k)}}function jr(e,t,n,o,h){e!==t&&Li(t,function(C,W){if(bt(C))h||(h=new fn),al(e,t,W,n,jr,o,h);else{var V=o?o(Ii(e,W),C,W+"",e,t,h):a;V===a&&(V=C),Pi(e,W,V)}},Ht)}function al(e,t,n,o,h,C,W){var V=Ii(e,n),q=Ii(t,n),Ee=W.get(q);if(Ee){Pi(e,n,Ee);return}var pe=C?C(V,q,n+"",e,t,W):a,Se=pe===a;if(Se){var xe=qe(q),Fe=!xe&&Ln(q),He=!xe&&!Fe&&er(q);pe=q,xe||Fe||He?qe(V)?pe=V:Rt(V)?pe=jt(V):Fe?(Se=!1,pe=Fo(q,!0)):He?(Se=!1,pe=Bo(q,!0)):pe=[]:Or(q)||Yn(q)?(pe=V,Yn(V)?pe=Ms(V):(!bt(V)||o&&An(V))&&(pe=ns(q))):Se=!1}Se&&(W.set(q,pe),h(pe,q,o,C,W),W.delete(q)),Pi(e,n,pe)}function Ro(e,t){var n=e.length;if(n)return t+=t<0?n:0,On(t,n)?e[t]:a}function wo(e,t,n){var o=-1;t=mt(t.length?t:[zt],Jt(Ye()));var h=mo(e,function(C,W,V){var q=mt(t,function(Ee){return Ee(C)});return{criteria:q,index:++o,value:C}});return Du(h,function(C,W){return Tl(C,W,n)})}function ol(e,t){return Co(e,t,function(n,o){return _a(e,o)})}function Co(e,t,n){for(var o=-1,h=t.length,C={};++o<h;){var W=t[o],V=$n(e,W);n(V,W)&&Er(C,Pn(W,e),V)}return C}function sl(e){return function(t){return $n(t,e)}}function Gi(e,t,n,o){var h=o?Cu:jn,C=-1,W=t.length,V=e;for(e===t&&(t=jt(t)),n&&(V=mt(e,Jt(n)));++C<W;)for(var q=0,Ee=t[C],pe=n?n(Ee):Ee;(q=h(V,pe,q,o))>-1;)V!==e&&Mr.call(V,q,1),Mr.call(e,q,1);return e}function Do(e,t){for(var n=e?t.length:0,o=n-1;n--;){var h=t[n];if(n==o||h!==C){var C=h;On(h)?Mr.call(e,h,1):ji(e,h)}}return e}function Wi(e,t){return e+Fr(fo()*(t-e+1))}function ul(e,t,n,o){for(var h=-1,C=Pt(Ur((t-e)/(n||1)),0),W=se(C);C--;)W[o?C:++h]=e,e+=n;return W}function Yi(e,t){var n="";if(!e||t<1||t>fe)return n;do t%2&&(n+=e),t=Fr(t/2),t&&(e+=e);while(t);return n}function rt(e,t){return ia(as(e,t,zt),e+"")}function fl(e){return _o(tr(e))}function ll(e,t){var n=tr(e);return ei(n,kn(t,0,n.length))}function Er(e,t,n,o){if(!bt(e))return e;t=Pn(t,e);for(var h=-1,C=t.length,W=C-1,V=e;V!=null&&++h<C;){var q=dn(t[h]),Ee=n;if(h!=W){var pe=V[q];Ee=o?o(pe,q,V):a,Ee===a&&(Ee=bt(pe)?pe:On(t[h+1])?[]:{})}_r(V,q,Ee),V=V[q]}return e}var Po=Br?function(e,t){return Br.set(e,t),e}:zt,cl=Nr?function(e,t){return Nr(e,"toString",{configurable:!0,enumerable:!1,value:da(t),writable:!0})}:zt;function _l(e){return ei(tr(e))}function an(e,t,n){var o=-1,h=e.length;t<0&&(t=-t>h?0:h+t),n=n>h?h:n,n<0&&(n+=h),h=t>n?0:n-t>>>0,t>>>=0;for(var C=se(h);++o<h;)C[o]=e[o+t];return C}function hl(e,t){var n;return Cn(e,function(o,h,C){return n=t(o,h,C),!n}),!!n}function Vr(e,t,n){var o=0,h=e==null?o:e.length;if(typeof t=="number"&&t===t&&h<=Ue){for(;o<h;){var C=o+h>>>1,W=e[C];W!==null&&!Xt(W)&&(n?W<=t:W<t)?o=C+1:h=C}return h}return Ki(e,t,zt,n)}function Ki(e,t,n,o){t=n(t);for(var h=0,C=e==null?0:e.length,W=t!==t,V=t===null,q=Xt(t),Ee=t===a;h<C;){var pe=Fr((h+C)/2),Se=n(e[pe]),xe=Se!==a,Fe=Se===null,He=Se===Se,it=Xt(Se);if(W)var Ke=o||He;else Ee?Ke=He&&(o||xe):V?Ke=He&&xe&&(o||!Fe):q?Ke=He&&xe&&!Fe&&(o||!it):Fe||it?Ke=!1:Ke=o?Se<=t:Se<t;Ke?h=pe+1:C=pe}return Ut(C,Le)}function xo(e,t){for(var n=-1,o=e.length,h=0,C=[];++n<o;){var W=e[n],V=t?t(W):W;if(!n||!ln(V,q)){var q=V;C[h++]=W===0?0:W}}return C}function Lo(e){return typeof e=="number"?e:Xt(e)?be:+e}function $t(e){if(typeof e=="string")return e;if(qe(e))return mt(e,$t)+"";if(Xt(e))return lo?lo.call(e):"";var t=e+"";return t=="0"&&1/e==-Z?"-0":t}function Dn(e,t,n){var o=-1,h=Sr,C=e.length,W=!0,V=[],q=V;if(n)W=!1,h=gi;else if(C>=c){var Ee=t?null:bl(e);if(Ee)return br(Ee);W=!1,h=ar,q=new Bn}else q=t?[]:V;e:for(;++o<C;){var pe=e[o],Se=t?t(pe):pe;if(pe=n||pe!==0?pe:0,W&&Se===Se){for(var xe=q.length;xe--;)if(q[xe]===Se)continue e;t&&q.push(Se),V.push(pe)}else h(q,Se,n)||(q!==V&&q.push(Se),V.push(pe))}return V}function ji(e,t){return t=Pn(t,e),e=os(e,t),e==null||delete e[dn(on(t))]}function Mo(e,t,n,o){return Er(e,t,n($n(e,t)),o)}function Hr(e,t,n,o){for(var h=e.length,C=o?h:-1;(o?C--:++C<h)&&t(e[C],C,e););return n?an(e,o?0:C,o?C+1:h):an(e,o?C+1:0,o?h:C)}function No(e,t){var n=e;return n instanceof ot&&(n=n.value()),vi(t,function(o,h){return h.func.apply(h.thisArg,In([o],h.args))},n)}function Vi(e,t,n){var o=e.length;if(o<2)return o?Dn(e[0]):[];for(var h=-1,C=se(o);++h<o;)for(var W=e[h],V=-1;++V<o;)V!=h&&(C[h]=hr(C[h]||W,e[V],t,n));return Dn(Nt(C,1),t,n)}function Uo(e,t,n){for(var o=-1,h=e.length,C=t.length,W={};++o<h;){var V=o<C?t[o]:a;n(W,e[o],V)}return W}function Hi(e){return Rt(e)?e:[]}function zi(e){return typeof e=="function"?e:zt}function Pn(e,t){return qe(e)?e:na(e,t)?[e]:ls(_t(e))}var dl=rt;function xn(e,t,n){var o=e.length;return n=n===a?o:n,!t&&n>=o?e:an(e,t,n)}var pl=qu||function(e){return Mt.clearTimeout(e)};function Fo(e,t){if(t)return e.slice();var n=e.length,o=ao?ao(n):new e.constructor(n);return e.copy(o),o}function Zi(e){var t=new e.constructor(e.byteLength);return new xr(t).set(new xr(e)),t}function El(e,t){var n=t?Zi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function gl(e){var t=new e.constructor(e.source,kt.exec(e));return t.lastIndex=e.lastIndex,t}function vl(e){return cr?gt(cr.call(e)):{}}function Bo(e,t){var n=t?Zi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ko(e,t){if(e!==t){var n=e!==a,o=e===null,h=e===e,C=Xt(e),W=t!==a,V=t===null,q=t===t,Ee=Xt(t);if(!V&&!Ee&&!C&&e>t||C&&W&&q&&!V&&!Ee||o&&W&&q||!n&&q||!h)return 1;if(!o&&!C&&!Ee&&e<t||Ee&&n&&h&&!o&&!C||V&&n&&h||!W&&h||!q)return-1}return 0}function Tl(e,t,n){for(var o=-1,h=e.criteria,C=t.criteria,W=h.length,V=n.length;++o<W;){var q=ko(h[o],C[o]);if(q){if(o>=V)return q;var Ee=n[o];return q*(Ee=="desc"?-1:1)}}return e.index-t.index}function Go(e,t,n,o){for(var h=-1,C=e.length,W=n.length,V=-1,q=t.length,Ee=Pt(C-W,0),pe=se(q+Ee),Se=!o;++V<q;)pe[V]=t[V];for(;++h<W;)(Se||h<C)&&(pe[n[h]]=e[h]);for(;Ee--;)pe[V++]=e[h++];return pe}function Wo(e,t,n,o){for(var h=-1,C=e.length,W=-1,V=n.length,q=-1,Ee=t.length,pe=Pt(C-V,0),Se=se(pe+Ee),xe=!o;++h<pe;)Se[h]=e[h];for(var Fe=h;++q<Ee;)Se[Fe+q]=t[q];for(;++W<V;)(xe||h<C)&&(Se[Fe+n[W]]=e[h++]);return Se}function jt(e,t){var n=-1,o=e.length;for(t||(t=se(o));++n<o;)t[n]=e[n];return t}function hn(e,t,n,o){var h=!n;n||(n={});for(var C=-1,W=t.length;++C<W;){var V=t[C],q=o?o(n[V],e[V],V,n,e):a;q===a&&(q=e[V]),h?gn(n,V,q):_r(n,V,q)}return n}function Ol(e,t){return hn(e,ta(e),t)}function Al(e,t){return hn(e,es(e),t)}function zr(e,t){return function(n,o){var h=qe(n)?Su:Yf,C=t?t():{};return h(n,e,Ye(o,2),C)}}function Xn(e){return rt(function(t,n){var o=-1,h=n.length,C=h>1?n[h-1]:a,W=h>2?n[2]:a;for(C=e.length>3&&typeof C=="function"?(h--,C):a,W&&Wt(n[0],n[1],W)&&(C=h<3?a:C,h=1),t=gt(t);++o<h;){var V=n[o];V&&e(t,V,o,C)}return t})}function Yo(e,t){return function(n,o){if(n==null)return n;if(!Vt(n))return e(n,o);for(var h=n.length,C=t?h:-1,W=gt(n);(t?C--:++C<h)&&o(W[C],C,W)!==!1;);return n}}function Ko(e){return function(t,n,o){for(var h=-1,C=gt(t),W=o(t),V=W.length;V--;){var q=W[e?V:++h];if(n(C[q],q,C)===!1)break}return t}}function yl(e,t,n){var o=t&B,h=gr(e);function C(){var W=this&&this!==Mt&&this instanceof C?h:e;return W.apply(o?n:this,arguments)}return C}function jo(e){return function(t){t=_t(t);var n=Vn(t)?un(t):a,o=n?n[0]:t.charAt(0),h=n?xn(n,1).join(""):t.slice(1);return o[e]()+h}}function Qn(e){return function(t){return vi(Ys(Ws(t).replace(fu,"")),e,"")}}function gr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Jn(e.prototype),o=e.apply(n,t);return bt(o)?o:n}}function Sl(e,t,n){var o=gr(e);function h(){for(var C=arguments.length,W=se(C),V=C,q=qn(h);V--;)W[V]=arguments[V];var Ee=C<3&&W[0]!==q&&W[C-1]!==q?[]:Rn(W,q);if(C-=Ee.length,C<n)return Jo(e,t,Zr,h.placeholder,a,W,Ee,a,a,n-C);var pe=this&&this!==Mt&&this instanceof h?o:e;return Zt(pe,this,W)}return h}function Vo(e){return function(t,n,o){var h=gt(t);if(!Vt(t)){var C=Ye(n,3);t=xt(t),n=function(V){return C(h[V],V,h)}}var W=e(t,n,o);return W>-1?h[C?t[W]:W]:a}}function Ho(e){return Tn(function(t){var n=t.length,o=n,h=nn.prototype.thru;for(e&&t.reverse();o--;){var C=t[o];if(typeof C!="function")throw new tn(_);if(h&&!W&&Qr(C)=="wrapper")var W=new nn([],!0)}for(o=W?o:n;++o<n;){C=t[o];var V=Qr(C),q=V=="wrapper"?qi(C):a;q&&ra(q[0])&&q[1]==(ue|z|re|me)&&!q[4].length&&q[9]==1?W=W[Qr(q[0])].apply(W,q[3]):W=C.length==1&&ra(C)?W[V]():W.thru(C)}return function(){var Ee=arguments,pe=Ee[0];if(W&&Ee.length==1&&qe(pe))return W.plant(pe).value();for(var Se=0,xe=n?t[Se].apply(this,Ee):pe;++Se<n;)xe=t[Se].call(this,xe);return xe}})}function Zr(e,t,n,o,h,C,W,V,q,Ee){var pe=t&ue,Se=t&B,xe=t&Y,Fe=t&(z|$),He=t&De,it=xe?a:gr(e);function Ke(){for(var at=arguments.length,ht=se(at),Yt=at;Yt--;)ht[Yt]=arguments[Yt];if(Fe)var Kt=qn(Ke),Mn=xu(ht,Kt);if(o&&(ht=Go(ht,o,h,Fe)),C&&(ht=Wo(ht,C,W,Fe)),at-=Mn,Fe&&at<Ee){var wt=Rn(ht,Kt);return Jo(e,t,Zr,Ke.placeholder,n,ht,wt,V,q,Ee-at)}var cn=Se?n:this,Sn=xe?cn[e]:e;return at=ht.length,V?ht=Kl(ht,V):He&&at>1&&ht.reverse(),pe&&q<at&&(ht.length=q),this&&this!==Mt&&this instanceof Ke&&(Sn=it||gr(Sn)),Sn.apply(cn,ht)}return Ke}function zo(e,t){return function(n,o){return $f(n,e,t(o),{})}}function Jr(e,t){return function(n,o){var h;if(n===a&&o===a)return t;if(n!==a&&(h=n),o!==a){if(h===a)return o;typeof n=="string"||typeof o=="string"?(n=$t(n),o=$t(o)):(n=Lo(n),o=Lo(o)),h=e(n,o)}return h}}function Ji(e){return Tn(function(t){return t=mt(t,Jt(Ye())),rt(function(n){var o=this;return e(t,function(h){return Zt(h,o,n)})})})}function $r(e,t){t=t===a?" ":$t(t);var n=t.length;if(n<2)return n?Yi(t,e):t;var o=Yi(t,Ur(e/Hn(t)));return Vn(t)?xn(un(o),0,e).join(""):o.slice(0,e)}function ml(e,t,n,o){var h=t&B,C=gr(e);function W(){for(var V=-1,q=arguments.length,Ee=-1,pe=o.length,Se=se(pe+q),xe=this&&this!==Mt&&this instanceof W?C:e;++Ee<pe;)Se[Ee]=o[Ee];for(;q--;)Se[Ee++]=arguments[++V];return Zt(xe,h?n:this,Se)}return W}function Zo(e){return function(t,n,o){return o&&typeof o!="number"&&Wt(t,n,o)&&(n=o=a),t=yn(t),n===a?(n=t,t=0):n=yn(n),o=o===a?t<n?1:-1:yn(o),ul(t,n,o,e)}}function Xr(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=sn(t),n=sn(n)),e(t,n)}}function Jo(e,t,n,o,h,C,W,V,q,Ee){var pe=t&z,Se=pe?W:a,xe=pe?a:W,Fe=pe?C:a,He=pe?a:C;t|=pe?re:ae,t&=~(pe?ae:re),t&ee||(t&=~(B|Y));var it=[e,t,h,Fe,Se,He,xe,V,q,Ee],Ke=n.apply(a,it);return ra(e)&&ss(Ke,it),Ke.placeholder=o,us(Ke,e,t)}function $i(e){var t=Dt[e];return function(n,o){if(n=sn(n),o=o==null?0:Ut(tt(o),292),o){var h=(_t(n)+"e").split("e"),C=t(h[0]+"e"+(+h[1]+o));return h=(_t(C)+"e").split("e"),+(h[0]+"e"+(+h[1]-o))}return t(n)}}var bl=Zn&&1/br(new Zn([,-0]))[1]==Z?function(e){return new Zn(e)}:ga;function $o(e){return function(t){var n=Ft(t);return n==nt?bi(t):n==L?ku(t):Pu(t,e(t))}}function vn(e,t,n,o,h,C,W,V){var q=t&Y;if(!q&&typeof e!="function")throw new tn(_);var Ee=o?o.length:0;if(Ee||(t&=~(re|ae),o=h=a),W=W===a?W:Pt(tt(W),0),V=V===a?V:tt(V),Ee-=h?h.length:0,t&ae){var pe=o,Se=h;o=h=a}var xe=q?a:qi(e),Fe=[e,t,n,o,h,pe,Se,C,W,V];if(xe&&Gl(Fe,xe),e=Fe[0],t=Fe[1],n=Fe[2],o=Fe[3],h=Fe[4],V=Fe[9]=Fe[9]===a?q?0:e.length:Pt(Fe[9]-Ee,0),!V&&t&(z|$)&&(t&=~(z|$)),!t||t==B)var He=yl(e,t,n);else t==z||t==$?He=Sl(e,t,V):(t==re||t==(B|re))&&!h.length?He=ml(e,t,n,o):He=Zr.apply(a,Fe);var it=xe?Po:ss;return us(it(He,Fe),e,t)}function Xo(e,t,n,o){return e===a||ln(e,zn[n])&&!Tt.call(o,n)?t:e}function Qo(e,t,n,o,h,C){return bt(e)&&bt(t)&&(C.set(t,e),jr(e,t,a,Qo,C),C.delete(t)),e}function Il(e){return Or(e)?a:e}function qo(e,t,n,o,h,C){var W=n&I,V=e.length,q=t.length;if(V!=q&&!(W&&q>V))return!1;var Ee=C.get(e);if(Ee&&C.get(t))return Ee==t;var pe=-1,Se=!0,xe=n&k?new Bn:a;for(C.set(e,t),C.set(t,e);++pe<V;){var Fe=e[pe],He=t[pe];if(o)var it=W?o(He,Fe,pe,t,e,C):o(Fe,He,pe,e,t,C);if(it!==a){if(it)continue;Se=!1;break}if(xe){if(!Ti(t,function(Ke,at){if(!ar(xe,at)&&(Fe===Ke||h(Fe,Ke,n,o,C)))return xe.push(at)})){Se=!1;break}}else if(!(Fe===He||h(Fe,He,n,o,C))){Se=!1;break}}return C.delete(e),C.delete(t),Se}function Rl(e,t,n,o,h,C,W){switch(n){case Ce:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ye:return!(e.byteLength!=t.byteLength||!C(new xr(e),new xr(t)));case Ve:case Je:case ct:return ln(+e,+t);case pt:return e.name==t.name&&e.message==t.message;case u:case j:return e==t+"";case nt:var V=bi;case L:var q=o&I;if(V||(V=br),e.size!=t.size&&!q)return!1;var Ee=W.get(e);if(Ee)return Ee==t;o|=k,W.set(e,t);var pe=qo(V(e),V(t),o,h,C,W);return W.delete(e),pe;case x:if(cr)return cr.call(e)==cr.call(t)}return!1}function wl(e,t,n,o,h,C){var W=n&I,V=Xi(e),q=V.length,Ee=Xi(t),pe=Ee.length;if(q!=pe&&!W)return!1;for(var Se=q;Se--;){var xe=V[Se];if(!(W?xe in t:Tt.call(t,xe)))return!1}var Fe=C.get(e);if(Fe&&C.get(t))return Fe==t;var He=!0;C.set(e,t),C.set(t,e);for(var it=W;++Se<q;){xe=V[Se];var Ke=e[xe],at=t[xe];if(o)var ht=W?o(at,Ke,xe,t,e,C):o(Ke,at,xe,e,t,C);if(!(ht===a?Ke===at||h(Ke,at,n,o,C):ht)){He=!1;break}it||(it=xe=="constructor")}if(He&&!it){var Yt=e.constructor,Kt=t.constructor;Yt!=Kt&&"constructor"in e&&"constructor"in t&&!(typeof Yt=="function"&&Yt instanceof Yt&&typeof Kt=="function"&&Kt instanceof Kt)&&(He=!1)}return C.delete(e),C.delete(t),He}function Tn(e){return ia(as(e,a,ds),e+"")}function Xi(e){return Oo(e,xt,ta)}function Qi(e){return Oo(e,Ht,es)}var qi=Br?function(e){return Br.get(e)}:ga;function Qr(e){for(var t=e.name+"",n=lr[t],o=Tt.call(lr,t)?n.length:0;o--;){var h=n[o],C=h.func;if(C==null||C==e)return h.name}return t}function qn(e){var t=Tt.call(y,"placeholder")?y:e;return t.placeholder}function Ye(){var e=y.iteratee||pa;return e=e===pa?So:e,arguments.length?e(arguments[0],arguments[1]):e}function qr(e,t){var n=e.__data__;return Ul(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ea(e){for(var t=xt(e),n=t.length;n--;){var o=t[n],h=e[o];t[n]=[o,h,rs(h)]}return t}function Gn(e,t){var n=Uu(e,t);return yo(n)?n:a}function Cl(e){var t=Tt.call(e,Un),n=e[Un];try{e[Un]=a;var o=!0}catch{}var h=Dr.call(e);return o&&(t?e[Un]=n:delete e[Un]),h}var ta=wi?function(e){return e==null?[]:(e=gt(e),bn(wi(e),function(t){return so.call(e,t)}))}:va,es=wi?function(e){for(var t=[];e;)In(t,ta(e)),e=Lr(e);return t}:va,Ft=Gt;(Ci&&Ft(new Ci(new ArrayBuffer(1)))!=Ce||sr&&Ft(new sr)!=nt||Di&&Ft(Di.resolve())!=d||Zn&&Ft(new Zn)!=L||ur&&Ft(new ur)!=te)&&(Ft=function(e){var t=Gt(e),n=t==J?e.constructor:a,o=n?Wn(n):"";if(o)switch(o){case lf:return Ce;case cf:return nt;case _f:return d;case hf:return L;case df:return te}return t});function Dl(e,t,n){for(var o=-1,h=n.length;++o<h;){var C=n[o],W=C.size;switch(C.type){case"drop":e+=W;break;case"dropRight":t-=W;break;case"take":t=Ut(t,e+W);break;case"takeRight":e=Pt(e,t-W);break}}return{start:e,end:t}}function Pl(e){var t=e.match(Nn);return t?t[1].split(St):[]}function ts(e,t,n){t=Pn(t,e);for(var o=-1,h=t.length,C=!1;++o<h;){var W=dn(t[o]);if(!(C=e!=null&&n(e,W)))break;e=e[W]}return C||++o!=h?C:(h=e==null?0:e.length,!!h&&oi(h)&&On(W,h)&&(qe(e)||Yn(e)))}function xl(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Tt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ns(e){return typeof e.constructor=="function"&&!vr(e)?Jn(Lr(e)):{}}function Ll(e,t,n){var o=e.constructor;switch(t){case ye:return Zi(e);case Ve:case Je:return new o(+e);case Ce:return El(e,n);case Pe:case Be:case S:case _e:case Te:case Re:case H:case ce:case v:return Bo(e,n);case nt:return new o;case ct:case j:return new o(e);case u:return gl(e);case L:return new o;case x:return vl(e)}}function Ml(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(mn,\`{
/* [wrapped with \`+t+\`] */
\`)}function Nl(e){return qe(e)||Yn(e)||!!(uo&&e&&e[uo])}function On(e,t){var n=typeof e;return t=t==null?fe:t,!!t&&(n=="number"||n!="symbol"&&ya.test(e))&&e>-1&&e%1==0&&e<t}function Wt(e,t,n){if(!bt(n))return!1;var o=typeof t;return(o=="number"?Vt(n)&&On(t,n.length):o=="string"&&t in n)?ln(n[t],e):!1}function na(e,t){if(qe(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Xt(e)?!0:ke.test(e)||!Oe.test(e)||t!=null&&e in gt(t)}function Ul(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ra(e){var t=Qr(e),n=y[t];if(typeof n!="function"||!(t in ot.prototype))return!1;if(e===n)return!0;var o=qi(n);return!!o&&e===o[0]}function Fl(e){return!!io&&io in e}var Bl=wr?An:Ta;function vr(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||zn;return e===n}function rs(e){return e===e&&!bt(e)}function is(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==a||e in gt(n))}}function kl(e){var t=ii(e,function(o){return n.size===P&&n.clear(),o}),n=t.cache;return t}function Gl(e,t){var n=e[1],o=t[1],h=n|o,C=h<(B|Y|ue),W=o==ue&&n==z||o==ue&&n==me&&e[7].length<=t[8]||o==(ue|me)&&t[7].length<=t[8]&&n==z;if(!(C||W))return e;o&B&&(e[2]=t[2],h|=n&B?0:ee);var V=t[3];if(V){var q=e[3];e[3]=q?Go(q,V,t[4]):V,e[4]=q?Rn(e[3],D):t[4]}return V=t[5],V&&(q=e[5],e[5]=q?Wo(q,V,t[6]):V,e[6]=q?Rn(e[5],D):t[6]),V=t[7],V&&(e[7]=V),o&ue&&(e[8]=e[8]==null?t[8]:Ut(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=h,e}function Wl(e){var t=[];if(e!=null)for(var n in gt(e))t.push(n);return t}function Yl(e){return Dr.call(e)}function as(e,t,n){return t=Pt(t===a?e.length-1:t,0),function(){for(var o=arguments,h=-1,C=Pt(o.length-t,0),W=se(C);++h<C;)W[h]=o[t+h];h=-1;for(var V=se(t+1);++h<t;)V[h]=o[h];return V[t]=n(W),Zt(e,this,V)}}function os(e,t){return t.length<2?e:$n(e,an(t,0,-1))}function Kl(e,t){for(var n=e.length,o=Ut(t.length,n),h=jt(e);o--;){var C=t[o];e[o]=On(C,n)?h[C]:a}return e}var ss=fs(Po),Tr=tf||function(e,t){return Mt.setTimeout(e,t)},ia=fs(cl);function us(e,t,n){var o=t+"";return ia(e,Ml(o,jl(Pl(o),n)))}function fs(e){var t=0,n=0;return function(){var o=sf(),h=ge-(o-n);if(n=o,h>0){if(++t>=Q)return arguments[0]}else t=0;return e.apply(a,arguments)}}function ei(e,t){var n=-1,o=e.length,h=o-1;for(t=t===a?o:t;++n<t;){var C=Wi(n,h),W=e[C];e[C]=e[n],e[n]=W}return e.length=t,e}var ls=kl(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(yt,function(n,o,h,C){t.push(h?C.replace(Ct,"$1"):o||n)}),t});function dn(e){if(typeof e=="string"||Xt(e))return e;var t=e+"";return t=="0"&&1/e==-Z?"-0":t}function Wn(e){if(e!=null){try{return Cr.call(e)}catch{}try{return e+""}catch{}}return""}function jl(e,t){return en(et,function(n){var o="_."+n[0];t&n[1]&&!Sr(e,o)&&e.push(o)}),e.sort()}function cs(e){if(e instanceof ot)return e.clone();var t=new nn(e.__wrapped__,e.__chain__);return t.__actions__=jt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Vl(e,t,n){(n?Wt(e,t,n):t===a)?t=1:t=Pt(tt(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var h=0,C=0,W=se(Ur(o/t));h<o;)W[C++]=an(e,h,h+=t);return W}function Hl(e){for(var t=-1,n=e==null?0:e.length,o=0,h=[];++t<n;){var C=e[t];C&&(h[o++]=C)}return h}function zl(){var e=arguments.length;if(!e)return[];for(var t=se(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return In(qe(n)?jt(n):[n],Nt(t,1))}var Zl=rt(function(e,t){return Rt(e)?hr(e,Nt(t,1,Rt,!0)):[]}),Jl=rt(function(e,t){var n=on(t);return Rt(n)&&(n=a),Rt(e)?hr(e,Nt(t,1,Rt,!0),Ye(n,2)):[]}),$l=rt(function(e,t){var n=on(t);return Rt(n)&&(n=a),Rt(e)?hr(e,Nt(t,1,Rt,!0),a,n):[]});function Xl(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===a?1:tt(t),an(e,t<0?0:t,o)):[]}function Ql(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===a?1:tt(t),t=o-t,an(e,0,t<0?0:t)):[]}function ql(e,t){return e&&e.length?Hr(e,Ye(t,3),!0,!0):[]}function ec(e,t){return e&&e.length?Hr(e,Ye(t,3),!0):[]}function tc(e,t,n,o){var h=e==null?0:e.length;return h?(n&&typeof n!="number"&&Wt(e,t,n)&&(n=0,o=h),Hf(e,t,n,o)):[]}function _s(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var h=n==null?0:tt(n);return h<0&&(h=Pt(o+h,0)),mr(e,Ye(t,3),h)}function hs(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var h=o-1;return n!==a&&(h=tt(n),h=n<0?Pt(o+h,0):Ut(h,o-1)),mr(e,Ye(t,3),h,!0)}function ds(e){var t=e==null?0:e.length;return t?Nt(e,1):[]}function nc(e){var t=e==null?0:e.length;return t?Nt(e,Z):[]}function rc(e,t){var n=e==null?0:e.length;return n?(t=t===a?1:tt(t),Nt(e,t)):[]}function ic(e){for(var t=-1,n=e==null?0:e.length,o={};++t<n;){var h=e[t];o[h[0]]=h[1]}return o}function ps(e){return e&&e.length?e[0]:a}function ac(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var h=n==null?0:tt(n);return h<0&&(h=Pt(o+h,0)),jn(e,t,h)}function oc(e){var t=e==null?0:e.length;return t?an(e,0,-1):[]}var sc=rt(function(e){var t=mt(e,Hi);return t.length&&t[0]===e[0]?Ui(t):[]}),uc=rt(function(e){var t=on(e),n=mt(e,Hi);return t===on(n)?t=a:n.pop(),n.length&&n[0]===e[0]?Ui(n,Ye(t,2)):[]}),fc=rt(function(e){var t=on(e),n=mt(e,Hi);return t=typeof t=="function"?t:a,t&&n.pop(),n.length&&n[0]===e[0]?Ui(n,a,t):[]});function lc(e,t){return e==null?"":af.call(e,t)}function on(e){var t=e==null?0:e.length;return t?e[t-1]:a}function cc(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var h=o;return n!==a&&(h=tt(n),h=h<0?Pt(o+h,0):Ut(h,o-1)),t===t?Wu(e,t,h):mr(e,Qa,h,!0)}function _c(e,t){return e&&e.length?Ro(e,tt(t)):a}var hc=rt(Es);function Es(e,t){return e&&e.length&&t&&t.length?Gi(e,t):e}function dc(e,t,n){return e&&e.length&&t&&t.length?Gi(e,t,Ye(n,2)):e}function pc(e,t,n){return e&&e.length&&t&&t.length?Gi(e,t,a,n):e}var Ec=Tn(function(e,t){var n=e==null?0:e.length,o=xi(e,t);return Do(e,mt(t,function(h){return On(h,n)?+h:h}).sort(ko)),o});function gc(e,t){var n=[];if(!(e&&e.length))return n;var o=-1,h=[],C=e.length;for(t=Ye(t,3);++o<C;){var W=e[o];t(W,o,e)&&(n.push(W),h.push(o))}return Do(e,h),n}function aa(e){return e==null?e:ff.call(e)}function vc(e,t,n){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&Wt(e,t,n)?(t=0,n=o):(t=t==null?0:tt(t),n=n===a?o:tt(n)),an(e,t,n)):[]}function Tc(e,t){return Vr(e,t)}function Oc(e,t,n){return Ki(e,t,Ye(n,2))}function Ac(e,t){var n=e==null?0:e.length;if(n){var o=Vr(e,t);if(o<n&&ln(e[o],t))return o}return-1}function yc(e,t){return Vr(e,t,!0)}function Sc(e,t,n){return Ki(e,t,Ye(n,2),!0)}function mc(e,t){var n=e==null?0:e.length;if(n){var o=Vr(e,t,!0)-1;if(ln(e[o],t))return o}return-1}function bc(e){return e&&e.length?xo(e):[]}function Ic(e,t){return e&&e.length?xo(e,Ye(t,2)):[]}function Rc(e){var t=e==null?0:e.length;return t?an(e,1,t):[]}function wc(e,t,n){return e&&e.length?(t=n||t===a?1:tt(t),an(e,0,t<0?0:t)):[]}function Cc(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===a?1:tt(t),t=o-t,an(e,t<0?0:t,o)):[]}function Dc(e,t){return e&&e.length?Hr(e,Ye(t,3),!1,!0):[]}function Pc(e,t){return e&&e.length?Hr(e,Ye(t,3)):[]}var xc=rt(function(e){return Dn(Nt(e,1,Rt,!0))}),Lc=rt(function(e){var t=on(e);return Rt(t)&&(t=a),Dn(Nt(e,1,Rt,!0),Ye(t,2))}),Mc=rt(function(e){var t=on(e);return t=typeof t=="function"?t:a,Dn(Nt(e,1,Rt,!0),a,t)});function Nc(e){return e&&e.length?Dn(e):[]}function Uc(e,t){return e&&e.length?Dn(e,Ye(t,2)):[]}function Fc(e,t){return t=typeof t=="function"?t:a,e&&e.length?Dn(e,a,t):[]}function oa(e){if(!(e&&e.length))return[];var t=0;return e=bn(e,function(n){if(Rt(n))return t=Pt(n.length,t),!0}),Si(t,function(n){return mt(e,Oi(n))})}function gs(e,t){if(!(e&&e.length))return[];var n=oa(e);return t==null?n:mt(n,function(o){return Zt(t,a,o)})}var Bc=rt(function(e,t){return Rt(e)?hr(e,t):[]}),kc=rt(function(e){return Vi(bn(e,Rt))}),Gc=rt(function(e){var t=on(e);return Rt(t)&&(t=a),Vi(bn(e,Rt),Ye(t,2))}),Wc=rt(function(e){var t=on(e);return t=typeof t=="function"?t:a,Vi(bn(e,Rt),a,t)}),Yc=rt(oa);function Kc(e,t){return Uo(e||[],t||[],_r)}function jc(e,t){return Uo(e||[],t||[],Er)}var Vc=rt(function(e){var t=e.length,n=t>1?e[t-1]:a;return n=typeof n=="function"?(e.pop(),n):a,gs(e,n)});function vs(e){var t=y(e);return t.__chain__=!0,t}function Hc(e,t){return t(e),e}function ti(e,t){return t(e)}var zc=Tn(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,h=function(C){return xi(C,e)};return t>1||this.__actions__.length||!(o instanceof ot)||!On(n)?this.thru(h):(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:ti,args:[h],thisArg:a}),new nn(o,this.__chain__).thru(function(C){return t&&!C.length&&C.push(a),C}))});function Zc(){return vs(this)}function Jc(){return new nn(this.value(),this.__chain__)}function $c(){this.__values__===a&&(this.__values__=xs(this.value()));var e=this.__index__>=this.__values__.length,t=e?a:this.__values__[this.__index__++];return{done:e,value:t}}function Xc(){return this}function Qc(e){for(var t,n=this;n instanceof Gr;){var o=cs(n);o.__index__=0,o.__values__=a,t?h.__wrapped__=o:t=o;var h=o;n=n.__wrapped__}return h.__wrapped__=e,t}function qc(){var e=this.__wrapped__;if(e instanceof ot){var t=e;return this.__actions__.length&&(t=new ot(this)),t=t.reverse(),t.__actions__.push({func:ti,args:[aa],thisArg:a}),new nn(t,this.__chain__)}return this.thru(aa)}function e_(){return No(this.__wrapped__,this.__actions__)}var t_=zr(function(e,t,n){Tt.call(e,n)?++e[n]:gn(e,n,1)});function n_(e,t,n){var o=qe(e)?$a:Vf;return n&&Wt(e,t,n)&&(t=a),o(e,Ye(t,3))}function r_(e,t){var n=qe(e)?bn:vo;return n(e,Ye(t,3))}var i_=Vo(_s),a_=Vo(hs);function o_(e,t){return Nt(ni(e,t),1)}function s_(e,t){return Nt(ni(e,t),Z)}function u_(e,t,n){return n=n===a?1:tt(n),Nt(ni(e,t),n)}function Ts(e,t){var n=qe(e)?en:Cn;return n(e,Ye(t,3))}function Os(e,t){var n=qe(e)?mu:go;return n(e,Ye(t,3))}var f_=zr(function(e,t,n){Tt.call(e,n)?e[n].push(t):gn(e,n,[t])});function l_(e,t,n,o){e=Vt(e)?e:tr(e),n=n&&!o?tt(n):0;var h=e.length;return n<0&&(n=Pt(h+n,0)),si(e)?n<=h&&e.indexOf(t,n)>-1:!!h&&jn(e,t,n)>-1}var c_=rt(function(e,t,n){var o=-1,h=typeof t=="function",C=Vt(e)?se(e.length):[];return Cn(e,function(W){C[++o]=h?Zt(t,W,n):dr(W,t,n)}),C}),__=zr(function(e,t,n){gn(e,n,t)});function ni(e,t){var n=qe(e)?mt:mo;return n(e,Ye(t,3))}function h_(e,t,n,o){return e==null?[]:(qe(t)||(t=t==null?[]:[t]),n=o?a:n,qe(n)||(n=n==null?[]:[n]),wo(e,t,n))}var d_=zr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function p_(e,t,n){var o=qe(e)?vi:eo,h=arguments.length<3;return o(e,Ye(t,4),n,h,Cn)}function E_(e,t,n){var o=qe(e)?bu:eo,h=arguments.length<3;return o(e,Ye(t,4),n,h,go)}function g_(e,t){var n=qe(e)?bn:vo;return n(e,ai(Ye(t,3)))}function v_(e){var t=qe(e)?_o:fl;return t(e)}function T_(e,t,n){(n?Wt(e,t,n):t===a)?t=1:t=tt(t);var o=qe(e)?Gf:ll;return o(e,t)}function O_(e){var t=qe(e)?Wf:_l;return t(e)}function A_(e){if(e==null)return 0;if(Vt(e))return si(e)?Hn(e):e.length;var t=Ft(e);return t==nt||t==L?e.size:Bi(e).length}function y_(e,t,n){var o=qe(e)?Ti:hl;return n&&Wt(e,t,n)&&(t=a),o(e,Ye(t,3))}var S_=rt(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Wt(e,t[0],t[1])?t=[]:n>2&&Wt(t[0],t[1],t[2])&&(t=[t[0]]),wo(e,Nt(t,1),[])}),ri=ef||function(){return Mt.Date.now()};function m_(e,t){if(typeof t!="function")throw new tn(_);return e=tt(e),function(){if(--e<1)return t.apply(this,arguments)}}function As(e,t,n){return t=n?a:t,t=e&&t==null?e.length:t,vn(e,ue,a,a,a,a,t)}function ys(e,t){var n;if(typeof t!="function")throw new tn(_);return e=tt(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var sa=rt(function(e,t,n){var o=B;if(n.length){var h=Rn(n,qn(sa));o|=re}return vn(e,o,t,n,h)}),Ss=rt(function(e,t,n){var o=B|Y;if(n.length){var h=Rn(n,qn(Ss));o|=re}return vn(t,o,e,n,h)});function ms(e,t,n){t=n?a:t;var o=vn(e,z,a,a,a,a,a,t);return o.placeholder=ms.placeholder,o}function bs(e,t,n){t=n?a:t;var o=vn(e,$,a,a,a,a,a,t);return o.placeholder=bs.placeholder,o}function Is(e,t,n){var o,h,C,W,V,q,Ee=0,pe=!1,Se=!1,xe=!0;if(typeof e!="function")throw new tn(_);t=sn(t)||0,bt(n)&&(pe=!!n.leading,Se="maxWait"in n,C=Se?Pt(sn(n.maxWait)||0,t):C,xe="trailing"in n?!!n.trailing:xe);function Fe(wt){var cn=o,Sn=h;return o=h=a,Ee=wt,W=e.apply(Sn,cn),W}function He(wt){return Ee=wt,V=Tr(at,t),pe?Fe(wt):W}function it(wt){var cn=wt-q,Sn=wt-Ee,Vs=t-cn;return Se?Ut(Vs,C-Sn):Vs}function Ke(wt){var cn=wt-q,Sn=wt-Ee;return q===a||cn>=t||cn<0||Se&&Sn>=C}function at(){var wt=ri();if(Ke(wt))return ht(wt);V=Tr(at,it(wt))}function ht(wt){return V=a,xe&&o?Fe(wt):(o=h=a,W)}function Yt(){V!==a&&pl(V),Ee=0,o=q=h=V=a}function Kt(){return V===a?W:ht(ri())}function Mn(){var wt=ri(),cn=Ke(wt);if(o=arguments,h=this,q=wt,cn){if(V===a)return He(q);if(Se)return V=Tr(at,t),Fe(q)}return V===a&&(V=Tr(at,t)),W}return Mn.cancel=Yt,Mn.flush=Kt,Mn}var b_=rt(function(e,t){return Eo(e,1,t)}),I_=rt(function(e,t,n){return Eo(e,sn(t)||0,n)});function R_(e){return vn(e,De)}function ii(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new tn(_);var n=function(){var o=arguments,h=t?t.apply(this,o):o[0],C=n.cache;if(C.has(h))return C.get(h);var W=e.apply(this,o);return n.cache=C.set(h,W)||C,W};return n.cache=new(ii.Cache||En),n}ii.Cache=En;function ai(e){if(typeof e!="function")throw new tn(_);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function w_(e){return ys(2,e)}var C_=dl(function(e,t){t=t.length==1&&qe(t[0])?mt(t[0],Jt(Ye())):mt(Nt(t,1),Jt(Ye()));var n=t.length;return rt(function(o){for(var h=-1,C=Ut(o.length,n);++h<C;)o[h]=t[h].call(this,o[h]);return Zt(e,this,o)})}),ua=rt(function(e,t){var n=Rn(t,qn(ua));return vn(e,re,a,t,n)}),Rs=rt(function(e,t){var n=Rn(t,qn(Rs));return vn(e,ae,a,t,n)}),D_=Tn(function(e,t){return vn(e,me,a,a,a,t)});function P_(e,t){if(typeof e!="function")throw new tn(_);return t=t===a?t:tt(t),rt(e,t)}function x_(e,t){if(typeof e!="function")throw new tn(_);return t=t==null?0:Pt(tt(t),0),rt(function(n){var o=n[t],h=xn(n,0,t);return o&&In(h,o),Zt(e,this,h)})}function L_(e,t,n){var o=!0,h=!0;if(typeof e!="function")throw new tn(_);return bt(n)&&(o="leading"in n?!!n.leading:o,h="trailing"in n?!!n.trailing:h),Is(e,t,{leading:o,maxWait:t,trailing:h})}function M_(e){return As(e,1)}function N_(e,t){return ua(zi(t),e)}function U_(){if(!arguments.length)return[];var e=arguments[0];return qe(e)?e:[e]}function F_(e){return rn(e,m)}function B_(e,t){return t=typeof t=="function"?t:a,rn(e,m,t)}function k_(e){return rn(e,F|m)}function G_(e,t){return t=typeof t=="function"?t:a,rn(e,F|m,t)}function W_(e,t){return t==null||po(e,t,xt(t))}function ln(e,t){return e===t||e!==e&&t!==t}var Y_=Xr(Ni),K_=Xr(function(e,t){return e>=t}),Yn=Ao(function(){return arguments}())?Ao:function(e){return It(e)&&Tt.call(e,"callee")&&!so.call(e,"callee")},qe=se.isArray,j_=ja?Jt(ja):Xf;function Vt(e){return e!=null&&oi(e.length)&&!An(e)}function Rt(e){return It(e)&&Vt(e)}function V_(e){return e===!0||e===!1||It(e)&&Gt(e)==Ve}var Ln=nf||Ta,H_=Va?Jt(Va):Qf;function z_(e){return It(e)&&e.nodeType===1&&!Or(e)}function Z_(e){if(e==null)return!0;if(Vt(e)&&(qe(e)||typeof e=="string"||typeof e.splice=="function"||Ln(e)||er(e)||Yn(e)))return!e.length;var t=Ft(e);if(t==nt||t==L)return!e.size;if(vr(e))return!Bi(e).length;for(var n in e)if(Tt.call(e,n))return!1;return!0}function J_(e,t){return pr(e,t)}function $_(e,t,n){n=typeof n=="function"?n:a;var o=n?n(e,t):a;return o===a?pr(e,t,a,n):!!o}function fa(e){if(!It(e))return!1;var t=Gt(e);return t==pt||t==Ot||typeof e.message=="string"&&typeof e.name=="string"&&!Or(e)}function X_(e){return typeof e=="number"&&rf(e)}function An(e){if(!bt(e))return!1;var t=Gt(e);return t==ze||t==st||t==Xe||t==s}function ws(e){return typeof e=="number"&&e==tt(e)}function oi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fe}function bt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function It(e){return e!=null&&typeof e=="object"}var Cs=Ha?Jt(Ha):el;function Q_(e,t){return e===t||Fi(e,t,ea(t))}function q_(e,t,n){return n=typeof n=="function"?n:a,Fi(e,t,ea(t),n)}function eh(e){return Ds(e)&&e!=+e}function th(e){if(Bl(e))throw new $e(N);return yo(e)}function nh(e){return e===null}function rh(e){return e==null}function Ds(e){return typeof e=="number"||It(e)&&Gt(e)==ct}function Or(e){if(!It(e)||Gt(e)!=J)return!1;var t=Lr(e);if(t===null)return!0;var n=Tt.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Cr.call(n)==$u}var la=za?Jt(za):tl;function ih(e){return ws(e)&&e>=-fe&&e<=fe}var Ps=Za?Jt(Za):nl;function si(e){return typeof e=="string"||!qe(e)&&It(e)&&Gt(e)==j}function Xt(e){return typeof e=="symbol"||It(e)&&Gt(e)==x}var er=Ja?Jt(Ja):rl;function ah(e){return e===a}function oh(e){return It(e)&&Ft(e)==te}function sh(e){return It(e)&&Gt(e)==le}var uh=Xr(ki),fh=Xr(function(e,t){return e<=t});function xs(e){if(!e)return[];if(Vt(e))return si(e)?un(e):jt(e);if(or&&e[or])return Bu(e[or]());var t=Ft(e),n=t==nt?bi:t==L?br:tr;return n(e)}function yn(e){if(!e)return e===0?e:0;if(e=sn(e),e===Z||e===-Z){var t=e<0?-1:1;return t*de}return e===e?e:0}function tt(e){var t=yn(e),n=t%1;return t===t?n?t-n:t:0}function Ls(e){return e?kn(tt(e),0,ve):0}function sn(e){if(typeof e=="number")return e;if(Xt(e))return be;if(bt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=bt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Et,"");var n=Oa.test(e);return n||Aa.test(e)?Au(e.slice(2),n?2:8):nr.test(e)?be:+e}function Ms(e){return hn(e,Ht(e))}function lh(e){return e?kn(tt(e),-fe,fe):e===0?e:0}function _t(e){return e==null?"":$t(e)}var ch=Xn(function(e,t){if(vr(t)||Vt(t)){hn(t,xt(t),e);return}for(var n in t)Tt.call(t,n)&&_r(e,n,t[n])}),Ns=Xn(function(e,t){hn(t,Ht(t),e)}),ui=Xn(function(e,t,n,o){hn(t,Ht(t),e,o)}),_h=Xn(function(e,t,n,o){hn(t,xt(t),e,o)}),hh=Tn(xi);function dh(e,t){var n=Jn(e);return t==null?n:ho(n,t)}var ph=rt(function(e,t){e=gt(e);var n=-1,o=t.length,h=o>2?t[2]:a;for(h&&Wt(t[0],t[1],h)&&(o=1);++n<o;)for(var C=t[n],W=Ht(C),V=-1,q=W.length;++V<q;){var Ee=W[V],pe=e[Ee];(pe===a||ln(pe,zn[Ee])&&!Tt.call(e,Ee))&&(e[Ee]=C[Ee])}return e}),Eh=rt(function(e){return e.push(a,Qo),Zt(Us,a,e)});function gh(e,t){return Xa(e,Ye(t,3),_n)}function vh(e,t){return Xa(e,Ye(t,3),Mi)}function Th(e,t){return e==null?e:Li(e,Ye(t,3),Ht)}function Oh(e,t){return e==null?e:To(e,Ye(t,3),Ht)}function Ah(e,t){return e&&_n(e,Ye(t,3))}function yh(e,t){return e&&Mi(e,Ye(t,3))}function Sh(e){return e==null?[]:Kr(e,xt(e))}function mh(e){return e==null?[]:Kr(e,Ht(e))}function ca(e,t,n){var o=e==null?a:$n(e,t);return o===a?n:o}function bh(e,t){return e!=null&&ts(e,t,zf)}function _a(e,t){return e!=null&&ts(e,t,Zf)}var Ih=zo(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Dr.call(t)),e[t]=n},da(zt)),Rh=zo(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Dr.call(t)),Tt.call(e,t)?e[t].push(n):e[t]=[n]},Ye),wh=rt(dr);function xt(e){return Vt(e)?co(e):Bi(e)}function Ht(e){return Vt(e)?co(e,!0):il(e)}function Ch(e,t){var n={};return t=Ye(t,3),_n(e,function(o,h,C){gn(n,t(o,h,C),o)}),n}function Dh(e,t){var n={};return t=Ye(t,3),_n(e,function(o,h,C){gn(n,h,t(o,h,C))}),n}var Ph=Xn(function(e,t,n){jr(e,t,n)}),Us=Xn(function(e,t,n,o){jr(e,t,n,o)}),xh=Tn(function(e,t){var n={};if(e==null)return n;var o=!1;t=mt(t,function(C){return C=Pn(C,e),o||(o=C.length>1),C}),hn(e,Qi(e),n),o&&(n=rn(n,F|M|m,Il));for(var h=t.length;h--;)ji(n,t[h]);return n});function Lh(e,t){return Fs(e,ai(Ye(t)))}var Mh=Tn(function(e,t){return e==null?{}:ol(e,t)});function Fs(e,t){if(e==null)return{};var n=mt(Qi(e),function(o){return[o]});return t=Ye(t),Co(e,n,function(o,h){return t(o,h[0])})}function Nh(e,t,n){t=Pn(t,e);var o=-1,h=t.length;for(h||(h=1,e=a);++o<h;){var C=e==null?a:e[dn(t[o])];C===a&&(o=h,C=n),e=An(C)?C.call(e):C}return e}function Uh(e,t,n){return e==null?e:Er(e,t,n)}function Fh(e,t,n,o){return o=typeof o=="function"?o:a,e==null?e:Er(e,t,n,o)}var Bs=$o(xt),ks=$o(Ht);function Bh(e,t,n){var o=qe(e),h=o||Ln(e)||er(e);if(t=Ye(t,4),n==null){var C=e&&e.constructor;h?n=o?new C:[]:bt(e)?n=An(C)?Jn(Lr(e)):{}:n={}}return(h?en:_n)(e,function(W,V,q){return t(n,W,V,q)}),n}function kh(e,t){return e==null?!0:ji(e,t)}function Gh(e,t,n){return e==null?e:Mo(e,t,zi(n))}function Wh(e,t,n,o){return o=typeof o=="function"?o:a,e==null?e:Mo(e,t,zi(n),o)}function tr(e){return e==null?[]:mi(e,xt(e))}function Yh(e){return e==null?[]:mi(e,Ht(e))}function Kh(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=sn(n),n=n===n?n:0),t!==a&&(t=sn(t),t=t===t?t:0),kn(sn(e),t,n)}function jh(e,t,n){return t=yn(t),n===a?(n=t,t=0):n=yn(n),e=sn(e),Jf(e,t,n)}function Vh(e,t,n){if(n&&typeof n!="boolean"&&Wt(e,t,n)&&(t=n=a),n===a&&(typeof t=="boolean"?(n=t,t=a):typeof e=="boolean"&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=yn(e),t===a?(t=e,e=0):t=yn(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var h=fo();return Ut(e+h*(t-e+Ou("1e-"+((h+"").length-1))),t)}return Wi(e,t)}var Hh=Qn(function(e,t,n){return t=t.toLowerCase(),e+(n?Gs(t):t)});function Gs(e){return ha(_t(e).toLowerCase())}function Ws(e){return e=_t(e),e&&e.replace(li,Lu).replace(lu,"")}function zh(e,t,n){e=_t(e),t=$t(t);var o=e.length;n=n===a?o:kn(tt(n),0,o);var h=n;return n-=t.length,n>=0&&e.slice(n,h)==t}function Zh(e){return e=_t(e),e&&O.test(e)?e.replace(b,Mu):e}function Jh(e){return e=_t(e),e&&Qe.test(e)?e.replace(ut,"\\\\$&"):e}var $h=Qn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Xh=Qn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Qh=jo("toLowerCase");function qh(e,t,n){e=_t(e),t=tt(t);var o=t?Hn(e):0;if(!t||o>=t)return e;var h=(t-o)/2;return $r(Fr(h),n)+e+$r(Ur(h),n)}function ed(e,t,n){e=_t(e),t=tt(t);var o=t?Hn(e):0;return t&&o<t?e+$r(t-o,n):e}function td(e,t,n){e=_t(e),t=tt(t);var o=t?Hn(e):0;return t&&o<t?$r(t-o,n)+e:e}function nd(e,t,n){return n||t==null?t=0:t&&(t=+t),uf(_t(e).replace(ft,""),t||0)}function rd(e,t,n){return(n?Wt(e,t,n):t===a)?t=1:t=tt(t),Yi(_t(e),t)}function id(){var e=arguments,t=_t(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var ad=Qn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function od(e,t,n){return n&&typeof n!="number"&&Wt(e,t,n)&&(t=n=a),n=n===a?ve:n>>>0,n?(e=_t(e),e&&(typeof t=="string"||t!=null&&!la(t))&&(t=$t(t),!t&&Vn(e))?xn(un(e),0,n):e.split(t,n)):[]}var sd=Qn(function(e,t,n){return e+(n?" ":"")+ha(t)});function ud(e,t,n){return e=_t(e),n=n==null?0:kn(tt(n),0,e.length),t=$t(t),e.slice(n,n+t.length)==t}function fd(e,t,n){var o=y.templateSettings;n&&Wt(e,t,n)&&(t=a),e=_t(e),t=ui({},t,o,Xo);var h=ui({},t.imports,o.imports,Xo),C=xt(h),W=mi(h,C),V,q,Ee=0,pe=t.interpolate||rr,Se="__p += '",xe=Ri((t.escape||rr).source+"|"+pe.source+"|"+(pe===ne?Qt:rr).source+"|"+(t.evaluate||rr).source+"|$","g"),Fe="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++pu+"]")+\`
\`;e.replace(xe,function(Ke,at,ht,Yt,Kt,Mn){return ht||(ht=Yt),Se+=e.slice(Ee,Mn).replace(Hs,Nu),at&&(V=!0,Se+=\`' +
__e(\`+at+\`) +
'\`),Kt&&(q=!0,Se+=\`';
\`+Kt+\`;
__p += '\`),ht&&(Se+=\`' +
((__t = (\`+ht+\`)) == null ? '' : __t) +
'\`),Ee=Mn+Ke.length,Ke}),Se+=\`';
\`;var He=t.variable;He||(Se=\`with (obj) {
\`+Se+\`
}
\`),Se=(q?Se.replace(Ae,""):Se).replace(Ge,"$1").replace(i,"$1;"),Se="function("+(He||"obj")+\`) {
\`+(He?"":\`obj || (obj = {});
\`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(q?\`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
\`:\`;
\`)+Se+\`return __p
}\`;var it=Ks(function(){return lt(C,Fe+"return "+Se).apply(a,W)});if(it.source=Se,fa(it))throw it;return it}function ld(e){return _t(e).toLowerCase()}function cd(e){return _t(e).toUpperCase()}function _d(e,t,n){if(e=_t(e),e&&(n||t===a))return e.replace(Et,"");if(!e||!(t=$t(t)))return e;var o=un(e),h=un(t),C=to(o,h),W=no(o,h)+1;return xn(o,C,W).join("")}function hd(e,t,n){if(e=_t(e),e&&(n||t===a))return e.replace(Lt,"");if(!e||!(t=$t(t)))return e;var o=un(e),h=no(o,un(t))+1;return xn(o,0,h).join("")}function dd(e,t,n){if(e=_t(e),e&&(n||t===a))return e.replace(ft,"");if(!e||!(t=$t(t)))return e;var o=un(e),h=to(o,un(t));return xn(o,h).join("")}function pd(e,t){var n=Me,o=je;if(bt(t)){var h="separator"in t?t.separator:h;n="length"in t?tt(t.length):n,o="omission"in t?$t(t.omission):o}e=_t(e);var C=e.length;if(Vn(e)){var W=un(e);C=W.length}if(n>=C)return e;var V=n-Hn(o);if(V<1)return o;var q=W?xn(W,0,V).join(""):e.slice(0,V);if(h===a)return q+o;if(W&&(V+=q.length-V),la(h)){if(e.slice(V).search(h)){var Ee,pe=q;for(h.global||(h=Ri(h.source,_t(kt.exec(h))+"g")),h.lastIndex=0;Ee=h.exec(pe);)var Se=Ee.index;q=q.slice(0,Se===a?V:Se)}}else if(e.indexOf($t(h),V)!=V){var xe=q.lastIndexOf(h);xe>-1&&(q=q.slice(0,xe))}return q+o}function Ed(e){return e=_t(e),e&&f.test(e)?e.replace(ie,Yu):e}var gd=Qn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ha=jo("toUpperCase");function Ys(e,t,n){return e=_t(e),t=n?a:t,t===a?Fu(e)?Vu(e):wu(e):e.match(t)||[]}var Ks=rt(function(e,t){try{return Zt(e,a,t)}catch(n){return fa(n)?n:new $e(n)}}),vd=Tn(function(e,t){return en(t,function(n){n=dn(n),gn(e,n,sa(e[n],e))}),e});function Td(e){var t=e==null?0:e.length,n=Ye();return e=t?mt(e,function(o){if(typeof o[1]!="function")throw new tn(_);return[n(o[0]),o[1]]}):[],rt(function(o){for(var h=-1;++h<t;){var C=e[h];if(Zt(C[0],this,o))return Zt(C[1],this,o)}})}function Od(e){return jf(rn(e,F))}function da(e){return function(){return e}}function Ad(e,t){return e==null||e!==e?t:e}var yd=Ho(),Sd=Ho(!0);function zt(e){return e}function pa(e){return So(typeof e=="function"?e:rn(e,F))}function md(e){return bo(rn(e,F))}function bd(e,t){return Io(e,rn(t,F))}var Id=rt(function(e,t){return function(n){return dr(n,e,t)}}),Rd=rt(function(e,t){return function(n){return dr(e,n,t)}});function Ea(e,t,n){var o=xt(t),h=Kr(t,o);n==null&&!(bt(t)&&(h.length||!o.length))&&(n=t,t=e,e=this,h=Kr(t,xt(t)));var C=!(bt(n)&&"chain"in n)||!!n.chain,W=An(e);return en(h,function(V){var q=t[V];e[V]=q,W&&(e.prototype[V]=function(){var Ee=this.__chain__;if(C||Ee){var pe=e(this.__wrapped__),Se=pe.__actions__=jt(this.__actions__);return Se.push({func:q,args:arguments,thisArg:e}),pe.__chain__=Ee,pe}return q.apply(e,In([this.value()],arguments))})}),e}function wd(){return Mt._===this&&(Mt._=Xu),this}function ga(){}function Cd(e){return e=tt(e),rt(function(t){return Ro(t,e)})}var Dd=Ji(mt),Pd=Ji($a),xd=Ji(Ti);function js(e){return na(e)?Oi(dn(e)):sl(e)}function Ld(e){return function(t){return e==null?a:$n(e,t)}}var Md=Zo(),Nd=Zo(!0);function va(){return[]}function Ta(){return!1}function Ud(){return{}}function Fd(){return""}function Bd(){return!0}function kd(e,t){if(e=tt(e),e<1||e>fe)return[];var n=ve,o=Ut(e,ve);t=Ye(t),e-=ve;for(var h=Si(o,t);++n<e;)t(n);return h}function Gd(e){return qe(e)?mt(e,dn):Xt(e)?[e]:jt(ls(_t(e)))}function Wd(e){var t=++Ju;return _t(e)+t}var Yd=Jr(function(e,t){return e+t},0),Kd=$i("ceil"),jd=Jr(function(e,t){return e/t},1),Vd=$i("floor");function Hd(e){return e&&e.length?Yr(e,zt,Ni):a}function zd(e,t){return e&&e.length?Yr(e,Ye(t,2),Ni):a}function Zd(e){return qa(e,zt)}function Jd(e,t){return qa(e,Ye(t,2))}function $d(e){return e&&e.length?Yr(e,zt,ki):a}function Xd(e,t){return e&&e.length?Yr(e,Ye(t,2),ki):a}var Qd=Jr(function(e,t){return e*t},1),qd=$i("round"),ep=Jr(function(e,t){return e-t},0);function tp(e){return e&&e.length?yi(e,zt):0}function np(e,t){return e&&e.length?yi(e,Ye(t,2)):0}return y.after=m_,y.ary=As,y.assign=ch,y.assignIn=Ns,y.assignInWith=ui,y.assignWith=_h,y.at=hh,y.before=ys,y.bind=sa,y.bindAll=vd,y.bindKey=Ss,y.castArray=U_,y.chain=vs,y.chunk=Vl,y.compact=Hl,y.concat=zl,y.cond=Td,y.conforms=Od,y.constant=da,y.countBy=t_,y.create=dh,y.curry=ms,y.curryRight=bs,y.debounce=Is,y.defaults=ph,y.defaultsDeep=Eh,y.defer=b_,y.delay=I_,y.difference=Zl,y.differenceBy=Jl,y.differenceWith=$l,y.drop=Xl,y.dropRight=Ql,y.dropRightWhile=ql,y.dropWhile=ec,y.fill=tc,y.filter=r_,y.flatMap=o_,y.flatMapDeep=s_,y.flatMapDepth=u_,y.flatten=ds,y.flattenDeep=nc,y.flattenDepth=rc,y.flip=R_,y.flow=yd,y.flowRight=Sd,y.fromPairs=ic,y.functions=Sh,y.functionsIn=mh,y.groupBy=f_,y.initial=oc,y.intersection=sc,y.intersectionBy=uc,y.intersectionWith=fc,y.invert=Ih,y.invertBy=Rh,y.invokeMap=c_,y.iteratee=pa,y.keyBy=__,y.keys=xt,y.keysIn=Ht,y.map=ni,y.mapKeys=Ch,y.mapValues=Dh,y.matches=md,y.matchesProperty=bd,y.memoize=ii,y.merge=Ph,y.mergeWith=Us,y.method=Id,y.methodOf=Rd,y.mixin=Ea,y.negate=ai,y.nthArg=Cd,y.omit=xh,y.omitBy=Lh,y.once=w_,y.orderBy=h_,y.over=Dd,y.overArgs=C_,y.overEvery=Pd,y.overSome=xd,y.partial=ua,y.partialRight=Rs,y.partition=d_,y.pick=Mh,y.pickBy=Fs,y.property=js,y.propertyOf=Ld,y.pull=hc,y.pullAll=Es,y.pullAllBy=dc,y.pullAllWith=pc,y.pullAt=Ec,y.range=Md,y.rangeRight=Nd,y.rearg=D_,y.reject=g_,y.remove=gc,y.rest=P_,y.reverse=aa,y.sampleSize=T_,y.set=Uh,y.setWith=Fh,y.shuffle=O_,y.slice=vc,y.sortBy=S_,y.sortedUniq=bc,y.sortedUniqBy=Ic,y.split=od,y.spread=x_,y.tail=Rc,y.take=wc,y.takeRight=Cc,y.takeRightWhile=Dc,y.takeWhile=Pc,y.tap=Hc,y.throttle=L_,y.thru=ti,y.toArray=xs,y.toPairs=Bs,y.toPairsIn=ks,y.toPath=Gd,y.toPlainObject=Ms,y.transform=Bh,y.unary=M_,y.union=xc,y.unionBy=Lc,y.unionWith=Mc,y.uniq=Nc,y.uniqBy=Uc,y.uniqWith=Fc,y.unset=kh,y.unzip=oa,y.unzipWith=gs,y.update=Gh,y.updateWith=Wh,y.values=tr,y.valuesIn=Yh,y.without=Bc,y.words=Ys,y.wrap=N_,y.xor=kc,y.xorBy=Gc,y.xorWith=Wc,y.zip=Yc,y.zipObject=Kc,y.zipObjectDeep=jc,y.zipWith=Vc,y.entries=Bs,y.entriesIn=ks,y.extend=Ns,y.extendWith=ui,Ea(y,y),y.add=Yd,y.attempt=Ks,y.camelCase=Hh,y.capitalize=Gs,y.ceil=Kd,y.clamp=Kh,y.clone=F_,y.cloneDeep=k_,y.cloneDeepWith=G_,y.cloneWith=B_,y.conformsTo=W_,y.deburr=Ws,y.defaultTo=Ad,y.divide=jd,y.endsWith=zh,y.eq=ln,y.escape=Zh,y.escapeRegExp=Jh,y.every=n_,y.find=i_,y.findIndex=_s,y.findKey=gh,y.findLast=a_,y.findLastIndex=hs,y.findLastKey=vh,y.floor=Vd,y.forEach=Ts,y.forEachRight=Os,y.forIn=Th,y.forInRight=Oh,y.forOwn=Ah,y.forOwnRight=yh,y.get=ca,y.gt=Y_,y.gte=K_,y.has=bh,y.hasIn=_a,y.head=ps,y.identity=zt,y.includes=l_,y.indexOf=ac,y.inRange=jh,y.invoke=wh,y.isArguments=Yn,y.isArray=qe,y.isArrayBuffer=j_,y.isArrayLike=Vt,y.isArrayLikeObject=Rt,y.isBoolean=V_,y.isBuffer=Ln,y.isDate=H_,y.isElement=z_,y.isEmpty=Z_,y.isEqual=J_,y.isEqualWith=$_,y.isError=fa,y.isFinite=X_,y.isFunction=An,y.isInteger=ws,y.isLength=oi,y.isMap=Cs,y.isMatch=Q_,y.isMatchWith=q_,y.isNaN=eh,y.isNative=th,y.isNil=rh,y.isNull=nh,y.isNumber=Ds,y.isObject=bt,y.isObjectLike=It,y.isPlainObject=Or,y.isRegExp=la,y.isSafeInteger=ih,y.isSet=Ps,y.isString=si,y.isSymbol=Xt,y.isTypedArray=er,y.isUndefined=ah,y.isWeakMap=oh,y.isWeakSet=sh,y.join=lc,y.kebabCase=$h,y.last=on,y.lastIndexOf=cc,y.lowerCase=Xh,y.lowerFirst=Qh,y.lt=uh,y.lte=fh,y.max=Hd,y.maxBy=zd,y.mean=Zd,y.meanBy=Jd,y.min=$d,y.minBy=Xd,y.stubArray=va,y.stubFalse=Ta,y.stubObject=Ud,y.stubString=Fd,y.stubTrue=Bd,y.multiply=Qd,y.nth=_c,y.noConflict=wd,y.noop=ga,y.now=ri,y.pad=qh,y.padEnd=ed,y.padStart=td,y.parseInt=nd,y.random=Vh,y.reduce=p_,y.reduceRight=E_,y.repeat=rd,y.replace=id,y.result=Nh,y.round=qd,y.runInContext=X,y.sample=v_,y.size=A_,y.snakeCase=ad,y.some=y_,y.sortedIndex=Tc,y.sortedIndexBy=Oc,y.sortedIndexOf=Ac,y.sortedLastIndex=yc,y.sortedLastIndexBy=Sc,y.sortedLastIndexOf=mc,y.startCase=sd,y.startsWith=ud,y.subtract=ep,y.sum=tp,y.sumBy=np,y.template=fd,y.times=kd,y.toFinite=yn,y.toInteger=tt,y.toLength=Ls,y.toLower=ld,y.toNumber=sn,y.toSafeInteger=lh,y.toString=_t,y.toUpper=cd,y.trim=_d,y.trimEnd=hd,y.trimStart=dd,y.truncate=pd,y.unescape=Ed,y.uniqueId=Wd,y.upperCase=gd,y.upperFirst=ha,y.each=Ts,y.eachRight=Os,y.first=ps,Ea(y,function(){var e={};return _n(y,function(t,n){Tt.call(y.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),y.VERSION=T,en(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){y[e].placeholder=y}),en(["drop","take"],function(e,t){ot.prototype[e]=function(n){n=n===a?1:Pt(tt(n),0);var o=this.__filtered__&&!t?new ot(this):this.clone();return o.__filtered__?o.__takeCount__=Ut(n,o.__takeCount__):o.__views__.push({size:Ut(n,ve),type:e+(o.__dir__<0?"Right":"")}),o},ot.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),en(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==Ie||n==K;ot.prototype[e]=function(h){var C=this.clone();return C.__iteratees__.push({iteratee:Ye(h,3),type:n}),C.__filtered__=C.__filtered__||o,C}}),en(["head","last"],function(e,t){var n="take"+(t?"Right":"");ot.prototype[e]=function(){return this[n](1).value()[0]}}),en(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");ot.prototype[e]=function(){return this.__filtered__?new ot(this):this[n](1)}}),ot.prototype.compact=function(){return this.filter(zt)},ot.prototype.find=function(e){return this.filter(e).head()},ot.prototype.findLast=function(e){return this.reverse().find(e)},ot.prototype.invokeMap=rt(function(e,t){return typeof e=="function"?new ot(this):this.map(function(n){return dr(n,e,t)})}),ot.prototype.reject=function(e){return this.filter(ai(Ye(e)))},ot.prototype.slice=function(e,t){e=tt(e);var n=this;return n.__filtered__&&(e>0||t<0)?new ot(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(t=tt(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},ot.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ot.prototype.toArray=function(){return this.take(ve)},_n(ot.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),h=y[o?"take"+(t=="last"?"Right":""):t],C=o||/^find/.test(t);h&&(y.prototype[t]=function(){var W=this.__wrapped__,V=o?[1]:arguments,q=W instanceof ot,Ee=V[0],pe=q||qe(W),Se=function(at){var ht=h.apply(y,In([at],V));return o&&xe?ht[0]:ht};pe&&n&&typeof Ee=="function"&&Ee.length!=1&&(q=pe=!1);var xe=this.__chain__,Fe=!!this.__actions__.length,He=C&&!xe,it=q&&!Fe;if(!C&&pe){W=it?W:new ot(this);var Ke=e.apply(W,V);return Ke.__actions__.push({func:ti,args:[Se],thisArg:a}),new nn(Ke,xe)}return He&&it?e.apply(this,V):(Ke=this.thru(Se),He?o?Ke.value()[0]:Ke.value():Ke)})}),en(["pop","push","shift","sort","splice","unshift"],function(e){var t=Rr[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);y.prototype[e]=function(){var h=arguments;if(o&&!this.__chain__){var C=this.value();return t.apply(qe(C)?C:[],h)}return this[n](function(W){return t.apply(qe(W)?W:[],h)})}}),_n(ot.prototype,function(e,t){var n=y[t];if(n){var o=n.name+"",h=lr[o]||(lr[o]=[]);h.push({name:t,func:n})}}),lr[Zr(a,Y).name]=[{name:"wrapper",func:a}],ot.prototype.clone=pf,ot.prototype.reverse=Ef,ot.prototype.value=gf,y.prototype.at=zc,y.prototype.chain=Zc,y.prototype.commit=Jc,y.prototype.next=$c,y.prototype.plant=Qc,y.prototype.reverse=qc,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=e_,y.prototype.first=y.prototype.head,or&&(y.prototype[or]=Xc),y},Ir=Hu();Mt._=Ir,g=function(){return Ir}.call(w,p,w,R),g!==a&&(R.exports=g)}).call(this)}).call(this,p("d8a2b18087957e350ade"),p("6a927222a29e571499a4")(A))},"015c0de8729d1accb6db":function(A,w){},"01d16a391b82cbd5b98a":function(A,w,p){"use strict";(function(r,R){p.d(w,"b",function(){return E});var g=p("00f83bf39a29e0b57d1f"),a=p.n(g),T=p("36f0cad020f416714cbb"),c=p("de82b172f89d0f35218f"),N=p("12303d01cb2347d65acd");p.d(w,"a",function(){return N.a});const _="production",E=_==="development",P=_==="production",D=_==="test",F=r.env.STAGING,M=r.env.COMMUNITY,m=r.env.ENTERPRISE,I=Object.freeze({}),k=Object.freeze([]),B=Object.freeze(new Map),Y=Object.freeze(new Set);function ee(){return 1}function z(b){return b?b.id===ee():!1}function $(b){var f;return b?z(b)||((f=b.settings)==null?void 0:f.isRoot)===!0||b.isRoot===!0:!1}function re(b,...f){return Object(g.flow)([O=>Object(g.groupBy)(O,b),O=>Object(g.map)(O,Object(g.spread)(g.merge))])(Object(g.flatten)(f))}function ae(b,...f){return Object(g.flow)([O=>Object(g.groupBy)(O,b),O=>Object(g.filter)(O,G=>G.length>1),O=>Object(g.map)(O,Object(g.spread)(g.merge))])(Object(g.flatten)(f))}function ue(){}function me(b){return b}async function De(b,f){try{return await Promise.resolve(b())}catch(O){return await Promise.resolve(f(O))}}const Me=/[|\\\\{()[^$+*?.-]/g;function je(b){return b.replace(Me,"\\\\$&")}function Q(b,f="_"){return b.replace(/([A-Z])/g,(O,G)=>\`\${f}\${G.toLowerCase()}\`)}function ge(b,f="_"){const O=new RegExp(\`\${f}(\\\\w)\`,"g");return b.replace(O,(G,oe)=>\`\${oe.toUpperCase()}\`)}function Ie(b){if(!Object(g.isPlainObject)(b))return b;const f=Object(g.mapKeys)(Object(g.cloneDeep)(b),(O,G)=>G.replace(/(_\\w)/,oe=>oe[1].toUpperCase()));return Object(g.mapValues)(f,O=>Object(g.isPlainObject)(O)?Ie(O):Object(g.isArray)(O)?Object(g.map)(O,Ie):O)}function we(b){return encodeURIComponent(b).replace(/[!'()*]/g,f=>\`%\${f.charCodeAt(0).toString(16)}\`)}const K=/^https?:\\/\\//;function Z(b){let f="",O=b;const G=K.exec(b);return G&&([f]=G,O=b.substring(f.length)),f+we(O).replace(/%2F/g,"/").replace(/%3A/,":")}function fe(b,...f){const O=[],G=[];return f.forEach(oe=>{const ne=typeof oe;if(ne==="string")O.push(oe);else if(ne==="object")Array.isArray(oe)?oe.forEach(Oe=>{const ke=typeof Oe;if(ke==="string")O.push(Oe);else if(ke==="object"&&!Array.isArray(Oe))G.push(Oe);else throw new TypeError(\`Expected string or object, got \${ne}\`)}):G.push(oe);else throw new TypeError(\`Expected string, object or array, got \${ne}\`)}),O.length?(G.forEach(oe=>O.forEach(ne=>{ne in oe&&(b[ne]=oe[ne])})),b):Object.assign(b,...G)}function de(b,f){return typeof f=="number"?f:b.indexOf(f)}function be(b,f){const O=new Set,G=new Set;if(b.forEach(oe=>{typeof oe=="number"?O.add(oe):G.add(oe)}),G.size)for(let oe=0,ne=f.length;oe<ne;++oe){const Oe=f[oe];if(G.has(Oe)&&(G.delete(Oe),O.add(oe),!G.size))break}return[...O].sort((oe,ne)=>ne-oe)}function ve(b,f,O=1){return f.sort((G,oe)=>oe-G).forEach(G=>b.splice(G,O)),b}function Le(b,f){return Object.keys(f).forEach(O=>{O in b||(b[O]=f[O])}),b}function Ue(b,f){Object.keys(b).forEach(O=>{const G=b[O];return typeof G=="object"?Ue(G,f):f(G,O,b)})}function et(b,f=2){const O=b.split(".");return O.slice(-(O.length===f?f-1:f)).join(".")}function Ze(b){return b.replace(/\\.[^/.]+$/,"")}function We(b,f){const O=new Set(f),G={},oe={};return Object.keys(b).forEach(ne=>{O.has(ne)?G[ne]=b[ne]:oe[ne]=b[ne]}),{picked:G,omitted:oe}}function Xe(b,f,O,G=O){f.on(O,(...oe)=>b.emit(G,...oe))}function Ve(b,f,O){Object.keys(O).forEach(G=>Xe(b,f,G,O[G]))}function Je(b,f="id",O=ue){Object.keys(b).forEach((G,...oe)=>{const ne=b[G];ne[f]=G,O(ne,G,b,...oe)})}function Ot(b,f=null){return Object.keys(b).forEach(O=>{b[O]=null}),f}function pt(b,f=null){return b.forEach(O=>Ot(O)),f}function ze(b,f,O=me){return typeof f=="function"?b.reduce((G,oe,ne,...Oe)=>{const ke=f(oe,ne,G,...Oe);return G.set(ke,O(oe,ke,ne,G,...Oe)),G},new Map):b.reduce((G,oe,ne,...Oe)=>(G.set(oe[f],O(oe,f,ne,G,...Oe)),G),new Map)}function st(b,f,O){f.has(b)?f.get(b).push(O):f.set(b,[O])}function nt(b,f,O=me){return typeof f=="function"?b.reduce((G,oe,ne,...Oe)=>{const ke=f(oe,ne,G,...Oe);return st(ke,G,O(oe,ke,ne,G,...Oe)),G},new Map):b.reduce((G,oe,ne,...Oe)=>(st(oe[f],G,O(oe,f,ne,G,...Oe)),G),new Map)}function ct(b,f){return Object.keys(b).sort(f).reduce((O,G)=>(O[G]=b[G],O),{})}function dt(b){return b==null||typeof b!="object"||typeof b.pipe!="function"?!1:b.writable!==!1&&typeof b._write=="function"&&typeof b._writableState=="object"||b.readable!==!1&&typeof b._read=="function"&&typeof b._readableState=="object"||typeof b._transform=="function"&&typeof b._transformState=="object"}function J(b,f=!1){return new Promise((O,G)=>{try{let oe=!0,ne=!0;b.on("error",G),b.readable!==!1&&typeof b._read=="function"&&typeof b._readableState=="object"&&(oe=!1,b.on("end",()=>{oe=!0,ne&&O()})),b.writeable!==!1&&typeof b._write=="function"&&typeof b._writableState=="object"&&(ne=!1,b.on("finish",()=>{ne=!0,oe&&O()})),f&&typeof b.resume=="function"&&b.resume()}catch(oe){G(oe)}})}function d(b,f){return new Promise((O,G)=>{try{let oe=null;b.on("error",G),b.on("data",async ne=>{try{b.pause(),oe=f(ne),await oe,b.resume()}catch(Oe){G(Oe),b.destroy(Oe)}}),b.on("end",async()=>{try{oe&&await oe,O()}catch(ne){G(ne),b.destroy(ne)}})}catch(oe){G(oe)}})}function s(b,f=null){return new Promise((O,G)=>{const oe=[];b.on("data",ne=>{oe.push(f?f(ne):ne)}),b.on("end",()=>O(R.concat(oe))),b.on("error",G)})}function u(b,f='"'){let O=b;return b.charAt(0)!==f&&(O=\`\${f}\${O}\`),O.charAt(O.length-1)!==f&&(O=\`\${O}\${f}\`),O}function L(b,f=6){return b.length>=f?b:"0".repeat(f-b.length)+b}function j(b,f,O){b/=360,f/=100,O/=100;let G,oe,ne;if(f===0)G=oe=ne=O;else{const ke=(Qe,Et,ft)=>(ft<0&&(ft+=1),ft>1&&(ft-=1),ft<.16666666666666666?Qe+(Et-Qe)*6*ft:ft<.5?Et:ft<.6666666666666666?Qe+(Et-Qe)*(.6666666666666666-ft)*6:Qe),yt=O<.5?O*(1+f):O+f-O*f,ut=2*O-yt;G=ke(ut,yt,b+1/3),oe=ke(ut,yt,b),ne=ke(ut,yt,b-1/3)}const Oe=ke=>{const yt=Math.round(ke*255).toString(16);return yt.length===1?\`0\${yt}\`:yt};return\`\${Oe(G)}\${Oe(oe)}\${Oe(ne)}\`}function x(){return j(Object(g.random)(0,360),Object(g.random)(40,100),Object(g.random)(30,70))}function U(b){let f=[],O=Object.getPrototypeOf(b);for(;O;)f=f.concat(Object.getOwnPropertyNames(O)),O=Object.getPrototypeOf(O);return f}function te(b){return typeof b<"u"}function le(b,f=[],O,G=te){const oe=f.length?f:Object.keys(b);let ne=O;return oe.some(Oe=>{const ke=Object(g.get)(b,Oe);return G(ke)?(ne=Oe,!0):!1}),ne}function ye(b,f=[],O,G=te){let oe=O;const ne=le(b,f,null,G);return ne!=null&&(oe=Object(g.get)(b,ne)),oe}function Ce(b,f=[]){const O=new Set(f),G=Object.getOwnPropertyDescriptors(b);return Object.keys(G).forEach(oe=>{const ne=G[oe];!ne.configurable||ne.enumerable||O.size&&!O.has(oe)||Object.defineProperty(b,oe,{...ne,enumerable:!0})}),b}function Pe(b,f=""){let O=[];return Object.keys(b).forEach(G=>{const oe=b[G];let ne="";if(f&&(ne=\`\${f} \`),ne+=Object(g.snakeCase)(G).split("_").join(" "),!Array.isArray(oe)){O=O.concat(Pe(oe,G));return}oe.forEach(Oe=>{if(!Oe.length)return;const ke=Oe.length===1?Oe[0].toUpperCase():Oe.map(yt=>yt.toUpperCase());O.push({title:ne,hotkey:ke})})}),O}const Be=[{title:"decrease bitmap brush size",hotkey:["["]},{title:"increase bitmap brush size",hotkey:["]"]},{title:"decrease points size",hotkey:["alt","-"]},{title:"increase points size",hotkey:["alt","+"]},{title:"increase/decrease points size",hotkey:["alt","mouse wheel"]},{title:"decrease objects opacity",hotkey:["shift","-"]},{title:"increase objects opacity",hotkey:["shift","+"]},{title:"increase/decrease objects opacity",hotkey:["shift","mouse wheel"]},{title:"randomize objects' colors",hotkey:["shift","h"]},{title:"clone objects from previous image",hotkey:["alt","j"]},{title:"deselect current object, cancel tool action",hotkey:["esc"]},{title:"alternative tool action",hotkey:["shift","Left Mouse Button"]},{title:"delete hovered point from current object",hotkey:["delete"]}];function S(b){const{user:f=[],classes:O=[],tags:G=[]}=b,oe=Pe(f);return O.filter(ne=>ne.hotkey).map(ne=>({title:\`"\${ne.title}" class\`,hotkey:ne.hotkey.toUpperCase()})).concat(G.filter(ne=>ne.hotkey).map(ne=>({title:\`"\${ne.title}" tag\`,hotkey:ne.hotkey.toUpperCase()}))).concat(oe).concat(Be.map(ne=>({...ne,hotkey:ne.hotkey.map(Oe=>Oe.toUpperCase())})))}function _e(b,f){if(!b)return!0;let[O]=f.split(".");return O=parseInt(O,10),!(Number.isFinite(O)&&O!==b)}function Te(b,f){f.forEach(O=>{Object(g.hasIn)(b,O)&&Object(g.unset)(b,O)})}function Re(b){b.keys().forEach(f=>b(f))}function H(b){return/^(::f{4}:)?10\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(b)||/^(::f{4}:)?192\\.168\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(b)||/^(::f{4}:)?172\\.(1[6-9]|2\\d|30|31)\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(b)||/^(::f{4}:)?127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(b)||/^(::f{4}:)?169\\.254\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(b)||/^f[cd][0-9a-f]{2}:/i.test(b)||/^fe80:/i.test(b)||/^::1$/.test(b)||/^::$/.test(b)}function ce(b,f){if(b<=0)return-1;let O=f;return O<0?(O%=b,O!==0&&(O+=b)):O>=b&&(O%=b),O}function v(b,f){return b<=0?-1:f<0?0:f>=b?b-1:f}function Ae(b,f,O=Number.EPSILON){return Math.abs(b-f)<O}const Ge=[8,4,4,4,12];function i(b){if(!b)return!1;const f=b.split("-").map(O=>O.length);return!(f.length!==5||!f.every((O,G)=>O===Ge[G]))}function ie(b){return new Promise(f=>setTimeout(f,b))}}).call(this,p("1a654c89165c3fdd23e9"),p("8a5451793be8532373e7").Buffer)},"02d03cc65a5b1a2d55df":function(A,w,p){"use strict";p.r(w),p.d(w,"default",function(){return dt});var r=p("398dab085f4bd5e07c44"),R=p.n(r);const g=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),T=Symbol("Comlink.releaseProxy"),c=Symbol("Comlink.thrown"),N=J=>typeof J=="object"&&J!==null||typeof J=="function",_={canHandle:J=>N(J)&&J[g],serialize(J){const{port1:d,port2:s}=new MessageChannel;return D(J,d),[s,[s]]},deserialize(J){return J.start(),m(J)}},E={canHandle:J=>N(J)&&c in J,serialize({value:J}){let d;return J instanceof Error?d={isError:!0,value:{message:J.message,name:J.name,stack:J.stack}}:d={isError:!1,value:J},[d,[]]},deserialize(J){throw J.isError?Object.assign(new Error(J.value.message),J.value):J.value}},P=new Map([["proxy",_],["throw",E]]);function D(J,d=self){d.addEventListener("message",function s(u){if(!u||!u.data)return;const{id:L,type:j,path:x}=Object.assign({path:[]},u.data),U=(u.data.argumentList||[]).map(ue);let te;try{const le=x.slice(0,-1).reduce((Ce,Pe)=>Ce[Pe],J),ye=x.reduce((Ce,Pe)=>Ce[Pe],J);switch(j){case 0:te=ye;break;case 1:le[x.slice(-1)[0]]=ue(u.data.value),te=!0;break;case 2:te=ye.apply(le,U);break;case 3:{const Ce=new ye(...U);te=$(Ce)}break;case 4:{const{port1:Ce,port2:Pe}=new MessageChannel;D(J,Pe),te=z(Ce,[Ce])}break;case 5:te=void 0;break}}catch(le){te={value:le,[c]:0}}Promise.resolve(te).catch(le=>({value:le,[c]:0})).then(le=>{const[ye,Ce]=ae(le);d.postMessage(Object.assign(Object.assign({},ye),{id:L}),Ce),j===5&&(d.removeEventListener("message",s),M(d))})}),d.start&&d.start()}function F(J){return J.constructor.name==="MessagePort"}function M(J){F(J)&&J.close()}function m(J,d){return k(J,[],d)}function I(J){if(J)throw new Error("Proxy has been released and is not useable")}function k(J,d=[],s=function(){}){let u=!1;const L=new Proxy(s,{get(j,x){if(I(u),x===T)return()=>me(J,{type:5,path:d.map(U=>U.toString())}).then(()=>{M(J),u=!0});if(x==="then"){if(d.length===0)return{then:()=>L};const U=me(J,{type:0,path:d.map(te=>te.toString())}).then(ue);return U.then.bind(U)}return k(J,[...d,x])},set(j,x,U){I(u);const[te,le]=ae(U);return me(J,{type:1,path:[...d,x].map(ye=>ye.toString()),value:te},le).then(ue)},apply(j,x,U){I(u);const te=d[d.length-1];if(te===a)return me(J,{type:4}).then(ue);if(te==="bind")return k(J,d.slice(0,-1));const[le,ye]=Y(U);return me(J,{type:2,path:d.map(Ce=>Ce.toString()),argumentList:le},ye).then(ue)},construct(j,x){I(u);const[U,te]=Y(x);return me(J,{type:3,path:d.map(le=>le.toString()),argumentList:U},te).then(ue)}});return L}function B(J){return Array.prototype.concat.apply([],J)}function Y(J){const d=J.map(ae);return[d.map(s=>s[0]),B(d.map(s=>s[1]))]}const ee=new WeakMap;function z(J,d){return ee.set(J,d),J}function $(J){return Object.assign(J,{[g]:!0})}function re(J,d=self,s="*"){return{postMessage:(u,L)=>J.postMessage(u,s,L),addEventListener:d.addEventListener.bind(d),removeEventListener:d.removeEventListener.bind(d)}}function ae(J){for(const[d,s]of P)if(s.canHandle(J)){const[u,L]=s.serialize(J);return[{type:3,name:d,value:u},L]}return[{type:0,value:J},ee.get(J)||[]]}function ue(J){switch(J.type){case 3:return P.get(J.name).deserialize(J.value);case 0:return J.value}}function me(J,d,s){return new Promise(u=>{const L=De();J.addEventListener("message",function j(x){!x.data||!x.data.id||x.data.id!==L||(J.removeEventListener("message",j),u(x.data))}),J.start&&J.start(),J.postMessage(Object.assign({id:L},d),s)})}function De(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var Me=p("41b51de780701d8b9456"),je=p.n(Me),Q=p("00f83bf39a29e0b57d1f"),ge=p("812baf65d2b8d0a42f86"),Ie=p.n(ge),we=p("9e0829ebb5f4d9754370");let K,Z,fe,de,be,ve,Le,Ue,et,Ze,We,Xe,Ve;function Je(J,d,s){return d=Ot(d),d in J?Object.defineProperty(J,d,{value:s,enumerable:!0,configurable:!0,writable:!0}):J[d]=s,J}function Ot(J){var d=pt(J,"string");return typeof d=="symbol"?d:String(d)}function pt(J,d){if(typeof J!="object"||J===null)return J;var s=J[Symbol.toPrimitive];if(s!==void 0){var u=s.call(J,d||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(J)}function ze([J,d]){return{position:{x:J,y:d}}}function st(J){return{points:J.points.exterior.map(ze)}}K=we.GEOMETRY_TYPES.BITMAP,Z=we.GEOMETRY_TYPES.MASK_3D,fe=we.GEOMETRY_TYPES.RECTANGLE,de=we.GEOMETRY_TYPES.POLYGON,be=we.GEOMETRY_TYPES.POLYLINE,ve=we.GEOMETRY_TYPES.POINT,Le=we.GEOMETRY_TYPES.GRAPH,Ue=we.GEOMETRY_TYPES.CUBOID,et=we.GEOMETRY_TYPES.CUBOID_3D,Ze=we.GEOMETRY_TYPES.POINT_3D,We=we.GEOMETRY_TYPES.POINT_CLOUD,Xe=we.GEOMETRY_TYPES.CLOSED_SURFACE_MESH,Ve=we.GEOMETRY_TYPES.MASK_3D;class nt{}Je(nt,K,Object.freeze({toAnnTool(J){return{bitmap:J.bitmap.data,offset:{x:J.bitmap.origin[0],y:J.bitmap.origin[1]}}},toDatabase(J){return J.bitmap}})),Je(nt,Z,Object.freeze({toAnnTool(J){return J},toDatabase(J){return J}})),Je(nt,fe,Object.freeze({toAnnTool:st,toDatabase(J){return J.points.exterior}})),Je(nt,de,Object.freeze({toAnnTool:st,toDatabase(J){return J.points.exterior}})),Je(nt,be,Object.freeze({toAnnTool:st,toDatabase(J){return J.points.exterior}})),Je(nt,ve,Object.freeze({toAnnTool:st,toDatabase(J){return J.points.exterior}})),Je(nt,Le,Object.freeze({toAnnTool:({nodes:J})=>({points:Object.keys(J).map(d=>{const s=J[d];return{id:Ie()(),nodeId:d,disabled:!!s.disabled,position:{x:s.loc[0],y:s.loc[1]}}})}),toDatabase({nodes:J}){return Object.keys(J).map(d=>{const s=J[d];return[s.loc[0],s.loc[1],d,!!s.disabled]})}})),Je(nt,Ue,Object.freeze({toAnnTool:({faces:J,points:d})=>({faces:J,points:d.map(ze)}),toDatabase(J){return J}})),Je(nt,et,Object.freeze({toAnnTool:J=>Object(Q.pick)(J,["position","rotation","dimensions"]),toDatabase:J=>Object(Q.pick)(J,["position","rotation","dimensions"])})),Je(nt,Ze,Object.freeze({toAnnTool:J=>({position:J}),toDatabase:J=>[J.x,J.y,J.z]})),Je(nt,We,Object.freeze({toAnnTool:J=>{const d=Object(Q.pick)(J,["points","indices"]);return d.points&&(d.points=d.points.map(([s,u,L])=>({position:{x:s,y:u,z:L}}))),d},toDatabase:J=>J})),Je(nt,Xe,Object.freeze({toAnnTool(J){return J},toDatabase(J){return{storagePath:J.storagePath}}})),Je(nt,Ve,Object.freeze({toAnnTool(J){return J},toDatabase(J){return{storagePath:J.storagePath}}}));function ct(J){const d=self.atob(J);let s;return J.startsWith("eJ")?s=je.a.inflate(d):s=Uint8Array.from(d,u=>u.charCodeAt(0)),z(s,[s.buffer])}function dt(J){return R.a.map(J,async d=>(d.geometry=nt[d.geometryType].toAnnTool(d.geometry||d),d.geometryType===we.GEOMETRY_TYPES.BITMAP?d.geometry.bitmap=ct(d.geometry.bitmap):d.geometryType===we.GEOMETRY_TYPES.POINT_CLOUD&&(d.geometry.points&&(d.geometry.points=Object.freeze(d.geometry.points)),d.geometry.indices&&(d.geometry.indices=Object.freeze(d.geometry.indices))),d),{concurrency:10})}D(dt)},"0ee394ae0680b1ca3e73":function(A,w,p){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function R(T,c){return Object.prototype.hasOwnProperty.call(T,c)}w.assign=function(T){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var N=c.shift();if(N){if(typeof N!="object")throw new TypeError(N+"must be non-object");for(var _ in N)R(N,_)&&(T[_]=N[_])}}return T},w.shrinkBuf=function(T,c){return T.length===c?T:T.subarray?T.subarray(0,c):(T.length=c,T)};var g={arraySet:function(T,c,N,_,E){if(c.subarray&&T.subarray){T.set(c.subarray(N,N+_),E);return}for(var P=0;P<_;P++)T[E+P]=c[N+P]},flattenChunks:function(T){var c,N,_,E,P,D;for(_=0,c=0,N=T.length;c<N;c++)_+=T[c].length;for(D=new Uint8Array(_),E=0,c=0,N=T.length;c<N;c++)P=T[c],D.set(P,E),E+=P.length;return D}},a={arraySet:function(T,c,N,_,E){for(var P=0;P<_;P++)T[E+P]=c[N+P]},flattenChunks:function(T){return[].concat.apply([],T)}};w.setTyped=function(T){T?(w.Buf8=Uint8Array,w.Buf16=Uint16Array,w.Buf32=Int32Array,w.assign(w,g)):(w.Buf8=Array,w.Buf16=Array,w.Buf32=Array,w.assign(w,a))},w.setTyped(r)},"0fa305f27f1c8e9bde24":function(A,w){w.read=function(p,r,R,g,a){var T,c,N=a*8-g-1,_=(1<<N)-1,E=_>>1,P=-7,D=R?a-1:0,F=R?-1:1,M=p[r+D];for(D+=F,T=M&(1<<-P)-1,M>>=-P,P+=N;P>0;T=T*256+p[r+D],D+=F,P-=8);for(c=T&(1<<-P)-1,T>>=-P,P+=g;P>0;c=c*256+p[r+D],D+=F,P-=8);if(T===0)T=1-E;else{if(T===_)return c?NaN:(M?-1:1)*(1/0);c=c+Math.pow(2,g),T=T-E}return(M?-1:1)*c*Math.pow(2,T-g)},w.write=function(p,r,R,g,a,T){var c,N,_,E=T*8-a-1,P=(1<<E)-1,D=P>>1,F=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=g?0:T-1,m=g?1:-1,I=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(N=isNaN(r)?1:0,c=P):(c=Math.floor(Math.log(r)/Math.LN2),r*(_=Math.pow(2,-c))<1&&(c--,_*=2),c+D>=1?r+=F/_:r+=F*Math.pow(2,1-D),r*_>=2&&(c++,_/=2),c+D>=P?(N=0,c=P):c+D>=1?(N=(r*_-1)*Math.pow(2,a),c=c+D):(N=r*Math.pow(2,D-1)*Math.pow(2,a),c=0));a>=8;p[R+M]=N&255,M+=m,N/=256,a-=8);for(c=c<<a|N,E+=a;E>0;p[R+M]=c&255,M+=m,c/=256,E-=8);p[R+M-m]|=I*128}},"10056bba30cd518ff6cb":function(A,w,p){"use strict";const r={UNTAGGED:"untagged"},R={ALL:"all",IMAGES_ONLY:"imagesOnly",OBJECTS_ONLY:"objectsOnly"}},"117d0ed1e2d52362e335":function(A,w){},"11df586ec83e36f29e62":function(A,w,p){"use strict";const r=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],R=["pdf","doc","docx","ppt","pptx"]},"12303d01cb2347d65acd":function(A,w,p){"use strict";p.d(w,"a",function(){return r});class r extends Error{constructor(_,...E){const P={message:""};typeof _=="string"?P.message=_:Object.assign(P,_),E.forEach(M=>{Object.assign(P,M)});const{message:D,...F}=P;super(D),Object.assign(this,F),this.message=D||this.defaultMessage,this.message=this.formatMessage(),super.captureStackTrace&&super.captureStackTrace(this,this.constructor)}get name(){return this.constructor===r?"Error":this.constructor.name}get defaultMessage(){return""}formatMessage(){return this.message}}class R extends Error{}function g(N,_,E){return _=a(_),_ in N?Object.defineProperty(N,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):N[_]=E,N}function a(N){var _=T(N,"string");return typeof _=="symbol"?_:String(_)}function T(N,_){if(typeof N!="object"||N===null)return N;var E=N[Symbol.toPrimitive];if(E!==void 0){var P=E.call(N,_||"default");if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(N)}class c extends Error{constructor(..._){super(..._),g(this,"canceled",!0)}}},"144a4c52161809512414":function(A,w){},"17d815db3d84abcca145":function(A,w){},"19eb7b800fa77b859a22":function(A,w){},"1a654c89165c3fdd23e9":function(A,w){var p=A.exports={},r,R;function g(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=g}catch{r=g}try{typeof clearTimeout=="function"?R=clearTimeout:R=a}catch{R=a}})();function T(I){if(r===setTimeout)return setTimeout(I,0);if((r===g||!r)&&setTimeout)return r=setTimeout,setTimeout(I,0);try{return r(I,0)}catch{try{return r.call(null,I,0)}catch{return r.call(this,I,0)}}}function c(I){if(R===clearTimeout)return clearTimeout(I);if((R===a||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(I);try{return R(I)}catch{try{return R.call(null,I)}catch{return R.call(this,I)}}}var N=[],_=!1,E,P=-1;function D(){!_||!E||(_=!1,E.length?N=E.concat(N):P=-1,N.length&&F())}function F(){if(!_){var I=T(D);_=!0;for(var k=N.length;k;){for(E=N,N=[];++P<k;)E&&E[P].run();P=-1,k=N.length}E=null,_=!1,c(I)}}p.nextTick=function(I){var k=new Array(arguments.length-1);if(arguments.length>1)for(var B=1;B<arguments.length;B++)k[B-1]=arguments[B];N.push(new M(I,k)),N.length===1&&!_&&T(F)};function M(I,k){this.fun=I,this.array=k}M.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={};function m(){}p.on=m,p.addListener=m,p.once=m,p.off=m,p.removeListener=m,p.removeAllListeners=m,p.emit=m,p.prependListener=m,p.prependOnceListener=m,p.listeners=function(I){return[]},p.binding=function(I){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(I){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},"1b726e7ce4061546ecfc":function(A,w,p){"use strict";(function(r){p.d(w,"a",function(){return M});function R(ae){return\`\${r.env.BUCKETS_PREFIX}-\${ae}\`}const g={NONUNIQUE:"NONUNIQUE",NOT_FOUND:"NOT_FOUND",NOT_IMPLEMENTED:"NOT_IMPLEMENTED",NODES_LIMIT_EXCEEDED:"NODES_LIMIT_EXCEEDED",INVALID_FILE_TYPE:"INVALID_FILE_TYPE",NOT_ACTIVATED:"NOT_ACTIVATED",DISABLED:"DISABLED",LAST_GROUP_ADMIN:"LAST_GROUP_ADMIN",REQUIRE_TEAM_ID:"REQUIRE_TEAM_ID",REGISTRY_NOT_ALLOWED:"REGISTRY_NOT_ALLOWED",REGISTRY_NOT_FOUND:"REGISTRY_NOT_FOUND",REGISTRY_IMAGE_NOT_FOUND:"REGISTRY_IMAGE_NOT_FOUND",REGISTRY_AUTH:"REGISTRY_AUTH",USERS_LIMIT_EXCEEDED:"USERS_LIMIT_EXCEEDED",IS_LOCAL:"IS_LOCAL",ACTIVE_USERS_LIMIT_EXCEEDED:"ACTIVE_USERS_LIMIT_EXCEEDED",EXPERIMENTS_LIMIT_EXCEEDED:"EXPERIMENTS_LIMIT_EXCEEDED",JOB_IMAGE_TAGS_LIMIT_EXCEEDED:"JOB_IMAGE_TAGS_LIMIT_EXCEEDED",LICENSE_REQUIRED:"LICENSE_REQUIRED",DATABASE_UNRESPONSIVE:"DATABASE_UNRESPONSIVE"},a={FS:"fs",GOOGLE:"google",AZURE:"azure",MINIO:"minio",HTTP:"http"},T={PUBLIC:R("public"),PRIVATE:R("private")},c={IMAGES_ORIGINAL:"images/original",IMAGES_PREVIEW:"images/preview",IMAGES_CONVERTED:"images/converted",FIGURES_GEOMETRIES:"figures/geometries",MODELS_PREVIEW:"models/preview",FILES_IMPORT:"tasks/import",EXPORT:"tasks/export",INFERENCE:"tasks/inference",TRAIN:"tasks/train",TASKS_FILES:"tasks/files",TASKS_ARCHIVES:"tasks/archives",TASKS_CUSTOM_DATA:"tasks/custom_data",TASKS_MODELS:"tasks/models",MODELS_DATA:"models/data",MODELS_ARCHIVES:"models/archives",PROJECT_README_IMAGES:"assets/projects/images",NOTEBOOKS:"notebooks",NOTEBOOKS_ARCHIVES:"notebooks/archives",AGENTS:"agents",LABELING_FILES:"labeling_materials/files",VIDEOS:"videos",POINT_CLOUDS:"point_clouds",TEAMS_STORAGE:"teams_storage",JOB_IMAGES_DEBUG_BACKUP:"debug_backups/jobs",APPS_POSTERS:"images/app_posters_storage",ECOSYSTEM_MODULES:"ecosystem/modules"},N={IMAGES:"images",FIGURES:"figures"},_=["Image Segmentation","Instance Segmentation","Text Detection","Object Detection","Classification"],E={10:"fatal",20:"error",30:"warn",40:"info",50:"debug",60:"trace"},P=Object.keys(E).reduce((ae,ue)=>(ae[E[ue]]=parseInt(ue,10),ae),{}),D={};Object.keys(E).forEach(ae=>{ae>40||(D[ae]=E[ae])});const F=D,M={CONSECUTIVE:"consecutive",CLOSESTSEGMENT:"closestSegment",POINTSERASER:"pointsEraser",POINTSORDER:"pointsOrder",SNAP:"snap"},m={BOOLEAN:"boolean",NUMBER:"number",STRING:"string",TEXT_AREA:"text-area",SELECT:"select",COLOR_PICKER:"color-picker",STRINGS_ARRAY:"strings_array"},I={WORKSPACE:"workspace",PROJECT:"project",DATASET:"dataset",DTL_ARCHIVE:"dtl_archive",MODEL:"model",TASK_CHECKPOINT:"task_checkpoint",UNUSED_CHECKPOINT:"unused_checkpoint",PYTHON_NOTEBOOK:"python_notebook",PYTHON_NOTEBBOK_ARCHIVE:"python_notebook_archive"},k={IMAGES_FILENAME:"images_filename",IMAGES_TAG:"images_tag",IMAGES_SIZE:"images_size",IMAGES_CREATED:"images_created",OBJECTS_CLASS:"objects_class",OBJECTS_TAG:"objects_tag",OBJECTS_ANNOTATOR:"objects_annotator",TAGGED_BY_ANNOTATOR:"tagged_by_annotator",ISSUES_COUNT:"issues_count",JOB_IMAGE_STATUS:"job_image_status"},B={TRACKING_ERROR:"videos:tracking-error",FETCH_FIGURES_IN_RANGE:"videos:fetch-figures-in-range"},Y={FIGURES_CREATED:"figures-created",FIGURES_UPDATED:"figures-updated",FIGURES_REMOVED:"figures-removed",IMAGE_TAG_ADDED:"image-tag-added",IMAGE_TAG_UPDATED:"image-tag-updated",IMAGE_TAG_REMOVED:"image-tag-removed",FIGURE_TAG_ADDED:"figure-tag-added",FIGURE_TAG_UPDATED:"figure-tag-updated",FIGURE_TAG_REMOVED:"figure-tag-removed",FIGURES_RESTORED:"figures-restored",IMAGES_FETCH_ANNOTATIONS:"images-fetch-annotations",PROJECT_META_UPDATED:"project-meta-updated",RUN_ACTION:"run-action"},ee={SET_FIGURE:"figures/setFigure",SET_TOOL:"tools/setTool",SET_CLASS:"classes/setClass",NEXT_ENTITY:"entities/nextEntity",PREV_ENTITY:"entities/prevEntity",SET_ENTITY:"entities/setEntity",NEXT_IMAGE:"images/nextImage",PREV_IMAGE:"images/prevImage",SET_IMAGE:"images/setImage",SET_VIEWPORT:"scene/setViewport",ZOOM_TO_OBJECT:"scene/zoomToObject",ZOOM_TO_FIGURE:"scene/zoomToFigure"},z={MANUAL_SELECTED_IMAGE_CHANGED:"manual_selected_image_changed",MANUAL_SELECTED_FIGURE_CHANGED:"manual_selected_figure_changed"},$={PAGE:"page",TOKEN:"token"},re={VOLUMES:"volumes",IMAGES_V2:"images-v2",VIDEOS_V2:"videos-v2",VIDEOS_V3:"videos-v3",POINT_CLOUDS:"point-clouds",POINT_CLOUDS_TRACKING:"point-clouds-tracking"}}).call(this,p("1a654c89165c3fdd23e9"))},"1c84413533b434a33065":function(A,w,p){"use strict";const r={NN:"Neural Network",OPEN_CV:"OpenCV",CLONE:"Clone",INTERPOLATE:"Interpolate"},R={INTERPOLATION:"interpolation",TRACKING:"tracking"},g=new Set(Object.values(R)),a={ONLY_AUTO_GENERATED:"only-auto",YES:"yes",NO:"no"},T={FORWARD:"forward",BACKWARD:"backward"},c={CLONE_COPY:"clone_copy",CLONE_ON_NEXT:"clone_on_next",TRACKING:"tracking"}},"1d38117166ab109cd06a":function(A,w){},"1f24b1c1631adced2f18":function(A,w,p){"use strict";const r={UNTAGGED_ALL:"untagged_all",UNTAGGED_SOME:"untagged_some"}},"2132b7a92754e3fc960f":function(A,w,p){"use strict";var r=p("989a42060903e47c0cff");const R={...[...r.a].reduce((T,c)=>(T[c]="customDockerImage",T),{}),[r.c.TRAIN]:"trainImage",[r.c.INFERENCE]:"inferenceImage",[r.c.DEPLOY_MODEL]:"deployImage",[r.c.SMART_TOOL]:"deploySmartImage"},g=Object.keys(R).reduce((T,c)=>(T[R[c]]=c,T),{});g.customDockerImage=r.c.CUSTOM;const a=Object.keys(g)},"213f26f2eeabf1ab6b8d":function(A,w,p){"use strict";const r={MARKDOWN:"markdown",TABLE:"table",PLOTLY:"plotly",NOTIFICATION:"notification",LINE_CHART:"line-chart",GALLERY:"gallery",TASK_LOGS:"task-logs",ELEMENT:"element"}},"21c9b9dc8d994c745f44":function(A,w){},"23113e976a9e8f622baf":function(A,w,p){"use strict";var r=p("aeebf6797391ce13e889");const R={GITHUB:"github",SLY_GITEA:"sly_gitea",GITLAB:"gitlab",SUPERVISELY:"supervisely"},g={MODEL:"model",APP:"app",NOTEBOOK:"notebook",PLUGIN:"plugin",PROJECT:"project",COLLECTION:"collection",ANNOTATION_TOOL:"annotation_tool"},a={"GPL-3.0":"https://choosealicense.com/licenses/gpl-3.0/","AGPL-3.0":"https://choosealicense.com/licenses/agpl-3.0/","Apache-2.0":"https://choosealicense.com/licenses/apache-2.0/","BSD-3-Clause":"https://choosealicense.com/licenses/bsd-3-clause/",MIT:"https://choosealicense.com/licenses/mit/"},T={IMAGES_PROJECT:"images_project",VIDEOS_PROJECT:"videos_project",POINT_CLOUDS_PROJECT:"point_cloud_project",POINT_CLOUD_EPISODES_PROJECT:"point_cloud_episodes_project",VOLUMES_PROJECT:"volumes_project",IMAGES_DATASET:"images_dataset",VIDEOS_DATASET:"videos_dataset",POINT_CLOUDS_DATASET:"point_cloud_dataset",POINT_CLOUD_EPISODES_DATASET:"point_cloud_episodes_dataset",VOLUMES_DATASET:"volumes_dataset",LABELING_JOB:"labeling_job",FILES_FOLDER:"files_folder",FILES_FILE:"files_file",TEAM_MEMBER:"team_member",TEAM:"team",WORKSPACE:"workspace",ECOSYSTEM:"ecosystem",AGENT_FOLDER:"agent_folder",AGENT_FILE:"agent_file"},c={[T.IMAGES_PROJECT]:"Images project",[T.VIDEOS_PROJECT]:"Videos project",[T.POINT_CLOUDS_PROJECT]:"Point cloud project",[T.VOLUMES_PROJECT]:"Volumes project",[T.IMAGES_DATASET]:"Images dataset",[T.VIDEOS_DATASET]:"Videos dataset",[T.POINT_CLOUDS_DATASET]:"Point cloud dataset",[T.VOLUMES_DATASET]:"Volumes dataset",[T.LABELING_JOB]:"Labeling job",[T.FILES_FOLDER]:"File manager folder",[T.FILES_FILE]:"File manager file",[T.TEAM_MEMBER]:"Team member",[T.TEAM]:"Team",[T.WORKSPACE]:"Workspace",[T.AGENT_FOLDER]:"Agent folder",[T.AGENT_FILE]:"Agent file"},N={[r.b.IMAGES]:T.IMAGES_PROJECT,[r.b.VIDEOS]:T.VIDEOS_PROJECT,[r.b.POINT_CLOUDS]:T.POINT_CLOUDS_PROJECT,[r.b.POINT_CLOUD_EPISODES]:T.POINT_CLOUD_EPISODES_PROJECT,[r.b.VOLUMES]:T.VOLUMES_PROJECT},_={[r.b.IMAGES]:T.IMAGES_DATASET,[r.b.VIDEOS]:T.VIDEOS_DATASET,[r.b.POINT_CLOUDS]:T.POINT_CLOUDS_DATASET,[r.b.POINT_CLOUD_EPISODES]:T.POINT_CLOUD_EPISODES_DATASET,[r.b.VOLUMES]:T.VOLUMES_DATASET},E={DOWNLOAD_AS:"Download as",RUN_APP:"Run App",REPORTS:"Report",NN:"Neural Networks"},P={PANEL:"panel",FILE_MANAGER:"files",STANDALONE:"standalone",DATA_COMMANDER:"data_commander",ANNOTATION_TOOL_IMAGES:"image_annotation_tool",ANNOTATION_TOOL_VIDEOS:"video_annotation_tool",ANNOTATION_TOOL_VOLUMES:"dicom_annotation_tool",ANNOTATION_TOOL_POINT_CLOUDS:"pointcloud_annotation_tool"},D={NEURAL_NETWORKS:"neural-network",LABELING:"labeling",IMPORT:"import",EXPORT:"export",DEVELOPMENT:"development",COLLABORATION:"collaboration",DATA_OPERATIONS:"data-operations",SYNTHETIC_DATA:"synthetic",VISUALIZATION:"visualization-stats",OTHER:"other"},F={SIDEBAR:"sidebar",LEFT:"left",RIGHT:"right"},M={[D.NEURAL_NETWORKS]:["neural network"],[D.LABELING]:["labeling"],[D.IMPORT]:["import"],[D.EXPORT]:["export"],[D.DEVELOPMENT]:["development"],[D.COLLABORATION]:["collaboration"],[D.DATA_OPERATIONS]:["data transformation","annotation transformation","synthetic","augmentation","modalities","project management"],[D.SYNTHETIC_DATA]:["synthetic"],[D.VISUALIZATION]:["visualization","exploration","statistics"]},m=Object.keys(M).reduce((B,Y)=>(B[Y]=new Set(M[Y].map(ee=>ee.toLowerCase())),B),{}),I={[r.a.IMAGES_V1]:{isNewImageAnnTool:!1},[r.a.IMAGES_V2]:{isNewImageAnnTool:!0},[r.a.VIDEOS_V1]:{isNewVideoAnnTool:!1},[r.a.VIDEOS_V2]:{isNewVideoAnnTool:!0},[r.a.VIDEOS_V3]:{annToolVersion:"v3"},[r.a.VOLUMES_V1]:{},[r.a.POINT_CLOUDS_V1]:{},[r.a.POINT_CLOUD_EPISODES_V1]:{}},k={REQUIRED:"required",PREFERRED:"preferred",NO:"no"}},"23ffeadd01de75e61cb9":function(A,w){},"2552c24b020126fc6ce1":function(A,w){},"26015173042bd44a5ea1":function(A,w){},"26d753a9604d80c3170c":function(A,w){},"29c91b56491d3b41e5b7":function(A,w){var p=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(p){var r=new Uint8Array(16);A.exports=function(){return p(r),r}}else{var R=new Array(16);A.exports=function(){for(var a=0,T;a<16;a++)a&3||(T=Math.random()*4294967296),R[a]=T>>>((a&3)<<3)&255;return R}}},"2e899ef6b64c1edfb532":function(A,w){},"2ecd84c8cd25e23da709":function(A,w){},"31500494957ca504bce3":function(A,w,p){"use strict";function r(R,g,a,T){for(var c=R&65535|0,N=R>>>16&65535|0,_=0;a!==0;){_=a>2e3?2e3:a,a-=_;do c=c+g[T++]|0,N=N+c|0;while(--_);c%=65521,N%=65521}return c|N<<16|0}A.exports=r},"340ef733560285194387":function(A,w,p){"use strict";var r=p("0ee394ae0680b1ca3e73"),R=p("b37beb7152e4c2f15aaa"),g=p("31500494957ca504bce3"),a=p("5433aa7ef67502ef707d"),T=p("78ab99b8f504f421d4d0"),c=0,N=1,_=3,E=4,P=5,D=0,F=1,M=-2,m=-3,I=-5,k=-1,B=1,Y=2,ee=3,z=4,$=0,re=2,ae=8,ue=9,me=15,De=8,Me=29,je=256,Q=je+1+Me,ge=30,Ie=19,we=2*Q+1,K=15,Z=3,fe=258,de=fe+Z+1,be=32,ve=42,Le=69,Ue=73,et=91,Ze=103,We=113,Xe=666,Ve=1,Je=2,Ot=3,pt=4,ze=3;function st(i,ie){return i.msg=T[ie],ie}function nt(i){return(i<<1)-(i>4?9:0)}function ct(i){for(var ie=i.length;--ie>=0;)i[ie]=0}function dt(i){var ie=i.state,b=ie.pending;b>i.avail_out&&(b=i.avail_out),b!==0&&(r.arraySet(i.output,ie.pending_buf,ie.pending_out,b,i.next_out),i.next_out+=b,ie.pending_out+=b,i.total_out+=b,i.avail_out-=b,ie.pending-=b,ie.pending===0&&(ie.pending_out=0))}function J(i,ie){R._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,ie),i.block_start=i.strstart,dt(i.strm)}function d(i,ie){i.pending_buf[i.pending++]=ie}function s(i,ie){i.pending_buf[i.pending++]=ie>>>8&255,i.pending_buf[i.pending++]=ie&255}function u(i,ie,b,f){var O=i.avail_in;return O>f&&(O=f),O===0?0:(i.avail_in-=O,r.arraySet(ie,i.input,i.next_in,O,b),i.state.wrap===1?i.adler=g(i.adler,ie,O,b):i.state.wrap===2&&(i.adler=a(i.adler,ie,O,b)),i.next_in+=O,i.total_in+=O,O)}function L(i,ie){var b=i.max_chain_length,f=i.strstart,O,G,oe=i.prev_length,ne=i.nice_match,Oe=i.strstart>i.w_size-de?i.strstart-(i.w_size-de):0,ke=i.window,yt=i.w_mask,ut=i.prev,Qe=i.strstart+fe,Et=ke[f+oe-1],ft=ke[f+oe];i.prev_length>=i.good_match&&(b>>=2),ne>i.lookahead&&(ne=i.lookahead);do if(O=ie,!(ke[O+oe]!==ft||ke[O+oe-1]!==Et||ke[O]!==ke[f]||ke[++O]!==ke[f+1])){f+=2,O++;do;while(ke[++f]===ke[++O]&&ke[++f]===ke[++O]&&ke[++f]===ke[++O]&&ke[++f]===ke[++O]&&ke[++f]===ke[++O]&&ke[++f]===ke[++O]&&ke[++f]===ke[++O]&&ke[++f]===ke[++O]&&f<Qe);if(G=fe-(Qe-f),f=Qe-fe,G>oe){if(i.match_start=ie,oe=G,G>=ne)break;Et=ke[f+oe-1],ft=ke[f+oe]}}while((ie=ut[ie&yt])>Oe&&--b!==0);return oe<=i.lookahead?oe:i.lookahead}function j(i){var ie=i.w_size,b,f,O,G,oe;do{if(G=i.window_size-i.lookahead-i.strstart,i.strstart>=ie+(ie-de)){r.arraySet(i.window,i.window,ie,ie,0),i.match_start-=ie,i.strstart-=ie,i.block_start-=ie,f=i.hash_size,b=f;do O=i.head[--b],i.head[b]=O>=ie?O-ie:0;while(--f);f=ie,b=f;do O=i.prev[--b],i.prev[b]=O>=ie?O-ie:0;while(--f);G+=ie}if(i.strm.avail_in===0)break;if(f=u(i.strm,i.window,i.strstart+i.lookahead,G),i.lookahead+=f,i.lookahead+i.insert>=Z)for(oe=i.strstart-i.insert,i.ins_h=i.window[oe],i.ins_h=(i.ins_h<<i.hash_shift^i.window[oe+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[oe+Z-1])&i.hash_mask,i.prev[oe&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=oe,oe++,i.insert--,!(i.lookahead+i.insert<Z)););}while(i.lookahead<de&&i.strm.avail_in!==0)}function x(i,ie){var b=65535;for(b>i.pending_buf_size-5&&(b=i.pending_buf_size-5);;){if(i.lookahead<=1){if(j(i),i.lookahead===0&&ie===c)return Ve;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var f=i.block_start+b;if((i.strstart===0||i.strstart>=f)&&(i.lookahead=i.strstart-f,i.strstart=f,J(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-de&&(J(i,!1),i.strm.avail_out===0))return Ve}return i.insert=0,ie===E?(J(i,!0),i.strm.avail_out===0?Ot:pt):(i.strstart>i.block_start&&(J(i,!1),i.strm.avail_out===0),Ve)}function U(i,ie){for(var b,f;;){if(i.lookahead<de){if(j(i),i.lookahead<de&&ie===c)return Ve;if(i.lookahead===0)break}if(b=0,i.lookahead>=Z&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Z-1])&i.hash_mask,b=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),b!==0&&i.strstart-b<=i.w_size-de&&(i.match_length=L(i,b)),i.match_length>=Z)if(f=R._tr_tally(i,i.strstart-i.match_start,i.match_length-Z),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=Z){i.match_length--;do i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Z-1])&i.hash_mask,b=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else f=R._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(f&&(J(i,!1),i.strm.avail_out===0))return Ve}return i.insert=i.strstart<Z-1?i.strstart:Z-1,ie===E?(J(i,!0),i.strm.avail_out===0?Ot:pt):i.last_lit&&(J(i,!1),i.strm.avail_out===0)?Ve:Je}function te(i,ie){for(var b,f,O;;){if(i.lookahead<de){if(j(i),i.lookahead<de&&ie===c)return Ve;if(i.lookahead===0)break}if(b=0,i.lookahead>=Z&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Z-1])&i.hash_mask,b=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=Z-1,b!==0&&i.prev_length<i.max_lazy_match&&i.strstart-b<=i.w_size-de&&(i.match_length=L(i,b),i.match_length<=5&&(i.strategy===B||i.match_length===Z&&i.strstart-i.match_start>4096)&&(i.match_length=Z-1)),i.prev_length>=Z&&i.match_length<=i.prev_length){O=i.strstart+i.lookahead-Z,f=R._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-Z),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=O&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Z-1])&i.hash_mask,b=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=Z-1,i.strstart++,f&&(J(i,!1),i.strm.avail_out===0))return Ve}else if(i.match_available){if(f=R._tr_tally(i,0,i.window[i.strstart-1]),f&&J(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return Ve}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(f=R._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<Z-1?i.strstart:Z-1,ie===E?(J(i,!0),i.strm.avail_out===0?Ot:pt):i.last_lit&&(J(i,!1),i.strm.avail_out===0)?Ve:Je}function le(i,ie){for(var b,f,O,G,oe=i.window;;){if(i.lookahead<=fe){if(j(i),i.lookahead<=fe&&ie===c)return Ve;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=Z&&i.strstart>0&&(O=i.strstart-1,f=oe[O],f===oe[++O]&&f===oe[++O]&&f===oe[++O])){G=i.strstart+fe;do;while(f===oe[++O]&&f===oe[++O]&&f===oe[++O]&&f===oe[++O]&&f===oe[++O]&&f===oe[++O]&&f===oe[++O]&&f===oe[++O]&&O<G);i.match_length=fe-(G-O),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=Z?(b=R._tr_tally(i,1,i.match_length-Z),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(b=R._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),b&&(J(i,!1),i.strm.avail_out===0))return Ve}return i.insert=0,ie===E?(J(i,!0),i.strm.avail_out===0?Ot:pt):i.last_lit&&(J(i,!1),i.strm.avail_out===0)?Ve:Je}function ye(i,ie){for(var b;;){if(i.lookahead===0&&(j(i),i.lookahead===0)){if(ie===c)return Ve;break}if(i.match_length=0,b=R._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,b&&(J(i,!1),i.strm.avail_out===0))return Ve}return i.insert=0,ie===E?(J(i,!0),i.strm.avail_out===0?Ot:pt):i.last_lit&&(J(i,!1),i.strm.avail_out===0)?Ve:Je}function Ce(i,ie,b,f,O){this.good_length=i,this.max_lazy=ie,this.nice_length=b,this.max_chain=f,this.func=O}var Pe;Pe=[new Ce(0,0,0,0,x),new Ce(4,4,8,4,U),new Ce(4,5,16,8,U),new Ce(4,6,32,32,U),new Ce(4,4,16,16,te),new Ce(8,16,32,32,te),new Ce(8,16,128,128,te),new Ce(8,32,128,256,te),new Ce(32,128,258,1024,te),new Ce(32,258,258,4096,te)];function Be(i){i.window_size=2*i.w_size,ct(i.head),i.max_lazy_match=Pe[i.level].max_lazy,i.good_match=Pe[i.level].good_length,i.nice_match=Pe[i.level].nice_length,i.max_chain_length=Pe[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=Z-1,i.match_available=0,i.ins_h=0}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ae,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(we*2),this.dyn_dtree=new r.Buf16((2*ge+1)*2),this.bl_tree=new r.Buf16((2*Ie+1)*2),ct(this.dyn_ltree),ct(this.dyn_dtree),ct(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(K+1),this.heap=new r.Buf16(2*Q+1),ct(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*Q+1),ct(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _e(i){var ie;return!i||!i.state?st(i,M):(i.total_in=i.total_out=0,i.data_type=re,ie=i.state,ie.pending=0,ie.pending_out=0,ie.wrap<0&&(ie.wrap=-ie.wrap),ie.status=ie.wrap?ve:We,i.adler=ie.wrap===2?0:1,ie.last_flush=c,R._tr_init(ie),D)}function Te(i){var ie=_e(i);return ie===D&&Be(i.state),ie}function Re(i,ie){return!i||!i.state||i.state.wrap!==2?M:(i.state.gzhead=ie,D)}function H(i,ie,b,f,O,G){if(!i)return M;var oe=1;if(ie===k&&(ie=6),f<0?(oe=0,f=-f):f>15&&(oe=2,f-=16),O<1||O>ue||b!==ae||f<8||f>15||ie<0||ie>9||G<0||G>z)return st(i,M);f===8&&(f=9);var ne=new S;return i.state=ne,ne.strm=i,ne.wrap=oe,ne.gzhead=null,ne.w_bits=f,ne.w_size=1<<ne.w_bits,ne.w_mask=ne.w_size-1,ne.hash_bits=O+7,ne.hash_size=1<<ne.hash_bits,ne.hash_mask=ne.hash_size-1,ne.hash_shift=~~((ne.hash_bits+Z-1)/Z),ne.window=new r.Buf8(ne.w_size*2),ne.head=new r.Buf16(ne.hash_size),ne.prev=new r.Buf16(ne.w_size),ne.lit_bufsize=1<<O+6,ne.pending_buf_size=ne.lit_bufsize*4,ne.pending_buf=new r.Buf8(ne.pending_buf_size),ne.d_buf=1*ne.lit_bufsize,ne.l_buf=(1+2)*ne.lit_bufsize,ne.level=ie,ne.strategy=G,ne.method=b,Te(i)}function ce(i,ie){return H(i,ie,ae,me,De,$)}function v(i,ie){var b,f,O,G;if(!i||!i.state||ie>P||ie<0)return i?st(i,M):M;if(f=i.state,!i.output||!i.input&&i.avail_in!==0||f.status===Xe&&ie!==E)return st(i,i.avail_out===0?I:M);if(f.strm=i,b=f.last_flush,f.last_flush=ie,f.status===ve)if(f.wrap===2)i.adler=0,d(f,31),d(f,139),d(f,8),f.gzhead?(d(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),d(f,f.gzhead.time&255),d(f,f.gzhead.time>>8&255),d(f,f.gzhead.time>>16&255),d(f,f.gzhead.time>>24&255),d(f,f.level===9?2:f.strategy>=Y||f.level<2?4:0),d(f,f.gzhead.os&255),f.gzhead.extra&&f.gzhead.extra.length&&(d(f,f.gzhead.extra.length&255),d(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(i.adler=a(i.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=Le):(d(f,0),d(f,0),d(f,0),d(f,0),d(f,0),d(f,f.level===9?2:f.strategy>=Y||f.level<2?4:0),d(f,ze),f.status=We);else{var oe=ae+(f.w_bits-8<<4)<<8,ne=-1;f.strategy>=Y||f.level<2?ne=0:f.level<6?ne=1:f.level===6?ne=2:ne=3,oe|=ne<<6,f.strstart!==0&&(oe|=be),oe+=31-oe%31,f.status=We,s(f,oe),f.strstart!==0&&(s(f,i.adler>>>16),s(f,i.adler&65535)),i.adler=1}if(f.status===Le)if(f.gzhead.extra){for(O=f.pending;f.gzindex<(f.gzhead.extra.length&65535)&&!(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>O&&(i.adler=a(i.adler,f.pending_buf,f.pending-O,O)),dt(i),O=f.pending,f.pending===f.pending_buf_size));)d(f,f.gzhead.extra[f.gzindex]&255),f.gzindex++;f.gzhead.hcrc&&f.pending>O&&(i.adler=a(i.adler,f.pending_buf,f.pending-O,O)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=Ue)}else f.status=Ue;if(f.status===Ue)if(f.gzhead.name){O=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>O&&(i.adler=a(i.adler,f.pending_buf,f.pending-O,O)),dt(i),O=f.pending,f.pending===f.pending_buf_size)){G=1;break}f.gzindex<f.gzhead.name.length?G=f.gzhead.name.charCodeAt(f.gzindex++)&255:G=0,d(f,G)}while(G!==0);f.gzhead.hcrc&&f.pending>O&&(i.adler=a(i.adler,f.pending_buf,f.pending-O,O)),G===0&&(f.gzindex=0,f.status=et)}else f.status=et;if(f.status===et)if(f.gzhead.comment){O=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>O&&(i.adler=a(i.adler,f.pending_buf,f.pending-O,O)),dt(i),O=f.pending,f.pending===f.pending_buf_size)){G=1;break}f.gzindex<f.gzhead.comment.length?G=f.gzhead.comment.charCodeAt(f.gzindex++)&255:G=0,d(f,G)}while(G!==0);f.gzhead.hcrc&&f.pending>O&&(i.adler=a(i.adler,f.pending_buf,f.pending-O,O)),G===0&&(f.status=Ze)}else f.status=Ze;if(f.status===Ze&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&dt(i),f.pending+2<=f.pending_buf_size&&(d(f,i.adler&255),d(f,i.adler>>8&255),i.adler=0,f.status=We)):f.status=We),f.pending!==0){if(dt(i),i.avail_out===0)return f.last_flush=-1,D}else if(i.avail_in===0&&nt(ie)<=nt(b)&&ie!==E)return st(i,I);if(f.status===Xe&&i.avail_in!==0)return st(i,I);if(i.avail_in!==0||f.lookahead!==0||ie!==c&&f.status!==Xe){var Oe=f.strategy===Y?ye(f,ie):f.strategy===ee?le(f,ie):Pe[f.level].func(f,ie);if((Oe===Ot||Oe===pt)&&(f.status=Xe),Oe===Ve||Oe===Ot)return i.avail_out===0&&(f.last_flush=-1),D;if(Oe===Je&&(ie===N?R._tr_align(f):ie!==P&&(R._tr_stored_block(f,0,0,!1),ie===_&&(ct(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),dt(i),i.avail_out===0))return f.last_flush=-1,D}return ie!==E?D:f.wrap<=0?F:(f.wrap===2?(d(f,i.adler&255),d(f,i.adler>>8&255),d(f,i.adler>>16&255),d(f,i.adler>>24&255),d(f,i.total_in&255),d(f,i.total_in>>8&255),d(f,i.total_in>>16&255),d(f,i.total_in>>24&255)):(s(f,i.adler>>>16),s(f,i.adler&65535)),dt(i),f.wrap>0&&(f.wrap=-f.wrap),f.pending!==0?D:F)}function Ae(i){var ie;return!i||!i.state?M:(ie=i.state.status,ie!==ve&&ie!==Le&&ie!==Ue&&ie!==et&&ie!==Ze&&ie!==We&&ie!==Xe?st(i,M):(i.state=null,ie===We?st(i,m):D))}function Ge(i,ie){var b=ie.length,f,O,G,oe,ne,Oe,ke,yt;if(!i||!i.state||(f=i.state,oe=f.wrap,oe===2||oe===1&&f.status!==ve||f.lookahead))return M;for(oe===1&&(i.adler=g(i.adler,ie,b,0)),f.wrap=0,b>=f.w_size&&(oe===0&&(ct(f.head),f.strstart=0,f.block_start=0,f.insert=0),yt=new r.Buf8(f.w_size),r.arraySet(yt,ie,b-f.w_size,f.w_size,0),ie=yt,b=f.w_size),ne=i.avail_in,Oe=i.next_in,ke=i.input,i.avail_in=b,i.next_in=0,i.input=ie,j(f);f.lookahead>=Z;){O=f.strstart,G=f.lookahead-(Z-1);do f.ins_h=(f.ins_h<<f.hash_shift^f.window[O+Z-1])&f.hash_mask,f.prev[O&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=O,O++;while(--G);f.strstart=O,f.lookahead=Z-1,j(f)}return f.strstart+=f.lookahead,f.block_start=f.strstart,f.insert=f.lookahead,f.lookahead=0,f.match_length=f.prev_length=Z-1,f.match_available=0,i.next_in=Oe,i.input=ke,i.avail_in=ne,f.wrap=oe,D}w.deflateInit=ce,w.deflateInit2=H,w.deflateReset=Te,w.deflateResetKeep=_e,w.deflateSetHeader=Re,w.deflate=v,w.deflateEnd=Ae,w.deflateSetDictionary=Ge,w.deflateInfo="pako deflate (from Nodeca project)"},"36f0cad020f416714cbb":function(A,w,p){"use strict";function r(g){return new Promise(a=>setTimeout(a,Math.max(g,0)||0))}var R=function(g,a,{getNextArgs:T,leading:c=!0}={}){let N=T;N||(N=(M,m)=>m);let _,E=r(c?0:a),P=null,D=NaN;function F(){D=Date.now(),P=null;const M=_;return _=null,E=g(...M),E}return async(...M)=>(_=_?N(_,[...M]):[...M],P||(P=Promise.all([E,r(D+a-Date.now())]).then(F,F)),P)}},"398dab085f4bd5e07c44":function(module,exports,__webpack_require__){(function(process,global,setImmediate){/* @preserve
* The MIT License (MIT)
* 
* Copyright (c) 2013-2017 Petka Antonov
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
* 
*/(function(A){if(!0)module.exports=A();else var w})(function(){var define,module,exports;return function A(w,p,r){function R(T,c){if(!p[T]){if(!w[T]){var N=typeof _dereq_=="function"&&_dereq_;if(!c&&N)return N(T,!0);if(g)return g(T,!0);var _=new Error("Cannot find module '"+T+"'");throw _.code="MODULE_NOT_FOUND",_}var E=p[T]={exports:{}};w[T][0].call(E.exports,function(P){var D=w[T][1][P];return R(D||P)},E,E.exports,A,w,p,r)}return p[T].exports}for(var g=typeof _dereq_=="function"&&_dereq_,a=0;a<r.length;a++)R(r[a]);return R}({1:[function(A,w,p){"use strict";w.exports=function(r){var R=r._SomePromiseArray;function g(a){var T=new R(a),c=T.promise();return T.setHowMany(1),T.setUnwrap(),T.init(),c}r.any=function(a){return g(a)},r.prototype.any=function(){return g(this)}}},{}],2:[function(A,w,p){"use strict";var r;try{throw new Error}catch(E){r=E}var R=A("./schedule"),g=A("./queue"),a=A("./util");function T(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new g(16),this._normalQueue=new g(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var E=this;this.drainQueues=function(){E._drainQueues()},this._schedule=R}T.prototype.setScheduler=function(E){var P=this._schedule;return this._schedule=E,this._customScheduler=!0,P},T.prototype.hasCustomScheduler=function(){return this._customScheduler},T.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},T.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},T.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},T.prototype.fatalError=function(E,P){P?(process.stderr.write("Fatal "+(E instanceof Error?E.stack:E)+\`
\`),process.exit(2)):this.throwLater(E)},T.prototype.throwLater=function(E,P){if(arguments.length===1&&(P=E,E=function(){throw P}),typeof setTimeout<"u")setTimeout(function(){E(P)},0);else try{this._schedule(function(){E(P)})}catch{throw new Error(\`No async scheduler available

    See http://goo.gl/MqrFmX
\`)}};function c(E,P,D){this._lateQueue.push(E,P,D),this._queueTick()}function N(E,P,D){this._normalQueue.push(E,P,D),this._queueTick()}function _(E){this._normalQueue._pushOne(E),this._queueTick()}a.hasDevTools?(T.prototype.invokeLater=function(E,P,D){this._trampolineEnabled?c.call(this,E,P,D):this._schedule(function(){setTimeout(function(){E.call(P,D)},100)})},T.prototype.invoke=function(E,P,D){this._trampolineEnabled?N.call(this,E,P,D):this._schedule(function(){E.call(P,D)})},T.prototype.settlePromises=function(E){this._trampolineEnabled?_.call(this,E):this._schedule(function(){E._settlePromises()})}):(T.prototype.invokeLater=c,T.prototype.invoke=N,T.prototype.settlePromises=_),T.prototype._drainQueue=function(E){for(;E.length()>0;){var P=E.shift();if(typeof P!="function"){P._settlePromises();continue}var D=E.shift(),F=E.shift();P.call(D,F)}},T.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},T.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},T.prototype._reset=function(){this._isTickUsed=!1},w.exports=T,w.exports.firstLineError=r},{"./queue":26,"./schedule":29,"./util":36}],3:[function(A,w,p){"use strict";w.exports=function(r,R,g,a){var T=!1,c=function(P,D){this._reject(D)},N=function(P,D){D.promiseRejectionQueued=!0,D.bindingPromise._then(c,c,null,this,P)},_=function(P,D){this._bitField&50397184||this._resolveCallback(D.target)},E=function(P,D){D.promiseRejectionQueued||this._reject(P)};r.prototype.bind=function(P){T||(T=!0,r.prototype._propagateFrom=a.propagateFromFunction(),r.prototype._boundValue=a.boundValueFunction());var D=g(P),F=new r(R);F._propagateFrom(this,1);var M=this._target();if(F._setBoundTo(D),D instanceof r){var m={promiseRejectionQueued:!1,promise:F,target:M,bindingPromise:D};M._then(R,N,void 0,F,m),D._then(_,E,void 0,F,m),F._setOnCancel(D)}else F._resolveCallback(M);return F},r.prototype._setBoundTo=function(P){P!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=P):this._bitField=this._bitField&-2097153},r.prototype._isBound=function(){return(this._bitField&2097152)===2097152},r.bind=function(P,D){return r.resolve(D).bind(P)}}},{}],4:[function(A,w,p){"use strict";var r;typeof Promise<"u"&&(r=Promise);function R(){try{Promise===g&&(Promise=r)}catch{}return g}var g=A("./promise")();g.noConflict=R,w.exports=g},{"./promise":22}],5:[function(A,w,p){"use strict";var r=Object.create;if(r){var R=r(null),g=r(null);R[" size"]=g[" size"]=0}w.exports=function(a){var T=A("./util"),c=T.canEvaluate,N=T.isIdentifier,_,E;if(!1)var P,D,F;function M(B,Y){var ee;if(B!=null&&(ee=B[Y]),typeof ee!="function"){var z="Object "+T.classString(B)+" has no method '"+T.toString(Y)+"'";throw new a.TypeError(z)}return ee}function m(B){var Y=this.pop(),ee=M(B,Y);return ee.apply(B,this)}a.prototype.call=function(B){var Y=[].slice.call(arguments,1);if(!1)var ee;return Y.push(B),this._then(m,void 0,void 0,Y,void 0)};function I(B){return B[this]}function k(B){var Y=+this;return Y<0&&(Y=Math.max(0,Y+B.length)),B[Y]}a.prototype.get=function(B){var Y=typeof B=="number",ee;if(Y)ee=k;else if(c){var z=E(B);ee=z!==null?z:I}else ee=I;return this._then(ee,void 0,void 0,B,void 0)}}},{"./util":36}],6:[function(A,w,p){"use strict";w.exports=function(r,R,g,a){var T=A("./util"),c=T.tryCatch,N=T.errorObj,_=r._async;r.prototype.break=r.prototype.cancel=function(){if(!a.cancellation())return this._warn("cancellation is disabled");for(var E=this,P=E;E._isCancellable();){if(!E._cancelBy(P)){P._isFollowing()?P._followee().cancel():P._cancelBranched();break}var D=E._cancellationParent;if(D==null||!D._isCancellable()){E._isFollowing()?E._followee().cancel():E._cancelBranched();break}else E._isFollowing()&&E._followee().cancel(),E._setWillBeCancelled(),P=E,E=D}},r.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},r.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},r.prototype._cancelBy=function(E){return E===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},r.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},r.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),_.invoke(this._cancelPromises,this,void 0))},r.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},r.prototype._unsetOnCancel=function(){this._onCancelField=void 0},r.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},r.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},r.prototype._doInvokeOnCancel=function(E,P){if(T.isArray(E))for(var D=0;D<E.length;++D)this._doInvokeOnCancel(E[D],P);else if(E!==void 0)if(typeof E=="function"){if(!P){var F=c(E).call(this._boundValue());F===N&&(this._attachExtraTrace(F.e),_.throwLater(F.e))}}else E._resultCancelled(this)},r.prototype._invokeOnCancel=function(){var E=this._onCancel();this._unsetOnCancel(),_.invoke(this._doInvokeOnCancel,this,E)},r.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},r.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(A,w,p){"use strict";w.exports=function(r){var R=A("./util"),g=A("./es5").keys,a=R.tryCatch,T=R.errorObj;function c(N,_,E){return function(P){var D=E._boundValue();e:for(var F=0;F<N.length;++F){var M=N[F];if(M===Error||M!=null&&M.prototype instanceof Error){if(P instanceof M)return a(_).call(D,P)}else if(typeof M=="function"){var m=a(M).call(D,P);if(m===T)return m;if(m)return a(_).call(D,P)}else if(R.isObject(P)){for(var I=g(M),k=0;k<I.length;++k){var B=I[k];if(M[B]!=P[B])continue e}return a(_).call(D,P)}}return r}}return c}},{"./es5":13,"./util":36}],8:[function(A,w,p){"use strict";w.exports=function(r){var R=!1,g=[];r.prototype._promiseCreated=function(){},r.prototype._pushContext=function(){},r.prototype._popContext=function(){return null},r._peekContext=r.prototype._peekContext=function(){};function a(){this._trace=new a.CapturedTrace(c())}a.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,g.push(this._trace))},a.prototype._popContext=function(){if(this._trace!==void 0){var N=g.pop(),_=N._promiseCreated;return N._promiseCreated=null,_}return null};function T(){if(R)return new a}function c(){var N=g.length-1;if(N>=0)return g[N]}return a.CapturedTrace=null,a.create=T,a.deactivateLongStackTraces=function(){},a.activateLongStackTraces=function(){var N=r.prototype._pushContext,_=r.prototype._popContext,E=r._peekContext,P=r.prototype._peekContext,D=r.prototype._promiseCreated;a.deactivateLongStackTraces=function(){r.prototype._pushContext=N,r.prototype._popContext=_,r._peekContext=E,r.prototype._peekContext=P,r.prototype._promiseCreated=D,R=!1},R=!0,r.prototype._pushContext=a.prototype._pushContext,r.prototype._popContext=a.prototype._popContext,r._peekContext=r.prototype._peekContext=c,r.prototype._promiseCreated=function(){var F=this._peekContext();F&&F._promiseCreated==null&&(F._promiseCreated=this)}},a}},{}],9:[function(A,w,p){"use strict";w.exports=function(r,R){var g=r._getDomain,a=r._async,T=A("./errors").Warning,c=A("./util"),N=c.canAttachTrace,_,E,P=/[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/,D=/\\((?:timers\\.js):\\d+:\\d+\\)/,F=/[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/,M=null,m=null,I=!1,k,B=c.env("BLUEBIRD_DEBUG")!=0,Y=!!(c.env("BLUEBIRD_WARNINGS")!=0&&(B||c.env("BLUEBIRD_WARNINGS"))),ee=!!(c.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(B||c.env("BLUEBIRD_LONG_STACK_TRACES"))),z=c.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(Y||!!c.env("BLUEBIRD_W_FORGOTTEN_RETURN"));r.prototype.suppressUnhandledRejections=function(){var x=this._target();x._bitField=x._bitField&-1048577|524288},r.prototype._ensurePossibleRejectionHandled=function(){if(!(this._bitField&524288)){this._setRejectionIsUnhandled();var x=this;setTimeout(function(){x._notifyUnhandledRejection()},1)}},r.prototype._notifyUnhandledRejectionIsHandled=function(){ze("rejectionHandled",_,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},r.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var x=this._settledValue();this._setUnhandledRejectionIsNotified(),ze("unhandledRejection",E,x,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},r.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},r.prototype._warn=function(x,U,te){return et(x,U,te||this)},r.onPossiblyUnhandledRejection=function(x){var U=g();E=typeof x=="function"?U===null?x:c.domainBind(U,x):void 0},r.onUnhandledRejectionHandled=function(x){var U=g();_=typeof x=="function"?U===null?x:c.domainBind(U,x):void 0};var $=function(){};r.longStackTraces=function(){if(a.haveItemsQueued()&&!j.longStackTraces)throw new Error(\`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
\`);if(!j.longStackTraces&&ct()){var x=r.prototype._captureStackTrace,U=r.prototype._attachExtraTrace;j.longStackTraces=!0,$=function(){if(a.haveItemsQueued()&&!j.longStackTraces)throw new Error(\`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
\`);r.prototype._captureStackTrace=x,r.prototype._attachExtraTrace=U,R.deactivateLongStackTraces(),a.enableTrampoline(),j.longStackTraces=!1},r.prototype._captureStackTrace=be,r.prototype._attachExtraTrace=ve,R.activateLongStackTraces(),a.disableTrampolineIfNecessary()}},r.hasLongStackTraces=function(){return j.longStackTraces&&ct()};var re=function(){try{if(typeof CustomEvent=="function"){var x=new CustomEvent("CustomEvent");return c.global.dispatchEvent(x),function(U,te){var le=new CustomEvent(U.toLowerCase(),{detail:te,cancelable:!0});return!c.global.dispatchEvent(le)}}else if(typeof Event=="function"){var x=new Event("CustomEvent");return c.global.dispatchEvent(x),function(te,le){var ye=new Event(te.toLowerCase(),{cancelable:!0});return ye.detail=le,!c.global.dispatchEvent(ye)}}else{var x=document.createEvent("CustomEvent");return x.initCustomEvent("testingtheevent",!1,!0,{}),c.global.dispatchEvent(x),function(te,le){var ye=document.createEvent("CustomEvent");return ye.initCustomEvent(te.toLowerCase(),!1,!0,le),!c.global.dispatchEvent(ye)}}}catch{}return function(){return!1}}(),ae=function(){return c.isNode?function(){return process.emit.apply(process,arguments)}:c.global?function(x){var U="on"+x.toLowerCase(),te=c.global[U];return te?(te.apply(c.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}();function ue(x,U){return{promise:U}}var me={promiseCreated:ue,promiseFulfilled:ue,promiseRejected:ue,promiseResolved:ue,promiseCancelled:ue,promiseChained:function(x,U,te){return{promise:U,child:te}},warning:function(x,U){return{warning:U}},unhandledRejection:function(x,U,te){return{reason:U,promise:te}},rejectionHandled:ue},De=function(x){var U=!1;try{U=ae.apply(null,arguments)}catch(le){a.throwLater(le),U=!0}var te=!1;try{te=re(x,me[x].apply(null,arguments))}catch(le){a.throwLater(le),te=!0}return te||U};r.config=function(x){if(x=Object(x),"longStackTraces"in x&&(x.longStackTraces?r.longStackTraces():!x.longStackTraces&&r.hasLongStackTraces()&&$()),"warnings"in x){var U=x.warnings;j.warnings=!!U,z=j.warnings,c.isObject(U)&&"wForgottenReturn"in U&&(z=!!U.wForgottenReturn)}if("cancellation"in x&&x.cancellation&&!j.cancellation){if(a.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=we,r.prototype._propagateFrom=K,r.prototype._onCancel=ge,r.prototype._setOnCancel=Ie,r.prototype._attachCancellationCallback=Q,r.prototype._execute=je,fe=K,j.cancellation=!0}return"monitoring"in x&&(x.monitoring&&!j.monitoring?(j.monitoring=!0,r.prototype._fireEvent=De):!x.monitoring&&j.monitoring&&(j.monitoring=!1,r.prototype._fireEvent=Me)),r};function Me(){return!1}r.prototype._fireEvent=Me,r.prototype._execute=function(x,U,te){try{x(U,te)}catch(le){return le}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(x){},r.prototype._attachCancellationCallback=function(x){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(x,U){};function je(x,U,te){var le=this;try{x(U,te,function(ye){if(typeof ye!="function")throw new TypeError("onCancel must be a function, got: "+c.toString(ye));le._attachCancellationCallback(ye)})}catch(ye){return ye}}function Q(x){if(!this._isCancellable())return this;var U=this._onCancel();U!==void 0?c.isArray(U)?U.push(x):this._setOnCancel([U,x]):this._setOnCancel(x)}function ge(){return this._onCancelField}function Ie(x){this._onCancelField=x}function we(){this._cancellationParent=void 0,this._onCancelField=void 0}function K(x,U){if(U&1){this._cancellationParent=x;var te=x._branchesRemainingToCancel;te===void 0&&(te=0),x._branchesRemainingToCancel=te+1}U&2&&x._isBound()&&this._setBoundTo(x._boundTo)}function Z(x,U){U&2&&x._isBound()&&this._setBoundTo(x._boundTo)}var fe=Z;function de(){var x=this._boundTo;return x!==void 0&&x instanceof r?x.isFulfilled()?x.value():void 0:x}function be(){this._trace=new u(this._peekContext())}function ve(x,U){if(N(x)){var te=this._trace;if(te!==void 0&&U&&(te=te._parent),te!==void 0)te.attachExtraTrace(x);else if(!x.__stackCleaned__){var le=Ot(x);c.notEnumerableProp(x,"stack",le.message+\`
\`+le.stack.join(\`
\`)),c.notEnumerableProp(x,"__stackCleaned__",!0)}}}function Le(x,U,te,le,ye){if(x===void 0&&U!==null&&z){if(ye!==void 0&&ye._returnedNonUndefined()||!(le._bitField&65535))return;te&&(te=te+" ");var Ce="",Pe="";if(U._trace){for(var Be=U._trace.stack.split(\`
\`),S=Ve(Be),_e=S.length-1;_e>=0;--_e){var Te=S[_e];if(!D.test(Te)){var Re=Te.match(F);Re&&(Ce="at "+Re[1]+":"+Re[2]+":"+Re[3]+" ");break}}if(S.length>0){for(var H=S[0],_e=0;_e<Be.length;++_e)if(Be[_e]===H){_e>0&&(Pe=\`
\`+Be[_e-1]);break}}}var ce="a promise was created in a "+te+"handler "+Ce+"but was not returned from it, see http://goo.gl/rRqMUw"+Pe;le._warn(ce,!0,U)}}function Ue(x,U){var te=x+" is deprecated and will be removed in a future version.";return U&&(te+=" Use "+U+" instead."),et(te)}function et(x,U,te){if(j.warnings){var le=new T(x),ye;if(U)te._attachExtraTrace(le);else if(j.longStackTraces&&(ye=r._peekContext()))ye.attachExtraTrace(le);else{var Ce=Ot(le);le.stack=Ce.message+\`
\`+Ce.stack.join(\`
\`)}De("warning",le)||pt(le,"",!0)}}function Ze(x,U){for(var te=0;te<U.length-1;++te)U[te].push("From previous event:"),U[te]=U[te].join(\`
\`);return te<U.length&&(U[te]=U[te].join(\`
\`)),x+\`
\`+U.join(\`
\`)}function We(x){for(var U=0;U<x.length;++U)(x[U].length===0||U+1<x.length&&x[U][0]===x[U+1][0])&&(x.splice(U,1),U--)}function Xe(x){for(var U=x[0],te=1;te<x.length;++te){for(var le=x[te],ye=U.length-1,Ce=U[ye],Pe=-1,Be=le.length-1;Be>=0;--Be)if(le[Be]===Ce){Pe=Be;break}for(var Be=Pe;Be>=0;--Be){var S=le[Be];if(U[ye]===S)U.pop(),ye--;else break}U=le}}function Ve(x){for(var U=[],te=0;te<x.length;++te){var le=x[te],ye=le==="    (No stack trace)"||M.test(le),Ce=ye&&dt(le);ye&&!Ce&&(I&&le.charAt(0)!==" "&&(le="    "+le),U.push(le))}return U}function Je(x){for(var U=x.stack.replace(/\\s+$/g,"").split(\`
\`),te=0;te<U.length;++te){var le=U[te];if(le==="    (No stack trace)"||M.test(le))break}return te>0&&x.name!="SyntaxError"&&(U=U.slice(te)),U}function Ot(x){var U=x.stack,te=x.toString();return U=typeof U=="string"&&U.length>0?Je(x):["    (No stack trace)"],{message:te,stack:x.name=="SyntaxError"?U:Ve(U)}}function pt(x,U,te){if(typeof console<"u"){var le;if(c.isObject(x)){var ye=x.stack;le=U+m(ye,x)}else le=U+String(x);typeof k=="function"?k(le,te):(typeof console.log=="function"||typeof console.log=="object")&&console.log(le)}}function ze(x,U,te,le){var ye=!1;try{typeof U=="function"&&(ye=!0,x==="rejectionHandled"?U(le):U(te,le))}catch(Ce){a.throwLater(Ce)}x==="unhandledRejection"?!De(x,te,le)&&!ye&&pt(te,"Unhandled rejection "):De(x,le)}function st(x){var U;if(typeof x=="function")U="[function "+(x.name||"anonymous")+"]";else{U=x&&typeof x.toString=="function"?x.toString():c.toString(x);var te=/\\[object [a-zA-Z0-9$_]+\\]/;if(te.test(U))try{var le=JSON.stringify(x);U=le}catch{}U.length===0&&(U="(empty array)")}return"(<"+nt(U)+">, no stack trace)"}function nt(x){var U=41;return x.length<U?x:x.substr(0,U-3)+"..."}function ct(){return typeof L=="function"}var dt=function(){return!1},J=/[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;function d(x){var U=x.match(J);if(U)return{fileName:U[1],line:parseInt(U[2],10)}}function s(x,U){if(ct()){for(var te=x.stack.split(\`
\`),le=U.stack.split(\`
\`),ye=-1,Ce=-1,Pe,Be,S=0;S<te.length;++S){var _e=d(te[S]);if(_e){Pe=_e.fileName,ye=_e.line;break}}for(var S=0;S<le.length;++S){var _e=d(le[S]);if(_e){Be=_e.fileName,Ce=_e.line;break}}ye<0||Ce<0||!Pe||!Be||Pe!==Be||ye>=Ce||(dt=function(Te){if(P.test(Te))return!0;var Re=d(Te);return!!(Re&&Re.fileName===Pe&&ye<=Re.line&&Re.line<=Ce)})}}function u(x){this._parent=x,this._promisesCreated=0;var U=this._length=1+(x===void 0?0:x._length);L(this,u),U>32&&this.uncycle()}c.inherits(u,Error),R.CapturedTrace=u,u.prototype.uncycle=function(){var x=this._length;if(!(x<2)){for(var U=[],te={},le=0,ye=this;ye!==void 0;++le)U.push(ye),ye=ye._parent;x=this._length=le;for(var le=x-1;le>=0;--le){var Ce=U[le].stack;te[Ce]===void 0&&(te[Ce]=le)}for(var le=0;le<x;++le){var Pe=U[le].stack,Be=te[Pe];if(Be!==void 0&&Be!==le){Be>0&&(U[Be-1]._parent=void 0,U[Be-1]._length=1),U[le]._parent=void 0,U[le]._length=1;var S=le>0?U[le-1]:this;Be<x-1?(S._parent=U[Be+1],S._parent.uncycle(),S._length=S._parent._length+1):(S._parent=void 0,S._length=1);for(var _e=S._length+1,Te=le-2;Te>=0;--Te)U[Te]._length=_e,_e++;return}}}},u.prototype.attachExtraTrace=function(x){if(!x.__stackCleaned__){this.uncycle();for(var U=Ot(x),te=U.message,le=[U.stack],ye=this;ye!==void 0;)le.push(Ve(ye.stack.split(\`
\`))),ye=ye._parent;Xe(le),We(le),c.notEnumerableProp(x,"stack",Ze(te,le)),c.notEnumerableProp(x,"__stackCleaned__",!0)}};var L=function(){var U=/^\\s*at\\s*/,te=function(Pe,Be){return typeof Pe=="string"?Pe:Be.name!==void 0&&Be.message!==void 0?Be.toString():st(Be)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,M=U,m=te;var le=Error.captureStackTrace;return dt=function(Pe){return P.test(Pe)},function(Pe,Be){Error.stackTraceLimit+=6,le(Pe,Be),Error.stackTraceLimit-=6}}var ye=new Error;if(typeof ye.stack=="string"&&ye.stack.split(\`
\`)[0].indexOf("stackDetection@")>=0)return M=/@/,m=te,I=!0,function(Be){Be.stack=new Error().stack};var Ce;try{throw new Error}catch(Pe){Ce="stack"in Pe}return!("stack"in ye)&&Ce&&typeof Error.stackTraceLimit=="number"?(M=U,m=te,function(Be){Error.stackTraceLimit+=6;try{throw new Error}catch(S){Be.stack=S.stack}Error.stackTraceLimit-=6}):(m=function(Pe,Be){return typeof Pe=="string"?Pe:(typeof Be=="object"||typeof Be=="function")&&Be.name!==void 0&&Be.message!==void 0?Be.toString():st(Be)},null)}([]);typeof console<"u"&&typeof console.warn<"u"&&(k=function(x){console.warn(x)},c.isNode&&process.stderr.isTTY?k=function(x,U){var te=U?"\\x1B[33m":"\\x1B[31m";console.warn(te+x+\`\\x1B[0m
\`)}:!c.isNode&&typeof new Error().stack=="string"&&(k=function(x,U){console.warn("%c"+x,U?"color: darkorange":"color: red")}));var j={warnings:Y,longStackTraces:!1,cancellation:!1,monitoring:!1};return ee&&r.longStackTraces(),{longStackTraces:function(){return j.longStackTraces},warnings:function(){return j.warnings},cancellation:function(){return j.cancellation},monitoring:function(){return j.monitoring},propagateFromFunction:function(){return fe},boundValueFunction:function(){return de},checkForgottenReturns:Le,setBounds:s,warn:et,deprecated:Ue,CapturedTrace:u,fireDomEvent:re,fireGlobalEvent:ae}}},{"./errors":12,"./util":36}],10:[function(A,w,p){"use strict";w.exports=function(r){function R(){return this.value}function g(){throw this.reason}r.prototype.return=r.prototype.thenReturn=function(a){return a instanceof r&&a.suppressUnhandledRejections(),this._then(R,void 0,void 0,{value:a},void 0)},r.prototype.throw=r.prototype.thenThrow=function(a){return this._then(g,void 0,void 0,{reason:a},void 0)},r.prototype.catchThrow=function(a){if(arguments.length<=1)return this._then(void 0,g,void 0,{reason:a},void 0);var T=arguments[1],c=function(){throw T};return this.caught(a,c)},r.prototype.catchReturn=function(a){if(arguments.length<=1)return a instanceof r&&a.suppressUnhandledRejections(),this._then(void 0,R,void 0,{value:a},void 0);var T=arguments[1];T instanceof r&&T.suppressUnhandledRejections();var c=function(){return T};return this.caught(a,c)}}},{}],11:[function(A,w,p){"use strict";w.exports=function(r,R){var g=r.reduce,a=r.all;function T(){return a(this)}function c(N,_){return g(N,_,R,R)}r.prototype.each=function(N){return g(this,N,R,0)._then(T,void 0,void 0,this,void 0)},r.prototype.mapSeries=function(N){return g(this,N,R,R)},r.each=function(N,_){return g(N,_,R,0)._then(T,void 0,void 0,N,void 0)},r.mapSeries=c}},{}],12:[function(A,w,p){"use strict";var r=A("./es5"),R=r.freeze,g=A("./util"),a=g.inherits,T=g.notEnumerableProp;function c(Y,ee){function z($){if(!(this instanceof z))return new z($);T(this,"message",typeof $=="string"?$:ee),T(this,"name",Y),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return a(z,Error),z}var N,_,E=c("Warning","warning"),P=c("CancellationError","cancellation error"),D=c("TimeoutError","timeout error"),F=c("AggregateError","aggregate error");try{N=TypeError,_=RangeError}catch{N=c("TypeError","type error"),_=c("RangeError","range error")}for(var M="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<M.length;++m)typeof Array.prototype[M[m]]=="function"&&(F.prototype[M[m]]=Array.prototype[M[m]]);r.defineProperty(F.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),F.prototype.isOperational=!0;var I=0;F.prototype.toString=function(){var Y=Array(I*4+1).join(" "),ee=\`
\`+Y+\`AggregateError of:
\`;I++,Y=Array(I*4+1).join(" ");for(var z=0;z<this.length;++z){for(var $=this[z]===this?"[Circular AggregateError]":this[z]+"",re=$.split(\`
\`),ae=0;ae<re.length;++ae)re[ae]=Y+re[ae];$=re.join(\`
\`),ee+=$+\`
\`}return I--,ee};function k(Y){if(!(this instanceof k))return new k(Y);T(this,"name","OperationalError"),T(this,"message",Y),this.cause=Y,this.isOperational=!0,Y instanceof Error?(T(this,"message",Y.message),T(this,"stack",Y.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}a(k,Error);var B=Error.__BluebirdErrorTypes__;B||(B=R({CancellationError:P,TimeoutError:D,OperationalError:k,RejectionError:k,AggregateError:F}),r.defineProperty(Error,"__BluebirdErrorTypes__",{value:B,writable:!1,enumerable:!1,configurable:!1})),w.exports={Error,TypeError:N,RangeError:_,CancellationError:B.CancellationError,OperationalError:B.OperationalError,TimeoutError:B.TimeoutError,AggregateError:B.AggregateError,Warning:E}},{"./es5":13,"./util":36}],13:[function(A,w,p){var r=function(){"use strict";return this===void 0}();if(r)w.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(D,F){var M=Object.getOwnPropertyDescriptor(D,F);return!!(!M||M.writable||M.set)}};else{var R={}.hasOwnProperty,g={}.toString,a={}.constructor.prototype,T=function(D){var F=[];for(var M in D)R.call(D,M)&&F.push(M);return F},c=function(D,F){return{value:D[F]}},N=function(D,F,M){return D[F]=M.value,D},_=function(D){return D},E=function(D){try{return Object(D).constructor.prototype}catch{return a}},P=function(D){try{return g.call(D)==="[object Array]"}catch{return!1}};w.exports={isArray:P,keys:T,names:T,defineProperty:N,getDescriptor:c,freeze:_,getPrototypeOf:E,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(A,w,p){"use strict";w.exports=function(r,R){var g=r.map;r.prototype.filter=function(a,T){return g(this,a,T,R)},r.filter=function(a,T,c){return g(a,T,c,R)}}},{}],15:[function(A,w,p){"use strict";w.exports=function(r,R,g){var a=A("./util"),T=r.CancellationError,c=a.errorObj,N=A("./catch_filter")(g);function _(m,I,k){this.promise=m,this.type=I,this.handler=k,this.called=!1,this.cancelPromise=null}_.prototype.isFinallyHandler=function(){return this.type===0};function E(m){this.finallyHandler=m}E.prototype._resultCancelled=function(){P(this.finallyHandler)};function P(m,I){return m.cancelPromise!=null?(arguments.length>1?m.cancelPromise._reject(I):m.cancelPromise._cancel(),m.cancelPromise=null,!0):!1}function D(){return M.call(this,this.promise._target()._settledValue())}function F(m){if(!P(this,m))return c.e=m,c}function M(m){var I=this.promise,k=this.handler;if(!this.called){this.called=!0;var B=this.isFinallyHandler()?k.call(I._boundValue()):k.call(I._boundValue(),m);if(B===g)return B;if(B!==void 0){I._setReturnedNonUndefined();var Y=R(B,I);if(Y instanceof r){if(this.cancelPromise!=null)if(Y._isCancelled()){var ee=new T("late cancellation observer");return I._attachExtraTrace(ee),c.e=ee,c}else Y.isPending()&&Y._attachCancellationCallback(new E(this));return Y._then(D,F,void 0,this,void 0)}}}return I.isRejected()?(P(this),c.e=m,c):(P(this),m)}return r.prototype._passThrough=function(m,I,k,B){return typeof m!="function"?this.then():this._then(k,B,void 0,new _(this,I,m),void 0)},r.prototype.lastly=r.prototype.finally=function(m){return this._passThrough(m,0,M,M)},r.prototype.tap=function(m){return this._passThrough(m,1,M)},r.prototype.tapCatch=function(m){var I=arguments.length;if(I===1)return this._passThrough(m,1,void 0,M);var k=new Array(I-1),B=0,Y;for(Y=0;Y<I-1;++Y){var ee=arguments[Y];if(a.isObject(ee))k[B++]=ee;else return r.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+a.classString(ee)))}k.length=B;var z=arguments[Y];return this._passThrough(N(k,z,this),1,void 0,M)},_}},{"./catch_filter":7,"./util":36}],16:[function(A,w,p){"use strict";w.exports=function(r,R,g,a,T,c){var N=A("./errors"),_=N.TypeError,E=A("./util"),P=E.errorObj,D=E.tryCatch,F=[];function M(I,k,B){for(var Y=0;Y<k.length;++Y){B._pushContext();var ee=D(k[Y])(I);if(B._popContext(),ee===P){B._pushContext();var z=r.reject(P.e);return B._popContext(),z}var $=a(ee,B);if($ instanceof r)return $}return null}function m(I,k,B,Y){if(c.cancellation()){var ee=new r(g),z=this._finallyPromise=new r(g);this._promise=ee.lastly(function(){return z}),ee._captureStackTrace(),ee._setOnCancel(this)}else{var $=this._promise=new r(g);$._captureStackTrace()}this._stack=Y,this._generatorFunction=I,this._receiver=k,this._generator=void 0,this._yieldHandlers=typeof B=="function"?[B].concat(F):F,this._yieldedPromise=null,this._cancellationPhase=!1}E.inherits(m,T),m.prototype._isResolved=function(){return this._promise===null},m.prototype._cleanup=function(){this._promise=this._generator=null,c.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},m.prototype._promiseCancelled=function(){if(!this._isResolved()){var I=typeof this._generator.return<"u",k;if(I)this._promise._pushContext(),k=D(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var B=new r.CancellationError("generator .return() sentinel");r.coroutine.returnSentinel=B,this._promise._attachExtraTrace(B),this._promise._pushContext(),k=D(this._generator.throw).call(this._generator,B),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(k)}},m.prototype._promiseFulfilled=function(I){this._yieldedPromise=null,this._promise._pushContext();var k=D(this._generator.next).call(this._generator,I);this._promise._popContext(),this._continue(k)},m.prototype._promiseRejected=function(I){this._yieldedPromise=null,this._promise._attachExtraTrace(I),this._promise._pushContext();var k=D(this._generator.throw).call(this._generator,I);this._promise._popContext(),this._continue(k)},m.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof r){var I=this._yieldedPromise;this._yieldedPromise=null,I.cancel()}},m.prototype.promise=function(){return this._promise},m.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},m.prototype._continue=function(I){var k=this._promise;if(I===P)return this._cleanup(),this._cancellationPhase?k.cancel():k._rejectCallback(I.e,!1);var B=I.value;if(I.done===!0)return this._cleanup(),this._cancellationPhase?k.cancel():k._resolveCallback(B);var Y=a(B,this._promise);if(!(Y instanceof r)&&(Y=M(Y,this._yieldHandlers,this._promise),Y===null)){this._promiseRejected(new _(\`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

\`.replace("%s",String(B))+\`From coroutine:
\`+this._stack.split(\`
\`).slice(1,-7).join(\`
\`)));return}Y=Y._target();var ee=Y._bitField;ee&50397184?ee&33554432?r._async.invoke(this._promiseFulfilled,this,Y._value()):ee&16777216?r._async.invoke(this._promiseRejected,this,Y._reason()):this._promiseCancelled():(this._yieldedPromise=Y,Y._proxy(this,null))},r.coroutine=function(I,k){if(typeof I!="function")throw new _(\`generatorFunction must be a function

    See http://goo.gl/MqrFmX
\`);var B=Object(k).yieldHandler,Y=m,ee=new Error().stack;return function(){var z=I.apply(this,arguments),$=new Y(void 0,void 0,B,ee),re=$.promise();return $._generator=z,$._promiseFulfilled(void 0),re}},r.coroutine.addYieldHandler=function(I){if(typeof I!="function")throw new _("expecting a function but got "+E.classString(I));F.push(I)},r.spawn=function(I){if(c.deprecated("Promise.spawn()","Promise.coroutine()"),typeof I!="function")return R(\`generatorFunction must be a function

    See http://goo.gl/MqrFmX
\`);var k=new m(I,this),B=k.promise();return k._run(r.spawn),B}}},{"./errors":12,"./util":36}],17:[function(A,w,p){"use strict";w.exports=function(r,R,g,a,T,c){var N=A("./util"),_=N.canEvaluate,E=N.tryCatch,P=N.errorObj,D;if(!1)var F,M,m,I,k,B,Y;r.join=function(){var ee=arguments.length-1,z;if(ee>0&&typeof arguments[ee]=="function"&&(z=arguments[ee],!1))var $,re,ae,ue,me,De,Me,Q;var je=[].slice.call(arguments);z&&je.pop();var Q=new R(je).promise();return z!==void 0?Q.spread(z):Q}}},{"./util":36}],18:[function(A,w,p){"use strict";w.exports=function(r,R,g,a,T,c){var N=r._getDomain,_=A("./util"),E=_.tryCatch,P=_.errorObj,D=r._async;function F(m,I,k,B){this.constructor$(m),this._promise._captureStackTrace();var Y=N();this._callback=Y===null?I:_.domainBind(Y,I),this._preservedValues=B===T?new Array(this.length()):null,this._limit=k,this._inFlight=0,this._queue=[],D.invoke(this._asyncInit,this,void 0)}_.inherits(F,R),F.prototype._asyncInit=function(){this._init$(void 0,-2)},F.prototype._init=function(){},F.prototype._promiseFulfilled=function(m,I){var k=this._values,B=this.length(),Y=this._preservedValues,ee=this._limit;if(I<0){if(I=I*-1-1,k[I]=m,ee>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(ee>=1&&this._inFlight>=ee)return k[I]=m,this._queue.push(I),!1;Y!==null&&(Y[I]=m);var z=this._promise,$=this._callback,re=z._boundValue();z._pushContext();var ae=E($).call(re,m,I,B),ue=z._popContext();if(c.checkForgottenReturns(ae,ue,Y!==null?"Promise.filter":"Promise.map",z),ae===P)return this._reject(ae.e),!0;var me=a(ae,this._promise);if(me instanceof r){me=me._target();var De=me._bitField;if(De&50397184)if(De&33554432)ae=me._value();else return De&16777216?(this._reject(me._reason()),!0):(this._cancel(),!0);else return ee>=1&&this._inFlight++,k[I]=me,me._proxy(this,(I+1)*-1),!1}k[I]=ae}var Me=++this._totalResolved;return Me>=B?(Y!==null?this._filter(k,Y):this._resolve(k),!0):!1},F.prototype._drainQueue=function(){for(var m=this._queue,I=this._limit,k=this._values;m.length>0&&this._inFlight<I;){if(this._isResolved())return;var B=m.pop();this._promiseFulfilled(k[B],B)}},F.prototype._filter=function(m,I){for(var k=I.length,B=new Array(k),Y=0,ee=0;ee<k;++ee)m[ee]&&(B[Y++]=I[ee]);B.length=Y,this._resolve(B)},F.prototype.preservedValues=function(){return this._preservedValues};function M(m,I,k,B){if(typeof I!="function")return g("expecting a function but got "+_.classString(I));var Y=0;if(k!==void 0)if(typeof k=="object"&&k!==null){if(typeof k.concurrency!="number")return r.reject(new TypeError("'concurrency' must be a number but it is "+_.classString(k.concurrency)));Y=k.concurrency}else return r.reject(new TypeError("options argument must be an object but it is "+_.classString(k)));return Y=typeof Y=="number"&&isFinite(Y)&&Y>=1?Y:0,new F(m,I,Y,B).promise()}r.prototype.map=function(m,I){return M(this,m,I,null)},r.map=function(m,I,k,B){return M(m,I,k,B)}}},{"./util":36}],19:[function(A,w,p){"use strict";w.exports=function(r,R,g,a,T){var c=A("./util"),N=c.tryCatch;r.method=function(_){if(typeof _!="function")throw new r.TypeError("expecting a function but got "+c.classString(_));return function(){var E=new r(R);E._captureStackTrace(),E._pushContext();var P=N(_).apply(this,arguments),D=E._popContext();return T.checkForgottenReturns(P,D,"Promise.method",E),E._resolveFromSyncValue(P),E}},r.attempt=r.try=function(_){if(typeof _!="function")return a("expecting a function but got "+c.classString(_));var E=new r(R);E._captureStackTrace(),E._pushContext();var P;if(arguments.length>1){T.deprecated("calling Promise.try with more than 1 argument");var D=arguments[1],F=arguments[2];P=c.isArray(D)?N(_).apply(F,D):N(_).call(F,D)}else P=N(_)();var M=E._popContext();return T.checkForgottenReturns(P,M,"Promise.try",E),E._resolveFromSyncValue(P),E},r.prototype._resolveFromSyncValue=function(_){_===c.errorObj?this._rejectCallback(_.e,!1):this._resolveCallback(_,!0)}}},{"./util":36}],20:[function(A,w,p){"use strict";var r=A("./util"),R=r.maybeWrapAsError,g=A("./errors"),a=g.OperationalError,T=A("./es5");function c(P){return P instanceof Error&&T.getPrototypeOf(P)===Error.prototype}var N=/^(?:name|message|stack|cause)$/;function _(P){var D;if(c(P)){D=new a(P),D.name=P.name,D.message=P.message,D.stack=P.stack;for(var F=T.keys(P),M=0;M<F.length;++M){var m=F[M];N.test(m)||(D[m]=P[m])}return D}return r.markAsOriginatingFromRejection(P),P}function E(P,D){return function(F,M){if(P!==null){if(F){var m=_(R(F));P._attachExtraTrace(m),P._reject(m)}else if(!D)P._fulfill(M);else{var I=[].slice.call(arguments,1);P._fulfill(I)}P=null}}}w.exports=E},{"./errors":12,"./es5":13,"./util":36}],21:[function(A,w,p){"use strict";w.exports=function(r){var R=A("./util"),g=r._async,a=R.tryCatch,T=R.errorObj;function c(E,P){var D=this;if(!R.isArray(E))return N.call(D,E,P);var F=a(P).apply(D._boundValue(),[null].concat(E));F===T&&g.throwLater(F.e)}function N(E,P){var D=this,F=D._boundValue(),M=E===void 0?a(P).call(F,null):a(P).call(F,null,E);M===T&&g.throwLater(M.e)}function _(E,P){var D=this;if(!E){var F=new Error(E+"");F.cause=E,E=F}var M=a(P).call(D._boundValue(),E);M===T&&g.throwLater(M.e)}r.prototype.asCallback=r.prototype.nodeify=function(E,P){if(typeof E=="function"){var D=N;P!==void 0&&Object(P).spread&&(D=c),this._then(D,_,void 0,this,E)}return this}}},{"./util":36}],22:[function(A,w,p){"use strict";w.exports=function(){var r=function(){return new F(\`circular promise resolution chain

    See http://goo.gl/MqrFmX
\`)},R=function(){return new Q.PromiseInspection(this._target())},g=function(K){return Q.reject(new F(K))};function a(){}var T={},c=A("./util"),N;c.isNode?N=function(){var K=process.domain;return K===void 0&&(K=null),K}:N=function(){return null},c.notEnumerableProp(Q,"_getDomain",N);var _=A("./es5"),E=A("./async"),P=new E;_.defineProperty(Q,"_async",{value:P});var D=A("./errors"),F=Q.TypeError=D.TypeError;Q.RangeError=D.RangeError;var M=Q.CancellationError=D.CancellationError;Q.TimeoutError=D.TimeoutError,Q.OperationalError=D.OperationalError,Q.RejectionError=D.OperationalError,Q.AggregateError=D.AggregateError;var m=function(){},I={},k={},B=A("./thenables")(Q,m),Y=A("./promise_array")(Q,m,B,g,a),ee=A("./context")(Q),z=ee.create,$=A("./debuggability")(Q,ee),re=$.CapturedTrace,ae=A("./finally")(Q,B,k),ue=A("./catch_filter")(k),me=A("./nodeback"),De=c.errorObj,Me=c.tryCatch;function je(K,Z){if(K==null||K.constructor!==Q)throw new F(\`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
\`);if(typeof Z!="function")throw new F("expecting a function but got "+c.classString(Z))}function Q(K){K!==m&&je(this,K),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(K),this._promiseCreated(),this._fireEvent("promiseCreated",this)}Q.prototype.toString=function(){return"[object Promise]"},Q.prototype.caught=Q.prototype.catch=function(K){var Z=arguments.length;if(Z>1){var fe=new Array(Z-1),de=0,be;for(be=0;be<Z-1;++be){var ve=arguments[be];if(c.isObject(ve))fe[de++]=ve;else return g("Catch statement predicate: expecting an object but got "+c.classString(ve))}return fe.length=de,K=arguments[be],this.then(void 0,ue(fe,K,this))}return this.then(void 0,K)},Q.prototype.reflect=function(){return this._then(R,R,void 0,this,void 0)},Q.prototype.then=function(K,Z){if($.warnings()&&arguments.length>0&&typeof K!="function"&&typeof Z!="function"){var fe=".then() only accepts functions but was passed: "+c.classString(K);arguments.length>1&&(fe+=", "+c.classString(Z)),this._warn(fe)}return this._then(K,Z,void 0,void 0,void 0)},Q.prototype.done=function(K,Z){var fe=this._then(K,Z,void 0,void 0,void 0);fe._setIsFinal()},Q.prototype.spread=function(K){return typeof K!="function"?g("expecting a function but got "+c.classString(K)):this.all()._then(K,void 0,void 0,I,void 0)},Q.prototype.toJSON=function(){var K={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(K.fulfillmentValue=this.value(),K.isFulfilled=!0):this.isRejected()&&(K.rejectionReason=this.reason(),K.isRejected=!0),K},Q.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new Y(this).promise()},Q.prototype.error=function(K){return this.caught(c.originatesFromRejection,K)},Q.getNewLibraryCopy=w.exports,Q.is=function(K){return K instanceof Q},Q.fromNode=Q.fromCallback=function(K){var Z=new Q(m);Z._captureStackTrace();var fe=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,de=Me(K)(me(Z,fe));return de===De&&Z._rejectCallback(de.e,!0),Z._isFateSealed()||Z._setAsyncGuaranteed(),Z},Q.all=function(K){return new Y(K).promise()},Q.cast=function(K){var Z=B(K);return Z instanceof Q||(Z=new Q(m),Z._captureStackTrace(),Z._setFulfilled(),Z._rejectionHandler0=K),Z},Q.resolve=Q.fulfilled=Q.cast,Q.reject=Q.rejected=function(K){var Z=new Q(m);return Z._captureStackTrace(),Z._rejectCallback(K,!0),Z},Q.setScheduler=function(K){if(typeof K!="function")throw new F("expecting a function but got "+c.classString(K));return P.setScheduler(K)},Q.prototype._then=function(K,Z,fe,de,be){var ve=be!==void 0,Le=ve?be:new Q(m),Ue=this._target(),et=Ue._bitField;ve||(Le._propagateFrom(this,3),Le._captureStackTrace(),de===void 0&&this._bitField&2097152&&(et&50397184?de=this._boundValue():de=Ue===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,Le));var Ze=N();if(et&50397184){var We,Xe,Ve=Ue._settlePromiseCtx;et&33554432?(Xe=Ue._rejectionHandler0,We=K):et&16777216?(Xe=Ue._fulfillmentHandler0,We=Z,Ue._unsetRejectionIsUnhandled()):(Ve=Ue._settlePromiseLateCancellationObserver,Xe=new M("late cancellation observer"),Ue._attachExtraTrace(Xe),We=Z),P.invoke(Ve,Ue,{handler:Ze===null?We:typeof We=="function"&&c.domainBind(Ze,We),promise:Le,receiver:de,value:Xe})}else Ue._addCallbacks(K,Z,Le,de,Ze);return Le},Q.prototype._length=function(){return this._bitField&65535},Q.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},Q.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},Q.prototype._setLength=function(K){this._bitField=this._bitField&-65536|K&65535},Q.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},Q.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},Q.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},Q.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},Q.prototype._isFinal=function(){return(this._bitField&4194304)>0},Q.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},Q.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},Q.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},Q.prototype._setAsyncGuaranteed=function(){P.hasCustomScheduler()||(this._bitField=this._bitField|134217728)},Q.prototype._receiverAt=function(K){var Z=K===0?this._receiver0:this[K*4-4+3];if(Z!==T)return Z===void 0&&this._isBound()?this._boundValue():Z},Q.prototype._promiseAt=function(K){return this[K*4-4+2]},Q.prototype._fulfillmentHandlerAt=function(K){return this[K*4-4+0]},Q.prototype._rejectionHandlerAt=function(K){return this[K*4-4+1]},Q.prototype._boundValue=function(){},Q.prototype._migrateCallback0=function(K){var Z=K._bitField,fe=K._fulfillmentHandler0,de=K._rejectionHandler0,be=K._promise0,ve=K._receiverAt(0);ve===void 0&&(ve=T),this._addCallbacks(fe,de,be,ve,null)},Q.prototype._migrateCallbackAt=function(K,Z){var fe=K._fulfillmentHandlerAt(Z),de=K._rejectionHandlerAt(Z),be=K._promiseAt(Z),ve=K._receiverAt(Z);ve===void 0&&(ve=T),this._addCallbacks(fe,de,be,ve,null)},Q.prototype._addCallbacks=function(K,Z,fe,de,be){var ve=this._length();if(ve>=65535-4&&(ve=0,this._setLength(0)),ve===0)this._promise0=fe,this._receiver0=de,typeof K=="function"&&(this._fulfillmentHandler0=be===null?K:c.domainBind(be,K)),typeof Z=="function"&&(this._rejectionHandler0=be===null?Z:c.domainBind(be,Z));else{var Le=ve*4-4;this[Le+2]=fe,this[Le+3]=de,typeof K=="function"&&(this[Le+0]=be===null?K:c.domainBind(be,K)),typeof Z=="function"&&(this[Le+1]=be===null?Z:c.domainBind(be,Z))}return this._setLength(ve+1),ve},Q.prototype._proxy=function(K,Z){this._addCallbacks(void 0,void 0,Z,K,null)},Q.prototype._resolveCallback=function(K,Z){if(!(this._bitField&117506048)){if(K===this)return this._rejectCallback(r(),!1);var fe=B(K,this);if(!(fe instanceof Q))return this._fulfill(K);Z&&this._propagateFrom(fe,2);var de=fe._target();if(de===this){this._reject(r());return}var be=de._bitField;if(be&50397184)if(be&33554432)this._fulfill(de._value());else if(be&16777216)this._reject(de._reason());else{var Ue=new M("late cancellation observer");de._attachExtraTrace(Ue),this._reject(Ue)}else{var ve=this._length();ve>0&&de._migrateCallback0(this);for(var Le=1;Le<ve;++Le)de._migrateCallbackAt(this,Le);this._setFollowing(),this._setLength(0),this._setFollowee(de)}}},Q.prototype._rejectCallback=function(K,Z,fe){var de=c.ensureErrorObject(K),be=de===K;if(!be&&!fe&&$.warnings()){var ve="a promise was rejected with a non-error: "+c.classString(K);this._warn(ve,!0)}this._attachExtraTrace(de,Z?be:!1),this._reject(K)},Q.prototype._resolveFromExecutor=function(K){if(K!==m){var Z=this;this._captureStackTrace(),this._pushContext();var fe=!0,de=this._execute(K,function(be){Z._resolveCallback(be)},function(be){Z._rejectCallback(be,fe)});fe=!1,this._popContext(),de!==void 0&&Z._rejectCallback(de,!0)}},Q.prototype._settlePromiseFromHandler=function(K,Z,fe,de){var be=de._bitField;if(!(be&65536)){de._pushContext();var ve;Z===I?!fe||typeof fe.length!="number"?(ve=De,ve.e=new F("cannot .spread() a non-array: "+c.classString(fe))):ve=Me(K).apply(this._boundValue(),fe):ve=Me(K).call(Z,fe);var Le=de._popContext();be=de._bitField,!(be&65536)&&(ve===k?de._reject(fe):ve===De?de._rejectCallback(ve.e,!1):($.checkForgottenReturns(ve,Le,"",de,this),de._resolveCallback(ve)))}},Q.prototype._target=function(){for(var K=this;K._isFollowing();)K=K._followee();return K},Q.prototype._followee=function(){return this._rejectionHandler0},Q.prototype._setFollowee=function(K){this._rejectionHandler0=K},Q.prototype._settlePromise=function(K,Z,fe,de){var be=K instanceof Q,ve=this._bitField,Le=(ve&134217728)!==0;ve&65536?(be&&K._invokeInternalOnCancel(),fe instanceof ae&&fe.isFinallyHandler()?(fe.cancelPromise=K,Me(Z).call(fe,de)===De&&K._reject(De.e)):Z===R?K._fulfill(R.call(fe)):fe instanceof a?fe._promiseCancelled(K):be||K instanceof Y?K._cancel():fe.cancel()):typeof Z=="function"?be?(Le&&K._setAsyncGuaranteed(),this._settlePromiseFromHandler(Z,fe,de,K)):Z.call(fe,de,K):fe instanceof a?fe._isResolved()||(ve&33554432?fe._promiseFulfilled(de,K):fe._promiseRejected(de,K)):be&&(Le&&K._setAsyncGuaranteed(),ve&33554432?K._fulfill(de):K._reject(de))},Q.prototype._settlePromiseLateCancellationObserver=function(K){var Z=K.handler,fe=K.promise,de=K.receiver,be=K.value;typeof Z=="function"?fe instanceof Q?this._settlePromiseFromHandler(Z,de,be,fe):Z.call(de,be,fe):fe instanceof Q&&fe._reject(be)},Q.prototype._settlePromiseCtx=function(K){this._settlePromise(K.promise,K.handler,K.receiver,K.value)},Q.prototype._settlePromise0=function(K,Z,fe){var de=this._promise0,be=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(de,K,be,Z)},Q.prototype._clearCallbackDataAtIndex=function(K){var Z=K*4-4;this[Z+2]=this[Z+3]=this[Z+0]=this[Z+1]=void 0},Q.prototype._fulfill=function(K){var Z=this._bitField;if(!((Z&117506048)>>>16)){if(K===this){var fe=r();return this._attachExtraTrace(fe),this._reject(fe)}this._setFulfilled(),this._rejectionHandler0=K,(Z&65535)>0&&(Z&134217728?this._settlePromises():P.settlePromises(this))}},Q.prototype._reject=function(K){var Z=this._bitField;if(!((Z&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=K,this._isFinal())return P.fatalError(K,c.isNode);(Z&65535)>0?P.settlePromises(this):this._ensurePossibleRejectionHandled()}},Q.prototype._fulfillPromises=function(K,Z){for(var fe=1;fe<K;fe++){var de=this._fulfillmentHandlerAt(fe),be=this._promiseAt(fe),ve=this._receiverAt(fe);this._clearCallbackDataAtIndex(fe),this._settlePromise(be,de,ve,Z)}},Q.prototype._rejectPromises=function(K,Z){for(var fe=1;fe<K;fe++){var de=this._rejectionHandlerAt(fe),be=this._promiseAt(fe),ve=this._receiverAt(fe);this._clearCallbackDataAtIndex(fe),this._settlePromise(be,de,ve,Z)}},Q.prototype._settlePromises=function(){var K=this._bitField,Z=K&65535;if(Z>0){if(K&16842752){var fe=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,fe,K),this._rejectPromises(Z,fe)}else{var de=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,de,K),this._fulfillPromises(Z,de)}this._setLength(0)}this._clearCancellationData()},Q.prototype._settledValue=function(){var K=this._bitField;if(K&33554432)return this._rejectionHandler0;if(K&16777216)return this._fulfillmentHandler0};function ge(K){this.promise._resolveCallback(K)}function Ie(K){this.promise._rejectCallback(K,!1)}Q.defer=Q.pending=function(){$.deprecated("Promise.defer","new Promise");var K=new Q(m);return{promise:K,resolve:ge,reject:Ie}},c.notEnumerableProp(Q,"_makeSelfResolutionError",r),A("./method")(Q,m,B,g,$),A("./bind")(Q,m,B,$),A("./cancel")(Q,Y,g,$),A("./direct_resolve")(Q),A("./synchronous_inspection")(Q),A("./join")(Q,Y,B,m,P,N),Q.Promise=Q,Q.version="3.5.1",A("./map.js")(Q,Y,g,B,m,$),A("./call_get.js")(Q),A("./using.js")(Q,g,B,z,m,$),A("./timers.js")(Q,m,$),A("./generators.js")(Q,g,m,B,a,$),A("./nodeify.js")(Q),A("./promisify.js")(Q,m),A("./props.js")(Q,Y,B,g),A("./race.js")(Q,m,B,g),A("./reduce.js")(Q,Y,g,B,m,$),A("./settle.js")(Q,Y,$),A("./some.js")(Q,Y,g),A("./filter.js")(Q,m),A("./each.js")(Q,m),A("./any.js")(Q),c.toFastProperties(Q),c.toFastProperties(Q.prototype);function we(K){var Z=new Q(m);Z._fulfillmentHandler0=K,Z._rejectionHandler0=K,Z._promise0=K,Z._receiver0=K}return we({a:1}),we({b:2}),we({c:3}),we(1),we(function(){}),we(void 0),we(!1),we(new Q(m)),$.setBounds(E.firstLineError,c.lastLineError),Q}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(A,w,p){"use strict";w.exports=function(r,R,g,a,T){var c=A("./util"),N=c.isArray;function _(P){switch(P){case-2:return[];case-3:return{};case-6:return new Map}}function E(P){var D=this._promise=new r(R);P instanceof r&&D._propagateFrom(P,3),D._setOnCancel(this),this._values=P,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return c.inherits(E,T),E.prototype.length=function(){return this._length},E.prototype.promise=function(){return this._promise},E.prototype._init=function P(D,F){var M=g(this._values,this._promise);if(M instanceof r){M=M._target();var m=M._bitField;if(this._values=M,m&50397184)if(m&33554432)M=M._value();else return m&16777216?this._reject(M._reason()):this._cancel();else return this._promise._setAsyncGuaranteed(),M._then(P,this._reject,void 0,this,F)}if(M=c.asArray(M),M===null){var I=a("expecting an array or an iterable object but got "+c.classString(M)).reason();this._promise._rejectCallback(I,!1);return}if(M.length===0){F===-5?this._resolveEmptyArray():this._resolve(_(F));return}this._iterate(M)},E.prototype._iterate=function(P){var D=this.getActualLength(P.length);this._length=D,this._values=this.shouldCopyValues()?new Array(D):this._values;for(var F=this._promise,M=!1,m=null,I=0;I<D;++I){var k=g(P[I],F);k instanceof r?(k=k._target(),m=k._bitField):m=null,M?m!==null&&k.suppressUnhandledRejections():m!==null?m&50397184?m&33554432?M=this._promiseFulfilled(k._value(),I):m&16777216?M=this._promiseRejected(k._reason(),I):M=this._promiseCancelled(I):(k._proxy(this,I),this._values[I]=k):M=this._promiseFulfilled(k,I)}M||F._setAsyncGuaranteed()},E.prototype._isResolved=function(){return this._values===null},E.prototype._resolve=function(P){this._values=null,this._promise._fulfill(P)},E.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},E.prototype._reject=function(P){this._values=null,this._promise._rejectCallback(P,!1)},E.prototype._promiseFulfilled=function(P,D){this._values[D]=P;var F=++this._totalResolved;return F>=this._length?(this._resolve(this._values),!0):!1},E.prototype._promiseCancelled=function(){return this._cancel(),!0},E.prototype._promiseRejected=function(P){return this._totalResolved++,this._reject(P),!0},E.prototype._resultCancelled=function(){if(!this._isResolved()){var P=this._values;if(this._cancel(),P instanceof r)P.cancel();else for(var D=0;D<P.length;++D)P[D]instanceof r&&P[D].cancel()}},E.prototype.shouldCopyValues=function(){return!0},E.prototype.getActualLength=function(P){return P},E}},{"./util":36}],24:[function(A,w,p){"use strict";w.exports=function(r,R){var g={},a=A("./util"),T=A("./nodeback"),c=a.withAppended,N=a.maybeWrapAsError,_=a.canEvaluate,E=A("./errors").TypeError,P="Async",D={__isPromisified__:!0},F=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],M=new RegExp("^(?:"+F.join("|")+")$"),m=function(ge){return a.isIdentifier(ge)&&ge.charAt(0)!=="_"&&ge!=="constructor"};function I(ge){return!M.test(ge)}function k(ge){try{return ge.__isPromisified__===!0}catch{return!1}}function B(ge,Ie,we){var K=a.getDataPropertyOrDefault(ge,Ie+we,D);return K?k(K):!1}function Y(ge,Ie,we){for(var K=0;K<ge.length;K+=2){var Z=ge[K];if(we.test(Z)){for(var fe=Z.replace(we,""),de=0;de<ge.length;de+=2)if(ge[de]===fe)throw new E(\`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
\`.replace("%s",Ie))}}}function ee(ge,Ie,we,K){for(var Z=a.inheritedDataKeys(ge),fe=[],de=0;de<Z.length;++de){var be=Z[de],ve=ge[be],Le=K===m?!0:m(be,ve,ge);typeof ve=="function"&&!k(ve)&&!B(ge,be,Ie)&&K(be,ve,ge,Le)&&fe.push(be,ve)}return Y(fe,Ie,we),fe}var z=function(ge){return ge.replace(/([$])/,"\\\\$")},$;if(!1)var re,ae,ue,me;function De(ge,Ie,we,K,Z,fe){var de=function(){return this}(),be=ge;typeof be=="string"&&(ge=K);function ve(){var Le=Ie;Ie===g&&(Le=this);var Ue=new r(R);Ue._captureStackTrace();var et=typeof be=="string"&&this!==de?this[be]:ge,Ze=T(Ue,fe);try{et.apply(Le,c(arguments,Ze))}catch(We){Ue._rejectCallback(N(We),!0,!0)}return Ue._isFateSealed()||Ue._setAsyncGuaranteed(),Ue}return a.notEnumerableProp(ve,"__isPromisified__",!0),ve}var Me=_?$:De;function je(ge,Ie,we,K,Z){for(var fe=new RegExp(z(Ie)+"$"),de=ee(ge,Ie,fe,we),be=0,ve=de.length;be<ve;be+=2){var Le=de[be],Ue=de[be+1],et=Le+Ie;if(K===Me)ge[et]=Me(Le,g,Le,Ue,Ie,Z);else{var Ze=K(Ue,function(){return Me(Le,g,Le,Ue,Ie,Z)});a.notEnumerableProp(Ze,"__isPromisified__",!0),ge[et]=Ze}}return a.toFastProperties(ge),ge}function Q(ge,Ie,we){return Me(ge,Ie,void 0,ge,null,we)}r.promisify=function(ge,Ie){if(typeof ge!="function")throw new E("expecting a function but got "+a.classString(ge));if(k(ge))return ge;Ie=Object(Ie);var we=Ie.context===void 0?g:Ie.context,K=!!Ie.multiArgs,Z=Q(ge,we,K);return a.copyDescriptors(ge,Z,I),Z},r.promisifyAll=function(ge,Ie){if(typeof ge!="function"&&typeof ge!="object")throw new E(\`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
\`);Ie=Object(Ie);var we=!!Ie.multiArgs,K=Ie.suffix;typeof K!="string"&&(K=P);var Z=Ie.filter;typeof Z!="function"&&(Z=m);var fe=Ie.promisifier;if(typeof fe!="function"&&(fe=Me),!a.isIdentifier(K))throw new RangeError(\`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
\`);for(var de=a.inheritedDataKeys(ge),be=0;be<de.length;++be){var ve=ge[de[be]];de[be]!=="constructor"&&a.isClass(ve)&&(je(ve.prototype,K,Z,fe,we),je(ve,K,Z,fe,we))}return je(ge,K,Z,fe,we)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(A,w,p){"use strict";w.exports=function(r,R,g,a){var T=A("./util"),c=T.isObject,N=A("./es5"),_;typeof Map=="function"&&(_=Map);var E=function(){var M=0,m=0;function I(k,B){this[M]=k,this[M+m]=B,M++}return function(B){m=B.size,M=0;var Y=new Array(B.size*2);return B.forEach(I,Y),Y}}(),P=function(M){for(var m=new _,I=M.length/2|0,k=0;k<I;++k){var B=M[I+k],Y=M[k];m.set(B,Y)}return m};function D(M){var m=!1,I;if(_!==void 0&&M instanceof _)I=E(M),m=!0;else{var k=N.keys(M),B=k.length;I=new Array(B*2);for(var Y=0;Y<B;++Y){var ee=k[Y];I[Y]=M[ee],I[Y+B]=ee}}this.constructor$(I),this._isMap=m,this._init$(void 0,m?-6:-3)}T.inherits(D,R),D.prototype._init=function(){},D.prototype._promiseFulfilled=function(M,m){this._values[m]=M;var I=++this._totalResolved;if(I>=this._length){var k;if(this._isMap)k=P(this._values);else{k={};for(var B=this.length(),Y=0,ee=this.length();Y<ee;++Y)k[this._values[Y+B]]=this._values[Y]}return this._resolve(k),!0}return!1},D.prototype.shouldCopyValues=function(){return!1},D.prototype.getActualLength=function(M){return M>>1};function F(M){var m,I=g(M);if(c(I))I instanceof r?m=I._then(r.props,void 0,void 0,void 0,void 0):m=new D(I).promise();else return a(\`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
\`);return I instanceof r&&m._propagateFrom(I,2),m}r.prototype.props=function(){return F(this)},r.props=function(M){return F(M)}}},{"./es5":13,"./util":36}],26:[function(A,w,p){"use strict";function r(g,a,T,c,N){for(var _=0;_<N;++_)T[_+c]=g[_+a],g[_+a]=void 0}function R(g){this._capacity=g,this._length=0,this._front=0}R.prototype._willBeOverCapacity=function(g){return this._capacity<g},R.prototype._pushOne=function(g){var a=this.length();this._checkCapacity(a+1);var T=this._front+a&this._capacity-1;this[T]=g,this._length=a+1},R.prototype.push=function(g,a,T){var c=this.length()+3;if(this._willBeOverCapacity(c)){this._pushOne(g),this._pushOne(a),this._pushOne(T);return}var N=this._front+c-3;this._checkCapacity(c);var _=this._capacity-1;this[N+0&_]=g,this[N+1&_]=a,this[N+2&_]=T,this._length=c},R.prototype.shift=function(){var g=this._front,a=this[g];return this[g]=void 0,this._front=g+1&this._capacity-1,this._length--,a},R.prototype.length=function(){return this._length},R.prototype._checkCapacity=function(g){this._capacity<g&&this._resizeTo(this._capacity<<1)},R.prototype._resizeTo=function(g){var a=this._capacity;this._capacity=g;var T=this._front,c=this._length,N=T+c&a-1;r(this,0,this,a,N)},w.exports=R},{}],27:[function(A,w,p){"use strict";w.exports=function(r,R,g,a){var T=A("./util"),c=function(_){return _.then(function(E){return N(E,_)})};function N(_,E){var P=g(_);if(P instanceof r)return c(P);if(_=T.asArray(_),_===null)return a("expecting an array or an iterable object but got "+T.classString(_));var D=new r(R);E!==void 0&&D._propagateFrom(E,3);for(var F=D._fulfill,M=D._reject,m=0,I=_.length;m<I;++m){var k=_[m];k===void 0&&!(m in _)||r.cast(k)._then(F,M,void 0,D,null)}return D}r.race=function(_){return N(_,void 0)},r.prototype.race=function(){return N(this,void 0)}}},{"./util":36}],28:[function(A,w,p){"use strict";w.exports=function(r,R,g,a,T,c){var N=r._getDomain,_=A("./util"),E=_.tryCatch;function P(I,k,B,Y){this.constructor$(I);var ee=N();this._fn=ee===null?k:_.domainBind(ee,k),B!==void 0&&(B=r.resolve(B),B._attachCancellationCallback(this)),this._initialValue=B,this._currentCancellable=null,Y===T?this._eachValues=Array(this._length):Y===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}_.inherits(P,R),P.prototype._gotAccum=function(I){this._eachValues!==void 0&&this._eachValues!==null&&I!==T&&this._eachValues.push(I)},P.prototype._eachComplete=function(I){return this._eachValues!==null&&this._eachValues.push(I),this._eachValues},P.prototype._init=function(){},P.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},P.prototype.shouldCopyValues=function(){return!1},P.prototype._resolve=function(I){this._promise._resolveCallback(I),this._values=null},P.prototype._resultCancelled=function(I){if(I===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof r&&this._currentCancellable.cancel(),this._initialValue instanceof r&&this._initialValue.cancel())},P.prototype._iterate=function(I){this._values=I;var k,B,Y=I.length;if(this._initialValue!==void 0?(k=this._initialValue,B=0):(k=r.resolve(I[0]),B=1),this._currentCancellable=k,!k.isRejected())for(;B<Y;++B){var ee={accum:null,value:I[B],index:B,length:Y,array:this};k=k._then(M,void 0,void 0,ee,void 0)}this._eachValues!==void 0&&(k=k._then(this._eachComplete,void 0,void 0,this,void 0)),k._then(D,D,void 0,k,this)},r.prototype.reduce=function(I,k){return F(this,I,k,null)},r.reduce=function(I,k,B,Y){return F(I,k,B,Y)};function D(I,k){this.isFulfilled()?k._resolve(I):k._reject(I)}function F(I,k,B,Y){if(typeof k!="function")return g("expecting a function but got "+_.classString(k));var ee=new P(I,k,B,Y);return ee.promise()}function M(I){this.accum=I,this.array._gotAccum(I);var k=a(this.value,this.array._promise);return k instanceof r?(this.array._currentCancellable=k,k._then(m,void 0,void 0,this,void 0)):m.call(this,k)}function m(I){var k=this.array,B=k._promise,Y=E(k._fn);B._pushContext();var ee;k._eachValues!==void 0?ee=Y.call(B._boundValue(),I,this.index,this.length):ee=Y.call(B._boundValue(),this.accum,I,this.index,this.length),ee instanceof r&&(k._currentCancellable=ee);var z=B._popContext();return c.checkForgottenReturns(ee,z,k._eachValues!==void 0?"Promise.each":"Promise.reduce",B),ee}}},{"./util":36}],29:[function(A,w,p){"use strict";var r=A("./util"),R,g=function(){throw new Error(\`No async scheduler available

    See http://goo.gl/MqrFmX
\`)},a=r.getNativePromise();if(r.isNode&&typeof MutationObserver>"u"){var T=global.setImmediate,c=process.nextTick;R=r.isRecentNode?function(_){T.call(global,_)}:function(_){c.call(process,_)}}else if(typeof a=="function"&&typeof a.resolve=="function"){var N=a.resolve();R=function(_){N.then(_)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))?R=function(){var _=document.createElement("div"),E={attributes:!0},P=!1,D=document.createElement("div"),F=new MutationObserver(function(){_.classList.toggle("foo"),P=!1});F.observe(D,E);var M=function(){P||(P=!0,D.classList.toggle("foo"))};return function(I){var k=new MutationObserver(function(){k.disconnect(),I()});k.observe(_,E),M()}}():typeof setImmediate<"u"?R=function(_){setImmediate(_)}:typeof setTimeout<"u"?R=function(_){setTimeout(_,0)}:R=g;w.exports=R},{"./util":36}],30:[function(A,w,p){"use strict";w.exports=function(r,R,g){var a=r.PromiseInspection,T=A("./util");function c(N){this.constructor$(N)}T.inherits(c,R),c.prototype._promiseResolved=function(N,_){this._values[N]=_;var E=++this._totalResolved;return E>=this._length?(this._resolve(this._values),!0):!1},c.prototype._promiseFulfilled=function(N,_){var E=new a;return E._bitField=33554432,E._settledValueField=N,this._promiseResolved(_,E)},c.prototype._promiseRejected=function(N,_){var E=new a;return E._bitField=16777216,E._settledValueField=N,this._promiseResolved(_,E)},r.settle=function(N){return g.deprecated(".settle()",".reflect()"),new c(N).promise()},r.prototype.settle=function(){return r.settle(this)}}},{"./util":36}],31:[function(A,w,p){"use strict";w.exports=function(r,R,g){var a=A("./util"),T=A("./errors").RangeError,c=A("./errors").AggregateError,N=a.isArray,_={};function E(D){this.constructor$(D),this._howMany=0,this._unwrap=!1,this._initialized=!1}a.inherits(E,R),E.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var D=N(this._values);!this._isResolved()&&D&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},E.prototype.init=function(){this._initialized=!0,this._init()},E.prototype.setUnwrap=function(){this._unwrap=!0},E.prototype.howMany=function(){return this._howMany},E.prototype.setHowMany=function(D){this._howMany=D},E.prototype._promiseFulfilled=function(D){return this._addFulfilled(D),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},E.prototype._promiseRejected=function(D){return this._addRejected(D),this._checkOutcome()},E.prototype._promiseCancelled=function(){return this._values instanceof r||this._values==null?this._cancel():(this._addRejected(_),this._checkOutcome())},E.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var D=new c,F=this.length();F<this._values.length;++F)this._values[F]!==_&&D.push(this._values[F]);return D.length>0?this._reject(D):this._cancel(),!0}return!1},E.prototype._fulfilled=function(){return this._totalResolved},E.prototype._rejected=function(){return this._values.length-this.length()},E.prototype._addRejected=function(D){this._values.push(D)},E.prototype._addFulfilled=function(D){this._values[this._totalResolved++]=D},E.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},E.prototype._getRangeError=function(D){var F="Input array must contain at least "+this._howMany+" items but contains only "+D+" items";return new T(F)},E.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function P(D,F){if((F|0)!==F||F<0)return g(\`expecting a positive integer

    See http://goo.gl/MqrFmX
\`);var M=new E(D),m=M.promise();return M.setHowMany(F),M.init(),m}r.some=function(D,F){return P(D,F)},r.prototype.some=function(D){return P(this,D)},r._SomePromiseArray=E}},{"./errors":12,"./util":36}],32:[function(A,w,p){"use strict";w.exports=function(r){function R(E){E!==void 0?(E=E._target(),this._bitField=E._bitField,this._settledValueField=E._isFateSealed()?E._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}R.prototype._settledValue=function(){return this._settledValueField};var g=R.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(\`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
\`);return this._settledValue()},a=R.prototype.error=R.prototype.reason=function(){if(!this.isRejected())throw new TypeError(\`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
\`);return this._settledValue()},T=R.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},c=R.prototype.isRejected=function(){return(this._bitField&16777216)!==0},N=R.prototype.isPending=function(){return(this._bitField&50397184)===0},_=R.prototype.isResolved=function(){return(this._bitField&50331648)!==0};R.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},r.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},r.prototype._isCancelled=function(){return this._target().__isCancelled()},r.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},r.prototype.isPending=function(){return N.call(this._target())},r.prototype.isRejected=function(){return c.call(this._target())},r.prototype.isFulfilled=function(){return T.call(this._target())},r.prototype.isResolved=function(){return _.call(this._target())},r.prototype.value=function(){return g.call(this._target())},r.prototype.reason=function(){var E=this._target();return E._unsetRejectionIsUnhandled(),a.call(E)},r.prototype._value=function(){return this._settledValue()},r.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},r.PromiseInspection=R}},{}],33:[function(A,w,p){"use strict";w.exports=function(r,R){var g=A("./util"),a=g.errorObj,T=g.isObject;function c(F,M){if(T(F)){if(F instanceof r)return F;var m=_(F);if(m===a){M&&M._pushContext();var I=r.reject(m.e);return M&&M._popContext(),I}else if(typeof m=="function"){if(P(F)){var I=new r(R);return F._then(I._fulfill,I._reject,void 0,I,null),I}return D(F,m,M)}}return F}function N(F){return F.then}function _(F){try{return N(F)}catch(M){return a.e=M,a}}var E={}.hasOwnProperty;function P(F){try{return E.call(F,"_promise0")}catch{return!1}}function D(F,M,m){var I=new r(R),k=I;m&&m._pushContext(),I._captureStackTrace(),m&&m._popContext();var B=!0,Y=g.tryCatch(M).call(F,ee,z);B=!1,I&&Y===a&&(I._rejectCallback(Y.e,!0,!0),I=null);function ee($){I&&(I._resolveCallback($),I=null)}function z($){I&&(I._rejectCallback($,B,!0),I=null)}return k}return c}},{"./util":36}],34:[function(A,w,p){"use strict";w.exports=function(r,R,g){var a=A("./util"),T=r.TimeoutError;function c(F){this.handle=F}c.prototype._resultCancelled=function(){clearTimeout(this.handle)};var N=function(F){return _(+this).thenReturn(F)},_=r.delay=function(F,M){var m,I;return M!==void 0?(m=r.resolve(M)._then(N,null,null,F,void 0),g.cancellation()&&M instanceof r&&m._setOnCancel(M)):(m=new r(R),I=setTimeout(function(){m._fulfill()},+F),g.cancellation()&&m._setOnCancel(new c(I)),m._captureStackTrace()),m._setAsyncGuaranteed(),m};r.prototype.delay=function(F){return _(F,this)};var E=function(F,M,m){var I;typeof M!="string"?M instanceof Error?I=M:I=new T("operation timed out"):I=new T(M),a.markAsOriginatingFromRejection(I),F._attachExtraTrace(I),F._reject(I),m!=null&&m.cancel()};function P(F){return clearTimeout(this.handle),F}function D(F){throw clearTimeout(this.handle),F}r.prototype.timeout=function(F,M){F=+F;var m,I,k=new c(setTimeout(function(){m.isPending()&&E(m,M,I)},F));return g.cancellation()?(I=this.then(),m=I._then(P,D,void 0,k,void 0),m._setOnCancel(k)):m=this._then(P,D,void 0,k,void 0),m}}},{"./util":36}],35:[function(A,w,p){"use strict";w.exports=function(r,R,g,a,T,c){var N=A("./util"),_=A("./errors").TypeError,E=A("./util").inherits,P=N.errorObj,D=N.tryCatch,F={};function M(z){setTimeout(function(){throw z},0)}function m(z){var $=g(z);return $!==z&&typeof z._isDisposable=="function"&&typeof z._getDisposer=="function"&&z._isDisposable()&&$._setDisposable(z._getDisposer()),$}function I(z,$){var re=0,ae=z.length,ue=new r(T);function me(){if(re>=ae)return ue._fulfill();var De=m(z[re++]);if(De instanceof r&&De._isDisposable()){try{De=g(De._getDisposer().tryDispose($),z.promise)}catch(Me){return M(Me)}if(De instanceof r)return De._then(me,M,null,null,null)}me()}return me(),ue}function k(z,$,re){this._data=z,this._promise=$,this._context=re}k.prototype.data=function(){return this._data},k.prototype.promise=function(){return this._promise},k.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():F},k.prototype.tryDispose=function(z){var $=this.resource(),re=this._context;re!==void 0&&re._pushContext();var ae=$!==F?this.doDispose($,z):null;return re!==void 0&&re._popContext(),this._promise._unsetDisposable(),this._data=null,ae},k.isDisposer=function(z){return z!=null&&typeof z.resource=="function"&&typeof z.tryDispose=="function"};function B(z,$,re){this.constructor$(z,$,re)}E(B,k),B.prototype.doDispose=function(z,$){var re=this.data();return re.call(z,z,$)};function Y(z){return k.isDisposer(z)?(this.resources[this.index]._setDisposable(z),z.promise()):z}function ee(z){this.length=z,this.promise=null,this[z-1]=null}ee.prototype._resultCancelled=function(){for(var z=this.length,$=0;$<z;++$){var re=this[$];re instanceof r&&re.cancel()}},r.using=function(){var z=arguments.length;if(z<2)return R("you must pass at least 2 arguments to Promise.using");var $=arguments[z-1];if(typeof $!="function")return R("expecting a function but got "+N.classString($));var re,ae=!0;z===2&&Array.isArray(arguments[0])?(re=arguments[0],z=re.length,ae=!1):(re=arguments,z--);for(var ue=new ee(z),me=0;me<z;++me){var De=re[me];if(k.isDisposer(De)){var Me=De;De=De.promise(),De._setDisposable(Me)}else{var je=g(De);je instanceof r&&(De=je._then(Y,null,null,{resources:ue,index:me},void 0))}ue[me]=De}for(var Q=new Array(ue.length),me=0;me<Q.length;++me)Q[me]=r.resolve(ue[me]).reflect();var ge=r.all(Q).then(function(we){for(var K=0;K<we.length;++K){var Z=we[K];if(Z.isRejected())return P.e=Z.error(),P;if(!Z.isFulfilled()){ge.cancel();return}we[K]=Z.value()}Ie._pushContext(),$=D($);var fe=ae?$.apply(void 0,we):$(we),de=Ie._popContext();return c.checkForgottenReturns(fe,de,"Promise.using",Ie),fe}),Ie=ge.lastly(function(){var we=new r.PromiseInspection(ge);return I(ue,we)});return ue.promise=Ie,Ie._setOnCancel(ue),Ie},r.prototype._setDisposable=function(z){this._bitField=this._bitField|131072,this._disposer=z},r.prototype._isDisposable=function(){return(this._bitField&131072)>0},r.prototype._getDisposer=function(){return this._disposer},r.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},r.prototype.disposer=function(z){if(typeof z=="function")return new B(z,this,a());throw new _}}},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){"use strict";var es5=_dereq_("./es5"),canEvaluate=typeof navigator>"u",errorObj={e:{}},tryCatchTarget,globalObject=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:this!==void 0?this:null;function tryCatcher(){try{var A=tryCatchTarget;return tryCatchTarget=null,A.apply(this,arguments)}catch(w){return errorObj.e=w,errorObj}}function tryCatch(A){return tryCatchTarget=A,tryCatcher}var inherits=function(A,w){var p={}.hasOwnProperty;function r(){this.constructor=A,this.constructor$=w;for(var R in w.prototype)p.call(w.prototype,R)&&R.charAt(R.length-1)!=="$"&&(this[R+"$"]=w.prototype[R])}return r.prototype=w.prototype,A.prototype=new r,A.prototype};function isPrimitive(A){return A==null||A===!0||A===!1||typeof A=="string"||typeof A=="number"}function isObject(A){return typeof A=="function"||typeof A=="object"&&A!==null}function maybeWrapAsError(A){return isPrimitive(A)?new Error(safeToString(A)):A}function withAppended(A,w){var p=A.length,r=new Array(p+1),R;for(R=0;R<p;++R)r[R]=A[R];return r[R]=w,r}function getDataPropertyOrDefault(A,w,p){if(es5.isES5){var r=Object.getOwnPropertyDescriptor(A,w);if(r!=null)return r.get==null&&r.set==null?r.value:p}else return{}.hasOwnProperty.call(A,w)?A[w]:void 0}function notEnumerableProp(A,w,p){if(isPrimitive(A))return A;var r={value:p,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(A,w,r),A}function thrower(A){throw A}var inheritedDataKeys=function(){var A=[Array.prototype,Object.prototype,Function.prototype],w=function(R){for(var g=0;g<A.length;++g)if(A[g]===R)return!0;return!1};if(es5.isES5){var p=Object.getOwnPropertyNames;return function(R){for(var g=[],a=Object.create(null);R!=null&&!w(R);){var T;try{T=p(R)}catch{return g}for(var c=0;c<T.length;++c){var N=T[c];if(!a[N]){a[N]=!0;var _=Object.getOwnPropertyDescriptor(R,N);_!=null&&_.get==null&&_.set==null&&g.push(N)}}R=es5.getPrototypeOf(R)}return g}}else{var r={}.hasOwnProperty;return function(R){if(w(R))return[];var g=[];e:for(var a in R)if(r.call(R,a))g.push(a);else{for(var T=0;T<A.length;++T)if(r.call(A[T],a))continue e;g.push(a)}return g}}}(),thisAssignmentPattern=/this\\s*\\.\\s*\\S+\\s*=/;function isClass(A){try{if(typeof A=="function"){var w=es5.names(A.prototype),p=es5.isES5&&w.length>1,r=w.length>0&&!(w.length===1&&w[0]==="constructor"),R=thisAssignmentPattern.test(A+"")&&es5.names(A).length>0;if(p||r||R)return!0}return!1}catch{return!1}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;for(var l=8;l--;)new FakeConstructor;return obj}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(A){return rident.test(A)}function filledRange(A,w,p){for(var r=new Array(A),R=0;R<A;++R)r[R]=w+R+p;return r}function safeToString(A){try{return A+""}catch{return"[no string representation]"}}function isError(A){return A instanceof Error||A!==null&&typeof A=="object"&&typeof A.message=="string"&&typeof A.name=="string"}function markAsOriginatingFromRejection(A){try{notEnumerableProp(A,"isOperational",!0)}catch{}}function originatesFromRejection(A){return A==null?!1:A instanceof Error.__BluebirdErrorTypes__.OperationalError||A.isOperational===!0}function canAttachTrace(A){return isError(A)&&es5.propertyIsWritable(A,"stack")}var ensureErrorObject=function(){return"stack"in new Error?function(A){return canAttachTrace(A)?A:new Error(safeToString(A))}:function(A){if(canAttachTrace(A))return A;try{throw new Error(safeToString(A))}catch(w){return w}}}();function classString(A){return{}.toString.call(A)}function copyDescriptors(A,w,p){for(var r=es5.names(A),R=0;R<r.length;++R){var g=r[R];if(p(g))try{es5.defineProperty(w,g,es5.getDescriptor(A,g))}catch{}}}var asArray=function(A){return es5.isArray(A)?A:null};if(typeof Symbol<"u"&&Symbol.iterator){var ArrayFrom=typeof Array.from=="function"?function(A){return Array.from(A)}:function(A){for(var w=[],p=A[Symbol.iterator](),r;!(r=p.next()).done;)w.push(r.value);return w};asArray=function(A){return es5.isArray(A)?A:A!=null&&typeof A[Symbol.iterator]=="function"?ArrayFrom(A):null}}var isNode=typeof process<"u"&&classString(process).toLowerCase()==="[object process]",hasEnvVariables=typeof process<"u"&&typeof process.env<"u";function env(A){return hasEnvVariables?process.env[A]:void 0}function getNativePromise(){if(typeof Promise=="function")try{var A=new Promise(function(){});if({}.toString.call(A)==="[object Promise]")return Promise}catch{}}function domainBind(A,w){return A.bind(w)}var ret={isClass,isIdentifier,inheritedDataKeys,getDataPropertyOrDefault,thrower,isArray:es5.isArray,asArray,notEnumerableProp,isPrimitive,isObject,isError,canEvaluate,errorObj,tryCatch,inherits,withAppended,maybeWrapAsError,toFastProperties,filledRange,toString:safeToString,canAttachTrace,ensureErrorObject,originatesFromRejection,markAsOriginatingFromRejection,classString,copyDescriptors,hasDevTools:typeof chrome<"u"&&chrome&&typeof chrome.loadTimes=="function",isNode,hasEnvVariables,env,global:globalObject,getNativePromise,domainBind};ret.isRecentNode=ret.isNode&&function(){var A=process.versions.node.split(".").map(Number);return A[0]===0&&A[1]>10||A[0]>0}(),ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(A){ret.lastLineError=A}module.exports=ret},{"./es5":13}]},{},[4])(4)}),typeof window<"u"&&window!==null?window.P=window.Promise:typeof self<"u"&&self!==null&&(self.P=self.Promise)}).call(this,__webpack_require__("1a654c89165c3fdd23e9"),__webpack_require__("d8a2b18087957e350ade"),__webpack_require__("f89ea08855b945937e0d").setImmediate)},"39dd20d87454e60feb6e":function(A,w,p){"use strict";var r=p("340ef733560285194387"),R=p("0ee394ae0680b1ca3e73"),g=p("f948e3fa67ea88e1add6"),a=p("78ab99b8f504f421d4d0"),T=p("7ad6e4b8ee37a1dcce23"),c=Object.prototype.toString,N=0,_=4,E=0,P=1,D=2,F=-1,M=0,m=8;function I(ee){if(!(this instanceof I))return new I(ee);this.options=R.assign({level:F,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:M,to:""},ee||{});var z=this.options;z.raw&&z.windowBits>0?z.windowBits=-z.windowBits:z.gzip&&z.windowBits>0&&z.windowBits<16&&(z.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var $=r.deflateInit2(this.strm,z.level,z.method,z.windowBits,z.memLevel,z.strategy);if($!==E)throw new Error(a[$]);if(z.header&&r.deflateSetHeader(this.strm,z.header),z.dictionary){var re;if(typeof z.dictionary=="string"?re=g.string2buf(z.dictionary):c.call(z.dictionary)==="[object ArrayBuffer]"?re=new Uint8Array(z.dictionary):re=z.dictionary,$=r.deflateSetDictionary(this.strm,re),$!==E)throw new Error(a[$]);this._dict_set=!0}}I.prototype.push=function(ee,z){var $=this.strm,re=this.options.chunkSize,ae,ue;if(this.ended)return!1;ue=z===~~z?z:z===!0?_:N,typeof ee=="string"?$.input=g.string2buf(ee):c.call(ee)==="[object ArrayBuffer]"?$.input=new Uint8Array(ee):$.input=ee,$.next_in=0,$.avail_in=$.input.length;do{if($.avail_out===0&&($.output=new R.Buf8(re),$.next_out=0,$.avail_out=re),ae=r.deflate($,ue),ae!==P&&ae!==E)return this.onEnd(ae),this.ended=!0,!1;($.avail_out===0||$.avail_in===0&&(ue===_||ue===D))&&(this.options.to==="string"?this.onData(g.buf2binstring(R.shrinkBuf($.output,$.next_out))):this.onData(R.shrinkBuf($.output,$.next_out)))}while(($.avail_in>0||$.avail_out===0)&&ae!==P);return ue===_?(ae=r.deflateEnd(this.strm),this.onEnd(ae),this.ended=!0,ae===E):(ue===D&&(this.onEnd(E),$.avail_out=0),!0)},I.prototype.onData=function(ee){this.chunks.push(ee)},I.prototype.onEnd=function(ee){ee===E&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=R.flattenChunks(this.chunks)),this.chunks=[],this.err=ee,this.msg=this.strm.msg};function k(ee,z){var $=new I(z);if($.push(ee,!0),$.err)throw $.msg||a[$.err];return $.result}function B(ee,z){return z=z||{},z.raw=!0,k(ee,z)}function Y(ee,z){return z=z||{},z.gzip=!0,k(ee,z)}w.Deflate=I,w.deflate=k,w.deflateRaw=B,w.gzip=Y},"3a4039aaa40cb7a7a7ef":function(A,w,p){"use strict";const r={MODEL:"model",NODE:"node",PROJECT:"project",PLUGIN:"plugin",WORKSPACE:"workspace",NOTEBOOK:"notebook"}},"3d4013cb89bb50c024c0":function(A,w){},"3fee429765601b0f9156":function(A,w,p){"use strict";var r=p("9f9e314a0c8f9cbf98fa"),R=p("0ee394ae0680b1ca3e73"),g=p("f948e3fa67ea88e1add6"),a=p("88dd5da9fb1744a6cc54"),T=p("78ab99b8f504f421d4d0"),c=p("7ad6e4b8ee37a1dcce23"),N=p("9aa3fa1745ff4ffb1ccf"),_=Object.prototype.toString;function E(F){if(!(this instanceof E))return new E(F);this.options=R.assign({chunkSize:16384,windowBits:0,to:""},F||{});var M=this.options;M.raw&&M.windowBits>=0&&M.windowBits<16&&(M.windowBits=-M.windowBits,M.windowBits===0&&(M.windowBits=-15)),M.windowBits>=0&&M.windowBits<16&&!(F&&F.windowBits)&&(M.windowBits+=32),M.windowBits>15&&M.windowBits<48&&(M.windowBits&15||(M.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var m=r.inflateInit2(this.strm,M.windowBits);if(m!==a.Z_OK)throw new Error(T[m]);if(this.header=new N,r.inflateGetHeader(this.strm,this.header),M.dictionary&&(typeof M.dictionary=="string"?M.dictionary=g.string2buf(M.dictionary):_.call(M.dictionary)==="[object ArrayBuffer]"&&(M.dictionary=new Uint8Array(M.dictionary)),M.raw&&(m=r.inflateSetDictionary(this.strm,M.dictionary),m!==a.Z_OK)))throw new Error(T[m])}E.prototype.push=function(F,M){var m=this.strm,I=this.options.chunkSize,k=this.options.dictionary,B,Y,ee,z,$,re=!1;if(this.ended)return!1;Y=M===~~M?M:M===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof F=="string"?m.input=g.binstring2buf(F):_.call(F)==="[object ArrayBuffer]"?m.input=new Uint8Array(F):m.input=F,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new R.Buf8(I),m.next_out=0,m.avail_out=I),B=r.inflate(m,a.Z_NO_FLUSH),B===a.Z_NEED_DICT&&k&&(B=r.inflateSetDictionary(this.strm,k)),B===a.Z_BUF_ERROR&&re===!0&&(B=a.Z_OK,re=!1),B!==a.Z_STREAM_END&&B!==a.Z_OK)return this.onEnd(B),this.ended=!0,!1;m.next_out&&(m.avail_out===0||B===a.Z_STREAM_END||m.avail_in===0&&(Y===a.Z_FINISH||Y===a.Z_SYNC_FLUSH))&&(this.options.to==="string"?(ee=g.utf8border(m.output,m.next_out),z=m.next_out-ee,$=g.buf2string(m.output,ee),m.next_out=z,m.avail_out=I-z,z&&R.arraySet(m.output,m.output,ee,z,0),this.onData($)):this.onData(R.shrinkBuf(m.output,m.next_out))),m.avail_in===0&&m.avail_out===0&&(re=!0)}while((m.avail_in>0||m.avail_out===0)&&B!==a.Z_STREAM_END);return B===a.Z_STREAM_END&&(Y=a.Z_FINISH),Y===a.Z_FINISH?(B=r.inflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===a.Z_OK):(Y===a.Z_SYNC_FLUSH&&(this.onEnd(a.Z_OK),m.avail_out=0),!0)},E.prototype.onData=function(F){this.chunks.push(F)},E.prototype.onEnd=function(F){F===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=R.flattenChunks(this.chunks)),this.chunks=[],this.err=F,this.msg=this.strm.msg};function P(F,M){var m=new E(M);if(m.push(F,!0),m.err)throw m.msg||T[m.err];return m.result}function D(F,M){return M=M||{},M.raw=!0,P(F,M)}w.Inflate=E,w.inflate=P,w.inflateRaw=D,w.ungzip=P},"41ad9bf124e8c96e655a":function(A,w){},"41b51de780701d8b9456":function(A,w,p){"use strict";var r=p("0ee394ae0680b1ca3e73").assign,R=p("39dd20d87454e60feb6e"),g=p("3fee429765601b0f9156"),a=p("88dd5da9fb1744a6cc54"),T={};r(T,R,g,a),A.exports=T},"43f03bbf7c8e2a7f6ddf":function(A,w){},"47dee86e2dd0d0ba81b0":function(A,w,p){"use strict";const r={ISSUE_CREATED:"issue_created",ISSUE_REMOVED:"issue_removed",OPENED:"opened",CLOSED:"closed",TAG_ADDED:"tag_added",TAG_REMOVED:"tag_removed",USER_ADDED:"user_added",USER_REMOVED:"user_removed",RENAMED:"renamed"}},"4d27b4350a6aceebaebf":function(A,w,p){"use strict";const r={PASSED:"passed",FAILED:"failed"}},"4ed4f586f2caef2fd7a7":function(A,w,p){"use strict";const r={STOPPED:"stopped",RUNNING:"running"}},"4f5240ab2841b269e5a3":function(A,w){},"503c1434b44b1a06d784":function(A,w){},"50632b5842f0e33f1900":function(A,w){},"514c53a7f7ee5bb3f19c":function(A,w){},"5354c482095f5ead6005":function(A,w,p){"use strict";var r=p("00f83bf39a29e0b57d1f"),R=p.n(r),g=p("007e2f901f143b0063bb"),a=p("01d16a391b82cbd5b98a");const T={DEFAULT:"DEFAULT",GENERAL:"GENERAL",PROJECTS:"PROJECTS",DATASETS:"DATASETS",CLASSES:"CLASSES",PROJECTS_TAGS:"PROJECTS_TAGS",IMAGES:"IMAGES",FIGURES:"FIGURES",NODES:"NODES",MEMBERS:"MEMBERS",TEAMS:"TEAMS",WORKSPACES:"WORKSPACES",JOBS:"JOBS",TASKS:"TASKS",PLUGINS:"PLUGINS",ISSUES:"ISSUES",PYTHON_NOTEBOOKS:"PYTHON_NOTEBOOKS"},c={[T.DEFAULT]:"default",[T.GENERAL]:{NN:"nn",DTL:"dtl",NODES:"nodes",IMPORT:"import"},[T.PROJECTS]:{LIST:"projects.list",VIEW:"projects.view",CREATE:"projects.create",UPDATE:"projects.update",REMOVE:"projects.remove",REMOVE_ALL:"projects.removeAll"},[T.TEAMS]:{CREATE:"teams.create",UPDATE:"teams.update",REMOVE:"teams.remove",REMOVE_ALL:"teams.removeAll"},[T.WORKSPACES]:{LIST:"workspaces.list",VIEW:"workspaces.view",CREATE:"workspaces.create",UPDATE:"workspaces.update",REMOVE:"workspaces.remove",REMOVE_ALL:"workspaces.removeAll"},[T.MEMBERS]:{LIST:"members.list",VIEW:"members.view",CREATE:"members.create",UPDATE:"members.update",REMOVE:"members.remove",REMOVE_ALL:"members.removeAll"},[T.PLUGINS]:{LIST:"plugins.list",VIEW:"plugins.view",CREATE:"plugins.create",UPDATE:"plugins.update",REMOVE:"plugins.remove",REMOVE_ALL:"plugins.removeAll"},[T.DATASETS]:{LIST:"datasets.list",VIEW:"datasets.view",CREATE:"datasets.create",UPDATE:"datasets.update",REMOVE:"datasets.remove"},[T.CLASSES]:{LIST:"classes.list",VIEW:"classes.view",CREATE:"classes.create",UPDATE:"classes.update",REMOVE:"classes.remove"},[T.PROJECTS_TAGS]:{LIST:"projects_tags.list",VIEW:"projects_tags.view",CREATE:"projects_tags.create",UPDATE:"projects_tags.update",REMOVE:"projects_tags.remove"},[T.IMAGES]:{LIST:"images.list",VIEW:"images.view",CREATE:"images.create",UPDATE:"images.update",REMOVE:"images.remove"},[T.FIGURES]:{LIST:"figures.list",VIEW:"figures.view",CREATE:"figures.create",UPDATE:"figures.update",REMOVE:"figures.remove",REMOVE_ALL:"figures.removeAll"},[T.NODES]:{LIST:"nodes.list",VIEW:"nodes.view",CREATE:"nodes.create",UPDATE:"nodes.update",REMOVE:"nodes.remove"},[T.JOBS]:{LIST:"jobs.list",LIST_ALL:"jobs.listAll",VIEW:"jobs.view",CREATE:"jobs.create",UPDATE:"jobs.update",REMOVE:"jobs.remove",FINISH_DISABLED:"jobs.finishDisabled"},[T.TASKS]:{LIST:"tasks.list"},[T.PYTHON_NOTEBOOKS]:{LIST:"python_notebooks.list"},[T.ISSUES]:{LIST:"issues.list",VIEW:"issues.view",CREATE:"issues.create",UPDATE:"issues.update",UPDATE_ALL:"issues.updateAll",REMOVE:"issues.remove",REMOVE_ALL:"issues.removeAll"}},N={},_=new Set;Object(r.each)(c,(B,Y)=>{if(typeof B=="string"){N[B]=Y;return}Object(r.each)(B,ee=>{if(a.b&&_.has(ee))throw new Error(\`Duplicate path "\${ee}" in ACL_ACTIONS\`);_.add(ee),N[ee]=Y})});const E=Object.keys(Object(r.omit)(N,"default")).filter(B=>B!==c.JOBS.FINISH_DISABLED).map(B=>({action:B})),P=[c.MEMBERS.UPDATE,c.MEMBERS.CREATE,c.ISSUES.UPDATE_ALL,c.MEMBERS.REMOVE_ALL,c.JOBS.FINISH_DISABLED],D=E.filter(B=>B.action===c.FIGURES.REMOVE_ALL?!0:!(B.action.includes("removeAll")||P.includes(B.action))),F=[{action:c.PROJECTS.VIEW},{action:c.DATASETS.LIST},{action:c.DATASETS.VIEW},{action:c.CLASSES.LIST},{action:c.CLASSES.VIEW},{action:c.PROJECTS_TAGS.LIST},{action:c.PROJECTS_TAGS.VIEW},{action:c.IMAGES.LIST},{action:c.IMAGES.VIEW},{action:c.IMAGES.UPDATE},{action:c.FIGURES.LIST},{action:c.FIGURES.VIEW},{action:c.NODES.LIST},{action:c.NODES.VIEW},{action:c.WORKSPACES.VIEW},{action:c.JOBS.LIST},{action:c.JOBS.VIEW},{action:c.JOBS.UPDATE},{action:c.FIGURES.CREATE},{action:c.FIGURES.UPDATE},{action:c.FIGURES.REMOVE},{action:c.ISSUES.LIST},{action:c.ISSUES.VIEW},{action:c.ISSUES.CREATE},{action:c.ISSUES.UPDATE},{action:c.ISSUES.REMOVE}],M=[{action:c.WORKSPACES.LIST},{action:c.WORKSPACES.VIEW},{action:c.PROJECTS.LIST},{action:c.PROJECTS.VIEW},{action:c.DATASETS.LIST},{action:c.DATASETS.VIEW},{action:c.CLASSES.LIST},{action:c.CLASSES.VIEW},{action:c.PROJECTS_TAGS.LIST},{action:c.PROJECTS_TAGS.VIEW},{action:c.IMAGES.LIST},{action:c.IMAGES.VIEW},{action:c.FIGURES.LIST},{action:c.FIGURES.VIEW},{action:c.ISSUES.LIST},{action:c.ISSUES.VIEW}],m=[...M,{action:c.PROJECTS.UPDATE},{action:c.DATASETS.UPDATE},{action:c.CLASSES.UPDATE},{action:c.PROJECTS_TAGS.CREATE},{action:c.PROJECTS_TAGS.UPDATE},{action:c.IMAGES.UPDATE},{action:c.FIGURES.CREATE},{action:c.FIGURES.UPDATE},{action:c.FIGURES.REMOVE},{action:c.FIGURES.REMOVE_ALL},{action:c.NODES.UPDATE},{action:c.TEAMS.UPDATE},{action:c.WORKSPACES.UPDATE},{action:c.JOBS.LIST_ALL},{action:c.JOBS.LIST},{action:c.JOBS.VIEW},{action:c.JOBS.CREATE},{action:c.JOBS.UPDATE},{action:c.JOBS.REMOVE},{action:c.MEMBERS.LIST},{action:c.MEMBERS.VIEW},{action:c.MEMBERS.CREATE},{action:c.MEMBERS.UPDATE},{action:c.MEMBERS.REMOVE},{action:c.ISSUES.CREATE},{action:c.ISSUES.UPDATE},{action:c.ISSUES.REMOVE}],I=[...F,{action:c.JOBS.LIST_ALL},{action:c.JOBS.CREATE}],k={[g.a.ADMIN]:E,[g.a.DEVELOPER]:D,[g.a.MANAGER]:m,[g.a.REVIEWER]:I,[g.a.ANNOTATOR]:F,[g.a.VIEWER]:M}},"5433aa7ef67502ef707d":function(A,w,p){"use strict";function r(){for(var a,T=[],c=0;c<256;c++){a=c;for(var N=0;N<8;N++)a=a&1?3988292384^a>>>1:a>>>1;T[c]=a}return T}var R=r();function g(a,T,c,N){var _=R,E=N+c;a^=-1;for(var P=N;P<E;P++)a=a>>>8^_[(a^T[P])&255];return a^-1}A.exports=g},"59548a76725c1a44390b":function(A,w,p){"use strict";const r={UPLOADED:"uploaded",UPLOADING:"uploading",AGENT:"agent",SCHEDULED:"scheduled"}},"59f1b6605b24f530994c":function(A,w){},"5d1a9382f9802de0586b":function(A,w){},"5fe27eddff92ec2dbac5":function(A,w,p){"use strict";const r={APPROVED:"approved",REJECTED:"rejected",REVIEWABLE:"reviewable",NONE:"none"},R={title:{label:"Title",column:"title",direction:"asc"},updatedAt:{label:"Updated at",column:"updatedAt",direction:"desc"},objectsCount:{label:"Figures count",column:"objectsCount",direction:"desc"}},g={SAGITTAL:"sagittal",CORONAL:"coronal",AXIAL:"axial"},a={LOCAL:1,REMOTE:2}},"66e4032f81bde6d04705":function(A,w,p){"use strict";var r=p("9e0829ebb5f4d9754370");const R=[r.TASK_STATUS.DEPLOYED,r.TASK_STATUS.STARTED,r.TASK_STATUS.CONSUMED,r.TASK_STATUS.QUEUED],g=5,a=10*60*1e3},"6a927222a29e571499a4":function(A,w){A.exports=function(p){return p.webpackPolyfill||(p.deprecate=function(){},p.paths=[],p.children||(p.children=[]),Object.defineProperty(p,"loaded",{enumerable:!0,get:function(){return p.l}}),Object.defineProperty(p,"id",{enumerable:!0,get:function(){return p.i}}),p.webpackPolyfill=1),p}},"6cd6cd0d97104941b84f":function(A,w){},"6d30f70e740934193417":function(A,w){},"7829c6aaa67683b96e21":function(A,w){},"78ab99b8f504f421d4d0":function(A,w,p){"use strict";A.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"79036b6f230fe5b6ba23":function(A,w,p){"use strict";var r=p("989a42060903e47c0cff");const R={WAITING:"waiting",IDLE:"idle",RUNNING:"running",ERROR:"error"},g={CLEAN_IMAGES:"clean_images",CLEAN_ALL_MODELS:"clean_checkpoints",CLEAN_UNUSED_MODELS:"remove_checkpoints",CLEAN_TASKS_DATA:"clean_tasks",CLEAN_OLD_CHECKPOINTS:"clean_old_checkpoints",PURGE_QUEUED_TASKS:"purge_queued_tasks"},a={ALWAYS:"always",IF_AVAILABLE:"ifavailable",IF_NOT_PRESENT:"ifnotpresent",NEVER:"never"},T={LOGS:"logs"},c={[r.c.IMPORT]:"Import",[r.c.IMPORT_AGENT]:"Import from agent",[r.c.EXPORT]:"DTL",[r.c.TRAIN]:"Train",[r.c.INFERENCE]:"Inference",[r.c.DEPLOY_MODEL]:"Deploy Model",[r.c.CUSTOM]:"Custom",[r.c.PIPELINE]:"Pipeline",[r.c.PYTHON]:"Python",[r.c.APP]:"Application",[r.c.APP_GPU]:"GPU Application"},N={SLY_AGENT:"sly_agent",KUBERNETES:"kubernetes"},_={CUSTOM:"custom",NGINX:"nginx"}},"7ad6e4b8ee37a1dcce23":function(A,w,p){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}A.exports=r},"7d074b0d47dd6102152e":function(A,w,p){"use strict";p.d(w,"a",function(){return g});var r=p("00f83bf39a29e0b57d1f"),R=p.n(r);const g={POINT:"point",RECTANGLE:"rectangle",POLYGON:"polygon",POLYLINE:"line",BITMAP:"bitmap",MASK_3D:"mask_3d",GRAPH:"graph",CUBOID:"cuboid",CUBOID_3D:"cuboid_3d",POINT_CLOUD:"point_cloud",POINT_3D:"point_3d",CLOSED_SURFACE_MESH:"closed_surface_mesh"},a={...Object(r.omit)(g,["CLOSED_SURFACE_MESH"]),ANY:"any"},T={[a.ANY]:"Any Shape",[a.POINT]:"Point",[a.POLYLINE]:"Line",[a.RECTANGLE]:"Rectangle",[a.POLYGON]:"Polygon",[a.BITMAP]:"Bitmap (mask)",[a.GRAPH]:"Graph (keypoints)",[a.CUBOID]:"Cuboid",[a.CUBOID_3D]:"Cuboid",[a.POINT_3D]:"Point",[a.POINT_CLOUD]:"Point Cloud",[g.CLOSED_SURFACE_MESH]:"3D Interpolation",[g.MASK_3D]:"Mask 3D"},c=new Set([g.CLOSED_SURFACE_MESH,g.MASK_3D]),N=new Set([g.CLOSED_SURFACE_MESH]),_=new Set([g.CUBOID_3D,g.POINT_CLOUD,g.POINT_3D,g.CLOSED_SURFACE_MESH,g.MASK_3D]),E=new Set([g.POINT,g.RECTANGLE,g.POLYGON,g.POLYLINE,g.BITMAP,g.GRAPH,g.CUBOID])},"7f9c1fb802a7f39bc6fa":function(A,w,p){"use strict";const r={JOB_ASSIGNED:"job_assigned",JOB_COMPLETED:"job_completed",TASK_COMPLETED:"task_completed",LABELING_EXAM_ASSIGNED:"labeling_exam_assigned",LABELING_EXAM_COMPLETED:"labeling_exam_completed",ISSUE_OPEN:"issue_open",ISSUE_CLOSED:"issue_closed",ISSUE_ASSIGNED:"issue_assigned",SUBISSUE_UPDATED:"subissue_updated"},R={UNREAD:"unread",READ:"readed"}},"812baf65d2b8d0a42f86":function(A,w,p){var r=p("29c91b56491d3b41e5b7"),R=p("a56e958956e5b051083f");function g(a,T,c){var N=T&&c||0;typeof a=="string"&&(T=a==="binary"?new Array(16):null,a=null),a=a||{};var _=a.random||(a.rng||r)();if(_[6]=_[6]&15|64,_[8]=_[8]&63|128,T)for(var E=0;E<16;++E)T[N+E]=_[E];return T||R(_)}A.exports=g},"81db9e5bbfc9d79c382e":function(A,w){},"84295a61134fb8a1951a":function(A,w){},"859560fdf58f03d5af41":function(A,w){},"88dd5da9fb1744a6cc54":function(A,w,p){"use strict";A.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"89231cc2992cc1e35cc8":function(A,w,p){"use strict";const r={PENDING:"pending",STOPPED:"stopped",IN_PROGRESS:"in_progress",ON_REVIEW:"on_review",REVIEW_COMPLETED:"review_completed",COMPLETED:"completed"},R={ALL:"all",EDIT_ALL:"edit_all",VIEW_ALL_EDIT_OWN:"view_all_edit_own",ONLY_OWN:"only_own"},g={ALL:"all",OWN_AND_LABELER:"own_and_labeler",ONLY_LABELER:"only_labeler"},a={ALL:"all",ONLY_OWN:"only_own"},T={ALL:"all",ONLY_OWN:"only_own"},c={BY_NAME:"by_name",RANDOMLY:"randomly"},N={ALL:"all",UNMARKED:"unmarked"}},"8a5451793be8532373e7":function(A,w,p){"use strict";(function(r){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/var R=p("c85ee313f17239f27581"),g=p("0fa305f27f1c8e9bde24"),a=p("d6ba6c9daf4e147c1764");w.Buffer=_,w.SlowBuffer=Y,w.INSPECT_MAX_BYTES=50,_.TYPED_ARRAY_SUPPORT=r.TYPED_ARRAY_SUPPORT!==void 0?r.TYPED_ARRAY_SUPPORT:T(),w.kMaxLength=c();function T(){try{var d=new Uint8Array(1);return d.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},d.foo()===42&&typeof d.subarray=="function"&&d.subarray(1,1).byteLength===0}catch{return!1}}function c(){return _.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function N(d,s){if(c()<s)throw new RangeError("Invalid typed array length");return _.TYPED_ARRAY_SUPPORT?(d=new Uint8Array(s),d.__proto__=_.prototype):(d===null&&(d=new _(s)),d.length=s),d}function _(d,s,u){if(!_.TYPED_ARRAY_SUPPORT&&!(this instanceof _))return new _(d,s,u);if(typeof d=="number"){if(typeof s=="string")throw new Error("If encoding is specified then the first argument must be a string");return F(this,d)}return E(this,d,s,u)}_.poolSize=8192,_._augment=function(d){return d.__proto__=_.prototype,d};function E(d,s,u,L){if(typeof s=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&s instanceof ArrayBuffer?I(d,s,u,L):typeof s=="string"?M(d,s,u):k(d,s)}_.from=function(d,s,u){return E(null,d,s,u)},_.TYPED_ARRAY_SUPPORT&&(_.prototype.__proto__=Uint8Array.prototype,_.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&_[Symbol.species]===_&&Object.defineProperty(_,Symbol.species,{value:null,configurable:!0}));function P(d){if(typeof d!="number")throw new TypeError('"size" argument must be a number');if(d<0)throw new RangeError('"size" argument must not be negative')}function D(d,s,u,L){return P(s),s<=0?N(d,s):u!==void 0?typeof L=="string"?N(d,s).fill(u,L):N(d,s).fill(u):N(d,s)}_.alloc=function(d,s,u){return D(null,d,s,u)};function F(d,s){if(P(s),d=N(d,s<0?0:B(s)|0),!_.TYPED_ARRAY_SUPPORT)for(var u=0;u<s;++u)d[u]=0;return d}_.allocUnsafe=function(d){return F(null,d)},_.allocUnsafeSlow=function(d){return F(null,d)};function M(d,s,u){if((typeof u!="string"||u==="")&&(u="utf8"),!_.isEncoding(u))throw new TypeError('"encoding" must be a valid string encoding');var L=ee(s,u)|0;d=N(d,L);var j=d.write(s,u);return j!==L&&(d=d.slice(0,j)),d}function m(d,s){var u=s.length<0?0:B(s.length)|0;d=N(d,u);for(var L=0;L<u;L+=1)d[L]=s[L]&255;return d}function I(d,s,u,L){if(s.byteLength,u<0||s.byteLength<u)throw new RangeError("'offset' is out of bounds");if(s.byteLength<u+(L||0))throw new RangeError("'length' is out of bounds");return u===void 0&&L===void 0?s=new Uint8Array(s):L===void 0?s=new Uint8Array(s,u):s=new Uint8Array(s,u,L),_.TYPED_ARRAY_SUPPORT?(d=s,d.__proto__=_.prototype):d=m(d,s),d}function k(d,s){if(_.isBuffer(s)){var u=B(s.length)|0;return d=N(d,u),d.length===0||s.copy(d,0,0,u),d}if(s){if(typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return typeof s.length!="number"||J(s.length)?N(d,0):m(d,s);if(s.type==="Buffer"&&a(s.data))return m(d,s.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function B(d){if(d>=c())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return d|0}function Y(d){return+d!=d&&(d=0),_.alloc(+d)}_.isBuffer=function(s){return!!(s!=null&&s._isBuffer)},_.compare=function(s,u){if(!_.isBuffer(s)||!_.isBuffer(u))throw new TypeError("Arguments must be Buffers");if(s===u)return 0;for(var L=s.length,j=u.length,x=0,U=Math.min(L,j);x<U;++x)if(s[x]!==u[x]){L=s[x],j=u[x];break}return L<j?-1:j<L?1:0},_.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(s,u){if(!a(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return _.alloc(0);var L;if(u===void 0)for(u=0,L=0;L<s.length;++L)u+=s[L].length;var j=_.allocUnsafe(u),x=0;for(L=0;L<s.length;++L){var U=s[L];if(!_.isBuffer(U))throw new TypeError('"list" argument must be an Array of Buffers');U.copy(j,x),x+=U.length}return j};function ee(d,s){if(_.isBuffer(d))return d.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(d)||d instanceof ArrayBuffer))return d.byteLength;typeof d!="string"&&(d=""+d);var u=d.length;if(u===0)return 0;for(var L=!1;;)switch(s){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":case void 0:return ze(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return ct(d).length;default:if(L)return ze(d).length;s=(""+s).toLowerCase(),L=!0}}_.byteLength=ee;function z(d,s,u){var L=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,s>>>=0,u<=s))return"";for(d||(d="utf8");;)switch(d){case"hex":return de(this,s,u);case"utf8":case"utf-8":return Ie(this,s,u);case"ascii":return Z(this,s,u);case"latin1":case"binary":return fe(this,s,u);case"base64":return ge(this,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,s,u);default:if(L)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),L=!0}}_.prototype._isBuffer=!0;function $(d,s,u){var L=d[s];d[s]=d[u],d[u]=L}_.prototype.swap16=function(){var s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<s;u+=2)$(this,u,u+1);return this},_.prototype.swap32=function(){var s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<s;u+=4)$(this,u,u+3),$(this,u+1,u+2);return this},_.prototype.swap64=function(){var s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<s;u+=8)$(this,u,u+7),$(this,u+1,u+6),$(this,u+2,u+5),$(this,u+3,u+4);return this},_.prototype.toString=function(){var s=this.length|0;return s===0?"":arguments.length===0?Ie(this,0,s):z.apply(this,arguments)},_.prototype.equals=function(s){if(!_.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:_.compare(this,s)===0},_.prototype.inspect=function(){var s="",u=w.INSPECT_MAX_BYTES;return this.length>0&&(s=this.toString("hex",0,u).match(/.{2}/g).join(" "),this.length>u&&(s+=" ... ")),"<Buffer "+s+">"},_.prototype.compare=function(s,u,L,j,x){if(!_.isBuffer(s))throw new TypeError("Argument must be a Buffer");if(u===void 0&&(u=0),L===void 0&&(L=s?s.length:0),j===void 0&&(j=0),x===void 0&&(x=this.length),u<0||L>s.length||j<0||x>this.length)throw new RangeError("out of range index");if(j>=x&&u>=L)return 0;if(j>=x)return-1;if(u>=L)return 1;if(u>>>=0,L>>>=0,j>>>=0,x>>>=0,this===s)return 0;for(var U=x-j,te=L-u,le=Math.min(U,te),ye=this.slice(j,x),Ce=s.slice(u,L),Pe=0;Pe<le;++Pe)if(ye[Pe]!==Ce[Pe]){U=ye[Pe],te=Ce[Pe];break}return U<te?-1:te<U?1:0};function re(d,s,u,L,j){if(d.length===0)return-1;if(typeof u=="string"?(L=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,isNaN(u)&&(u=j?0:d.length-1),u<0&&(u=d.length+u),u>=d.length){if(j)return-1;u=d.length-1}else if(u<0)if(j)u=0;else return-1;if(typeof s=="string"&&(s=_.from(s,L)),_.isBuffer(s))return s.length===0?-1:ae(d,s,u,L,j);if(typeof s=="number")return s=s&255,_.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(d,s,u):Uint8Array.prototype.lastIndexOf.call(d,s,u):ae(d,[s],u,L,j);throw new TypeError("val must be string, number or Buffer")}function ae(d,s,u,L,j){var x=1,U=d.length,te=s.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(d.length<2||s.length<2)return-1;x=2,U/=2,te/=2,u/=2}function le(S,_e){return x===1?S[_e]:S.readUInt16BE(_e*x)}var ye;if(j){var Ce=-1;for(ye=u;ye<U;ye++)if(le(d,ye)===le(s,Ce===-1?0:ye-Ce)){if(Ce===-1&&(Ce=ye),ye-Ce+1===te)return Ce*x}else Ce!==-1&&(ye-=ye-Ce),Ce=-1}else for(u+te>U&&(u=U-te),ye=u;ye>=0;ye--){for(var Pe=!0,Be=0;Be<te;Be++)if(le(d,ye+Be)!==le(s,Be)){Pe=!1;break}if(Pe)return ye}return-1}_.prototype.includes=function(s,u,L){return this.indexOf(s,u,L)!==-1},_.prototype.indexOf=function(s,u,L){return re(this,s,u,L,!0)},_.prototype.lastIndexOf=function(s,u,L){return re(this,s,u,L,!1)};function ue(d,s,u,L){u=Number(u)||0;var j=d.length-u;L?(L=Number(L),L>j&&(L=j)):L=j;var x=s.length;if(x%2!==0)throw new TypeError("Invalid hex string");L>x/2&&(L=x/2);for(var U=0;U<L;++U){var te=parseInt(s.substr(U*2,2),16);if(isNaN(te))return U;d[u+U]=te}return U}function me(d,s,u,L){return dt(ze(s,d.length-u),d,u,L)}function De(d,s,u,L){return dt(st(s),d,u,L)}function Me(d,s,u,L){return De(d,s,u,L)}function je(d,s,u,L){return dt(ct(s),d,u,L)}function Q(d,s,u,L){return dt(nt(s,d.length-u),d,u,L)}_.prototype.write=function(s,u,L,j){if(u===void 0)j="utf8",L=this.length,u=0;else if(L===void 0&&typeof u=="string")j=u,L=this.length,u=0;else if(isFinite(u))u=u|0,isFinite(L)?(L=L|0,j===void 0&&(j="utf8")):(j=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var x=this.length-u;if((L===void 0||L>x)&&(L=x),s.length>0&&(L<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");for(var U=!1;;)switch(j){case"hex":return ue(this,s,u,L);case"utf8":case"utf-8":return me(this,s,u,L);case"ascii":return De(this,s,u,L);case"latin1":case"binary":return Me(this,s,u,L);case"base64":return je(this,s,u,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,s,u,L);default:if(U)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),U=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(d,s,u){return s===0&&u===d.length?R.fromByteArray(d):R.fromByteArray(d.slice(s,u))}function Ie(d,s,u){u=Math.min(d.length,u);for(var L=[],j=s;j<u;){var x=d[j],U=null,te=x>239?4:x>223?3:x>191?2:1;if(j+te<=u){var le,ye,Ce,Pe;switch(te){case 1:x<128&&(U=x);break;case 2:le=d[j+1],(le&192)===128&&(Pe=(x&31)<<6|le&63,Pe>127&&(U=Pe));break;case 3:le=d[j+1],ye=d[j+2],(le&192)===128&&(ye&192)===128&&(Pe=(x&15)<<12|(le&63)<<6|ye&63,Pe>2047&&(Pe<55296||Pe>57343)&&(U=Pe));break;case 4:le=d[j+1],ye=d[j+2],Ce=d[j+3],(le&192)===128&&(ye&192)===128&&(Ce&192)===128&&(Pe=(x&15)<<18|(le&63)<<12|(ye&63)<<6|Ce&63,Pe>65535&&Pe<1114112&&(U=Pe))}}U===null?(U=65533,te=1):U>65535&&(U-=65536,L.push(U>>>10&1023|55296),U=56320|U&1023),L.push(U),j+=te}return K(L)}var we=4096;function K(d){var s=d.length;if(s<=we)return String.fromCharCode.apply(String,d);for(var u="",L=0;L<s;)u+=String.fromCharCode.apply(String,d.slice(L,L+=we));return u}function Z(d,s,u){var L="";u=Math.min(d.length,u);for(var j=s;j<u;++j)L+=String.fromCharCode(d[j]&127);return L}function fe(d,s,u){var L="";u=Math.min(d.length,u);for(var j=s;j<u;++j)L+=String.fromCharCode(d[j]);return L}function de(d,s,u){var L=d.length;(!s||s<0)&&(s=0),(!u||u<0||u>L)&&(u=L);for(var j="",x=s;x<u;++x)j+=pt(d[x]);return j}function be(d,s,u){for(var L=d.slice(s,u),j="",x=0;x<L.length;x+=2)j+=String.fromCharCode(L[x]+L[x+1]*256);return j}_.prototype.slice=function(s,u){var L=this.length;s=~~s,u=u===void 0?L:~~u,s<0?(s+=L,s<0&&(s=0)):s>L&&(s=L),u<0?(u+=L,u<0&&(u=0)):u>L&&(u=L),u<s&&(u=s);var j;if(_.TYPED_ARRAY_SUPPORT)j=this.subarray(s,u),j.__proto__=_.prototype;else{var x=u-s;j=new _(x,void 0);for(var U=0;U<x;++U)j[U]=this[U+s]}return j};function ve(d,s,u){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+s>u)throw new RangeError("Trying to access beyond buffer length")}_.prototype.readUIntLE=function(s,u,L){s=s|0,u=u|0,L||ve(s,u,this.length);for(var j=this[s],x=1,U=0;++U<u&&(x*=256);)j+=this[s+U]*x;return j},_.prototype.readUIntBE=function(s,u,L){s=s|0,u=u|0,L||ve(s,u,this.length);for(var j=this[s+--u],x=1;u>0&&(x*=256);)j+=this[s+--u]*x;return j},_.prototype.readUInt8=function(s,u){return u||ve(s,1,this.length),this[s]},_.prototype.readUInt16LE=function(s,u){return u||ve(s,2,this.length),this[s]|this[s+1]<<8},_.prototype.readUInt16BE=function(s,u){return u||ve(s,2,this.length),this[s]<<8|this[s+1]},_.prototype.readUInt32LE=function(s,u){return u||ve(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},_.prototype.readUInt32BE=function(s,u){return u||ve(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},_.prototype.readIntLE=function(s,u,L){s=s|0,u=u|0,L||ve(s,u,this.length);for(var j=this[s],x=1,U=0;++U<u&&(x*=256);)j+=this[s+U]*x;return x*=128,j>=x&&(j-=Math.pow(2,8*u)),j},_.prototype.readIntBE=function(s,u,L){s=s|0,u=u|0,L||ve(s,u,this.length);for(var j=u,x=1,U=this[s+--j];j>0&&(x*=256);)U+=this[s+--j]*x;return x*=128,U>=x&&(U-=Math.pow(2,8*u)),U},_.prototype.readInt8=function(s,u){return u||ve(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},_.prototype.readInt16LE=function(s,u){u||ve(s,2,this.length);var L=this[s]|this[s+1]<<8;return L&32768?L|4294901760:L},_.prototype.readInt16BE=function(s,u){u||ve(s,2,this.length);var L=this[s+1]|this[s]<<8;return L&32768?L|4294901760:L},_.prototype.readInt32LE=function(s,u){return u||ve(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},_.prototype.readInt32BE=function(s,u){return u||ve(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},_.prototype.readFloatLE=function(s,u){return u||ve(s,4,this.length),g.read(this,s,!0,23,4)},_.prototype.readFloatBE=function(s,u){return u||ve(s,4,this.length),g.read(this,s,!1,23,4)},_.prototype.readDoubleLE=function(s,u){return u||ve(s,8,this.length),g.read(this,s,!0,52,8)},_.prototype.readDoubleBE=function(s,u){return u||ve(s,8,this.length),g.read(this,s,!1,52,8)};function Le(d,s,u,L,j,x){if(!_.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>j||s<x)throw new RangeError('"value" argument is out of bounds');if(u+L>d.length)throw new RangeError("Index out of range")}_.prototype.writeUIntLE=function(s,u,L,j){if(s=+s,u=u|0,L=L|0,!j){var x=Math.pow(2,8*L)-1;Le(this,s,u,L,x,0)}var U=1,te=0;for(this[u]=s&255;++te<L&&(U*=256);)this[u+te]=s/U&255;return u+L},_.prototype.writeUIntBE=function(s,u,L,j){if(s=+s,u=u|0,L=L|0,!j){var x=Math.pow(2,8*L)-1;Le(this,s,u,L,x,0)}var U=L-1,te=1;for(this[u+U]=s&255;--U>=0&&(te*=256);)this[u+U]=s/te&255;return u+L},_.prototype.writeUInt8=function(s,u,L){return s=+s,u=u|0,L||Le(this,s,u,1,255,0),_.TYPED_ARRAY_SUPPORT||(s=Math.floor(s)),this[u]=s&255,u+1};function Ue(d,s,u,L){s<0&&(s=65535+s+1);for(var j=0,x=Math.min(d.length-u,2);j<x;++j)d[u+j]=(s&255<<8*(L?j:1-j))>>>(L?j:1-j)*8}_.prototype.writeUInt16LE=function(s,u,L){return s=+s,u=u|0,L||Le(this,s,u,2,65535,0),_.TYPED_ARRAY_SUPPORT?(this[u]=s&255,this[u+1]=s>>>8):Ue(this,s,u,!0),u+2},_.prototype.writeUInt16BE=function(s,u,L){return s=+s,u=u|0,L||Le(this,s,u,2,65535,0),_.TYPED_ARRAY_SUPPORT?(this[u]=s>>>8,this[u+1]=s&255):Ue(this,s,u,!1),u+2};function et(d,s,u,L){s<0&&(s=4294967295+s+1);for(var j=0,x=Math.min(d.length-u,4);j<x;++j)d[u+j]=s>>>(L?j:3-j)*8&255}_.prototype.writeUInt32LE=function(s,u,L){return s=+s,u=u|0,L||Le(this,s,u,4,4294967295,0),_.TYPED_ARRAY_SUPPORT?(this[u+3]=s>>>24,this[u+2]=s>>>16,this[u+1]=s>>>8,this[u]=s&255):et(this,s,u,!0),u+4},_.prototype.writeUInt32BE=function(s,u,L){return s=+s,u=u|0,L||Le(this,s,u,4,4294967295,0),_.TYPED_ARRAY_SUPPORT?(this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255):et(this,s,u,!1),u+4},_.prototype.writeIntLE=function(s,u,L,j){if(s=+s,u=u|0,!j){var x=Math.pow(2,8*L-1);Le(this,s,u,L,x-1,-x)}var U=0,te=1,le=0;for(this[u]=s&255;++U<L&&(te*=256);)s<0&&le===0&&this[u+U-1]!==0&&(le=1),this[u+U]=(s/te>>0)-le&255;return u+L},_.prototype.writeIntBE=function(s,u,L,j){if(s=+s,u=u|0,!j){var x=Math.pow(2,8*L-1);Le(this,s,u,L,x-1,-x)}var U=L-1,te=1,le=0;for(this[u+U]=s&255;--U>=0&&(te*=256);)s<0&&le===0&&this[u+U+1]!==0&&(le=1),this[u+U]=(s/te>>0)-le&255;return u+L},_.prototype.writeInt8=function(s,u,L){return s=+s,u=u|0,L||Le(this,s,u,1,127,-128),_.TYPED_ARRAY_SUPPORT||(s=Math.floor(s)),s<0&&(s=255+s+1),this[u]=s&255,u+1},_.prototype.writeInt16LE=function(s,u,L){return s=+s,u=u|0,L||Le(this,s,u,2,32767,-32768),_.TYPED_ARRAY_SUPPORT?(this[u]=s&255,this[u+1]=s>>>8):Ue(this,s,u,!0),u+2},_.prototype.writeInt16BE=function(s,u,L){return s=+s,u=u|0,L||Le(this,s,u,2,32767,-32768),_.TYPED_ARRAY_SUPPORT?(this[u]=s>>>8,this[u+1]=s&255):Ue(this,s,u,!1),u+2},_.prototype.writeInt32LE=function(s,u,L){return s=+s,u=u|0,L||Le(this,s,u,4,2147483647,-2147483648),_.TYPED_ARRAY_SUPPORT?(this[u]=s&255,this[u+1]=s>>>8,this[u+2]=s>>>16,this[u+3]=s>>>24):et(this,s,u,!0),u+4},_.prototype.writeInt32BE=function(s,u,L){return s=+s,u=u|0,L||Le(this,s,u,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),_.TYPED_ARRAY_SUPPORT?(this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255):et(this,s,u,!1),u+4};function Ze(d,s,u,L,j,x){if(u+L>d.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function We(d,s,u,L,j){return j||Ze(d,s,u,4,34028234663852886e22,-34028234663852886e22),g.write(d,s,u,L,23,4),u+4}_.prototype.writeFloatLE=function(s,u,L){return We(this,s,u,!0,L)},_.prototype.writeFloatBE=function(s,u,L){return We(this,s,u,!1,L)};function Xe(d,s,u,L,j){return j||Ze(d,s,u,8,17976931348623157e292,-17976931348623157e292),g.write(d,s,u,L,52,8),u+8}_.prototype.writeDoubleLE=function(s,u,L){return Xe(this,s,u,!0,L)},_.prototype.writeDoubleBE=function(s,u,L){return Xe(this,s,u,!1,L)},_.prototype.copy=function(s,u,L,j){if(L||(L=0),!j&&j!==0&&(j=this.length),u>=s.length&&(u=s.length),u||(u=0),j>0&&j<L&&(j=L),j===L||s.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("sourceStart out of bounds");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),s.length-u<j-L&&(j=s.length-u+L);var x=j-L,U;if(this===s&&L<u&&u<j)for(U=x-1;U>=0;--U)s[U+u]=this[U+L];else if(x<1e3||!_.TYPED_ARRAY_SUPPORT)for(U=0;U<x;++U)s[U+u]=this[U+L];else Uint8Array.prototype.set.call(s,this.subarray(L,L+x),u);return x},_.prototype.fill=function(s,u,L,j){if(typeof s=="string"){if(typeof u=="string"?(j=u,u=0,L=this.length):typeof L=="string"&&(j=L,L=this.length),s.length===1){var x=s.charCodeAt(0);x<256&&(s=x)}if(j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!_.isEncoding(j))throw new TypeError("Unknown encoding: "+j)}else typeof s=="number"&&(s=s&255);if(u<0||this.length<u||this.length<L)throw new RangeError("Out of range index");if(L<=u)return this;u=u>>>0,L=L===void 0?this.length:L>>>0,s||(s=0);var U;if(typeof s=="number")for(U=u;U<L;++U)this[U]=s;else{var te=_.isBuffer(s)?s:ze(new _(s,j).toString()),le=te.length;for(U=0;U<L-u;++U)this[U+u]=te[U%le]}return this};var Ve=/[^+\\/0-9A-Za-z-_]/g;function Je(d){if(d=Ot(d).replace(Ve,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function Ot(d){return d.trim?d.trim():d.replace(/^\\s+|\\s+$/g,"")}function pt(d){return d<16?"0"+d.toString(16):d.toString(16)}function ze(d,s){s=s||1/0;for(var u,L=d.length,j=null,x=[],U=0;U<L;++U){if(u=d.charCodeAt(U),u>55295&&u<57344){if(!j){if(u>56319){(s-=3)>-1&&x.push(239,191,189);continue}else if(U+1===L){(s-=3)>-1&&x.push(239,191,189);continue}j=u;continue}if(u<56320){(s-=3)>-1&&x.push(239,191,189),j=u;continue}u=(j-55296<<10|u-56320)+65536}else j&&(s-=3)>-1&&x.push(239,191,189);if(j=null,u<128){if((s-=1)<0)break;x.push(u)}else if(u<2048){if((s-=2)<0)break;x.push(u>>6|192,u&63|128)}else if(u<65536){if((s-=3)<0)break;x.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((s-=4)<0)break;x.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return x}function st(d){for(var s=[],u=0;u<d.length;++u)s.push(d.charCodeAt(u)&255);return s}function nt(d,s){for(var u,L,j,x=[],U=0;U<d.length&&!((s-=2)<0);++U)u=d.charCodeAt(U),L=u>>8,j=u%256,x.push(j),x.push(L);return x}function ct(d){return R.toByteArray(Je(d))}function dt(d,s,u,L){for(var j=0;j<L&&!(j+u>=s.length||j>=d.length);++j)s[j+u]=d[j];return j}function J(d){return d!==d}}).call(this,p("d8a2b18087957e350ade"))},"98397d66c772b34a0217":function(A,w){},"989a42060903e47c0cff":function(A,w,p){"use strict";p.d(w,"b",function(){return R}),p.d(w,"c",function(){return g}),p.d(w,"a",function(){return c});const r={REPLACE:"replace",IGNORE:"ignore"},R={QUEUED:"queued",CONSUMED:"consumed",STARTED:"started",DEPLOYED:"deployed",ERROR:"error",FINISHED:"finished",TERMINATING:"terminating",STOPPED:"stopped"},g={CLONE:"clone",IMPORT:"import",IMPORT_AGENT:"import_agent",EXPORT:"export",BACKUP:"backup",RESTORE:"restore",REMOVE:"remove",TRAIN:"train",INFERENCE:"inference",SMART_TOOL:"smarttool",DEPLOY_MODEL:"infer_rpc",UPLOAD_MODEL:"upload_model",UPLOAD_IMAGES:"upload_images",CLEANUP:"cleanup",CLEAN_CHECKPOINTS:"clean_checkpoints",CUSTOM:"custom",PIPELINE:"pipeline",EXPORT_NOTEBOOK:"export_notebook",UPDATE_AGENT:"update_agent",PYTHON:"python",APP:"app",APP_GPU:"app_gpu",REFRESH_ECOSYSTEM:"refresh_ecosystem",INTERNAL:"internal"},a={ON_ERROR:"on_error",NEVER:"never"},T={OLD_TRAIN_METRICS:"train-metrics.json",OLD_LOGS:"logs.json",TRAIN_METRICS:"train-metrics.txt",LOGS:"logs.txt"},c=new Set([g.IMPORT,g.IMPORT_AGENT,g.EXPORT,g.TRAIN,g.INFERENCE,g.DEPLOY_MODEL,g.CUSTOM,g.PIPELINE,g.PYTHON,g.APP,g.APP_GPU]),N=new Set([g.CLONE,g.BACKUP,g.RESTORE,g.REMOVE,g.EXPORT_NOTEBOOK]),_=new Set([g.CLEANUP]),E=new Set([g.DEPLOY_MODEL,g.SMART_TOOL,g.APP]),P=new Set([g.APP,g.APP_GPU])},"9aa3fa1745ff4ffb1ccf":function(A,w,p){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}A.exports=r},"9c896fb6926f77e30ea1":function(A,w,p){"use strict";var r=p("00f83bf39a29e0b57d1f"),R=p.n(r),g=p("c4ff9fc90ae775b45209");const a={IMPORT:"import",DTL:"dtl",TRAIN:"train",INFERENCE:"inference",CUSTOM:"custom",PIPELINE:"pipeline",PYTHON:"python"},T={...Object(r.omit)(a,"PIPELINE")},c={[a.TRAIN]:g.a.ARCHITECTURE,[a.INFERENCE]:g.a.ARCHITECTURE,[a.IMPORT]:g.a.IMPORT,[a.DTL]:g.a.DTL,[a.CUSTOM]:g.a.CUSTOM}},"9e0829ebb5f4d9754370":function(A,w,p){"use strict";var r=p("1b726e7ce4061546ecfc"),R=p("d93711b385e8c0def2ac"),g=p("7d074b0d47dd6102152e");p.d(w,"GEOMETRY_TYPES",function(){return g.a});var a=p("faf7059dd6c86b16a85c"),T=p("9c896fb6926f77e30ea1"),c=p("1c84413533b434a33065"),N=p("d11cd0540728c616a05b"),_=p("84295a61134fb8a1951a"),E=p.n(_);p.o(_,"TASK_STATUS")&&p.d(w,"TASK_STATUS",function(){return _.TASK_STATUS});var P=p("5fe27eddff92ec2dbac5"),D=p("edd4df3a18a3d3cf7c09"),F=p("aeebf6797391ce13e889"),M=p("989a42060903e47c0cff");p.d(w,"TASK_STATUS",function(){return M.b});var m=p("007e2f901f143b0063bb"),I=p("859560fdf58f03d5af41"),k=p.n(I),B=p("2e899ef6b64c1edfb532"),Y=p.n(B),ee=p("59f1b6605b24f530994c"),z=p.n(ee),$=p("10056bba30cd518ff6cb"),re=p("015c0de8729d1accb6db"),ae=p.n(re),ue=p("21c9b9dc8d994c745f44"),me=p.n(ue),De=p("2132b7a92754e3fc960f"),Me=p("59548a76725c1a44390b"),je=p("1f24b1c1631adced2f18"),Q=p("503c1434b44b1a06d784"),ge=p.n(Q),Ie=p("26015173042bd44a5ea1"),we=p.n(Ie),K=p("79036b6f230fe5b6ba23"),Z=p("3a4039aaa40cb7a7a7ef"),fe=p("2ecd84c8cd25e23da709"),de=p.n(fe),be=p("9e4337ea88e70979117d"),ve=p.n(be),Le=p("5354c482095f5ead6005"),Ue=p("144a4c52161809512414"),et=p.n(Ue),Ze=p("98397d66c772b34a0217"),We=p.n(Ze),Xe=p("2552c24b020126fc6ce1"),Ve=p.n(Xe),Je=p("514c53a7f7ee5bb3f19c"),Ot=p.n(Je),pt=p("23ffeadd01de75e61cb9"),ze=p.n(pt),st=p("89231cc2992cc1e35cc8"),nt=p("d41ce8549e786ec2bfeb"),ct=p("6d30f70e740934193417"),dt=p.n(ct),J=p("43f03bbf7c8e2a7f6ddf"),d=p.n(J),s=p("1d38117166ab109cd06a"),u=p.n(s),L=p("c4ff9fc90ae775b45209"),j=p("4f5240ab2841b269e5a3"),x=p.n(j),U=p("b3315b5da9c92a3db2ae"),te=p.n(U),le=p("4ed4f586f2caef2fd7a7"),ye=p("dd1b049a7e602d219ec1"),Ce=p.n(ye),Pe=p("3d4013cb89bb50c024c0"),Be=p.n(Pe),S=p("5d1a9382f9802de0586b"),_e=p.n(S),Te=p("50632b5842f0e33f1900"),Re=p.n(Te),H=p("7f9c1fb802a7f39bc6fa"),ce=p("19eb7b800fa77b859a22"),v=p.n(ce),Ae=p("b38020fb3d86f832c727"),Ge=p.n(Ae),i=p("c2399cef222e655f5bdb"),ie=p("eb441efc9f353b9c4d0e"),b=p.n(ie),f=p("47dee86e2dd0d0ba81b0"),O=p("e22a1a004346ab38e697"),G=p.n(O),oe=p("117d0ed1e2d52362e335"),ne=p.n(oe),Oe=p("26d753a9604d80c3170c"),ke=p.n(Oe),yt=p("81db9e5bbfc9d79c382e"),ut=p.n(yt),Qe=p("4d27b4350a6aceebaebf"),Et=p("11df586ec83e36f29e62"),ft=p("b51af69bbd93da5c2190"),Lt=p.n(ft),mn=p("a30cb7277f8871fc7b34"),Nn=p.n(mn),St=p("41ad9bf124e8c96e655a"),Bt=p.n(St),Ct=p("213f26f2eeabf1ab6b8d"),Qt=p("66e4032f81bde6d04705"),kt=p("6cd6cd0d97104941b84f"),nr=p.n(kt),Oa=p("23113e976a9e8f622baf"),fi=p("7829c6aaa67683b96e21"),Aa=p.n(fi),ya=p("b74079e17b74a7010ffb"),li=p("17d815db3d84abcca145"),rr=p.n(li)},"9e4337ea88e70979117d":function(A,w){},"9f9e314a0c8f9cbf98fa":function(A,w,p){"use strict";var r=p("0ee394ae0680b1ca3e73"),R=p("31500494957ca504bce3"),g=p("5433aa7ef67502ef707d"),a=p("e7f384c9a47f0c6a443d"),T=p("a9ce4fe8377d98d9238d"),c=0,N=1,_=2,E=4,P=5,D=6,F=0,M=1,m=2,I=-2,k=-3,B=-4,Y=-5,ee=8,z=1,$=2,re=3,ae=4,ue=5,me=6,De=7,Me=8,je=9,Q=10,ge=11,Ie=12,we=13,K=14,Z=15,fe=16,de=17,be=18,ve=19,Le=20,Ue=21,et=22,Ze=23,We=24,Xe=25,Ve=26,Je=27,Ot=28,pt=29,ze=30,st=31,nt=32,ct=852,dt=592,J=15,d=J;function s(H){return(H>>>24&255)+(H>>>8&65280)+((H&65280)<<8)+((H&255)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function L(H){var ce;return!H||!H.state?I:(ce=H.state,H.total_in=H.total_out=ce.total=0,H.msg="",ce.wrap&&(H.adler=ce.wrap&1),ce.mode=z,ce.last=0,ce.havedict=0,ce.dmax=32768,ce.head=null,ce.hold=0,ce.bits=0,ce.lencode=ce.lendyn=new r.Buf32(ct),ce.distcode=ce.distdyn=new r.Buf32(dt),ce.sane=1,ce.back=-1,F)}function j(H){var ce;return!H||!H.state?I:(ce=H.state,ce.wsize=0,ce.whave=0,ce.wnext=0,L(H))}function x(H,ce){var v,Ae;return!H||!H.state||(Ae=H.state,ce<0?(v=0,ce=-ce):(v=(ce>>4)+1,ce<48&&(ce&=15)),ce&&(ce<8||ce>15))?I:(Ae.window!==null&&Ae.wbits!==ce&&(Ae.window=null),Ae.wrap=v,Ae.wbits=ce,j(H))}function U(H,ce){var v,Ae;return H?(Ae=new u,H.state=Ae,Ae.window=null,v=x(H,ce),v!==F&&(H.state=null),v):I}function te(H){return U(H,d)}var le=!0,ye,Ce;function Pe(H){if(le){var ce;for(ye=new r.Buf32(512),Ce=new r.Buf32(32),ce=0;ce<144;)H.lens[ce++]=8;for(;ce<256;)H.lens[ce++]=9;for(;ce<280;)H.lens[ce++]=7;for(;ce<288;)H.lens[ce++]=8;for(T(N,H.lens,0,288,ye,0,H.work,{bits:9}),ce=0;ce<32;)H.lens[ce++]=5;T(_,H.lens,0,32,Ce,0,H.work,{bits:5}),le=!1}H.lencode=ye,H.lenbits=9,H.distcode=Ce,H.distbits=5}function Be(H,ce,v,Ae){var Ge,i=H.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new r.Buf8(i.wsize)),Ae>=i.wsize?(r.arraySet(i.window,ce,v-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(Ge=i.wsize-i.wnext,Ge>Ae&&(Ge=Ae),r.arraySet(i.window,ce,v-Ae,Ge,i.wnext),Ae-=Ge,Ae?(r.arraySet(i.window,ce,v-Ae,Ae,0),i.wnext=Ae,i.whave=i.wsize):(i.wnext+=Ge,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=Ge))),0}function S(H,ce){var v,Ae,Ge,i,ie,b,f,O,G,oe,ne,Oe,ke,yt,ut=0,Qe,Et,ft,Lt,mn,Nn,St,Bt,Ct=new r.Buf8(4),Qt,kt,nr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return I;v=H.state,v.mode===Ie&&(v.mode=we),ie=H.next_out,Ge=H.output,f=H.avail_out,i=H.next_in,Ae=H.input,b=H.avail_in,O=v.hold,G=v.bits,oe=b,ne=f,Bt=F;e:for(;;)switch(v.mode){case z:if(v.wrap===0){v.mode=we;break}for(;G<16;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}if(v.wrap&2&&O===35615){v.check=0,Ct[0]=O&255,Ct[1]=O>>>8&255,v.check=g(v.check,Ct,2,0),O=0,G=0,v.mode=$;break}if(v.flags=0,v.head&&(v.head.done=!1),!(v.wrap&1)||(((O&255)<<8)+(O>>8))%31){H.msg="incorrect header check",v.mode=ze;break}if((O&15)!==ee){H.msg="unknown compression method",v.mode=ze;break}if(O>>>=4,G-=4,St=(O&15)+8,v.wbits===0)v.wbits=St;else if(St>v.wbits){H.msg="invalid window size",v.mode=ze;break}v.dmax=1<<St,H.adler=v.check=1,v.mode=O&512?Q:Ie,O=0,G=0;break;case $:for(;G<16;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}if(v.flags=O,(v.flags&255)!==ee){H.msg="unknown compression method",v.mode=ze;break}if(v.flags&57344){H.msg="unknown header flags set",v.mode=ze;break}v.head&&(v.head.text=O>>8&1),v.flags&512&&(Ct[0]=O&255,Ct[1]=O>>>8&255,v.check=g(v.check,Ct,2,0)),O=0,G=0,v.mode=re;case re:for(;G<32;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}v.head&&(v.head.time=O),v.flags&512&&(Ct[0]=O&255,Ct[1]=O>>>8&255,Ct[2]=O>>>16&255,Ct[3]=O>>>24&255,v.check=g(v.check,Ct,4,0)),O=0,G=0,v.mode=ae;case ae:for(;G<16;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}v.head&&(v.head.xflags=O&255,v.head.os=O>>8),v.flags&512&&(Ct[0]=O&255,Ct[1]=O>>>8&255,v.check=g(v.check,Ct,2,0)),O=0,G=0,v.mode=ue;case ue:if(v.flags&1024){for(;G<16;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}v.length=O,v.head&&(v.head.extra_len=O),v.flags&512&&(Ct[0]=O&255,Ct[1]=O>>>8&255,v.check=g(v.check,Ct,2,0)),O=0,G=0}else v.head&&(v.head.extra=null);v.mode=me;case me:if(v.flags&1024&&(Oe=v.length,Oe>b&&(Oe=b),Oe&&(v.head&&(St=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),r.arraySet(v.head.extra,Ae,i,Oe,St)),v.flags&512&&(v.check=g(v.check,Ae,Oe,i)),b-=Oe,i+=Oe,v.length-=Oe),v.length))break e;v.length=0,v.mode=De;case De:if(v.flags&2048){if(b===0)break e;Oe=0;do St=Ae[i+Oe++],v.head&&St&&v.length<65536&&(v.head.name+=String.fromCharCode(St));while(St&&Oe<b);if(v.flags&512&&(v.check=g(v.check,Ae,Oe,i)),b-=Oe,i+=Oe,St)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=Me;case Me:if(v.flags&4096){if(b===0)break e;Oe=0;do St=Ae[i+Oe++],v.head&&St&&v.length<65536&&(v.head.comment+=String.fromCharCode(St));while(St&&Oe<b);if(v.flags&512&&(v.check=g(v.check,Ae,Oe,i)),b-=Oe,i+=Oe,St)break e}else v.head&&(v.head.comment=null);v.mode=je;case je:if(v.flags&512){for(;G<16;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}if(O!==(v.check&65535)){H.msg="header crc mismatch",v.mode=ze;break}O=0,G=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),H.adler=v.check=0,v.mode=Ie;break;case Q:for(;G<32;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}H.adler=v.check=s(O),O=0,G=0,v.mode=ge;case ge:if(v.havedict===0)return H.next_out=ie,H.avail_out=f,H.next_in=i,H.avail_in=b,v.hold=O,v.bits=G,m;H.adler=v.check=1,v.mode=Ie;case Ie:if(ce===P||ce===D)break e;case we:if(v.last){O>>>=G&7,G-=G&7,v.mode=Je;break}for(;G<3;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}switch(v.last=O&1,O>>>=1,G-=1,O&3){case 0:v.mode=K;break;case 1:if(Pe(v),v.mode=Le,ce===D){O>>>=2,G-=2;break e}break;case 2:v.mode=de;break;case 3:H.msg="invalid block type",v.mode=ze}O>>>=2,G-=2;break;case K:for(O>>>=G&7,G-=G&7;G<32;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}if((O&65535)!==(O>>>16^65535)){H.msg="invalid stored block lengths",v.mode=ze;break}if(v.length=O&65535,O=0,G=0,v.mode=Z,ce===D)break e;case Z:v.mode=fe;case fe:if(Oe=v.length,Oe){if(Oe>b&&(Oe=b),Oe>f&&(Oe=f),Oe===0)break e;r.arraySet(Ge,Ae,i,Oe,ie),b-=Oe,i+=Oe,f-=Oe,ie+=Oe,v.length-=Oe;break}v.mode=Ie;break;case de:for(;G<14;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}if(v.nlen=(O&31)+257,O>>>=5,G-=5,v.ndist=(O&31)+1,O>>>=5,G-=5,v.ncode=(O&15)+4,O>>>=4,G-=4,v.nlen>286||v.ndist>30){H.msg="too many length or distance symbols",v.mode=ze;break}v.have=0,v.mode=be;case be:for(;v.have<v.ncode;){for(;G<3;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}v.lens[nr[v.have++]]=O&7,O>>>=3,G-=3}for(;v.have<19;)v.lens[nr[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,Qt={bits:v.lenbits},Bt=T(c,v.lens,0,19,v.lencode,0,v.work,Qt),v.lenbits=Qt.bits,Bt){H.msg="invalid code lengths set",v.mode=ze;break}v.have=0,v.mode=ve;case ve:for(;v.have<v.nlen+v.ndist;){for(;ut=v.lencode[O&(1<<v.lenbits)-1],Qe=ut>>>24,Et=ut>>>16&255,ft=ut&65535,!(Qe<=G);){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}if(ft<16)O>>>=Qe,G-=Qe,v.lens[v.have++]=ft;else{if(ft===16){for(kt=Qe+2;G<kt;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}if(O>>>=Qe,G-=Qe,v.have===0){H.msg="invalid bit length repeat",v.mode=ze;break}St=v.lens[v.have-1],Oe=3+(O&3),O>>>=2,G-=2}else if(ft===17){for(kt=Qe+3;G<kt;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}O>>>=Qe,G-=Qe,St=0,Oe=3+(O&7),O>>>=3,G-=3}else{for(kt=Qe+7;G<kt;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}O>>>=Qe,G-=Qe,St=0,Oe=11+(O&127),O>>>=7,G-=7}if(v.have+Oe>v.nlen+v.ndist){H.msg="invalid bit length repeat",v.mode=ze;break}for(;Oe--;)v.lens[v.have++]=St}}if(v.mode===ze)break;if(v.lens[256]===0){H.msg="invalid code -- missing end-of-block",v.mode=ze;break}if(v.lenbits=9,Qt={bits:v.lenbits},Bt=T(N,v.lens,0,v.nlen,v.lencode,0,v.work,Qt),v.lenbits=Qt.bits,Bt){H.msg="invalid literal/lengths set",v.mode=ze;break}if(v.distbits=6,v.distcode=v.distdyn,Qt={bits:v.distbits},Bt=T(_,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,Qt),v.distbits=Qt.bits,Bt){H.msg="invalid distances set",v.mode=ze;break}if(v.mode=Le,ce===D)break e;case Le:v.mode=Ue;case Ue:if(b>=6&&f>=258){H.next_out=ie,H.avail_out=f,H.next_in=i,H.avail_in=b,v.hold=O,v.bits=G,a(H,ne),ie=H.next_out,Ge=H.output,f=H.avail_out,i=H.next_in,Ae=H.input,b=H.avail_in,O=v.hold,G=v.bits,v.mode===Ie&&(v.back=-1);break}for(v.back=0;ut=v.lencode[O&(1<<v.lenbits)-1],Qe=ut>>>24,Et=ut>>>16&255,ft=ut&65535,!(Qe<=G);){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}if(Et&&!(Et&240)){for(Lt=Qe,mn=Et,Nn=ft;ut=v.lencode[Nn+((O&(1<<Lt+mn)-1)>>Lt)],Qe=ut>>>24,Et=ut>>>16&255,ft=ut&65535,!(Lt+Qe<=G);){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}O>>>=Lt,G-=Lt,v.back+=Lt}if(O>>>=Qe,G-=Qe,v.back+=Qe,v.length=ft,Et===0){v.mode=Ve;break}if(Et&32){v.back=-1,v.mode=Ie;break}if(Et&64){H.msg="invalid literal/length code",v.mode=ze;break}v.extra=Et&15,v.mode=et;case et:if(v.extra){for(kt=v.extra;G<kt;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}v.length+=O&(1<<v.extra)-1,O>>>=v.extra,G-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=Ze;case Ze:for(;ut=v.distcode[O&(1<<v.distbits)-1],Qe=ut>>>24,Et=ut>>>16&255,ft=ut&65535,!(Qe<=G);){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}if(!(Et&240)){for(Lt=Qe,mn=Et,Nn=ft;ut=v.distcode[Nn+((O&(1<<Lt+mn)-1)>>Lt)],Qe=ut>>>24,Et=ut>>>16&255,ft=ut&65535,!(Lt+Qe<=G);){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}O>>>=Lt,G-=Lt,v.back+=Lt}if(O>>>=Qe,G-=Qe,v.back+=Qe,Et&64){H.msg="invalid distance code",v.mode=ze;break}v.offset=ft,v.extra=Et&15,v.mode=We;case We:if(v.extra){for(kt=v.extra;G<kt;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}v.offset+=O&(1<<v.extra)-1,O>>>=v.extra,G-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){H.msg="invalid distance too far back",v.mode=ze;break}v.mode=Xe;case Xe:if(f===0)break e;if(Oe=ne-f,v.offset>Oe){if(Oe=v.offset-Oe,Oe>v.whave&&v.sane){H.msg="invalid distance too far back",v.mode=ze;break}Oe>v.wnext?(Oe-=v.wnext,ke=v.wsize-Oe):ke=v.wnext-Oe,Oe>v.length&&(Oe=v.length),yt=v.window}else yt=Ge,ke=ie-v.offset,Oe=v.length;Oe>f&&(Oe=f),f-=Oe,v.length-=Oe;do Ge[ie++]=yt[ke++];while(--Oe);v.length===0&&(v.mode=Ue);break;case Ve:if(f===0)break e;Ge[ie++]=v.length,f--,v.mode=Ue;break;case Je:if(v.wrap){for(;G<32;){if(b===0)break e;b--,O|=Ae[i++]<<G,G+=8}if(ne-=f,H.total_out+=ne,v.total+=ne,ne&&(H.adler=v.check=v.flags?g(v.check,Ge,ne,ie-ne):R(v.check,Ge,ne,ie-ne)),ne=f,(v.flags?O:s(O))!==v.check){H.msg="incorrect data check",v.mode=ze;break}O=0,G=0}v.mode=Ot;case Ot:if(v.wrap&&v.flags){for(;G<32;){if(b===0)break e;b--,O+=Ae[i++]<<G,G+=8}if(O!==(v.total&4294967295)){H.msg="incorrect length check",v.mode=ze;break}O=0,G=0}v.mode=pt;case pt:Bt=M;break e;case ze:Bt=k;break e;case st:return B;case nt:default:return I}return H.next_out=ie,H.avail_out=f,H.next_in=i,H.avail_in=b,v.hold=O,v.bits=G,(v.wsize||ne!==H.avail_out&&v.mode<ze&&(v.mode<Je||ce!==E))&&Be(H,H.output,H.next_out,ne-H.avail_out)?(v.mode=st,B):(oe-=H.avail_in,ne-=H.avail_out,H.total_in+=oe,H.total_out+=ne,v.total+=ne,v.wrap&&ne&&(H.adler=v.check=v.flags?g(v.check,Ge,ne,H.next_out-ne):R(v.check,Ge,ne,H.next_out-ne)),H.data_type=v.bits+(v.last?64:0)+(v.mode===Ie?128:0)+(v.mode===Le||v.mode===Z?256:0),(oe===0&&ne===0||ce===E)&&Bt===F&&(Bt=Y),Bt)}function _e(H){if(!H||!H.state)return I;var ce=H.state;return ce.window&&(ce.window=null),H.state=null,F}function Te(H,ce){var v;return!H||!H.state||(v=H.state,!(v.wrap&2))?I:(v.head=ce,ce.done=!1,F)}function Re(H,ce){var v=ce.length,Ae,Ge,i;return!H||!H.state||(Ae=H.state,Ae.wrap!==0&&Ae.mode!==ge)?I:Ae.mode===ge&&(Ge=1,Ge=R(Ge,ce,v,0),Ge!==Ae.check)?k:(i=Be(H,ce,v,v),i?(Ae.mode=st,B):(Ae.havedict=1,F))}w.inflateReset=j,w.inflateReset2=x,w.inflateResetKeep=L,w.inflateInit=te,w.inflateInit2=U,w.inflate=S,w.inflateEnd=_e,w.inflateGetHeader=Te,w.inflateSetDictionary=Re,w.inflateInfo="pako inflate (from Nodeca project)"},a30cb7277f8871fc7b34:function(A,w){},a56e958956e5b051083f:function(A,w){for(var p=[],r=0;r<256;++r)p[r]=(r+256).toString(16).substr(1);function R(g,a){var T=a||0,c=p;return[c[g[T++]],c[g[T++]],c[g[T++]],c[g[T++]],"-",c[g[T++]],c[g[T++]],"-",c[g[T++]],c[g[T++]],"-",c[g[T++]],c[g[T++]],"-",c[g[T++]],c[g[T++]],c[g[T++]],c[g[T++]],c[g[T++]],c[g[T++]]].join("")}A.exports=R},a9ce4fe8377d98d9238d:function(A,w,p){"use strict";var r=p("0ee394ae0680b1ca3e73"),R=15,g=852,a=592,T=0,c=1,N=2,_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],E=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],P=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],D=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];A.exports=function(M,m,I,k,B,Y,ee,z){var $=z.bits,re=0,ae=0,ue=0,me=0,De=0,Me=0,je=0,Q=0,ge=0,Ie=0,we,K,Z,fe,de,be=null,ve=0,Le,Ue=new r.Buf16(R+1),et=new r.Buf16(R+1),Ze=null,We=0,Xe,Ve,Je;for(re=0;re<=R;re++)Ue[re]=0;for(ae=0;ae<k;ae++)Ue[m[I+ae]]++;for(De=$,me=R;me>=1&&Ue[me]===0;me--);if(De>me&&(De=me),me===0)return B[Y++]=1<<24|64<<16|0,B[Y++]=1<<24|64<<16|0,z.bits=1,0;for(ue=1;ue<me&&Ue[ue]===0;ue++);for(De<ue&&(De=ue),Q=1,re=1;re<=R;re++)if(Q<<=1,Q-=Ue[re],Q<0)return-1;if(Q>0&&(M===T||me!==1))return-1;for(et[1]=0,re=1;re<R;re++)et[re+1]=et[re]+Ue[re];for(ae=0;ae<k;ae++)m[I+ae]!==0&&(ee[et[m[I+ae]]++]=ae);if(M===T?(be=Ze=ee,Le=19):M===c?(be=_,ve-=257,Ze=E,We-=257,Le=256):(be=P,Ze=D,Le=-1),Ie=0,ae=0,re=ue,de=Y,Me=De,je=0,Z=-1,ge=1<<De,fe=ge-1,M===c&&ge>g||M===N&&ge>a)return 1;for(;;){Xe=re-je,ee[ae]<Le?(Ve=0,Je=ee[ae]):ee[ae]>Le?(Ve=Ze[We+ee[ae]],Je=be[ve+ee[ae]]):(Ve=32+64,Je=0),we=1<<re-je,K=1<<Me,ue=K;do K-=we,B[de+(Ie>>je)+K]=Xe<<24|Ve<<16|Je|0;while(K!==0);for(we=1<<re-1;Ie&we;)we>>=1;if(we!==0?(Ie&=we-1,Ie+=we):Ie=0,ae++,--Ue[re]===0){if(re===me)break;re=m[I+ee[ae]]}if(re>De&&(Ie&fe)!==Z){for(je===0&&(je=De),de+=ue,Me=re-je,Q=1<<Me;Me+je<me&&(Q-=Ue[Me+je],!(Q<=0));)Me++,Q<<=1;if(ge+=1<<Me,M===c&&ge>g||M===N&&ge>a)return 1;Z=Ie&fe,B[Z]=De<<24|Me<<16|de-Y|0}}return Ie!==0&&(B[de+Ie]=re-je<<24|64<<16|0),z.bits=De,0}},abf710223f9868f9ff0f:function(A,w,p){(function(r,R){(function(g,a){"use strict";if(g.setImmediate)return;var T=1,c={},N=!1,_=g.document,E;function P($){typeof $!="function"&&($=new Function(""+$));for(var re=new Array(arguments.length-1),ae=0;ae<re.length;ae++)re[ae]=arguments[ae+1];var ue={callback:$,args:re};return c[T]=ue,E(T),T++}function D($){delete c[$]}function F($){var re=$.callback,ae=$.args;switch(ae.length){case 0:re();break;case 1:re(ae[0]);break;case 2:re(ae[0],ae[1]);break;case 3:re(ae[0],ae[1],ae[2]);break;default:re.apply(a,ae);break}}function M($){if(N)setTimeout(M,0,$);else{var re=c[$];if(re){N=!0;try{F(re)}finally{D($),N=!1}}}}function m(){E=function($){R.nextTick(function(){M($)})}}function I(){if(g.postMessage&&!g.importScripts){var $=!0,re=g.onmessage;return g.onmessage=function(){$=!1},g.postMessage("","*"),g.onmessage=re,$}}function k(){var $="setImmediate$"+Math.random()+"$",re=function(ae){ae.source===g&&typeof ae.data=="string"&&ae.data.indexOf($)===0&&M(+ae.data.slice($.length))};g.addEventListener?g.addEventListener("message",re,!1):g.attachEvent("onmessage",re),E=function(ae){g.postMessage($+ae,"*")}}function B(){var $=new MessageChannel;$.port1.onmessage=function(re){var ae=re.data;M(ae)},E=function(re){$.port2.postMessage(re)}}function Y(){var $=_.documentElement;E=function(re){var ae=_.createElement("script");ae.onreadystatechange=function(){M(re),ae.onreadystatechange=null,$.removeChild(ae),ae=null},$.appendChild(ae)}}function ee(){E=function($){setTimeout(M,0,$)}}var z=Object.getPrototypeOf&&Object.getPrototypeOf(g);z=z&&z.setTimeout?z:g,{}.toString.call(g.process)==="[object process]"?m():I()?k():g.MessageChannel?B():_&&"onreadystatechange"in _.createElement("script")?Y():ee(),z.setImmediate=P,z.clearImmediate=D})(typeof self>"u"?typeof r>"u"?this:r:self)}).call(this,p("d8a2b18087957e350ade"),p("1a654c89165c3fdd23e9"))},aeebf6797391ce13e889:function(A,w,p){"use strict";p.d(w,"b",function(){return T}),p.d(w,"a",function(){return N});var r=p("00f83bf39a29e0b57d1f"),R=p.n(r),g=p("1b726e7ce4061546ecfc"),a=p("7d074b0d47dd6102152e");const T={IMAGES:"images",VOLUMES:"volumes",POINT_CLOUDS:"point_clouds",VIDEOS:"videos",POINT_CLOUD_EPISODES:"point_cloud_episodes"},c={[T.IMAGES]:"images",[T.VOLUMES]:"volumes",[T.POINT_CLOUDS]:"point cloud",[T.POINT_CLOUD_EPISODES]:"point cloud episodes",[T.VIDEOS]:"videos"},N={IMAGES_V1:"images_v1",IMAGES_V2:"images_v2",VIDEOS_V1:"videos_v1",VIDEOS_V2:"videos_v2",VIDEOS_V3:"videos_v3",VOLUMES_V1:"volumes_v1",POINT_CLOUDS_V1:"point_clouds_v1",POINT_CLOUD_EPISODES_V1:"point_cloud_episodes_v1"},_={READY:"ready",SYNC:"sync",ERROR:"error"},E={ALWAYS:"always",ON_HOVER:"on-hover",NEVER:"never"},P={ALWAYS:"always",NEVER:"never"},D={BBOX:"object_bbox",TOP_POINT:"top_point"},F={[T.IMAGES]:[a.a.BITMAP,a.a.CUBOID,a.a.GRAPH,a.a.RECTANGLE,a.a.POINT,a.a.POLYLINE,a.a.POLYGON],[T.VIDEOS]:[a.a.BITMAP,a.a.RECTANGLE,a.a.POINT,a.a.POLYLINE,a.a.POLYGON,a.a.GRAPH],[T.POINT_CLOUDS]:[a.a.CUBOID_3D,a.a.POINT_CLOUD],[T.POINT_CLOUD_EPISODES]:[a.a.CUBOID_3D,a.a.POINT_CLOUD],[T.VOLUMES]:[a.a.BITMAP,a.a.POLYGON,a.a.RECTANGLE,a.a.MASK_3D]},M={pointsSize:"auto"},m={PROJECT:"project",MODEL:"model",PLUGIN:"plugin",WORKSPACE:"workspace",NOTEBOOK:"notebook"},I={polygonEditFill:!0,borderSize:"auto",pointsSize:5,pointShapeRadius:12,brushSize:5,axesOpacity:1,axesBorderSize:1,axesMainColor:"#FFFFFF",axesAdditionalColor:"#000000",enableAxesOnRect:!0,enableAxesOnSmartRect:!0,enableAxesOnGraph:!0,rectangleOpacity:0,rectangleBorderSize:5,defaultOpacity:.5,tagsCategorySeparator:"",showTagsMode:E.ON_HOVER,showGraphLabelsMode:P.ALWAYS,tagsLocationMode:D.TOP_POINT,showClassesMode:!1,showUsersMode:!1,showTagsUsersMode:!1,showObjectSizeMode:!1,allowDuplicateTags:!1,showGrid:!1,showContours:!1,gridRowsCount:3,gridColsCount:3,zoomMultiplier:1.1,defaultPolygonToolOption:g.a.CONSECUTIVE,bitmapToolErazeUnderlayingPixels:!1,preserveZoomDifference:!1,objectTagsDashedBorders:["confidence"],hookOnImageChange:"",expandPropertiesPanel:!0,showPointPositionOnDrag:!1,useOnlyOriginalImage:!1,toggleHotkeyTag:!1,defaultSmartModel:null,groupImages:!1,groupImagesByTagId:null,groupImagesSync:!1,showCustomInfo:!0,showHotkeyHint:!0,transparentPartsColor:{hex:"#FFFFFF",a:0},advancedSettings:{hideUnavailableTools:!1}},k=Object.keys(I);function B($,re,ae){const ue=$[ae],me=re[ae];typeof ue=="object"&&ue!=null&&!Array.isArray(ue)?Object.assign(ue,me):$[ae]=me}function Y(...$){return k.reduce((re,ae)=>{const ue=I[ae];return typeof ue=="object"&&ue!=null&&!Array.isArray(ue)?re[ae]=Object(r.cloneDeep)(ue):re[ae]=ue,$.forEach(me=>{!me||!(ae in me)||M[ae]===me[ae]||B(re,me,ae)}),re},{})}const ee={NONE:"none",ANY_STRING:"any_string",ANY_NUMBER:"any_number",ONE_OF_STRING:"oneof_string"},z={...Object.values(ee).reduce(($,re)=>($[re]={},$),{}),[ee.ANY_NUMBER]:{autoIncrement:!1}}},b3315b5da9c92a3db2ae:function(A,w){},b37beb7152e4c2f15aaa:function(A,w,p){"use strict";var r=p("0ee394ae0680b1ca3e73"),R=4,g=0,a=1,T=2;function c(S){for(var _e=S.length;--_e>=0;)S[_e]=0}var N=0,_=1,E=2,P=3,D=258,F=29,M=256,m=M+1+F,I=30,k=19,B=2*m+1,Y=15,ee=16,z=7,$=256,re=16,ae=17,ue=18,me=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],De=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],je=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=512,ge=new Array((m+2)*2);c(ge);var Ie=new Array(I*2);c(Ie);var we=new Array(Q);c(we);var K=new Array(D-P+1);c(K);var Z=new Array(F);c(Z);var fe=new Array(I);c(fe);function de(S,_e,Te,Re,H){this.static_tree=S,this.extra_bits=_e,this.extra_base=Te,this.elems=Re,this.max_length=H,this.has_stree=S&&S.length}var be,ve,Le;function Ue(S,_e){this.dyn_tree=S,this.max_code=0,this.stat_desc=_e}function et(S){return S<256?we[S]:we[256+(S>>>7)]}function Ze(S,_e){S.pending_buf[S.pending++]=_e&255,S.pending_buf[S.pending++]=_e>>>8&255}function We(S,_e,Te){S.bi_valid>ee-Te?(S.bi_buf|=_e<<S.bi_valid&65535,Ze(S,S.bi_buf),S.bi_buf=_e>>ee-S.bi_valid,S.bi_valid+=Te-ee):(S.bi_buf|=_e<<S.bi_valid&65535,S.bi_valid+=Te)}function Xe(S,_e,Te){We(S,Te[_e*2],Te[_e*2+1])}function Ve(S,_e){var Te=0;do Te|=S&1,S>>>=1,Te<<=1;while(--_e>0);return Te>>>1}function Je(S){S.bi_valid===16?(Ze(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):S.bi_valid>=8&&(S.pending_buf[S.pending++]=S.bi_buf&255,S.bi_buf>>=8,S.bi_valid-=8)}function Ot(S,_e){var Te=_e.dyn_tree,Re=_e.max_code,H=_e.stat_desc.static_tree,ce=_e.stat_desc.has_stree,v=_e.stat_desc.extra_bits,Ae=_e.stat_desc.extra_base,Ge=_e.stat_desc.max_length,i,ie,b,f,O,G,oe=0;for(f=0;f<=Y;f++)S.bl_count[f]=0;for(Te[S.heap[S.heap_max]*2+1]=0,i=S.heap_max+1;i<B;i++)ie=S.heap[i],f=Te[Te[ie*2+1]*2+1]+1,f>Ge&&(f=Ge,oe++),Te[ie*2+1]=f,!(ie>Re)&&(S.bl_count[f]++,O=0,ie>=Ae&&(O=v[ie-Ae]),G=Te[ie*2],S.opt_len+=G*(f+O),ce&&(S.static_len+=G*(H[ie*2+1]+O)));if(oe!==0){do{for(f=Ge-1;S.bl_count[f]===0;)f--;S.bl_count[f]--,S.bl_count[f+1]+=2,S.bl_count[Ge]--,oe-=2}while(oe>0);for(f=Ge;f!==0;f--)for(ie=S.bl_count[f];ie!==0;)b=S.heap[--i],!(b>Re)&&(Te[b*2+1]!==f&&(S.opt_len+=(f-Te[b*2+1])*Te[b*2],Te[b*2+1]=f),ie--)}}function pt(S,_e,Te){var Re=new Array(Y+1),H=0,ce,v;for(ce=1;ce<=Y;ce++)Re[ce]=H=H+Te[ce-1]<<1;for(v=0;v<=_e;v++){var Ae=S[v*2+1];Ae!==0&&(S[v*2]=Ve(Re[Ae]++,Ae))}}function ze(){var S,_e,Te,Re,H,ce=new Array(Y+1);for(Te=0,Re=0;Re<F-1;Re++)for(Z[Re]=Te,S=0;S<1<<me[Re];S++)K[Te++]=Re;for(K[Te-1]=Re,H=0,Re=0;Re<16;Re++)for(fe[Re]=H,S=0;S<1<<De[Re];S++)we[H++]=Re;for(H>>=7;Re<I;Re++)for(fe[Re]=H<<7,S=0;S<1<<De[Re]-7;S++)we[256+H++]=Re;for(_e=0;_e<=Y;_e++)ce[_e]=0;for(S=0;S<=143;)ge[S*2+1]=8,S++,ce[8]++;for(;S<=255;)ge[S*2+1]=9,S++,ce[9]++;for(;S<=279;)ge[S*2+1]=7,S++,ce[7]++;for(;S<=287;)ge[S*2+1]=8,S++,ce[8]++;for(pt(ge,m+1,ce),S=0;S<I;S++)Ie[S*2+1]=5,Ie[S*2]=Ve(S,5);be=new de(ge,me,M+1,m,Y),ve=new de(Ie,De,0,I,Y),Le=new de(new Array(0),Me,0,k,z)}function st(S){var _e;for(_e=0;_e<m;_e++)S.dyn_ltree[_e*2]=0;for(_e=0;_e<I;_e++)S.dyn_dtree[_e*2]=0;for(_e=0;_e<k;_e++)S.bl_tree[_e*2]=0;S.dyn_ltree[$*2]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function nt(S){S.bi_valid>8?Ze(S,S.bi_buf):S.bi_valid>0&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function ct(S,_e,Te,Re){nt(S),Re&&(Ze(S,Te),Ze(S,~Te)),r.arraySet(S.pending_buf,S.window,_e,Te,S.pending),S.pending+=Te}function dt(S,_e,Te,Re){var H=_e*2,ce=Te*2;return S[H]<S[ce]||S[H]===S[ce]&&Re[_e]<=Re[Te]}function J(S,_e,Te){for(var Re=S.heap[Te],H=Te<<1;H<=S.heap_len&&(H<S.heap_len&&dt(_e,S.heap[H+1],S.heap[H],S.depth)&&H++,!dt(_e,Re,S.heap[H],S.depth));)S.heap[Te]=S.heap[H],Te=H,H<<=1;S.heap[Te]=Re}function d(S,_e,Te){var Re,H,ce=0,v,Ae;if(S.last_lit!==0)do Re=S.pending_buf[S.d_buf+ce*2]<<8|S.pending_buf[S.d_buf+ce*2+1],H=S.pending_buf[S.l_buf+ce],ce++,Re===0?Xe(S,H,_e):(v=K[H],Xe(S,v+M+1,_e),Ae=me[v],Ae!==0&&(H-=Z[v],We(S,H,Ae)),Re--,v=et(Re),Xe(S,v,Te),Ae=De[v],Ae!==0&&(Re-=fe[v],We(S,Re,Ae)));while(ce<S.last_lit);Xe(S,$,_e)}function s(S,_e){var Te=_e.dyn_tree,Re=_e.stat_desc.static_tree,H=_e.stat_desc.has_stree,ce=_e.stat_desc.elems,v,Ae,Ge=-1,i;for(S.heap_len=0,S.heap_max=B,v=0;v<ce;v++)Te[v*2]!==0?(S.heap[++S.heap_len]=Ge=v,S.depth[v]=0):Te[v*2+1]=0;for(;S.heap_len<2;)i=S.heap[++S.heap_len]=Ge<2?++Ge:0,Te[i*2]=1,S.depth[i]=0,S.opt_len--,H&&(S.static_len-=Re[i*2+1]);for(_e.max_code=Ge,v=S.heap_len>>1;v>=1;v--)J(S,Te,v);i=ce;do v=S.heap[1],S.heap[1]=S.heap[S.heap_len--],J(S,Te,1),Ae=S.heap[1],S.heap[--S.heap_max]=v,S.heap[--S.heap_max]=Ae,Te[i*2]=Te[v*2]+Te[Ae*2],S.depth[i]=(S.depth[v]>=S.depth[Ae]?S.depth[v]:S.depth[Ae])+1,Te[v*2+1]=Te[Ae*2+1]=i,S.heap[1]=i++,J(S,Te,1);while(S.heap_len>=2);S.heap[--S.heap_max]=S.heap[1],Ot(S,_e),pt(Te,Ge,S.bl_count)}function u(S,_e,Te){var Re,H=-1,ce,v=_e[0*2+1],Ae=0,Ge=7,i=4;for(v===0&&(Ge=138,i=3),_e[(Te+1)*2+1]=65535,Re=0;Re<=Te;Re++)ce=v,v=_e[(Re+1)*2+1],!(++Ae<Ge&&ce===v)&&(Ae<i?S.bl_tree[ce*2]+=Ae:ce!==0?(ce!==H&&S.bl_tree[ce*2]++,S.bl_tree[re*2]++):Ae<=10?S.bl_tree[ae*2]++:S.bl_tree[ue*2]++,Ae=0,H=ce,v===0?(Ge=138,i=3):ce===v?(Ge=6,i=3):(Ge=7,i=4))}function L(S,_e,Te){var Re,H=-1,ce,v=_e[0*2+1],Ae=0,Ge=7,i=4;for(v===0&&(Ge=138,i=3),Re=0;Re<=Te;Re++)if(ce=v,v=_e[(Re+1)*2+1],!(++Ae<Ge&&ce===v)){if(Ae<i)do Xe(S,ce,S.bl_tree);while(--Ae!==0);else ce!==0?(ce!==H&&(Xe(S,ce,S.bl_tree),Ae--),Xe(S,re,S.bl_tree),We(S,Ae-3,2)):Ae<=10?(Xe(S,ae,S.bl_tree),We(S,Ae-3,3)):(Xe(S,ue,S.bl_tree),We(S,Ae-11,7));Ae=0,H=ce,v===0?(Ge=138,i=3):ce===v?(Ge=6,i=3):(Ge=7,i=4)}}function j(S){var _e;for(u(S,S.dyn_ltree,S.l_desc.max_code),u(S,S.dyn_dtree,S.d_desc.max_code),s(S,S.bl_desc),_e=k-1;_e>=3&&S.bl_tree[je[_e]*2+1]===0;_e--);return S.opt_len+=3*(_e+1)+5+5+4,_e}function x(S,_e,Te,Re){var H;for(We(S,_e-257,5),We(S,Te-1,5),We(S,Re-4,4),H=0;H<Re;H++)We(S,S.bl_tree[je[H]*2+1],3);L(S,S.dyn_ltree,_e-1),L(S,S.dyn_dtree,Te-1)}function U(S){var _e=4093624447,Te;for(Te=0;Te<=31;Te++,_e>>>=1)if(_e&1&&S.dyn_ltree[Te*2]!==0)return g;if(S.dyn_ltree[9*2]!==0||S.dyn_ltree[10*2]!==0||S.dyn_ltree[13*2]!==0)return a;for(Te=32;Te<M;Te++)if(S.dyn_ltree[Te*2]!==0)return a;return g}var te=!1;function le(S){te||(ze(),te=!0),S.l_desc=new Ue(S.dyn_ltree,be),S.d_desc=new Ue(S.dyn_dtree,ve),S.bl_desc=new Ue(S.bl_tree,Le),S.bi_buf=0,S.bi_valid=0,st(S)}function ye(S,_e,Te,Re){We(S,(N<<1)+(Re?1:0),3),ct(S,_e,Te,!0)}function Ce(S){We(S,_<<1,3),Xe(S,$,ge),Je(S)}function Pe(S,_e,Te,Re){var H,ce,v=0;S.level>0?(S.strm.data_type===T&&(S.strm.data_type=U(S)),s(S,S.l_desc),s(S,S.d_desc),v=j(S),H=S.opt_len+3+7>>>3,ce=S.static_len+3+7>>>3,ce<=H&&(H=ce)):H=ce=Te+5,Te+4<=H&&_e!==-1?ye(S,_e,Te,Re):S.strategy===R||ce===H?(We(S,(_<<1)+(Re?1:0),3),d(S,ge,Ie)):(We(S,(E<<1)+(Re?1:0),3),x(S,S.l_desc.max_code+1,S.d_desc.max_code+1,v+1),d(S,S.dyn_ltree,S.dyn_dtree)),st(S),Re&&nt(S)}function Be(S,_e,Te){return S.pending_buf[S.d_buf+S.last_lit*2]=_e>>>8&255,S.pending_buf[S.d_buf+S.last_lit*2+1]=_e&255,S.pending_buf[S.l_buf+S.last_lit]=Te&255,S.last_lit++,_e===0?S.dyn_ltree[Te*2]++:(S.matches++,_e--,S.dyn_ltree[(K[Te]+M+1)*2]++,S.dyn_dtree[et(_e)*2]++),S.last_lit===S.lit_bufsize-1}w._tr_init=le,w._tr_stored_block=ye,w._tr_flush_block=Pe,w._tr_tally=Be,w._tr_align=Ce},b38020fb3d86f832c727:function(A,w){},b51af69bbd93da5c2190:function(A,w){},b74079e17b74a7010ffb:function(A,w,p){"use strict";const r={VIEWS:"views",RUNS:"runs",DOWNLOADS:"downloads"}},c2399cef222e655f5bdb:function(A,w,p){"use strict";const r={OPEN:"open",CLOSED:"closed"}},c4ff9fc90ae775b45209:function(A,w,p){"use strict";p.d(w,"a",function(){return r});const r={ARCHITECTURE:"architecture",IMPORT:"import",DTL:"dtl",CUSTOM:"custom",AGENT:"agent",PYTHON:"python"},R={TRAIN:"TRAIN",INFERENCE:"INFERENCE",DEPLOY:"DEPLOY",DEPLOY_SMART:"DEPLOY_SMART",CUSTOM:"MAIN"},g={[R.TRAIN]:"trainImage",[R.INFERENCE]:"inferenceImage",[R.DEPLOY]:"deployImage",[R.DEPLOY_SMART]:"deploySmartImage",[R.CUSTOM]:"customDockerImage"},a=Object.keys(g).reduce((T,c)=>(T[g[c]]=c,T),{})},c85ee313f17239f27581:function(A,w,p){"use strict";w.byteLength=_,w.toByteArray=P,w.fromByteArray=M;for(var r=[],R=[],g=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0,c=a.length;T<c;++T)r[T]=a[T],R[a.charCodeAt(T)]=T;R["-".charCodeAt(0)]=62,R["_".charCodeAt(0)]=63;function N(m){var I=m.length;if(I%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=m.indexOf("=");k===-1&&(k=I);var B=k===I?0:4-k%4;return[k,B]}function _(m){var I=N(m),k=I[0],B=I[1];return(k+B)*3/4-B}function E(m,I,k){return(I+k)*3/4-k}function P(m){for(var I,k=N(m),B=k[0],Y=k[1],ee=new g(E(m,B,Y)),z=0,$=Y>0?B-4:B,re=0;re<$;re+=4)I=R[m.charCodeAt(re)]<<18|R[m.charCodeAt(re+1)]<<12|R[m.charCodeAt(re+2)]<<6|R[m.charCodeAt(re+3)],ee[z++]=I>>16&255,ee[z++]=I>>8&255,ee[z++]=I&255;return Y===2&&(I=R[m.charCodeAt(re)]<<2|R[m.charCodeAt(re+1)]>>4,ee[z++]=I&255),Y===1&&(I=R[m.charCodeAt(re)]<<10|R[m.charCodeAt(re+1)]<<4|R[m.charCodeAt(re+2)]>>2,ee[z++]=I>>8&255,ee[z++]=I&255),ee}function D(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function F(m,I,k){for(var B,Y=[],ee=I;ee<k;ee+=3)B=(m[ee]<<16&16711680)+(m[ee+1]<<8&65280)+(m[ee+2]&255),Y.push(D(B));return Y.join("")}function M(m){for(var I,k=m.length,B=k%3,Y=[],ee=16383,z=0,$=k-B;z<$;z+=ee)Y.push(F(m,z,z+ee>$?$:z+ee));return B===1?(I=m[k-1],Y.push(r[I>>2]+r[I<<4&63]+"==")):B===2&&(I=(m[k-2]<<8)+m[k-1],Y.push(r[I>>10]+r[I>>4&63]+r[I<<2&63]+"=")),Y.join("")}},d11cd0540728c616a05b:function(A,w,p){"use strict";p.d(w,"a",function(){return r});const r={POLYGON:"polygon",BITMAP:"bitmap",BITMAP_PEN:"bitmap-pen",RECTANGLE:"rectangle",POLYLINE:"polyline",POINT:"point",SMART:"smart",GRAPH:"graph",CUBOID:"cuboid",POINT_CLOUD_PEN:"point-cloud-pen",POINT_3D:"point-3d",MASK_3D:"mask_3d"}},d41ce8549e786ec2bfeb:function(A,w,p){"use strict";const r={NONE:"none",DONE:"done",ACCEPTED:"accepted",REJECTED:"rejected"}},d6ba6c9daf4e147c1764:function(A,w){var p={}.toString;A.exports=Array.isArray||function(r){return p.call(r)=="[object Array]"}},d8a2b18087957e350ade:function(A,w){var p;p=function(){return this}();try{p=p||new Function("return this")()}catch{typeof window=="object"&&(p=window)}A.exports=p},d93711b385e8c0def2ac:function(A,w,p){"use strict";const r={LOGIN:"login",LOGOUT:"logout",CREATE_PROJECT:"create_project",UPDATE_PROJECT:"update_project",DISABLE_PROJECT:"disable_project",RESTORE_PROJECT:"restore_project",CREATE_DATASET:"create_dataset",UPDATE_DATASET:"update_dataset",DISABLE_DATASET:"disable_dataset",RESTORE_DATASET:"restore_dataset",CREATE_IMAGE:"create_image",UPDATE_IMAGE:"update_image",DISABLE_IMAGE:"disable_image",RESTORE_IMAGE:"restore_image",CREATE_FIGURE:"create_figure",UPDATE_FIGURE:"update_figure",DISABLE_FIGURE:"disable_figure",RESTORE_FIGURE:"restore_figure",CREATE_CLASS:"create_class",UPDATE_CLASS:"update_class",DISABLE_CLASS:"disable_class",RESTORE_CLASS:"restore_class",CREATE_BACKUP:"create_backup",EXPORT_PROJECT:"export_project",MODEL_TRAIN:"model_train",MODEL_INFERENCE:"model_inference",CREATE_PLUGIN:"create_plugin",DISABLE_PLUGIN:"disable_plugin",RESTORE_PLUGIN:"restore_plugin",CREATE_NODE:"create_node",DISABLE_NODE:"disable_node",RESTORE_NODE:"restore_node",CREATE_WORKSPACE:"create_workspace",DISABLE_WORKSPACE:"disable_workspace",RESTORE_WORKSPACE:"restore_workspace",CREATE_MODEL:"create_model",DISABLE_MODEL:"disable_model",RESTORE_MODEL:"restore_model",ADD_MEMBER:"add_member",REMOVE_MEMBER:"remove_member",LOGIN_TO_TEAM:"login_to_team",ATTACH_TAG:"attach_tag",UPDATE_TAG_VALUE:"update_tag_value",DETACH_TAG:"detach_tag",ANNOTATION_DURATION:"annotation_duration",IMAGE_REVIEW_STATUS_UPDATED:"image_review_status_updated"}},dd1b049a7e602d219ec1:function(A,w){},de82b172f89d0f35218f:function(A,w,p){"use strict";var r=p("00f83bf39a29e0b57d1f"),R=p.n(r);function g(T){return T}var a=function(T,c,N={}){if(typeof T!="function")throw new TypeError("Expected a function");let _=[];const E=Object.assign({mapData:g},N),P=Object(r.throttle)(()=>{const M=_.slice(0);_=[],T(M)},c),{mapData:D}=E;function F(...M){_.push(D([...M])),P()}return F}},e22a1a004346ab38e697:function(A,w){},e7f384c9a47f0c6a443d:function(A,w,p){"use strict";var r=30,R=12;A.exports=function(a,T){var c,N,_,E,P,D,F,M,m,I,k,B,Y,ee,z,$,re,ae,ue,me,De,Me,je,Q,ge;c=a.state,N=a.next_in,Q=a.input,_=N+(a.avail_in-5),E=a.next_out,ge=a.output,P=E-(T-a.avail_out),D=E+(a.avail_out-257),F=c.dmax,M=c.wsize,m=c.whave,I=c.wnext,k=c.window,B=c.hold,Y=c.bits,ee=c.lencode,z=c.distcode,$=(1<<c.lenbits)-1,re=(1<<c.distbits)-1;e:do{Y<15&&(B+=Q[N++]<<Y,Y+=8,B+=Q[N++]<<Y,Y+=8),ae=ee[B&$];t:for(;;){if(ue=ae>>>24,B>>>=ue,Y-=ue,ue=ae>>>16&255,ue===0)ge[E++]=ae&65535;else if(ue&16){me=ae&65535,ue&=15,ue&&(Y<ue&&(B+=Q[N++]<<Y,Y+=8),me+=B&(1<<ue)-1,B>>>=ue,Y-=ue),Y<15&&(B+=Q[N++]<<Y,Y+=8,B+=Q[N++]<<Y,Y+=8),ae=z[B&re];n:for(;;){if(ue=ae>>>24,B>>>=ue,Y-=ue,ue=ae>>>16&255,ue&16){if(De=ae&65535,ue&=15,Y<ue&&(B+=Q[N++]<<Y,Y+=8,Y<ue&&(B+=Q[N++]<<Y,Y+=8)),De+=B&(1<<ue)-1,De>F){a.msg="invalid distance too far back",c.mode=r;break e}if(B>>>=ue,Y-=ue,ue=E-P,De>ue){if(ue=De-ue,ue>m&&c.sane){a.msg="invalid distance too far back",c.mode=r;break e}if(Me=0,je=k,I===0){if(Me+=M-ue,ue<me){me-=ue;do ge[E++]=k[Me++];while(--ue);Me=E-De,je=ge}}else if(I<ue){if(Me+=M+I-ue,ue-=I,ue<me){me-=ue;do ge[E++]=k[Me++];while(--ue);if(Me=0,I<me){ue=I,me-=ue;do ge[E++]=k[Me++];while(--ue);Me=E-De,je=ge}}}else if(Me+=I-ue,ue<me){me-=ue;do ge[E++]=k[Me++];while(--ue);Me=E-De,je=ge}for(;me>2;)ge[E++]=je[Me++],ge[E++]=je[Me++],ge[E++]=je[Me++],me-=3;me&&(ge[E++]=je[Me++],me>1&&(ge[E++]=je[Me++]))}else{Me=E-De;do ge[E++]=ge[Me++],ge[E++]=ge[Me++],ge[E++]=ge[Me++],me-=3;while(me>2);me&&(ge[E++]=ge[Me++],me>1&&(ge[E++]=ge[Me++]))}}else if(ue&64){a.msg="invalid distance code",c.mode=r;break e}else{ae=z[(ae&65535)+(B&(1<<ue)-1)];continue n}break}}else if(ue&64)if(ue&32){c.mode=R;break e}else{a.msg="invalid literal/length code",c.mode=r;break e}else{ae=ee[(ae&65535)+(B&(1<<ue)-1)];continue t}break}}while(N<_&&E<D);me=Y>>3,N-=me,Y-=me<<3,B&=(1<<Y)-1,a.next_in=N,a.next_out=E,a.avail_in=N<_?5+(_-N):5-(N-_),a.avail_out=E<D?257+(D-E):257-(E-D),c.hold=B,c.bits=Y}},eb441efc9f353b9c4d0e:function(A,w){},edd4df3a18a3d3cf7c09:function(A,w,p){"use strict";var r=p("01d16a391b82cbd5b98a");const R={VIDEO:"video",AUDIO:"audio"},g="33p",a=["mp4","webm","ogg","ogv"],T=["h264","vp8","vp9"],c=["mp4"],N=["h264","vp8","vp9"],_="50p",E={x:0,y:0,z:1};function P(D,F){let M;if(D!=null){if(M=F.find(m=>m.index===D),!M||M.codecType!==R.VIDEO)throw new r.a(\`Video stream with id "\${D}" was not found\`,{status:400})}else if(M=F.find(m=>m.codecType===R.VIDEO),!M)throw new r.a("No video streams were found",{status:400});return M}},f89ea08855b945937e0d:function(A,w,p){(function(r){var R=typeof r<"u"&&r||typeof self<"u"&&self||window,g=Function.prototype.apply;w.setTimeout=function(){return new a(g.call(setTimeout,R,arguments),clearTimeout)},w.setInterval=function(){return new a(g.call(setInterval,R,arguments),clearInterval)},w.clearTimeout=w.clearInterval=function(T){T&&T.close()};function a(T,c){this._id=T,this._clearFn=c}a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(R,this._id)},w.enroll=function(T,c){clearTimeout(T._idleTimeoutId),T._idleTimeout=c},w.unenroll=function(T){clearTimeout(T._idleTimeoutId),T._idleTimeout=-1},w._unrefActive=w.active=function(T){clearTimeout(T._idleTimeoutId);var c=T._idleTimeout;c>=0&&(T._idleTimeoutId=setTimeout(function(){T._onTimeout&&T._onTimeout()},c))},p("abf710223f9868f9ff0f"),w.setImmediate=typeof self<"u"&&self.setImmediate||typeof r<"u"&&r.setImmediate||this&&this.setImmediate,w.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof r<"u"&&r.clearImmediate||this&&this.clearImmediate}).call(this,p("d8a2b18087957e350ade"))},f948e3fa67ea88e1add6:function(A,w,p){"use strict";var r=p("0ee394ae0680b1ca3e73"),R=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch{R=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{g=!1}for(var a=new r.Buf8(256),T=0;T<256;T++)a[T]=T>=252?6:T>=248?5:T>=240?4:T>=224?3:T>=192?2:1;a[254]=a[254]=1,w.string2buf=function(N){var _,E,P,D,F,M=N.length,m=0;for(D=0;D<M;D++)E=N.charCodeAt(D),(E&64512)===55296&&D+1<M&&(P=N.charCodeAt(D+1),(P&64512)===56320&&(E=65536+(E-55296<<10)+(P-56320),D++)),m+=E<128?1:E<2048?2:E<65536?3:4;for(_=new r.Buf8(m),F=0,D=0;F<m;D++)E=N.charCodeAt(D),(E&64512)===55296&&D+1<M&&(P=N.charCodeAt(D+1),(P&64512)===56320&&(E=65536+(E-55296<<10)+(P-56320),D++)),E<128?_[F++]=E:E<2048?(_[F++]=192|E>>>6,_[F++]=128|E&63):E<65536?(_[F++]=224|E>>>12,_[F++]=128|E>>>6&63,_[F++]=128|E&63):(_[F++]=240|E>>>18,_[F++]=128|E>>>12&63,_[F++]=128|E>>>6&63,_[F++]=128|E&63);return _};function c(N,_){if(_<65534&&(N.subarray&&g||!N.subarray&&R))return String.fromCharCode.apply(null,r.shrinkBuf(N,_));for(var E="",P=0;P<_;P++)E+=String.fromCharCode(N[P]);return E}w.buf2binstring=function(N){return c(N,N.length)},w.binstring2buf=function(N){for(var _=new r.Buf8(N.length),E=0,P=_.length;E<P;E++)_[E]=N.charCodeAt(E);return _},w.buf2string=function(N,_){var E,P,D,F,M=_||N.length,m=new Array(M*2);for(P=0,E=0;E<M;){if(D=N[E++],D<128){m[P++]=D;continue}if(F=a[D],F>4){m[P++]=65533,E+=F-1;continue}for(D&=F===2?31:F===3?15:7;F>1&&E<M;)D=D<<6|N[E++]&63,F--;if(F>1){m[P++]=65533;continue}D<65536?m[P++]=D:(D-=65536,m[P++]=55296|D>>10&1023,m[P++]=56320|D&1023)}return c(m,P)},w.utf8border=function(N,_){var E;for(_=_||N.length,_>N.length&&(_=N.length),E=_-1;E>=0&&(N[E]&192)===128;)E--;return E<0||E===0?_:E+a[N[E]]>_?E:_}},faf7059dd6c86b16a85c:function(A,w,p){"use strict";var r=p("989a42060903e47c0cff");const R={READY:"ready",SYNC:"sync",ERROR:"error"},g={[r.c.IMPORT]:"import",[r.c.CLONE]:"clone",[r.c.EXPORT]:"dtl",[r.c.INFERENCE]:"inference"}}});
`,o.p+"7048bee16aeb53318dec.js")}},"7964b54be5616e0032b3":function(A,M,o){var h=o("c445bef4faf25215ffcd");A.exports=function(v){return Object(h(v))}},"7a8c0a2ddedb2e5173f7":function(A,M,o){o("de1b22d97612a36416e3")("getOwnPropertyNames",function(){return o("ac7065bf7cbe983177aa").f})},"7aff271e08d81419a9f8":function(A,M,o){"use strict";var h=o("6ae02b075e3300a8a961"),v=o("c445bef4faf25215ffcd");A.exports=function(m){var b=String(v(this)),S="",I=h(m);if(I<0||I==1/0)throw RangeError("Count can't be negative");for(;I>0;(I>>>=1)&&(b+=b))I&1&&(S+=b);return S}},"7be628f155d3e5d395ed":function(A,M,o){var h=o("e9323032e98511a09e82"),v=o("27cb60849c9c0ac2ac5a").set,g=h.MutationObserver||h.WebKitMutationObserver,m=h.process,b=h.Promise,S=o("30b8e0406acca1d79148")(m)=="process";A.exports=function(){var I,T,P,D=function(){var X,W;for(S&&(X=m.domain)&&X.exit();I;){W=I.fn,I=I.next;try{W()}catch(j){throw I?P():T=void 0,j}}T=void 0,X&&X.enter()};if(S)P=function(){m.nextTick(D)};else if(g&&!(h.navigator&&h.navigator.standalone)){var U=!0,Y=document.createTextNode("");new g(D).observe(Y,{characterData:!0}),P=function(){Y.data=U=!U}}else if(b&&b.resolve){var K=b.resolve(void 0);P=function(){K.then(D)}}else P=function(){v.call(h,D)};return function(X){var W={fn:X,next:void 0};T&&(T.next=W),I||(I=W,P()),T=W}}},"7c0e1d7b05d19145c76d":function(A,M,o){var h=o("e9323032e98511a09e82"),v=o("cd27856869d7952ccbe4"),g=o("f8cf2e7afd370478f99e").f,m=o("f231974c81033140970d").f,b=o("abe6c77689592409700a"),S=o("3a4f8a76cd0489772f71"),I=h.RegExp,T=I,P=I.prototype,D=/a/g,U=/a/g,Y=new I(D)!==D;if(o("c4e1172cd86cf1507638")&&(!Y||o("126be16bb2f5f1c18403")(function(){return U[o("fdf9ec15fb80cd9b8df9")("match")]=!1,I(D)!=D||I(U)==U||I(D,"i")!="/a/i"}))){I=function(Q,ne){var ce=this instanceof I,ee=b(Q),B=ne===void 0;return!ce&&ee&&Q.constructor===I&&B?Q:v(Y?new T(ee&&!B?Q.source:Q,ne):T((ee=Q instanceof I)?Q.source:Q,ee&&B?S.call(Q):ne),ce?this:P,I)};for(var K=function(j){j in I||g(I,j,{configurable:!0,get:function(){return T[j]},set:function(Q){T[j]=Q}})},X=m(T),W=0;X.length>W;)K(X[W++]);P.constructor=I,I.prototype=P,o("26949bccb98fdb02c86a")(h,"RegExp",I)}o("648f39bb5d52ff46b948")("RegExp")},"7d074b0d47dd6102152e":function(A,M,o){"use strict";o.d(M,"a",function(){return g});var h=o("00f83bf39a29e0b57d1f"),v=o.n(h);const g={POINT:"point",RECTANGLE:"rectangle",POLYGON:"polygon",POLYLINE:"line",BITMAP:"bitmap",MASK_3D:"mask_3d",GRAPH:"graph",CUBOID:"cuboid",CUBOID_3D:"cuboid_3d",POINT_CLOUD:"point_cloud",POINT_3D:"point_3d",CLOSED_SURFACE_MESH:"closed_surface_mesh"},m={...Object(h.omit)(g,["CLOSED_SURFACE_MESH"]),ANY:"any"},b={[m.ANY]:"Any Shape",[m.POINT]:"Point",[m.POLYLINE]:"Line",[m.RECTANGLE]:"Rectangle",[m.POLYGON]:"Polygon",[m.BITMAP]:"Bitmap (mask)",[m.GRAPH]:"Graph (keypoints)",[m.CUBOID]:"Cuboid",[m.CUBOID_3D]:"Cuboid",[m.POINT_3D]:"Point",[m.POINT_CLOUD]:"Point Cloud",[g.CLOSED_SURFACE_MESH]:"3D Interpolation",[g.MASK_3D]:"Mask 3D"},S=new Set([g.CLOSED_SURFACE_MESH,g.MASK_3D]),I=new Set([g.CLOSED_SURFACE_MESH]),T=new Set([g.CUBOID_3D,g.POINT_CLOUD,g.POINT_3D,g.CLOSED_SURFACE_MESH,g.MASK_3D]),P=new Set([g.POINT,g.RECTANGLE,g.POLYGON,g.POLYLINE,g.BITMAP,g.GRAPH,g.CUBOID])},"7d74e0b33d6370907a81":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("bf423d1d683f9a2529fc"),g=o("7964b54be5616e0032b3"),m=o("87ca1990df7e5ce5f6d4"),b=o("c021bf2eaf2f2e721a6e"),S=o("0963fd6a7fb1ad061e74");h(h.P,"Array",{flatMap:function(T){var P=g(this),D,U;return b(T),D=m(P.length),U=S(P,0),v(U,P,P,D,0,1,T,arguments[1]),U}}),o("7f1f5a90a2ecaf92a049")("flatMap")},"7dbfcf0fa32544819713":function(A,M,o){"use strict";var h=o("7964b54be5616e0032b3"),v=o("dff1687ed27eabf28b37"),g=o("87ca1990df7e5ce5f6d4");A.exports=function(b){for(var S=h(this),I=g(S.length),T=arguments.length,P=v(T>1?arguments[1]:void 0,I),D=T>2?arguments[2]:void 0,U=D===void 0?I:v(D,I);U>P;)S[P++]=b;return S}},"7e1f163f9d0c5905dcba":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("409f063042ff82279e38")(3);h(h.P+h.F*!o("155fc47f5eef242ee51b")([].some,!0),"Array",{some:function(m){return v(this,m,arguments[1])}})},"7f1f5a90a2ecaf92a049":function(A,M,o){var h=o("fdf9ec15fb80cd9b8df9")("unscopables"),v=Array.prototype;v[h]==null&&o("fa9e288138e317a7a504")(v,h,{}),A.exports=function(g){v[h][g]=!0}},"7f9c1fb802a7f39bc6fa":function(A,M,o){"use strict";const h={JOB_ASSIGNED:"job_assigned",JOB_COMPLETED:"job_completed",TASK_COMPLETED:"task_completed",LABELING_EXAM_ASSIGNED:"labeling_exam_assigned",LABELING_EXAM_COMPLETED:"labeling_exam_completed",ISSUE_OPEN:"issue_open",ISSUE_CLOSED:"issue_closed",ISSUE_ASSIGNED:"issue_assigned",SUBISSUE_UPDATED:"subissue_updated"},v={UNREAD:"unread",READ:"readed"}},"800e03bea47105b47084":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("ce769f529b514afbf364");h(h.S+h.F*(v!=Math.expm1),"Math",{expm1:v})},"8047fb208d950d6b7042":function(A,M,o){var h=o("3c1abcaf432651c852c0"),v=o("3091fc82fc780b1e9f35"),g=o("45e95ff7deb186b1032c");v(v.S,"Reflect",{getOwnPropertyDescriptor:function(b,S){return h.f(g(b),S)}})},"812baf65d2b8d0a42f86":function(A,M,o){var h=o("29c91b56491d3b41e5b7"),v=o("a56e958956e5b051083f");function g(m,b,S){var I=b&&S||0;typeof m=="string"&&(b=m==="binary"?new Array(16):null,m=null),m=m||{};var T=m.random||(m.rng||h)();if(T[6]=T[6]&15|64,T[8]=T[8]&63|128,b)for(var P=0;P<16;++P)b[I+P]=T[P];return b||v(T)}A.exports=g},"81db9e5bbfc9d79c382e":function(A,M){},"82b90a171187cb4c04e7":function(A,M,o){var h=o("f2b1656cbe8f2d162cce"),v=o("b15e544636f08b726d1d"),g=o("c470d63f7ad2f6f4b1cf"),m=Object.defineProperty;M.f=o("36dcda5e30871a360b8c")?Object.defineProperty:function(S,I,T){if(h(S),I=g(I,!0),h(T),v)try{return m(S,I,T)}catch{}if("get"in T||"set"in T)throw TypeError("Accessors not supported!");return"value"in T&&(S[I]=T.value),S}},"82e7c27256e2d57d24b0":function(A,M,o){"use strict";var h=o("f8cf2e7afd370478f99e").f,v=o("196ca7010a0a30f36bdf"),g=o("5d61e0aac58adeaf65c8"),m=o("a8ecafe71e21295d1184"),b=o("dde7c1ae034e12bce98a"),S=o("1017580665ebda702ba4"),I=o("bbdbd7ce4b2cfe2c4547"),T=o("da33f9708fbb4cc901ff"),P=o("648f39bb5d52ff46b948"),D=o("c4e1172cd86cf1507638"),U=o("c815b7eba88e00c1c07a").fastKey,Y=o("8e52fe7d9c78070c4cb8"),K=D?"_s":"size",X=function(W,j){var Q=U(j),ne;if(Q!=="F")return W._i[Q];for(ne=W._f;ne;ne=ne.n)if(ne.k==j)return ne};A.exports={getConstructor:function(W,j,Q,ne){var ce=W(function(ee,B){b(ee,ce,j,"_i"),ee._t=j,ee._i=v(null),ee._f=void 0,ee._l=void 0,ee[K]=0,B!=null&&S(B,Q,ee[ne],ee)});return g(ce.prototype,{clear:function(){for(var B=Y(this,j),$=B._i,oe=B._f;oe;oe=oe.n)oe.r=!0,oe.p&&(oe.p=oe.p.n=void 0),delete $[oe.i];B._f=B._l=void 0,B[K]=0},delete:function(ee){var B=Y(this,j),$=X(B,ee);if($){var oe=$.n,Se=$.p;delete B._i[$.i],$.r=!0,Se&&(Se.n=oe),oe&&(oe.p=Se),B._f==$&&(B._f=oe),B._l==$&&(B._l=Se),B[K]--}return!!$},forEach:function(B){Y(this,j);for(var $=m(B,arguments.length>1?arguments[1]:void 0,3),oe;oe=oe?oe.n:this._f;)for($(oe.v,oe.k,this);oe&&oe.r;)oe=oe.p},has:function(B){return!!X(Y(this,j),B)}}),D&&h(ce.prototype,"size",{get:function(){return Y(this,j)[K]}}),ce},def:function(W,j,Q){var ne=X(W,j),ce,ee;return ne?ne.v=Q:(W._l=ne={i:ee=U(j,!0),k:j,v:Q,p:ce=W._l,n:void 0,r:!1},W._f||(W._f=ne),ce&&(ce.n=ne),W[K]++,ee!=="F"&&(W._i[ee]=ne)),W},getEntry:X,setStrong:function(W,j,Q){I(W,j,function(ne,ce){this._t=Y(ne,j),this._k=ce,this._l=void 0},function(){for(var ne=this,ce=ne._k,ee=ne._l;ee&&ee.r;)ee=ee.p;return!ne._t||!(ne._l=ee=ee?ee.n:ne._t._f)?(ne._t=void 0,T(1)):ce=="keys"?T(0,ee.k):ce=="values"?T(0,ee.v):T(0,[ee.k,ee.v])},Q?"entries":"values",!Q,!0),P(j)}}},"837318cf930116dad7c8":function(A,M,o){"use strict";var h=o("03cdf004f8ef8c702f67"),v={};v[o("fdf9ec15fb80cd9b8df9")("toStringTag")]="z",v+""!="[object z]"&&o("26949bccb98fdb02c86a")(Object.prototype,"toString",function(){return"[object "+h(this)+"]"},!0)},"84295a61134fb8a1951a":function(A,M){},"84d82b5c4ddfe5af2850":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("47b1068e56d5f6625317"),g=o("3293ee358506ec9b7d32"),m=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(g);h(h.P+h.F*m,"String",{padStart:function(S){return v(this,S,arguments.length>1?arguments[1]:void 0,!0)}})},"85603e2079f30ad6951f":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Math",{log10:function(g){return Math.log(g)*Math.LOG10E}})},"859560fdf58f03d5af41":function(A,M){},"86cbdc6ff16180d66de4":function(A,M,o){"use strict";var h=o("7964b54be5616e0032b3"),v=o("dff1687ed27eabf28b37"),g=o("87ca1990df7e5ce5f6d4");A.exports=[].copyWithin||function(b,S){var I=h(this),T=g(I.length),P=v(b,T),D=v(S,T),U=arguments.length>2?arguments[2]:void 0,Y=Math.min((U===void 0?T:v(U,T))-D,T-P),K=1;for(D<P&&P<D+Y&&(K=-1,D+=Y-1,P+=Y-1);Y-- >0;)D in I?I[P]=I[D]:delete I[P],P+=K,D+=K;return I}},"86db799eb9110d390c68":function(A,M,o){"use strict";var h=o("126be16bb2f5f1c18403"),v=Date.prototype.getTime,g=Date.prototype.toISOString,m=function(b){return b>9?b:"0"+b};A.exports=h(function(){return g.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!h(function(){g.call(new Date(NaN))})?function(){if(!isFinite(v.call(this)))throw RangeError("Invalid time value");var S=this,I=S.getUTCFullYear(),T=S.getUTCMilliseconds(),P=I<0?"-":I>9999?"+":"";return P+("00000"+Math.abs(I)).slice(P?-6:-4)+"-"+m(S.getUTCMonth()+1)+"-"+m(S.getUTCDate())+"T"+m(S.getUTCHours())+":"+m(S.getUTCMinutes())+":"+m(S.getUTCSeconds())+"."+(T>99?T:"0"+m(T))+"Z"}:g},"87ca1990df7e5ce5f6d4":function(A,M,o){var h=o("6ae02b075e3300a8a961"),v=Math.min;A.exports=function(g){return g>0?v(h(g),9007199254740991):0}},"87f7dcf567f6cc8e89ee":function(A,M,o){var h=o("1f598190b9f7d363a1ea"),v=o("a7e34d1f69e759ea99df"),g=o("e90a439132e6e571e548"),m=o("94518b50dd5935e8bc0c"),b=o("bc24726cb33e61794014"),S="prototype",I=function(T,P,D){var U=T&I.F,Y=T&I.G,K=T&I.S,X=T&I.P,W=T&I.B,j=T&I.W,Q=Y?v:v[P]||(v[P]={}),ne=Q[S],ce=Y?h:K?h[P]:(h[P]||{})[S],ee,B,$;Y&&(D=P);for(ee in D)B=!U&&ce&&ce[ee]!==void 0,!(B&&b(Q,ee))&&($=B?ce[ee]:D[ee],Q[ee]=Y&&typeof ce[ee]!="function"?D[ee]:W&&B?g($,h):j&&ce[ee]==$?function(oe){var Se=function(Fe,ct,He){if(this instanceof oe){switch(arguments.length){case 0:return new oe;case 1:return new oe(Fe);case 2:return new oe(Fe,ct)}return new oe(Fe,ct,He)}return oe.apply(this,arguments)};return Se[S]=oe[S],Se}($):X&&typeof $=="function"?g(Function.call,$):$,X&&((Q.virtual||(Q.virtual={}))[ee]=$,T&I.R&&ne&&!ne[ee]&&m(ne,ee,$)))};I.F=1,I.G=2,I.S=4,I.P=8,I.B=16,I.W=32,I.U=64,I.R=128,A.exports=I},"88316eefdd880aab6b3c":function(A,M){A.exports=function(o){try{return{e:!1,v:o()}}catch(h){return{e:!0,v:h}}}},"88734153ed272633da95":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Number",{isNaN:function(g){return g!=g}})},"887fb8f78bb3b846744d":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Math",{sign:o("04ee658d61b391909b37")})},"89231cc2992cc1e35cc8":function(A,M,o){"use strict";const h={PENDING:"pending",STOPPED:"stopped",IN_PROGRESS:"in_progress",ON_REVIEW:"on_review",REVIEW_COMPLETED:"review_completed",COMPLETED:"completed"},v={ALL:"all",EDIT_ALL:"edit_all",VIEW_ALL_EDIT_OWN:"view_all_edit_own",ONLY_OWN:"only_own"},g={ALL:"all",OWN_AND_LABELER:"own_and_labeler",ONLY_LABELER:"only_labeler"},m={ALL:"all",ONLY_OWN:"only_own"},b={ALL:"all",ONLY_OWN:"only_own"},S={BY_NAME:"by_name",RANDOMLY:"randomly"},I={ALL:"all",UNMARKED:"unmarked"}},"8925210aa0f0d3044001":function(A,M,o){var h=o("45e95ff7deb186b1032c"),v=o("0c6bdb2f1e107b092ad8"),g=o("344a6b9a921b83349b58");A.exports=function(m,b){if(h(m),v(b)&&b.constructor===m)return b;var S=g.f(m),I=S.resolve;return I(b),S.promise}},"89d7075fd9d79fd622e8":function(A,M,o){o("8eadb87ba4b827949806"),A.exports=o("04aabd2475089fa3cacd").String.trimRight},"89da558eb419a20b34fa":function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("8fb00be6cf2428299325");h(h.G+h.F*(parseInt!=v),{parseInt:v})},"89fc59158ec6ce874009":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("1ba25d39d0ba5c9fa8cc")(!1);h(h.P,"String",{codePointAt:function(m){return v(this,m)}})},"8a5451793be8532373e7":function(A,M,o){"use strict";(function(h){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/var v=o("c85ee313f17239f27581"),g=o("0fa305f27f1c8e9bde24"),m=o("d6ba6c9daf4e147c1764");M.Buffer=T,M.SlowBuffer=ne,M.INSPECT_MAX_BYTES=50,T.TYPED_ARRAY_SUPPORT=h.TYPED_ARRAY_SUPPORT!==void 0?h.TYPED_ARRAY_SUPPORT:b(),M.kMaxLength=S();function b(){try{var q=new Uint8Array(1);return q.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},q.foo()===42&&typeof q.subarray=="function"&&q.subarray(1,1).byteLength===0}catch{return!1}}function S(){return T.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function I(q,F){if(S()<F)throw new RangeError("Invalid typed array length");return T.TYPED_ARRAY_SUPPORT?(q=new Uint8Array(F),q.__proto__=T.prototype):(q===null&&(q=new T(F)),q.length=F),q}function T(q,F,N){if(!T.TYPED_ARRAY_SUPPORT&&!(this instanceof T))return new T(q,F,N);if(typeof q=="number"){if(typeof F=="string")throw new Error("If encoding is specified then the first argument must be a string");return Y(this,q)}return P(this,q,F,N)}T.poolSize=8192,T._augment=function(q){return q.__proto__=T.prototype,q};function P(q,F,N,le){if(typeof F=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&F instanceof ArrayBuffer?W(q,F,N,le):typeof F=="string"?K(q,F,N):j(q,F)}T.from=function(q,F,N){return P(null,q,F,N)},T.TYPED_ARRAY_SUPPORT&&(T.prototype.__proto__=Uint8Array.prototype,T.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&T[Symbol.species]===T&&Object.defineProperty(T,Symbol.species,{value:null,configurable:!0}));function D(q){if(typeof q!="number")throw new TypeError('"size" argument must be a number');if(q<0)throw new RangeError('"size" argument must not be negative')}function U(q,F,N,le){return D(F),F<=0?I(q,F):N!==void 0?typeof le=="string"?I(q,F).fill(N,le):I(q,F).fill(N):I(q,F)}T.alloc=function(q,F,N){return U(null,q,F,N)};function Y(q,F){if(D(F),q=I(q,F<0?0:Q(F)|0),!T.TYPED_ARRAY_SUPPORT)for(var N=0;N<F;++N)q[N]=0;return q}T.allocUnsafe=function(q){return Y(null,q)},T.allocUnsafeSlow=function(q){return Y(null,q)};function K(q,F,N){if((typeof N!="string"||N==="")&&(N="utf8"),!T.isEncoding(N))throw new TypeError('"encoding" must be a valid string encoding');var le=ce(F,N)|0;q=I(q,le);var Oe=q.write(F,N);return Oe!==le&&(q=q.slice(0,Oe)),q}function X(q,F){var N=F.length<0?0:Q(F.length)|0;q=I(q,N);for(var le=0;le<N;le+=1)q[le]=F[le]&255;return q}function W(q,F,N,le){if(F.byteLength,N<0||F.byteLength<N)throw new RangeError("'offset' is out of bounds");if(F.byteLength<N+(le||0))throw new RangeError("'length' is out of bounds");return N===void 0&&le===void 0?F=new Uint8Array(F):le===void 0?F=new Uint8Array(F,N):F=new Uint8Array(F,N,le),T.TYPED_ARRAY_SUPPORT?(q=F,q.__proto__=T.prototype):q=X(q,F),q}function j(q,F){if(T.isBuffer(F)){var N=Q(F.length)|0;return q=I(q,N),q.length===0||F.copy(q,0,0,N),q}if(F){if(typeof ArrayBuffer<"u"&&F.buffer instanceof ArrayBuffer||"length"in F)return typeof F.length!="number"||ki(F.length)?I(q,0):X(q,F);if(F.type==="Buffer"&&m(F.data))return X(q,F.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Q(q){if(q>=S())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S().toString(16)+" bytes");return q|0}function ne(q){return+q!=q&&(q=0),T.alloc(+q)}T.isBuffer=function(F){return!!(F!=null&&F._isBuffer)},T.compare=function(F,N){if(!T.isBuffer(F)||!T.isBuffer(N))throw new TypeError("Arguments must be Buffers");if(F===N)return 0;for(var le=F.length,Oe=N.length,re=0,ie=Math.min(le,Oe);re<ie;++re)if(F[re]!==N[re]){le=F[re],Oe=N[re];break}return le<Oe?-1:Oe<le?1:0},T.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(F,N){if(!m(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return T.alloc(0);var le;if(N===void 0)for(N=0,le=0;le<F.length;++le)N+=F[le].length;var Oe=T.allocUnsafe(N),re=0;for(le=0;le<F.length;++le){var ie=F[le];if(!T.isBuffer(ie))throw new TypeError('"list" argument must be an Array of Buffers');ie.copy(Oe,re),re+=ie.length}return Oe};function ce(q,F){if(T.isBuffer(q))return q.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(q)||q instanceof ArrayBuffer))return q.byteLength;typeof q!="string"&&(q=""+q);var N=q.length;if(N===0)return 0;for(var le=!1;;)switch(F){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":case void 0:return ai(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return Yn(q).length;default:if(le)return ai(q).length;F=(""+F).toLowerCase(),le=!0}}T.byteLength=ce;function ee(q,F,N){var le=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,F>>>=0,N<=F))return"";for(q||(q="utf8");;)switch(q){case"hex":return Ce(this,F,N);case"utf8":case"utf-8":return Ye(this,F,N);case"ascii":return Ie(this,F,N);case"latin1":case"binary":return be(this,F,N);case"base64":return Ve(this,F,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ue(this,F,N);default:if(le)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),le=!0}}T.prototype._isBuffer=!0;function B(q,F,N){var le=q[F];q[F]=q[N],q[N]=le}T.prototype.swap16=function(){var F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<F;N+=2)B(this,N,N+1);return this},T.prototype.swap32=function(){var F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<F;N+=4)B(this,N,N+3),B(this,N+1,N+2);return this},T.prototype.swap64=function(){var F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<F;N+=8)B(this,N,N+7),B(this,N+1,N+6),B(this,N+2,N+5),B(this,N+3,N+4);return this},T.prototype.toString=function(){var F=this.length|0;return F===0?"":arguments.length===0?Ye(this,0,F):ee.apply(this,arguments)},T.prototype.equals=function(F){if(!T.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:T.compare(this,F)===0},T.prototype.inspect=function(){var F="",N=M.INSPECT_MAX_BYTES;return this.length>0&&(F=this.toString("hex",0,N).match(/.{2}/g).join(" "),this.length>N&&(F+=" ... ")),"<Buffer "+F+">"},T.prototype.compare=function(F,N,le,Oe,re){if(!T.isBuffer(F))throw new TypeError("Argument must be a Buffer");if(N===void 0&&(N=0),le===void 0&&(le=F?F.length:0),Oe===void 0&&(Oe=0),re===void 0&&(re=this.length),N<0||le>F.length||Oe<0||re>this.length)throw new RangeError("out of range index");if(Oe>=re&&N>=le)return 0;if(Oe>=re)return-1;if(N>=le)return 1;if(N>>>=0,le>>>=0,Oe>>>=0,re>>>=0,this===F)return 0;for(var ie=re-Oe,De=le-N,je=Math.min(ie,De),pt=this.slice(Oe,re),Pt=F.slice(N,le),Lt=0;Lt<je;++Lt)if(pt[Lt]!==Pt[Lt]){ie=pt[Lt],De=Pt[Lt];break}return ie<De?-1:De<ie?1:0};function $(q,F,N,le,Oe){if(q.length===0)return-1;if(typeof N=="string"?(le=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,isNaN(N)&&(N=Oe?0:q.length-1),N<0&&(N=q.length+N),N>=q.length){if(Oe)return-1;N=q.length-1}else if(N<0)if(Oe)N=0;else return-1;if(typeof F=="string"&&(F=T.from(F,le)),T.isBuffer(F))return F.length===0?-1:oe(q,F,N,le,Oe);if(typeof F=="number")return F=F&255,T.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?Oe?Uint8Array.prototype.indexOf.call(q,F,N):Uint8Array.prototype.lastIndexOf.call(q,F,N):oe(q,[F],N,le,Oe);throw new TypeError("val must be string, number or Buffer")}function oe(q,F,N,le,Oe){var re=1,ie=q.length,De=F.length;if(le!==void 0&&(le=String(le).toLowerCase(),le==="ucs2"||le==="ucs-2"||le==="utf16le"||le==="utf-16le")){if(q.length<2||F.length<2)return-1;re=2,ie/=2,De/=2,N/=2}function je(cn,Xn){return re===1?cn[Xn]:cn.readUInt16BE(Xn*re)}var pt;if(Oe){var Pt=-1;for(pt=N;pt<ie;pt++)if(je(q,pt)===je(F,Pt===-1?0:pt-Pt)){if(Pt===-1&&(Pt=pt),pt-Pt+1===De)return Pt*re}else Pt!==-1&&(pt-=pt-Pt),Pt=-1}else for(N+De>ie&&(N=ie-De),pt=N;pt>=0;pt--){for(var Lt=!0,jt=0;jt<De;jt++)if(je(q,pt+jt)!==je(F,jt)){Lt=!1;break}if(Lt)return pt}return-1}T.prototype.includes=function(F,N,le){return this.indexOf(F,N,le)!==-1},T.prototype.indexOf=function(F,N,le){return $(this,F,N,le,!0)},T.prototype.lastIndexOf=function(F,N,le){return $(this,F,N,le,!1)};function Se(q,F,N,le){N=Number(N)||0;var Oe=q.length-N;le?(le=Number(le),le>Oe&&(le=Oe)):le=Oe;var re=F.length;if(re%2!==0)throw new TypeError("Invalid hex string");le>re/2&&(le=re/2);for(var ie=0;ie<le;++ie){var De=parseInt(F.substr(ie*2,2),16);if(isNaN(De))return ie;q[N+ie]=De}return ie}function Fe(q,F,N,le){return ei(ai(F,q.length-N),q,N,le)}function ct(q,F,N,le){return ei(hi(F),q,N,le)}function He(q,F,N,le){return ct(q,F,N,le)}function nt(q,F,N,le){return ei(Yn(F),q,N,le)}function Ae(q,F,N,le){return ei(Zn(F,q.length-N),q,N,le)}T.prototype.write=function(F,N,le,Oe){if(N===void 0)Oe="utf8",le=this.length,N=0;else if(le===void 0&&typeof N=="string")Oe=N,le=this.length,N=0;else if(isFinite(N))N=N|0,isFinite(le)?(le=le|0,Oe===void 0&&(Oe="utf8")):(Oe=le,le=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var re=this.length-N;if((le===void 0||le>re)&&(le=re),F.length>0&&(le<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");for(var ie=!1;;)switch(Oe){case"hex":return Se(this,F,N,le);case"utf8":case"utf-8":return Fe(this,F,N,le);case"ascii":return ct(this,F,N,le);case"latin1":case"binary":return He(this,F,N,le);case"base64":return nt(this,F,N,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ae(this,F,N,le);default:if(ie)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),ie=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ve(q,F,N){return F===0&&N===q.length?v.fromByteArray(q):v.fromByteArray(q.slice(F,N))}function Ye(q,F,N){N=Math.min(q.length,N);for(var le=[],Oe=F;Oe<N;){var re=q[Oe],ie=null,De=re>239?4:re>223?3:re>191?2:1;if(Oe+De<=N){var je,pt,Pt,Lt;switch(De){case 1:re<128&&(ie=re);break;case 2:je=q[Oe+1],(je&192)===128&&(Lt=(re&31)<<6|je&63,Lt>127&&(ie=Lt));break;case 3:je=q[Oe+1],pt=q[Oe+2],(je&192)===128&&(pt&192)===128&&(Lt=(re&15)<<12|(je&63)<<6|pt&63,Lt>2047&&(Lt<55296||Lt>57343)&&(ie=Lt));break;case 4:je=q[Oe+1],pt=q[Oe+2],Pt=q[Oe+3],(je&192)===128&&(pt&192)===128&&(Pt&192)===128&&(Lt=(re&15)<<18|(je&63)<<12|(pt&63)<<6|Pt&63,Lt>65535&&Lt<1114112&&(ie=Lt))}}ie===null?(ie=65533,De=1):ie>65535&&(ie-=65536,le.push(ie>>>10&1023|55296),ie=56320|ie&1023),le.push(ie),Oe+=De}return de(le)}var st=4096;function de(q){var F=q.length;if(F<=st)return String.fromCharCode.apply(String,q);for(var N="",le=0;le<F;)N+=String.fromCharCode.apply(String,q.slice(le,le+=st));return N}function Ie(q,F,N){var le="";N=Math.min(q.length,N);for(var Oe=F;Oe<N;++Oe)le+=String.fromCharCode(q[Oe]&127);return le}function be(q,F,N){var le="";N=Math.min(q.length,N);for(var Oe=F;Oe<N;++Oe)le+=String.fromCharCode(q[Oe]);return le}function Ce(q,F,N){var le=q.length;(!F||F<0)&&(F=0),(!N||N<0||N>le)&&(N=le);for(var Oe="",re=F;re<N;++re)Oe+=Fn(q[re]);return Oe}function Ue(q,F,N){for(var le=q.slice(F,N),Oe="",re=0;re<le.length;re+=2)Oe+=String.fromCharCode(le[re]+le[re+1]*256);return Oe}T.prototype.slice=function(F,N){var le=this.length;F=~~F,N=N===void 0?le:~~N,F<0?(F+=le,F<0&&(F=0)):F>le&&(F=le),N<0?(N+=le,N<0&&(N=0)):N>le&&(N=le),N<F&&(N=F);var Oe;if(T.TYPED_ARRAY_SUPPORT)Oe=this.subarray(F,N),Oe.__proto__=T.prototype;else{var re=N-F;Oe=new T(re,void 0);for(var ie=0;ie<re;++ie)Oe[ie]=this[ie+F]}return Oe};function Te(q,F,N){if(q%1!==0||q<0)throw new RangeError("offset is not uint");if(q+F>N)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUIntLE=function(F,N,le){F=F|0,N=N|0,le||Te(F,N,this.length);for(var Oe=this[F],re=1,ie=0;++ie<N&&(re*=256);)Oe+=this[F+ie]*re;return Oe},T.prototype.readUIntBE=function(F,N,le){F=F|0,N=N|0,le||Te(F,N,this.length);for(var Oe=this[F+--N],re=1;N>0&&(re*=256);)Oe+=this[F+--N]*re;return Oe},T.prototype.readUInt8=function(F,N){return N||Te(F,1,this.length),this[F]},T.prototype.readUInt16LE=function(F,N){return N||Te(F,2,this.length),this[F]|this[F+1]<<8},T.prototype.readUInt16BE=function(F,N){return N||Te(F,2,this.length),this[F]<<8|this[F+1]},T.prototype.readUInt32LE=function(F,N){return N||Te(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},T.prototype.readUInt32BE=function(F,N){return N||Te(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},T.prototype.readIntLE=function(F,N,le){F=F|0,N=N|0,le||Te(F,N,this.length);for(var Oe=this[F],re=1,ie=0;++ie<N&&(re*=256);)Oe+=this[F+ie]*re;return re*=128,Oe>=re&&(Oe-=Math.pow(2,8*N)),Oe},T.prototype.readIntBE=function(F,N,le){F=F|0,N=N|0,le||Te(F,N,this.length);for(var Oe=N,re=1,ie=this[F+--Oe];Oe>0&&(re*=256);)ie+=this[F+--Oe]*re;return re*=128,ie>=re&&(ie-=Math.pow(2,8*N)),ie},T.prototype.readInt8=function(F,N){return N||Te(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},T.prototype.readInt16LE=function(F,N){N||Te(F,2,this.length);var le=this[F]|this[F+1]<<8;return le&32768?le|4294901760:le},T.prototype.readInt16BE=function(F,N){N||Te(F,2,this.length);var le=this[F+1]|this[F]<<8;return le&32768?le|4294901760:le},T.prototype.readInt32LE=function(F,N){return N||Te(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},T.prototype.readInt32BE=function(F,N){return N||Te(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},T.prototype.readFloatLE=function(F,N){return N||Te(F,4,this.length),g.read(this,F,!0,23,4)},T.prototype.readFloatBE=function(F,N){return N||Te(F,4,this.length),g.read(this,F,!1,23,4)},T.prototype.readDoubleLE=function(F,N){return N||Te(F,8,this.length),g.read(this,F,!0,52,8)},T.prototype.readDoubleBE=function(F,N){return N||Te(F,8,this.length),g.read(this,F,!1,52,8)};function Le(q,F,N,le,Oe,re){if(!T.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>Oe||F<re)throw new RangeError('"value" argument is out of bounds');if(N+le>q.length)throw new RangeError("Index out of range")}T.prototype.writeUIntLE=function(F,N,le,Oe){if(F=+F,N=N|0,le=le|0,!Oe){var re=Math.pow(2,8*le)-1;Le(this,F,N,le,re,0)}var ie=1,De=0;for(this[N]=F&255;++De<le&&(ie*=256);)this[N+De]=F/ie&255;return N+le},T.prototype.writeUIntBE=function(F,N,le,Oe){if(F=+F,N=N|0,le=le|0,!Oe){var re=Math.pow(2,8*le)-1;Le(this,F,N,le,re,0)}var ie=le-1,De=1;for(this[N+ie]=F&255;--ie>=0&&(De*=256);)this[N+ie]=F/De&255;return N+le},T.prototype.writeUInt8=function(F,N,le){return F=+F,N=N|0,le||Le(this,F,N,1,255,0),T.TYPED_ARRAY_SUPPORT||(F=Math.floor(F)),this[N]=F&255,N+1};function yt(q,F,N,le){F<0&&(F=65535+F+1);for(var Oe=0,re=Math.min(q.length-N,2);Oe<re;++Oe)q[N+Oe]=(F&255<<8*(le?Oe:1-Oe))>>>(le?Oe:1-Oe)*8}T.prototype.writeUInt16LE=function(F,N,le){return F=+F,N=N|0,le||Le(this,F,N,2,65535,0),T.TYPED_ARRAY_SUPPORT?(this[N]=F&255,this[N+1]=F>>>8):yt(this,F,N,!0),N+2},T.prototype.writeUInt16BE=function(F,N,le){return F=+F,N=N|0,le||Le(this,F,N,2,65535,0),T.TYPED_ARRAY_SUPPORT?(this[N]=F>>>8,this[N+1]=F&255):yt(this,F,N,!1),N+2};function Mt(q,F,N,le){F<0&&(F=4294967295+F+1);for(var Oe=0,re=Math.min(q.length-N,4);Oe<re;++Oe)q[N+Oe]=F>>>(le?Oe:3-Oe)*8&255}T.prototype.writeUInt32LE=function(F,N,le){return F=+F,N=N|0,le||Le(this,F,N,4,4294967295,0),T.TYPED_ARRAY_SUPPORT?(this[N+3]=F>>>24,this[N+2]=F>>>16,this[N+1]=F>>>8,this[N]=F&255):Mt(this,F,N,!0),N+4},T.prototype.writeUInt32BE=function(F,N,le){return F=+F,N=N|0,le||Le(this,F,N,4,4294967295,0),T.TYPED_ARRAY_SUPPORT?(this[N]=F>>>24,this[N+1]=F>>>16,this[N+2]=F>>>8,this[N+3]=F&255):Mt(this,F,N,!1),N+4},T.prototype.writeIntLE=function(F,N,le,Oe){if(F=+F,N=N|0,!Oe){var re=Math.pow(2,8*le-1);Le(this,F,N,le,re-1,-re)}var ie=0,De=1,je=0;for(this[N]=F&255;++ie<le&&(De*=256);)F<0&&je===0&&this[N+ie-1]!==0&&(je=1),this[N+ie]=(F/De>>0)-je&255;return N+le},T.prototype.writeIntBE=function(F,N,le,Oe){if(F=+F,N=N|0,!Oe){var re=Math.pow(2,8*le-1);Le(this,F,N,le,re-1,-re)}var ie=le-1,De=1,je=0;for(this[N+ie]=F&255;--ie>=0&&(De*=256);)F<0&&je===0&&this[N+ie+1]!==0&&(je=1),this[N+ie]=(F/De>>0)-je&255;return N+le},T.prototype.writeInt8=function(F,N,le){return F=+F,N=N|0,le||Le(this,F,N,1,127,-128),T.TYPED_ARRAY_SUPPORT||(F=Math.floor(F)),F<0&&(F=255+F+1),this[N]=F&255,N+1},T.prototype.writeInt16LE=function(F,N,le){return F=+F,N=N|0,le||Le(this,F,N,2,32767,-32768),T.TYPED_ARRAY_SUPPORT?(this[N]=F&255,this[N+1]=F>>>8):yt(this,F,N,!0),N+2},T.prototype.writeInt16BE=function(F,N,le){return F=+F,N=N|0,le||Le(this,F,N,2,32767,-32768),T.TYPED_ARRAY_SUPPORT?(this[N]=F>>>8,this[N+1]=F&255):yt(this,F,N,!1),N+2},T.prototype.writeInt32LE=function(F,N,le){return F=+F,N=N|0,le||Le(this,F,N,4,2147483647,-2147483648),T.TYPED_ARRAY_SUPPORT?(this[N]=F&255,this[N+1]=F>>>8,this[N+2]=F>>>16,this[N+3]=F>>>24):Mt(this,F,N,!0),N+4},T.prototype.writeInt32BE=function(F,N,le){return F=+F,N=N|0,le||Le(this,F,N,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),T.TYPED_ARRAY_SUPPORT?(this[N]=F>>>24,this[N+1]=F>>>16,this[N+2]=F>>>8,this[N+3]=F&255):Mt(this,F,N,!1),N+4};function $t(q,F,N,le,Oe,re){if(N+le>q.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function on(q,F,N,le,Oe){return Oe||$t(q,F,N,4,34028234663852886e22,-34028234663852886e22),g.write(q,F,N,le,23,4),N+4}T.prototype.writeFloatLE=function(F,N,le){return on(this,F,N,!0,le)},T.prototype.writeFloatBE=function(F,N,le){return on(this,F,N,!1,le)};function un(q,F,N,le,Oe){return Oe||$t(q,F,N,8,17976931348623157e292,-17976931348623157e292),g.write(q,F,N,le,52,8),N+8}T.prototype.writeDoubleLE=function(F,N,le){return un(this,F,N,!0,le)},T.prototype.writeDoubleBE=function(F,N,le){return un(this,F,N,!1,le)},T.prototype.copy=function(F,N,le,Oe){if(le||(le=0),!Oe&&Oe!==0&&(Oe=this.length),N>=F.length&&(N=F.length),N||(N=0),Oe>0&&Oe<le&&(Oe=le),Oe===le||F.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(le<0||le>=this.length)throw new RangeError("sourceStart out of bounds");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),F.length-N<Oe-le&&(Oe=F.length-N+le);var re=Oe-le,ie;if(this===F&&le<N&&N<Oe)for(ie=re-1;ie>=0;--ie)F[ie+N]=this[ie+le];else if(re<1e3||!T.TYPED_ARRAY_SUPPORT)for(ie=0;ie<re;++ie)F[ie+N]=this[ie+le];else Uint8Array.prototype.set.call(F,this.subarray(le,le+re),N);return re},T.prototype.fill=function(F,N,le,Oe){if(typeof F=="string"){if(typeof N=="string"?(Oe=N,N=0,le=this.length):typeof le=="string"&&(Oe=le,le=this.length),F.length===1){var re=F.charCodeAt(0);re<256&&(F=re)}if(Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!T.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe)}else typeof F=="number"&&(F=F&255);if(N<0||this.length<N||this.length<le)throw new RangeError("Out of range index");if(le<=N)return this;N=N>>>0,le=le===void 0?this.length:le>>>0,F||(F=0);var ie;if(typeof F=="number")for(ie=N;ie<le;++ie)this[ie]=F;else{var De=T.isBuffer(F)?F:ai(new T(F,Oe).toString()),je=De.length;for(ie=0;ie<le-N;++ie)this[ie+N]=De[ie%je]}return this};var Bn=/[^+\/0-9A-Za-z-_]/g;function qn(q){if(q=Rn(q).replace(Bn,""),q.length<2)return"";for(;q.length%4!==0;)q=q+"=";return q}function Rn(q){return q.trim?q.trim():q.replace(/^\s+|\s+$/g,"")}function Fn(q){return q<16?"0"+q.toString(16):q.toString(16)}function ai(q,F){F=F||1/0;for(var N,le=q.length,Oe=null,re=[],ie=0;ie<le;++ie){if(N=q.charCodeAt(ie),N>55295&&N<57344){if(!Oe){if(N>56319){(F-=3)>-1&&re.push(239,191,189);continue}else if(ie+1===le){(F-=3)>-1&&re.push(239,191,189);continue}Oe=N;continue}if(N<56320){(F-=3)>-1&&re.push(239,191,189),Oe=N;continue}N=(Oe-55296<<10|N-56320)+65536}else Oe&&(F-=3)>-1&&re.push(239,191,189);if(Oe=null,N<128){if((F-=1)<0)break;re.push(N)}else if(N<2048){if((F-=2)<0)break;re.push(N>>6|192,N&63|128)}else if(N<65536){if((F-=3)<0)break;re.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((F-=4)<0)break;re.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return re}function hi(q){for(var F=[],N=0;N<q.length;++N)F.push(q.charCodeAt(N)&255);return F}function Zn(q,F){for(var N,le,Oe,re=[],ie=0;ie<q.length&&!((F-=2)<0);++ie)N=q.charCodeAt(ie),le=N>>8,Oe=N%256,re.push(Oe),re.push(le);return re}function Yn(q){return v.toByteArray(qn(q))}function ei(q,F,N,le){for(var Oe=0;Oe<le&&!(Oe+N>=F.length||Oe>=q.length);++Oe)F[Oe+N]=q[Oe];return Oe}function ki(q){return q!==q}}).call(this,o("d8a2b18087957e350ade"))},"8a9c7e9ee5e3f7caeb76":function(A,M,o){o("3c57b024b26022754cbd")("Uint32",4,function(h){return function(g,m,b){return h(this,g,m,b)}})},"8be8cdc11a00d01b3161":function(A,M,o){o("3c57b024b26022754cbd")("Int8",1,function(h){return function(g,m,b){return h(this,g,m,b)}})},"8d4bcdca9e41ff6073d3":function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("126be16bb2f5f1c18403"),g=o("c15b1b5fb34fea6d7f41"),m=1 .toPrecision;h(h.P+h.F*(v(function(){return m.call(1,void 0)!=="1"})||!v(function(){m.call({})})),"Number",{toPrecision:function(S){var I=g(this,"Number#toPrecision: incorrect invocation!");return S===void 0?m.call(I):m.call(I,S)}})},"8e52fe7d9c78070c4cb8":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8");A.exports=function(v,g){if(!h(v)||v._t!==g)throw TypeError("Incompatible receiver, "+g+" required!");return v}},"8eadb87ba4b827949806":function(A,M,o){"use strict";o("3ed595a38226ae2a3783")("trimRight",function(h){return function(){return h(this,2)}},"trimEnd")},"8fb00be6cf2428299325":function(A,M,o){var h=o("e9323032e98511a09e82").parseInt,v=o("3ed595a38226ae2a3783").trim,g=o("5711e5187c61473cfa4a"),m=/^[-+]?0[xX]/;A.exports=h(g+"08")!==8||h(g+"0x16")!==22?function(S,I){var T=v(String(S),3);return h(T,I>>>0||(m.test(T)?16:10))}:h},"9019a25da5c83bba91f5":function(A,M,o){var h=o("7964b54be5616e0032b3"),v=o("2fc08ef14d334fbecb33");o("de1b22d97612a36416e3")("keys",function(){return function(m){return v(h(m))}})},"90a3d97e5a4a4439345b":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8"),v=o("a4bb2f14abe3755fd395"),g=o("fdf9ec15fb80cd9b8df9")("species");A.exports=function(m){var b;return v(m)&&(b=m.constructor,typeof b=="function"&&(b===Array||v(b.prototype))&&(b=void 0),h(b)&&(b=b[g],b===null&&(b=void 0))),b===void 0?Array:b}},"91d22327985d5da62a58":function(A,M,o){o("3c57b024b26022754cbd")("Int16",2,function(h){return function(g,m,b){return h(this,g,m,b)}})},"931ac916c4b89621b3bd":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8"),v=o("45e95ff7deb186b1032c"),g=function(m,b){if(v(m),!h(b)&&b!==null)throw TypeError(b+": can't set as prototype!")};A.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(m,b,S){try{S=o("a8ecafe71e21295d1184")(Function.call,o("3c1abcaf432651c852c0").f(Object.prototype,"__proto__").set,2),S(m,[]),b=!(m instanceof Array)}catch{b=!0}return function(T,P){return g(T,P),b?T.__proto__=P:S(T,P),T}}({},!1):void 0),check:g}},"94518b50dd5935e8bc0c":function(A,M,o){var h=o("82b90a171187cb4c04e7"),v=o("c94cacefb6126448a6ae");A.exports=o("36dcda5e30871a360b8c")?function(g,m,b){return h.f(g,m,v(1,b))}:function(g,m,b){return g[m]=b,g}},"95922b3ca6d07125e633":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Math",{clz32:function(g){return(g>>>=0)?31-Math.floor(Math.log(g+.5)*Math.LOG2E):32}})},"971815932f7a815ff1bc":function(A,M,o){o("3c57b024b26022754cbd")("Float32",4,function(h){return function(g,m,b){return h(this,g,m,b)}})},"97a1e10f13654fb102b2":function(A,M,o){var h=o("fdf9ec15fb80cd9b8df9")("toPrimitive"),v=Date.prototype;h in v||o("fa9e288138e317a7a504")(v,h,o("0d987979b708b96c588c"))},"97d0c7cef3162c18013d":function(A,M){A.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"98397d66c772b34a0217":function(A,M){},"989a42060903e47c0cff":function(A,M,o){"use strict";o.d(M,"b",function(){return v}),o.d(M,"c",function(){return g}),o.d(M,"a",function(){return S});const h={REPLACE:"replace",IGNORE:"ignore"},v={QUEUED:"queued",CONSUMED:"consumed",STARTED:"started",DEPLOYED:"deployed",ERROR:"error",FINISHED:"finished",TERMINATING:"terminating",STOPPED:"stopped"},g={CLONE:"clone",IMPORT:"import",IMPORT_AGENT:"import_agent",EXPORT:"export",BACKUP:"backup",RESTORE:"restore",REMOVE:"remove",TRAIN:"train",INFERENCE:"inference",SMART_TOOL:"smarttool",DEPLOY_MODEL:"infer_rpc",UPLOAD_MODEL:"upload_model",UPLOAD_IMAGES:"upload_images",CLEANUP:"cleanup",CLEAN_CHECKPOINTS:"clean_checkpoints",CUSTOM:"custom",PIPELINE:"pipeline",EXPORT_NOTEBOOK:"export_notebook",UPDATE_AGENT:"update_agent",PYTHON:"python",APP:"app",APP_GPU:"app_gpu",REFRESH_ECOSYSTEM:"refresh_ecosystem",INTERNAL:"internal"},m={ON_ERROR:"on_error",NEVER:"never"},b={OLD_TRAIN_METRICS:"train-metrics.json",OLD_LOGS:"logs.json",TRAIN_METRICS:"train-metrics.txt",LOGS:"logs.txt"},S=new Set([g.IMPORT,g.IMPORT_AGENT,g.EXPORT,g.TRAIN,g.INFERENCE,g.DEPLOY_MODEL,g.CUSTOM,g.PIPELINE,g.PYTHON,g.APP,g.APP_GPU]),I=new Set([g.CLONE,g.BACKUP,g.RESTORE,g.REMOVE,g.EXPORT_NOTEBOOK]),T=new Set([g.CLEANUP]),P=new Set([g.DEPLOY_MODEL,g.SMART_TOOL,g.APP]),D=new Set([g.APP,g.APP_GPU])},"999f40c905f47478492e":function(A,M,o){o("84d82b5c4ddfe5af2850"),A.exports=o("04aabd2475089fa3cacd").String.padStart},"9a9b9b189abb97798865":function(A,M,o){"use strict";var h=o("b3d2c7eadca68a717069"),v=o.n(h),g=v.a},"9b4be2be45237b9b063c":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},"9ba7c6b5067bc2a0c49c":function(A,M){A.exports=function(o,h){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:h}}},"9bbb799f204bee898f0a":function(A,M,o){var h=o("0c6bdb2f1e107b092ad8");A.exports=function(v,g){if(!h(v))return v;var m,b;if(g&&typeof(m=v.toString)=="function"&&!h(b=m.call(v))||typeof(m=v.valueOf)=="function"&&!h(b=m.call(v))||!g&&typeof(m=v.toString)=="function"&&!h(b=m.call(v)))return b;throw TypeError("Can't convert object to primitive value")}},"9c896fb6926f77e30ea1":function(A,M,o){"use strict";var h=o("00f83bf39a29e0b57d1f"),v=o.n(h),g=o("c4ff9fc90ae775b45209");const m={IMPORT:"import",DTL:"dtl",TRAIN:"train",INFERENCE:"inference",CUSTOM:"custom",PIPELINE:"pipeline",PYTHON:"python"},b={...Object(h.omit)(m,"PIPELINE")},S={[m.TRAIN]:g.a.ARCHITECTURE,[m.INFERENCE]:g.a.ARCHITECTURE,[m.IMPORT]:g.a.IMPORT,[m.DTL]:g.a.DTL,[m.CUSTOM]:g.a.CUSTOM}},"9cfb42aa9f0141d2f922":function(A,M,o){"use strict";o("78937e5a384dd7a10b59");var h=o("45e95ff7deb186b1032c"),v=o("3a4f8a76cd0489772f71"),g=o("c4e1172cd86cf1507638"),m="toString",b=/./[m],S=function(I){o("26949bccb98fdb02c86a")(RegExp.prototype,m,I,!0)};o("126be16bb2f5f1c18403")(function(){return b.call({source:"a",flags:"b"})!="/a/b"})?S(function(){var T=h(this);return"/".concat(T.source,"/","flags"in T?T.flags:!g&&T instanceof RegExp?v.call(T):void 0)}):b.name!=m&&S(function(){return b.call(this)})},"9d404a039029e9c320b2":function(A,M,o){"use strict";Object.defineProperty(M,"__esModule",{value:!0});function h(v,g,m){let b=0,S=v.length;for(;S>0;){const I=S/2|0;let T=b+I;m(v[T],g)<=0?(b=++T,S-=I+1):S=I}return b}M.default=h},"9d50a62ba428c5ce2b9a":function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S+h.F*!o("c4e1172cd86cf1507638"),"Object",{defineProperty:o("f8cf2e7afd370478f99e").f})},"9dad27de754d976db0f7":function(A,M,o){"use strict";A.exports=function(h){h.prototype[Symbol.iterator]=function*(){for(let v=this.head;v;v=v.next)yield v.value}}},"9e0829ebb5f4d9754370":function(A,M,o){"use strict";var h=o("1b726e7ce4061546ecfc"),v=o("d93711b385e8c0def2ac"),g=o("7d074b0d47dd6102152e");o.d(M,"GEOMETRY_TYPES",function(){return g.a});var m=o("faf7059dd6c86b16a85c"),b=o("9c896fb6926f77e30ea1"),S=o("1c84413533b434a33065"),I=o("d11cd0540728c616a05b"),T=o("84295a61134fb8a1951a"),P=o.n(T);o.o(T,"TASK_STATUS")&&o.d(M,"TASK_STATUS",function(){return T.TASK_STATUS});var D=o("5fe27eddff92ec2dbac5"),U=o("edd4df3a18a3d3cf7c09"),Y=o("aeebf6797391ce13e889"),K=o("989a42060903e47c0cff");o.d(M,"TASK_STATUS",function(){return K.b});var X=o("007e2f901f143b0063bb"),W=o("859560fdf58f03d5af41"),j=o.n(W),Q=o("2e899ef6b64c1edfb532"),ne=o.n(Q),ce=o("59f1b6605b24f530994c"),ee=o.n(ce),B=o("10056bba30cd518ff6cb"),$=o("015c0de8729d1accb6db"),oe=o.n($),Se=o("21c9b9dc8d994c745f44"),Fe=o.n(Se),ct=o("2132b7a92754e3fc960f"),He=o("59548a76725c1a44390b"),nt=o("1f24b1c1631adced2f18"),Ae=o("503c1434b44b1a06d784"),Ve=o.n(Ae),Ye=o("26015173042bd44a5ea1"),st=o.n(Ye),de=o("79036b6f230fe5b6ba23"),Ie=o("3a4039aaa40cb7a7a7ef"),be=o("2ecd84c8cd25e23da709"),Ce=o.n(be),Ue=o("9e4337ea88e70979117d"),Te=o.n(Ue),Le=o("5354c482095f5ead6005"),yt=o("144a4c52161809512414"),Mt=o.n(yt),$t=o("98397d66c772b34a0217"),on=o.n($t),un=o("2552c24b020126fc6ce1"),Bn=o.n(un),qn=o("514c53a7f7ee5bb3f19c"),Rn=o.n(qn),Fn=o("23ffeadd01de75e61cb9"),ai=o.n(Fn),hi=o("89231cc2992cc1e35cc8"),Zn=o("d41ce8549e786ec2bfeb"),Yn=o("6d30f70e740934193417"),ei=o.n(Yn),ki=o("43f03bbf7c8e2a7f6ddf"),q=o.n(ki),F=o("1d38117166ab109cd06a"),N=o.n(F),le=o("c4ff9fc90ae775b45209"),Oe=o("4f5240ab2841b269e5a3"),re=o.n(Oe),ie=o("b3315b5da9c92a3db2ae"),De=o.n(ie),je=o("4ed4f586f2caef2fd7a7"),pt=o("dd1b049a7e602d219ec1"),Pt=o.n(pt),Lt=o("3d4013cb89bb50c024c0"),jt=o.n(Lt),cn=o("5d1a9382f9802de0586b"),Xn=o.n(cn),Li=o("50632b5842f0e33f1900"),zn=o.n(Li),Br=o("7f9c1fb802a7f39bc6fa"),Qn=o("19eb7b800fa77b859a22"),Rs=o.n(Qn),bs=o("b38020fb3d86f832c727"),xs=o.n(bs),ss=o("c2399cef222e655f5bdb"),oi=o("eb441efc9f353b9c4d0e"),Me=o.n(oi),it=o("47dee86e2dd0d0ba81b0"),$e=o("e22a1a004346ab38e697"),dt=o.n($e),Rt=o("117d0ed1e2d52362e335"),Bt=o.n(Rt),Un=o("26d753a9604d80c3170c"),Ai=o.n(Un),Ji=o("81db9e5bbfc9d79c382e"),Di=o.n(Ji),Ti=o("4d27b4350a6aceebaebf"),Ar=o("11df586ec83e36f29e62"),or=o("b51af69bbd93da5c2190"),oa=o.n(or),$r=o("a30cb7277f8871fc7b34"),ba=o.n($r),xa=o("41ad9bf124e8c96e655a"),ir=o.n(xa),Ks=o("213f26f2eeabf1ab6b8d"),as=o("66e4032f81bde6d04705"),Qt=o("6cd6cd0d97104941b84f"),Ft=o.n(Qt),mn=o("23113e976a9e8f622baf"),Gn=o("7829c6aaa67683b96e21"),Kn=o.n(Gn),Tr=o("b74079e17b74a7010ffb"),Wi=o("17d815db3d84abcca145"),hn=o.n(Wi)},"9e4337ea88e70979117d":function(A,M){},"9ecc4731eaeedd6a41c0":function(A,M,o){"use strict";var h=o("45e95ff7deb186b1032c"),v=o("87ca1990df7e5ce5f6d4"),g=o("d53b0841ddd3afd3477d"),m=o("cd27c57942366dd9e816");o("6e329e616ad9c45fb7bd")("match",1,function(b,S,I,T){return[function(D){var U=b(this),Y=D==null?void 0:D[S];return Y!==void 0?Y.call(D,U):new RegExp(D)[S](String(U))},function(P){var D=T(I,P,this);if(D.done)return D.value;var U=h(P),Y=String(this);if(!U.global)return m(U,Y);var K=U.unicode;U.lastIndex=0;for(var X=[],W=0,j;(j=m(U,Y))!==null;){var Q=String(j[0]);X[W]=Q,Q===""&&(U.lastIndex=g(Y,v(U.lastIndex),K)),W++}return W===0?null:X}]})},"9ed3fe8e5d6c7be2b02f":function(A,M,o){o("e87081fc956dfc3362c1"),o("35f042f04afc916e7b70"),o("febfb5ec5199ff3750ae"),A.exports=o("04aabd2475089fa3cacd")},"9f08e9001860e8298a1e":function(A,M,o){var h=o("f8cf2e7afd370478f99e").f,v=Function.prototype,g=/^\s*function ([^ (]*)/,m="name";m in v||o("c4e1172cd86cf1507638")&&h(v,m,{configurable:!0,get:function(){try{return(""+this).match(g)[1]}catch{return""}}})},a04bbd0adfe65b3c1c6b:function(A,M,o){"use strict";var h=o("c021bf2eaf2f2e721a6e"),v=o("0c6bdb2f1e107b092ad8"),g=o("170abb7a40430821904d"),m=[].slice,b={},S=function(I,T,P){if(!(T in b)){for(var D=[],U=0;U<T;U++)D[U]="a["+U+"]";b[T]=Function("F,a","return new F("+D.join(",")+")")}return b[T](I,P)};A.exports=Function.bind||function(T){var P=h(this),D=m.call(arguments,1),U=function(){var Y=D.concat(m.call(arguments));return this instanceof U?S(P,Y.length,Y):g(P,Y,T)};return v(P.prototype)&&(U.prototype=P.prototype),U}},a08f35325b69240b6708:function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("8fb00be6cf2428299325");h(h.S+h.F*(Number.parseInt!=v),"Number",{parseInt:v})},a30cb7277f8871fc7b34:function(A,M){},a4bb2f14abe3755fd395:function(A,M,o){var h=o("30b8e0406acca1d79148");A.exports=Array.isArray||function(g){return h(g)=="Array"}},a56e958956e5b051083f:function(A,M){for(var o=[],h=0;h<256;++h)o[h]=(h+256).toString(16).substr(1);function v(g,m){var b=m||0,S=o;return[S[g[b++]],S[g[b++]],S[g[b++]],S[g[b++]],"-",S[g[b++]],S[g[b++]],"-",S[g[b++]],S[g[b++]],"-",S[g[b++]],S[g[b++]],"-",S[g[b++]],S[g[b++]],S[g[b++]],S[g[b++]],S[g[b++]],S[g[b++]]].join("")}A.exports=v},a6838f960a4a720a39ef:function(A,M,o){A.exports=o("08135168150974c8d830")("native-function-to-string",Function.toString)},a76cc99c600b948806ec:function(A,M,o){var h=o("6ae02b075e3300a8a961"),v=o("87ca1990df7e5ce5f6d4");A.exports=function(g){if(g===void 0)return 0;var m=h(g),b=v(m);if(m!==b)throw RangeError("Wrong length!");return b}},a7e34d1f69e759ea99df:function(A,M){var o=A.exports={version:"2.6.12"};typeof __e=="number"&&(__e=o)},a8252bdb36ad211e45c8:function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Math",{fround:o("461c54c481961b5ed32b")})},a87f574281231bdc4f86:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("018197c10a6ce8e48027"),g=[].join;h(h.P+h.F*(o("ba5246ed31a79503d644")!=Object||!o("155fc47f5eef242ee51b")(g)),"Array",{join:function(b){return g.call(v(this),b===void 0?",":b)}})},a8aa164a5b18213dd613:function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("anchor",function(h){return function(g){return h(this,"a","name",g)}})},a8ecafe71e21295d1184:function(A,M,o){var h=o("c021bf2eaf2f2e721a6e");A.exports=function(v,g,m){if(h(v),g===void 0)return v;switch(m){case 1:return function(b){return v.call(g,b)};case 2:return function(b,S){return v.call(g,b,S)};case 3:return function(b,S,I){return v.call(g,b,S,I)}}return function(){return v.apply(g,arguments)}}},a9c99610b236cb1830cf:function(A,M,o){A.exports=function(){return o("7136a8f26d904c5f7ded")(`(function(Mt){var lt={};function X(E){if(lt[E])return lt[E].exports;var O=lt[E]={i:E,l:!1,exports:{}};return Mt[E].call(O.exports,O,O.exports,X),O.l=!0,O.exports}return X.m=Mt,X.c=lt,X.d=function(E,O,S){X.o(E,O)||Object.defineProperty(E,O,{enumerable:!0,get:S})},X.r=function(E){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})},X.t=function(E,O){if(O&1&&(E=X(E)),O&8||O&4&&typeof E=="object"&&E&&E.__esModule)return E;var S=Object.create(null);if(X.r(S),Object.defineProperty(S,"default",{enumerable:!0,value:E}),O&2&&typeof E!="string")for(var c in E)X.d(S,c,function(ft){return E[ft]}.bind(null,c));return S},X.n=function(E){var O=E&&E.__esModule?function(){return E.default}:function(){return E};return X.d(O,"a",O),O},X.o=function(E,O){return Object.prototype.hasOwnProperty.call(E,O)},X.p="/",X(X.s="3401ca108297c5111e56")})({"00f83bf39a29e0b57d1f":function(Mt,lt,X){(function(E,O){var S;/**
* @license
* Lodash <https://lodash.com/>
* Copyright JS Foundation and other contributors <https://js.foundation/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(){var c,ft="4.17.10",At=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",k="Expected a function",w="__lodash_hash_undefined__",b=500,A="__lodash_placeholder__",K=1,t=2,n=4,s=1,a=2,h=1,g=2,_=4,U=8,T=16,z=32,R=64,Y=128,q=256,V=512,mt=30,vt="...",he=800,_e=16,ge=1,Tt=2,ue=3,Nt=1/0,Gt=9007199254740991,We=17976931348623157e292,Ve=0/0,dt=4294967295,xe=dt-1,it=dt>>>1,Un=[["ary",Y],["bind",h],["bindKey",g],["curry",U],["curryRight",T],["flip",V],["partial",z],["partialRight",R],["rearg",q]],Le="[object Arguments]",Ke="[object Array]",P="[object AsyncFunction]",v="[object Boolean]",L="[object Date]",G="[object DOMException]",M="[object Error]",ht="[object Function]",ct="[object GeneratorFunction]",Q="[object Map]",rt="[object Number]",nt="[object Null]",_t="[object Object]",Ft="[object Promise]",Se="[object Proxy]",we="[object RegExp]",Kt="[object Set]",Pe="[object String]",qe="[object Symbol]",mo="[object Undefined]",_i="[object WeakMap]",xo="[object WeakSet]",gi="[object ArrayBuffer]",ei="[object DataView]",En="[object Float32Array]",An="[object Float64Array]",In="[object Int8Array]",Tn="[object Int16Array]",Cn="[object Int32Array]",Bn="[object Uint8Array]",Fn="[object Uint8ClampedArray]",Ln="[object Uint16Array]",Pn="[object Uint32Array]",So=/\\b__p \\+= '';/g,wo=/\\b(__p \\+=) '' \\+/g,bo=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g,Wr=/&(?:amp|lt|gt|quot|#39);/g,Vr=/[&<>"']/g,Uo=RegExp(Wr.source),Eo=RegExp(Vr.source),Ao=/<%-([\\s\\S]+?)%>/g,Io=/<%([\\s\\S]+?)%>/g,Kr=/<%=([\\s\\S]+?)%>/g,To=/\\.|\\[(?:[^[\\]]*|(["'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,Co=/^\\w*$/,Bo=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,zn=/[\\\\^$.*+?()[\\]{}|]/g,Fo=RegExp(zn.source),qr=/^\\s+|\\s+$/g,Xr=/^\\s+/,Lo=/\\s+$/,Po=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,zo=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,Ro=/,? & /,Do=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,Oo=/\\\\(\\\\)?/g,ko=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,Zr=/\\w*$/,Mo=/^[-+]0x[0-9a-f]+$/i,No=/^0b[01]+$/i,Go=/^\\[object .+?Constructor\\]$/,Ho=/^0o[0-7]+$/i,Yo=/^(?:0|[1-9]\\d*)$/,Wo=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,zi=/($^)/,Vo=/['\\n\\r\\u2028\\u2029\\\\]/g,Ri="\\\\ud800-\\\\udfff",Ko="\\\\u0300-\\\\u036f",qo="\\\\ufe20-\\\\ufe2f",Xo="\\\\u20d0-\\\\u20ff",$r=Ko+qo+Xo,Qr="\\\\u2700-\\\\u27bf",Jr="a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff",Zo="\\\\xac\\\\xb1\\\\xd7\\\\xf7",$o="\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf",Qo="\\\\u2000-\\\\u206f",Jo=" \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000",jr="A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde",ts="\\\\ufe0e\\\\ufe0f",es=Zo+$o+Qo+Jo,Rn="['\\u2019]",jo="["+Ri+"]",is="["+es+"]",Di="["+$r+"]",ns="\\\\d+",tf="["+Qr+"]",rs="["+Jr+"]",ss="[^"+Ri+es+ns+Qr+Jr+jr+"]",Dn="\\\\ud83c[\\\\udffb-\\\\udfff]",ef="(?:"+Di+"|"+Dn+")",as="[^"+Ri+"]",On="(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}",kn="[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]",ii="["+jr+"]",os="\\\\u200d",fs="(?:"+rs+"|"+ss+")",nf="(?:"+ii+"|"+ss+")",hs="(?:"+Rn+"(?:d|ll|m|re|s|t|ve))?",us="(?:"+Rn+"(?:D|LL|M|RE|S|T|VE))?",ls=ef+"?",ds="["+ts+"]?",rf="(?:"+os+"(?:"+[as,On,kn].join("|")+")"+ds+ls+")*",sf="\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])",af="\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])",cs=ds+ls+rf,of="(?:"+[tf,On,kn].join("|")+")"+cs,ff="(?:"+[as+Di+"?",Di,On,kn,jo].join("|")+")",hf=RegExp(Rn,"g"),uf=RegExp(Di,"g"),Mn=RegExp(Dn+"(?="+Dn+")|"+ff+cs,"g"),lf=RegExp([ii+"?"+rs+"+"+hs+"(?="+[is,ii,"$"].join("|")+")",nf+"+"+us+"(?="+[is,ii+fs,"$"].join("|")+")",ii+"?"+fs+"+"+hs,ii+"+"+us,af,sf,ns,of].join("|"),"g"),df=RegExp("["+os+Ri+$r+ts+"]"),cf=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_f=-1,bt={};bt[En]=bt[An]=bt[In]=bt[Tn]=bt[Cn]=bt[Bn]=bt[Fn]=bt[Ln]=bt[Pn]=!0,bt[Le]=bt[Ke]=bt[gi]=bt[v]=bt[ei]=bt[L]=bt[M]=bt[ht]=bt[Q]=bt[rt]=bt[_t]=bt[we]=bt[Kt]=bt[Pe]=bt[_i]=!1;var St={};St[Le]=St[Ke]=St[gi]=St[ei]=St[v]=St[L]=St[En]=St[An]=St[In]=St[Tn]=St[Cn]=St[Q]=St[rt]=St[_t]=St[we]=St[Kt]=St[Pe]=St[qe]=St[Bn]=St[Fn]=St[Ln]=St[Pn]=!0,St[M]=St[ht]=St[_i]=!1;var gf={\\u00C0:"A",\\u00C1:"A",\\u00C2:"A",\\u00C3:"A",\\u00C4:"A",\\u00C5:"A",\\u00E0:"a",\\u00E1:"a",\\u00E2:"a",\\u00E3:"a",\\u00E4:"a",\\u00E5:"a",\\u00C7:"C",\\u00E7:"c",\\u00D0:"D",\\u00F0:"d",\\u00C8:"E",\\u00C9:"E",\\u00CA:"E",\\u00CB:"E",\\u00E8:"e",\\u00E9:"e",\\u00EA:"e",\\u00EB:"e",\\u00CC:"I",\\u00CD:"I",\\u00CE:"I",\\u00CF:"I",\\u00EC:"i",\\u00ED:"i",\\u00EE:"i",\\u00EF:"i",\\u00D1:"N",\\u00F1:"n",\\u00D2:"O",\\u00D3:"O",\\u00D4:"O",\\u00D5:"O",\\u00D6:"O",\\u00D8:"O",\\u00F2:"o",\\u00F3:"o",\\u00F4:"o",\\u00F5:"o",\\u00F6:"o",\\u00F8:"o",\\u00D9:"U",\\u00DA:"U",\\u00DB:"U",\\u00DC:"U",\\u00F9:"u",\\u00FA:"u",\\u00FB:"u",\\u00FC:"u",\\u00DD:"Y",\\u00FD:"y",\\u00FF:"y",\\u00C6:"Ae",\\u00E6:"ae",\\u00DE:"Th",\\u00FE:"th",\\u00DF:"ss",\\u0100:"A",\\u0102:"A",\\u0104:"A",\\u0101:"a",\\u0103:"a",\\u0105:"a",\\u0106:"C",\\u0108:"C",\\u010A:"C",\\u010C:"C",\\u0107:"c",\\u0109:"c",\\u010B:"c",\\u010D:"c",\\u010E:"D",\\u0110:"D",\\u010F:"d",\\u0111:"d",\\u0112:"E",\\u0114:"E",\\u0116:"E",\\u0118:"E",\\u011A:"E",\\u0113:"e",\\u0115:"e",\\u0117:"e",\\u0119:"e",\\u011B:"e",\\u011C:"G",\\u011E:"G",\\u0120:"G",\\u0122:"G",\\u011D:"g",\\u011F:"g",\\u0121:"g",\\u0123:"g",\\u0124:"H",\\u0126:"H",\\u0125:"h",\\u0127:"h",\\u0128:"I",\\u012A:"I",\\u012C:"I",\\u012E:"I",\\u0130:"I",\\u0129:"i",\\u012B:"i",\\u012D:"i",\\u012F:"i",\\u0131:"i",\\u0134:"J",\\u0135:"j",\\u0136:"K",\\u0137:"k",\\u0138:"k",\\u0139:"L",\\u013B:"L",\\u013D:"L",\\u013F:"L",\\u0141:"L",\\u013A:"l",\\u013C:"l",\\u013E:"l",\\u0140:"l",\\u0142:"l",\\u0143:"N",\\u0145:"N",\\u0147:"N",\\u014A:"N",\\u0144:"n",\\u0146:"n",\\u0148:"n",\\u014B:"n",\\u014C:"O",\\u014E:"O",\\u0150:"O",\\u014D:"o",\\u014F:"o",\\u0151:"o",\\u0154:"R",\\u0156:"R",\\u0158:"R",\\u0155:"r",\\u0157:"r",\\u0159:"r",\\u015A:"S",\\u015C:"S",\\u015E:"S",\\u0160:"S",\\u015B:"s",\\u015D:"s",\\u015F:"s",\\u0161:"s",\\u0162:"T",\\u0164:"T",\\u0166:"T",\\u0163:"t",\\u0165:"t",\\u0167:"t",\\u0168:"U",\\u016A:"U",\\u016C:"U",\\u016E:"U",\\u0170:"U",\\u0172:"U",\\u0169:"u",\\u016B:"u",\\u016D:"u",\\u016F:"u",\\u0171:"u",\\u0173:"u",\\u0174:"W",\\u0175:"w",\\u0176:"Y",\\u0177:"y",\\u0178:"Y",\\u0179:"Z",\\u017B:"Z",\\u017D:"Z",\\u017A:"z",\\u017C:"z",\\u017E:"z",\\u0132:"IJ",\\u0133:"ij",\\u0152:"Oe",\\u0153:"oe",\\u0149:"'n",\\u017F:"s"},yf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},mf={"\\\\":"\\\\","'":"'","\\n":"n","\\r":"r","\\u2028":"u2028","\\u2029":"u2029"},xf=parseFloat,Sf=parseInt,ps=typeof E=="object"&&E&&E.Object===Object&&E,wf=typeof self=="object"&&self&&self.Object===Object&&self,Rt=ps||wf||Function("return this")(),_s=lt&&!lt.nodeType&&lt,yi=_s&&typeof O=="object"&&O&&!O.nodeType&&O,gs=yi&&yi.exports===_s,Nn=gs&&ps.process,ee=function(){try{var m=yi&&yi.require&&yi.require("util").types;return m||Nn&&Nn.binding&&Nn.binding("util")}catch{}}(),ys=ee&&ee.isArrayBuffer,vs=ee&&ee.isDate,ms=ee&&ee.isMap,xs=ee&&ee.isRegExp,Ss=ee&&ee.isSet,ws=ee&&ee.isTypedArray;function Qt(m,C,I){switch(I.length){case 0:return m.call(C);case 1:return m.call(C,I[0]);case 2:return m.call(C,I[0],I[1]);case 3:return m.call(C,I[0],I[1],I[2])}return m.apply(C,I)}function bf(m,C,I,H){for(var j=-1,pt=m==null?0:m.length;++j<pt;){var Lt=m[j];C(H,Lt,I(Lt),m)}return H}function ie(m,C){for(var I=-1,H=m==null?0:m.length;++I<H&&C(m[I],I,m)!==!1;);return m}function Uf(m,C){for(var I=m==null?0:m.length;I--&&C(m[I],I,m)!==!1;);return m}function bs(m,C){for(var I=-1,H=m==null?0:m.length;++I<H;)if(!C(m[I],I,m))return!1;return!0}function ze(m,C){for(var I=-1,H=m==null?0:m.length,j=0,pt=[];++I<H;){var Lt=m[I];C(Lt,I,m)&&(pt[j++]=Lt)}return pt}function Oi(m,C){var I=m==null?0:m.length;return!!I&&ni(m,C,0)>-1}function Gn(m,C,I){for(var H=-1,j=m==null?0:m.length;++H<j;)if(I(C,m[H]))return!0;return!1}function Ut(m,C){for(var I=-1,H=m==null?0:m.length,j=Array(H);++I<H;)j[I]=C(m[I],I,m);return j}function Re(m,C){for(var I=-1,H=C.length,j=m.length;++I<H;)m[j+I]=C[I];return m}function Hn(m,C,I,H){var j=-1,pt=m==null?0:m.length;for(H&&pt&&(I=m[++j]);++j<pt;)I=C(I,m[j],j,m);return I}function Ef(m,C,I,H){var j=m==null?0:m.length;for(H&&j&&(I=m[--j]);j--;)I=C(I,m[j],j,m);return I}function Yn(m,C){for(var I=-1,H=m==null?0:m.length;++I<H;)if(C(m[I],I,m))return!0;return!1}var Af=Wn("length");function If(m){return m.split("")}function Tf(m){return m.match(Do)||[]}function Us(m,C,I){var H;return I(m,function(j,pt,Lt){if(C(j,pt,Lt))return H=pt,!1}),H}function ki(m,C,I,H){for(var j=m.length,pt=I+(H?1:-1);H?pt--:++pt<j;)if(C(m[pt],pt,m))return pt;return-1}function ni(m,C,I){return C===C?Nf(m,C,I):ki(m,Es,I)}function Cf(m,C,I,H){for(var j=I-1,pt=m.length;++j<pt;)if(H(m[j],C))return j;return-1}function Es(m){return m!==m}function As(m,C){var I=m==null?0:m.length;return I?Kn(m,C)/I:Ve}function Wn(m){return function(C){return C==null?c:C[m]}}function Vn(m){return function(C){return m==null?c:m[C]}}function Is(m,C,I,H,j){return j(m,function(pt,Lt,xt){I=H?(H=!1,pt):C(I,pt,Lt,xt)}),I}function Bf(m,C){var I=m.length;for(m.sort(C);I--;)m[I]=m[I].value;return m}function Kn(m,C){for(var I,H=-1,j=m.length;++H<j;){var pt=C(m[H]);pt!==c&&(I=I===c?pt:I+pt)}return I}function qn(m,C){for(var I=-1,H=Array(m);++I<m;)H[I]=C(I);return H}function Ff(m,C){return Ut(C,function(I){return[I,m[I]]})}function Jt(m){return function(C){return m(C)}}function Xn(m,C){return Ut(C,function(I){return m[I]})}function vi(m,C){return m.has(C)}function Ts(m,C){for(var I=-1,H=m.length;++I<H&&ni(C,m[I],0)>-1;);return I}function Cs(m,C){for(var I=m.length;I--&&ni(C,m[I],0)>-1;);return I}function Lf(m,C){for(var I=m.length,H=0;I--;)m[I]===C&&++H;return H}var Pf=Vn(gf),zf=Vn(yf);function Rf(m){return"\\\\"+mf[m]}function Df(m,C){return m==null?c:m[C]}function ri(m){return df.test(m)}function Of(m){return cf.test(m)}function kf(m){for(var C,I=[];!(C=m.next()).done;)I.push(C.value);return I}function Zn(m){var C=-1,I=Array(m.size);return m.forEach(function(H,j){I[++C]=[j,H]}),I}function Bs(m,C){return function(I){return m(C(I))}}function De(m,C){for(var I=-1,H=m.length,j=0,pt=[];++I<H;){var Lt=m[I];(Lt===C||Lt===A)&&(m[I]=A,pt[j++]=I)}return pt}function $n(m,C){return C=="__proto__"?c:m[C]}function Mi(m){var C=-1,I=Array(m.size);return m.forEach(function(H){I[++C]=H}),I}function Mf(m){var C=-1,I=Array(m.size);return m.forEach(function(H){I[++C]=[H,H]}),I}function Nf(m,C,I){for(var H=I-1,j=m.length;++H<j;)if(m[H]===C)return H;return-1}function Gf(m,C,I){for(var H=I+1;H--;)if(m[H]===C)return H;return H}function si(m){return ri(m)?Yf(m):Af(m)}function le(m){return ri(m)?Wf(m):If(m)}var Hf=Vn(vf);function Yf(m){for(var C=Mn.lastIndex=0;Mn.test(m);)++C;return C}function Wf(m){return m.match(Mn)||[]}function Vf(m){return m.match(lf)||[]}var Kf=function m(C){C=C==null?Rt:Ni.defaults(Rt.Object(),C,Ni.pick(Rt,pf));var I=C.Array,H=C.Date,j=C.Error,pt=C.Function,Lt=C.Math,xt=C.Object,Qn=C.RegExp,qf=C.String,ne=C.TypeError,Gi=I.prototype,Xf=pt.prototype,ai=xt.prototype,Hi=C["__core-js_shared__"],Yi=Xf.toString,wt=ai.hasOwnProperty,Zf=0,Fs=function(){var e=/[^.]+$/.exec(Hi&&Hi.keys&&Hi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Wi=ai.toString,$f=Yi.call(xt),Qf=Rt._,Jf=Qn("^"+Yi.call(wt).replace(zn,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$"),Vi=gs?C.Buffer:c,Oe=C.Symbol,Ki=C.Uint8Array,Ls=Vi?Vi.allocUnsafe:c,qi=Bs(xt.getPrototypeOf,xt),Ps=xt.create,zs=ai.propertyIsEnumerable,Xi=Gi.splice,Rs=Oe?Oe.isConcatSpreadable:c,mi=Oe?Oe.iterator:c,Xe=Oe?Oe.toStringTag:c,Zi=function(){try{var e=Je(xt,"defineProperty");return e({},"",{}),e}catch{}}(),jf=C.clearTimeout!==Rt.clearTimeout&&C.clearTimeout,th=H&&H.now!==Rt.Date.now&&H.now,eh=C.setTimeout!==Rt.setTimeout&&C.setTimeout,$i=Lt.ceil,Qi=Lt.floor,Jn=xt.getOwnPropertySymbols,ih=Vi?Vi.isBuffer:c,nh=C.isFinite,rh=Gi.join,sh=Bs(xt.keys,xt),Pt=Lt.max,Ot=Lt.min,ah=H.now,oh=C.parseInt,Ds=Lt.random,fh=Gi.reverse,jn=Je(C,"DataView"),xi=Je(C,"Map"),tr=Je(C,"Promise"),oi=Je(C,"Set"),Si=Je(C,"WeakMap"),wi=Je(xt,"create"),Ji=Si&&new Si,bi={},hh=je(jn),uh=je(xi),lh=je(tr),dh=je(oi),ch=je(Si),ji=Oe?Oe.prototype:c,Ui=ji?ji.valueOf:c,Os=ji?ji.toString:c;function l(e){if(It(e)&&!tt(e)&&!(e instanceof ut)){if(e instanceof re)return e;if(wt.call(e,"__wrapped__"))return Oa(e)}return new re(e)}var fi=function(){function e(){}return function(i){if(!Et(i))return{};if(Ps)return Ps(i);e.prototype=i;var r=new e;return e.prototype=c,r}}();function tn(){}function re(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=c}l.templateSettings={escape:Ao,evaluate:Io,interpolate:Kr,variable:"",imports:{_:l}},l.prototype=tn.prototype,l.prototype.constructor=l,re.prototype=fi(tn.prototype),re.prototype.constructor=re;function ut(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=dt,this.__views__=[]}function ph(){var e=new ut(this.__wrapped__);return e.__actions__=qt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=qt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=qt(this.__views__),e}function _h(){if(this.__filtered__){var e=new ut(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function gh(){var e=this.__wrapped__.value(),i=this.__dir__,r=tt(e),f=i<0,u=r?e.length:0,d=Cu(0,u,this.__views__),p=d.start,y=d.end,x=y-p,F=f?y:p-1,B=this.__iteratees__,D=B.length,N=0,W=Ot(x,this.__takeCount__);if(!r||!f&&u==x&&W==x)return oa(e,this.__actions__);var J=[];t:for(;x--&&N<W;){F+=i;for(var at=-1,$=e[F];++at<D;){var ot=B[at],yt=ot.iteratee,Wt=ot.type,Vt=yt($);if(Wt==Tt)$=Vt;else if(!Vt){if(Wt==ge)continue t;break t}}J[N++]=$}return J}ut.prototype=fi(tn.prototype),ut.prototype.constructor=ut;function Ze(e){var i=-1,r=e==null?0:e.length;for(this.clear();++i<r;){var f=e[i];this.set(f[0],f[1])}}function yh(){this.__data__=wi?wi(null):{},this.size=0}function vh(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function mh(e){var i=this.__data__;if(wi){var r=i[e];return r===w?c:r}return wt.call(i,e)?i[e]:c}function xh(e){var i=this.__data__;return wi?i[e]!==c:wt.call(i,e)}function Sh(e,i){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=wi&&i===c?w:i,this}Ze.prototype.clear=yh,Ze.prototype.delete=vh,Ze.prototype.get=mh,Ze.prototype.has=xh,Ze.prototype.set=Sh;function be(e){var i=-1,r=e==null?0:e.length;for(this.clear();++i<r;){var f=e[i];this.set(f[0],f[1])}}function wh(){this.__data__=[],this.size=0}function bh(e){var i=this.__data__,r=en(i,e);if(r<0)return!1;var f=i.length-1;return r==f?i.pop():Xi.call(i,r,1),--this.size,!0}function Uh(e){var i=this.__data__,r=en(i,e);return r<0?c:i[r][1]}function Eh(e){return en(this.__data__,e)>-1}function Ah(e,i){var r=this.__data__,f=en(r,e);return f<0?(++this.size,r.push([e,i])):r[f][1]=i,this}be.prototype.clear=wh,be.prototype.delete=bh,be.prototype.get=Uh,be.prototype.has=Eh,be.prototype.set=Ah;function Ue(e){var i=-1,r=e==null?0:e.length;for(this.clear();++i<r;){var f=e[i];this.set(f[0],f[1])}}function Ih(){this.size=0,this.__data__={hash:new Ze,map:new(xi||be),string:new Ze}}function Th(e){var i=pn(this,e).delete(e);return this.size-=i?1:0,i}function Ch(e){return pn(this,e).get(e)}function Bh(e){return pn(this,e).has(e)}function Fh(e,i){var r=pn(this,e),f=r.size;return r.set(e,i),this.size+=r.size==f?0:1,this}Ue.prototype.clear=Ih,Ue.prototype.delete=Th,Ue.prototype.get=Ch,Ue.prototype.has=Bh,Ue.prototype.set=Fh;function $e(e){var i=-1,r=e==null?0:e.length;for(this.__data__=new Ue;++i<r;)this.add(e[i])}function Lh(e){return this.__data__.set(e,w),this}function Ph(e){return this.__data__.has(e)}$e.prototype.add=$e.prototype.push=Lh,$e.prototype.has=Ph;function de(e){var i=this.__data__=new be(e);this.size=i.size}function zh(){this.__data__=new be,this.size=0}function Rh(e){var i=this.__data__,r=i.delete(e);return this.size=i.size,r}function Dh(e){return this.__data__.get(e)}function Oh(e){return this.__data__.has(e)}function kh(e,i){var r=this.__data__;if(r instanceof be){var f=r.__data__;if(!xi||f.length<At-1)return f.push([e,i]),this.size=++r.size,this;r=this.__data__=new Ue(f)}return r.set(e,i),this.size=r.size,this}de.prototype.clear=zh,de.prototype.delete=Rh,de.prototype.get=Dh,de.prototype.has=Oh,de.prototype.set=kh;function ks(e,i){var r=tt(e),f=!r&&ti(e),u=!r&&!f&&He(e),d=!r&&!f&&!u&&ci(e),p=r||f||u||d,y=p?qn(e.length,qf):[],x=y.length;for(var F in e)(i||wt.call(e,F))&&!(p&&(F=="length"||u&&(F=="offset"||F=="parent")||d&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||Te(F,x)))&&y.push(F);return y}function Ms(e){var i=e.length;return i?e[lr(0,i-1)]:c}function Mh(e,i){return _n(qt(e),Qe(i,0,e.length))}function Nh(e){return _n(qt(e))}function er(e,i,r){(r!==c&&!ce(e[i],r)||r===c&&!(i in e))&&Ee(e,i,r)}function Ei(e,i,r){var f=e[i];(!(wt.call(e,i)&&ce(f,r))||r===c&&!(i in e))&&Ee(e,i,r)}function en(e,i){for(var r=e.length;r--;)if(ce(e[r][0],i))return r;return-1}function Gh(e,i,r,f){return ke(e,function(u,d,p){i(f,u,r(u),p)}),f}function Ns(e,i){return e&&ve(i,zt(i),e)}function Hh(e,i){return e&&ve(i,Zt(i),e)}function Ee(e,i,r){i=="__proto__"&&Zi?Zi(e,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[i]=r}function ir(e,i){for(var r=-1,f=i.length,u=I(f),d=e==null;++r<f;)u[r]=d?c:Rr(e,i[r]);return u}function Qe(e,i,r){return e===e&&(r!==c&&(e=e<=r?e:r),i!==c&&(e=e>=i?e:i)),e}function se(e,i,r,f,u,d){var p,y=i&K,x=i&t,F=i&n;if(r&&(p=u?r(e,f,u,d):r(e)),p!==c)return p;if(!Et(e))return e;var B=tt(e);if(B){if(p=Fu(e),!y)return qt(e,p)}else{var D=kt(e),N=D==ht||D==ct;if(He(e))return ha(e,y);if(D==_t||D==Le||N&&!u){if(p=x||N?{}:Ta(e),!y)return x?xu(e,Hh(p,e)):mu(e,Ns(p,e))}else{if(!St[D])return u?e:{};p=Lu(e,D,y)}}d||(d=new de);var W=d.get(e);if(W)return W;if(d.set(e,p),no(e))return e.forEach(function($){p.add(se($,i,r,$,e,d))}),p;if(eo(e))return e.forEach(function($,ot){p.set(ot,se($,i,r,ot,e,d))}),p;var J=F?x?wr:Sr:x?Zt:zt,at=B?c:J(e);return ie(at||e,function($,ot){at&&(ot=$,$=e[ot]),Ei(p,ot,se($,i,r,ot,e,d))}),p}function Yh(e){var i=zt(e);return function(r){return Gs(r,e,i)}}function Gs(e,i,r){var f=r.length;if(e==null)return!f;for(e=xt(e);f--;){var u=r[f],d=i[u],p=e[u];if(p===c&&!(u in e)||!d(p))return!1}return!0}function Hs(e,i,r){if(typeof e!="function")throw new ne(k);return Li(function(){e.apply(c,r)},i)}function Ai(e,i,r,f){var u=-1,d=Oi,p=!0,y=e.length,x=[],F=i.length;if(!y)return x;r&&(i=Ut(i,Jt(r))),f?(d=Gn,p=!1):i.length>=At&&(d=vi,p=!1,i=new $e(i));t:for(;++u<y;){var B=e[u],D=r==null?B:r(B);if(B=f||B!==0?B:0,p&&D===D){for(var N=F;N--;)if(i[N]===D)continue t;x.push(B)}else d(i,D,f)||x.push(B)}return x}var ke=pa(ye),Ys=pa(rr,!0);function Wh(e,i){var r=!0;return ke(e,function(f,u,d){return r=!!i(f,u,d),r}),r}function nn(e,i,r){for(var f=-1,u=e.length;++f<u;){var d=e[f],p=i(d);if(p!=null&&(y===c?p===p&&!te(p):r(p,y)))var y=p,x=d}return x}function Vh(e,i,r,f){var u=e.length;for(r=et(r),r<0&&(r=-r>u?0:u+r),f=f===c||f>u?u:et(f),f<0&&(f+=u),f=r>f?0:so(f);r<f;)e[r++]=i;return e}function Ws(e,i){var r=[];return ke(e,function(f,u,d){i(f,u,d)&&r.push(f)}),r}function Dt(e,i,r,f,u){var d=-1,p=e.length;for(r||(r=zu),u||(u=[]);++d<p;){var y=e[d];i>0&&r(y)?i>1?Dt(y,i-1,r,f,u):Re(u,y):f||(u[u.length]=y)}return u}var nr=_a(),Vs=_a(!0);function ye(e,i){return e&&nr(e,i,zt)}function rr(e,i){return e&&Vs(e,i,zt)}function rn(e,i){return ze(i,function(r){return Ce(e[r])})}function hi(e,i){i=Ne(i,e);for(var r=0,f=i.length;e!=null&&r<f;)e=e[me(i[r++])];return r&&r==f?e:c}function Ks(e,i,r){var f=i(e);return tt(e)?f:Re(f,r(e))}function Ht(e){return e==null?e===c?mo:nt:Xe&&Xe in xt(e)?Tu(e):Gu(e)}function sr(e,i){return e>i}function Kh(e,i){return e!=null&&wt.call(e,i)}function qh(e,i){return e!=null&&i in xt(e)}function Xh(e,i,r){return e>=Ot(i,r)&&e<Pt(i,r)}function ar(e,i,r){for(var f=r?Gn:Oi,u=e[0].length,d=e.length,p=d,y=I(d),x=1/0,F=[];p--;){var B=e[p];p&&i&&(B=Ut(B,Jt(i))),x=Ot(B.length,x),y[p]=!r&&(i||u>=120&&B.length>=120)?new $e(p&&B):c}B=e[0];var D=-1,N=y[0];t:for(;++D<u&&F.length<x;){var W=B[D],J=i?i(W):W;if(W=r||W!==0?W:0,!(N?vi(N,J):f(F,J,r))){for(p=d;--p;){var at=y[p];if(!(at?vi(at,J):f(e[p],J,r)))continue t}N&&N.push(J),F.push(W)}}return F}function Zh(e,i,r,f){return ye(e,function(u,d,p){i(f,r(u),d,p)}),f}function Ii(e,i,r){i=Ne(i,e),e=La(e,i);var f=e==null?e:e[me(oe(i))];return f==null?c:Qt(f,e,r)}function qs(e){return It(e)&&Ht(e)==Le}function $h(e){return It(e)&&Ht(e)==gi}function Qh(e){return It(e)&&Ht(e)==L}function Ti(e,i,r,f,u){return e===i?!0:e==null||i==null||!It(e)&&!It(i)?e!==e&&i!==i:Jh(e,i,r,f,Ti,u)}function Jh(e,i,r,f,u,d){var p=tt(e),y=tt(i),x=p?Ke:kt(e),F=y?Ke:kt(i);x=x==Le?_t:x,F=F==Le?_t:F;var B=x==_t,D=F==_t,N=x==F;if(N&&He(e)){if(!He(i))return!1;p=!0,B=!1}if(N&&!B)return d||(d=new de),p||ci(e)?Ea(e,i,r,f,u,d):Au(e,i,x,r,f,u,d);if(!(r&s)){var W=B&&wt.call(e,"__wrapped__"),J=D&&wt.call(i,"__wrapped__");if(W||J){var at=W?e.value():e,$=J?i.value():i;return d||(d=new de),u(at,$,r,f,d)}}return N?(d||(d=new de),Iu(e,i,r,f,u,d)):!1}function jh(e){return It(e)&&kt(e)==Q}function or(e,i,r,f){var u=r.length,d=u,p=!f;if(e==null)return!d;for(e=xt(e);u--;){var y=r[u];if(p&&y[2]?y[1]!==e[y[0]]:!(y[0]in e))return!1}for(;++u<d;){y=r[u];var x=y[0],F=e[x],B=y[1];if(p&&y[2]){if(F===c&&!(x in e))return!1}else{var D=new de;if(f)var N=f(F,B,x,e,i,D);if(!(N===c?Ti(B,F,s|a,f,D):N))return!1}}return!0}function Xs(e){if(!Et(e)||Du(e))return!1;var i=Ce(e)?Jf:Go;return i.test(je(e))}function tu(e){return It(e)&&Ht(e)==we}function eu(e){return It(e)&&kt(e)==Kt}function iu(e){return It(e)&&Sn(e.length)&&!!bt[Ht(e)]}function Zs(e){return typeof e=="function"?e:e==null?$t:typeof e=="object"?tt(e)?Js(e[0],e[1]):Qs(e):yo(e)}function fr(e){if(!Fi(e))return sh(e);var i=[];for(var r in xt(e))wt.call(e,r)&&r!="constructor"&&i.push(r);return i}function nu(e){if(!Et(e))return Nu(e);var i=Fi(e),r=[];for(var f in e)f=="constructor"&&(i||!wt.call(e,f))||r.push(f);return r}function hr(e,i){return e<i}function $s(e,i){var r=-1,f=Xt(e)?I(e.length):[];return ke(e,function(u,d,p){f[++r]=i(u,d,p)}),f}function Qs(e){var i=Ur(e);return i.length==1&&i[0][2]?Ba(i[0][0],i[0][1]):function(r){return r===e||or(r,e,i)}}function Js(e,i){return Ar(e)&&Ca(i)?Ba(me(e),i):function(r){var f=Rr(r,e);return f===c&&f===i?Dr(r,e):Ti(i,f,s|a)}}function sn(e,i,r,f,u){e!==i&&nr(i,function(d,p){if(Et(d))u||(u=new de),ru(e,i,p,r,sn,f,u);else{var y=f?f($n(e,p),d,p+"",e,i,u):c;y===c&&(y=d),er(e,p,y)}},Zt)}function ru(e,i,r,f,u,d,p){var y=$n(e,r),x=$n(i,r),F=p.get(x);if(F){er(e,r,F);return}var B=d?d(y,x,r+"",e,i,p):c,D=B===c;if(D){var N=tt(x),W=!N&&He(x),J=!N&&!W&&ci(x);B=x,N||W||J?tt(y)?B=y:Ct(y)?B=qt(y):W?(D=!1,B=ha(x,!0)):J?(D=!1,B=ua(x,!0)):B=[]:Pi(x)||ti(x)?(B=y,ti(y)?B=ao(y):(!Et(y)||f&&Ce(y))&&(B=Ta(x))):D=!1}D&&(p.set(x,B),u(B,x,f,d,p),p.delete(x)),er(e,r,B)}function js(e,i){var r=e.length;if(r)return i+=i<0?r:0,Te(i,r)?e[i]:c}function ta(e,i,r){var f=-1;i=Ut(i.length?i:[$t],Jt(Z()));var u=$s(e,function(d,p,y){var x=Ut(i,function(F){return F(d)});return{criteria:x,index:++f,value:d}});return Bf(u,function(d,p){return vu(d,p,r)})}function su(e,i){return ea(e,i,function(r,f){return Dr(e,f)})}function ea(e,i,r){for(var f=-1,u=i.length,d={};++f<u;){var p=i[f],y=hi(e,p);r(y,p)&&Ci(d,Ne(p,e),y)}return d}function au(e){return function(i){return hi(i,e)}}function ur(e,i,r,f){var u=f?Cf:ni,d=-1,p=i.length,y=e;for(e===i&&(i=qt(i)),r&&(y=Ut(e,Jt(r)));++d<p;)for(var x=0,F=i[d],B=r?r(F):F;(x=u(y,B,x,f))>-1;)y!==e&&Xi.call(y,x,1),Xi.call(e,x,1);return e}function ia(e,i){for(var r=e?i.length:0,f=r-1;r--;){var u=i[r];if(r==f||u!==d){var d=u;Te(u)?Xi.call(e,u,1):pr(e,u)}}return e}function lr(e,i){return e+Qi(Ds()*(i-e+1))}function ou(e,i,r,f){for(var u=-1,d=Pt($i((i-e)/(r||1)),0),p=I(d);d--;)p[f?d:++u]=e,e+=r;return p}function dr(e,i){var r="";if(!e||i<1||i>Gt)return r;do i%2&&(r+=e),i=Qi(i/2),i&&(e+=e);while(i);return r}function st(e,i){return Tr(Fa(e,i,$t),e+"")}function fu(e){return Ms(pi(e))}function hu(e,i){var r=pi(e);return _n(r,Qe(i,0,r.length))}function Ci(e,i,r,f){if(!Et(e))return e;i=Ne(i,e);for(var u=-1,d=i.length,p=d-1,y=e;y!=null&&++u<d;){var x=me(i[u]),F=r;if(u!=p){var B=y[x];F=f?f(B,x,y):c,F===c&&(F=Et(B)?B:Te(i[u+1])?[]:{})}Ei(y,x,F),y=y[x]}return e}var na=Ji?function(e,i){return Ji.set(e,i),e}:$t,uu=Zi?function(e,i){return Zi(e,"toString",{configurable:!0,enumerable:!1,value:kr(i),writable:!0})}:$t;function lu(e){return _n(pi(e))}function ae(e,i,r){var f=-1,u=e.length;i<0&&(i=-i>u?0:u+i),r=r>u?u:r,r<0&&(r+=u),u=i>r?0:r-i>>>0,i>>>=0;for(var d=I(u);++f<u;)d[f]=e[f+i];return d}function du(e,i){var r;return ke(e,function(f,u,d){return r=i(f,u,d),!r}),!!r}function an(e,i,r){var f=0,u=e==null?f:e.length;if(typeof i=="number"&&i===i&&u<=it){for(;f<u;){var d=f+u>>>1,p=e[d];p!==null&&!te(p)&&(r?p<=i:p<i)?f=d+1:u=d}return u}return cr(e,i,$t,r)}function cr(e,i,r,f){i=r(i);for(var u=0,d=e==null?0:e.length,p=i!==i,y=i===null,x=te(i),F=i===c;u<d;){var B=Qi((u+d)/2),D=r(e[B]),N=D!==c,W=D===null,J=D===D,at=te(D);if(p)var $=f||J;else F?$=J&&(f||N):y?$=J&&N&&(f||!W):x?$=J&&N&&!W&&(f||!at):W||at?$=!1:$=f?D<=i:D<i;$?u=B+1:d=B}return Ot(d,xe)}function ra(e,i){for(var r=-1,f=e.length,u=0,d=[];++r<f;){var p=e[r],y=i?i(p):p;if(!r||!ce(y,x)){var x=y;d[u++]=p===0?0:p}}return d}function sa(e){return typeof e=="number"?e:te(e)?Ve:+e}function jt(e){if(typeof e=="string")return e;if(tt(e))return Ut(e,jt)+"";if(te(e))return Os?Os.call(e):"";var i=e+"";return i=="0"&&1/e==-Nt?"-0":i}function Me(e,i,r){var f=-1,u=Oi,d=e.length,p=!0,y=[],x=y;if(r)p=!1,u=Gn;else if(d>=At){var F=i?null:Uu(e);if(F)return Mi(F);p=!1,u=vi,x=new $e}else x=i?[]:y;t:for(;++f<d;){var B=e[f],D=i?i(B):B;if(B=r||B!==0?B:0,p&&D===D){for(var N=x.length;N--;)if(x[N]===D)continue t;i&&x.push(D),y.push(B)}else u(x,D,r)||(x!==y&&x.push(D),y.push(B))}return y}function pr(e,i){return i=Ne(i,e),e=La(e,i),e==null||delete e[me(oe(i))]}function aa(e,i,r,f){return Ci(e,i,r(hi(e,i)),f)}function on(e,i,r,f){for(var u=e.length,d=f?u:-1;(f?d--:++d<u)&&i(e[d],d,e););return r?ae(e,f?0:d,f?d+1:u):ae(e,f?d+1:0,f?u:d)}function oa(e,i){var r=e;return r instanceof ut&&(r=r.value()),Hn(i,function(f,u){return u.func.apply(u.thisArg,Re([f],u.args))},r)}function _r(e,i,r){var f=e.length;if(f<2)return f?Me(e[0]):[];for(var u=-1,d=I(f);++u<f;)for(var p=e[u],y=-1;++y<f;)y!=u&&(d[u]=Ai(d[u]||p,e[y],i,r));return Me(Dt(d,1),i,r)}function fa(e,i,r){for(var f=-1,u=e.length,d=i.length,p={};++f<u;){var y=f<d?i[f]:c;r(p,e[f],y)}return p}function gr(e){return Ct(e)?e:[]}function yr(e){return typeof e=="function"?e:$t}function Ne(e,i){return tt(e)?e:Ar(e,i)?[e]:Da(gt(e))}var cu=st;function Ge(e,i,r){var f=e.length;return r=r===c?f:r,!i&&r>=f?e:ae(e,i,r)}var pu=jf||function(e){return Rt.clearTimeout(e)};function ha(e,i){if(i)return e.slice();var r=e.length,f=Ls?Ls(r):new e.constructor(r);return e.copy(f),f}function vr(e){var i=new e.constructor(e.byteLength);return new Ki(i).set(new Ki(e)),i}function _u(e,i){var r=i?vr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function gu(e){var i=new e.constructor(e.source,Zr.exec(e));return i.lastIndex=e.lastIndex,i}function yu(e){return Ui?xt(Ui.call(e)):{}}function ua(e,i){var r=i?vr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function la(e,i){if(e!==i){var r=e!==c,f=e===null,u=e===e,d=te(e),p=i!==c,y=i===null,x=i===i,F=te(i);if(!y&&!F&&!d&&e>i||d&&p&&x&&!y&&!F||f&&p&&x||!r&&x||!u)return 1;if(!f&&!d&&!F&&e<i||F&&r&&u&&!f&&!d||y&&r&&u||!p&&u||!x)return-1}return 0}function vu(e,i,r){for(var f=-1,u=e.criteria,d=i.criteria,p=u.length,y=r.length;++f<p;){var x=la(u[f],d[f]);if(x){if(f>=y)return x;var F=r[f];return x*(F=="desc"?-1:1)}}return e.index-i.index}function da(e,i,r,f){for(var u=-1,d=e.length,p=r.length,y=-1,x=i.length,F=Pt(d-p,0),B=I(x+F),D=!f;++y<x;)B[y]=i[y];for(;++u<p;)(D||u<d)&&(B[r[u]]=e[u]);for(;F--;)B[y++]=e[u++];return B}function ca(e,i,r,f){for(var u=-1,d=e.length,p=-1,y=r.length,x=-1,F=i.length,B=Pt(d-y,0),D=I(B+F),N=!f;++u<B;)D[u]=e[u];for(var W=u;++x<F;)D[W+x]=i[x];for(;++p<y;)(N||u<d)&&(D[W+r[p]]=e[u++]);return D}function qt(e,i){var r=-1,f=e.length;for(i||(i=I(f));++r<f;)i[r]=e[r];return i}function ve(e,i,r,f){var u=!r;r||(r={});for(var d=-1,p=i.length;++d<p;){var y=i[d],x=f?f(r[y],e[y],y,r,e):c;x===c&&(x=e[y]),u?Ee(r,y,x):Ei(r,y,x)}return r}function mu(e,i){return ve(e,Er(e),i)}function xu(e,i){return ve(e,Aa(e),i)}function fn(e,i){return function(r,f){var u=tt(r)?bf:Gh,d=i?i():{};return u(r,e,Z(f,2),d)}}function ui(e){return st(function(i,r){var f=-1,u=r.length,d=u>1?r[u-1]:c,p=u>2?r[2]:c;for(d=e.length>3&&typeof d=="function"?(u--,d):c,p&&Yt(r[0],r[1],p)&&(d=u<3?c:d,u=1),i=xt(i);++f<u;){var y=r[f];y&&e(i,y,f,d)}return i})}function pa(e,i){return function(r,f){if(r==null)return r;if(!Xt(r))return e(r,f);for(var u=r.length,d=i?u:-1,p=xt(r);(i?d--:++d<u)&&f(p[d],d,p)!==!1;);return r}}function _a(e){return function(i,r,f){for(var u=-1,d=xt(i),p=f(i),y=p.length;y--;){var x=p[e?y:++u];if(r(d[x],x,d)===!1)break}return i}}function Su(e,i,r){var f=i&h,u=Bi(e);function d(){var p=this&&this!==Rt&&this instanceof d?u:e;return p.apply(f?r:this,arguments)}return d}function ga(e){return function(i){i=gt(i);var r=ri(i)?le(i):c,f=r?r[0]:i.charAt(0),u=r?Ge(r,1).join(""):i.slice(1);return f[e]()+u}}function li(e){return function(i){return Hn(_o(po(i).replace(hf,"")),e,"")}}function Bi(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var r=fi(e.prototype),f=e.apply(r,i);return Et(f)?f:r}}function wu(e,i,r){var f=Bi(e);function u(){for(var d=arguments.length,p=I(d),y=d,x=di(u);y--;)p[y]=arguments[y];var F=d<3&&p[0]!==x&&p[d-1]!==x?[]:De(p,x);if(d-=F.length,d<r)return Sa(e,i,hn,u.placeholder,c,p,F,c,c,r-d);var B=this&&this!==Rt&&this instanceof u?f:e;return Qt(B,this,p)}return u}function ya(e){return function(i,r,f){var u=xt(i);if(!Xt(i)){var d=Z(r,3);i=zt(i),r=function(y){return d(u[y],y,u)}}var p=e(i,r,f);return p>-1?u[d?i[p]:p]:c}}function va(e){return Ie(function(i){var r=i.length,f=r,u=re.prototype.thru;for(e&&i.reverse();f--;){var d=i[f];if(typeof d!="function")throw new ne(k);if(u&&!p&&cn(d)=="wrapper")var p=new re([],!0)}for(f=p?f:r;++f<r;){d=i[f];var y=cn(d),x=y=="wrapper"?br(d):c;x&&Ir(x[0])&&x[1]==(Y|U|z|q)&&!x[4].length&&x[9]==1?p=p[cn(x[0])].apply(p,x[3]):p=d.length==1&&Ir(d)?p[y]():p.thru(d)}return function(){var F=arguments,B=F[0];if(p&&F.length==1&&tt(B))return p.plant(B).value();for(var D=0,N=r?i[D].apply(this,F):B;++D<r;)N=i[D].call(this,N);return N}})}function hn(e,i,r,f,u,d,p,y,x,F){var B=i&Y,D=i&h,N=i&g,W=i&(U|T),J=i&V,at=N?c:Bi(e);function $(){for(var ot=arguments.length,yt=I(ot),Wt=ot;Wt--;)yt[Wt]=arguments[Wt];if(W)var Vt=di($),Ye=Lf(yt,Vt);if(f&&(yt=da(yt,f,u,W)),d&&(yt=ca(yt,d,p,W)),ot-=Ye,W&&ot<F){var Bt=De(yt,Vt);return Sa(e,i,hn,$.placeholder,r,yt,Bt,y,x,F-ot)}var pe=D?r:this,Fe=N?pe[e]:e;return ot=yt.length,y?yt=Hu(yt,y):J&&ot>1&&yt.reverse(),B&&x<ot&&(yt.length=x),this&&this!==Rt&&this instanceof $&&(Fe=at||Bi(Fe)),Fe.apply(pe,yt)}return $}function ma(e,i){return function(r,f){return Zh(r,e,i(f),{})}}function un(e,i){return function(r,f){var u;if(r===c&&f===c)return i;if(r!==c&&(u=r),f!==c){if(u===c)return f;typeof r=="string"||typeof f=="string"?(r=jt(r),f=jt(f)):(r=sa(r),f=sa(f)),u=e(r,f)}return u}}function mr(e){return Ie(function(i){return i=Ut(i,Jt(Z())),st(function(r){var f=this;return e(i,function(u){return Qt(u,f,r)})})})}function ln(e,i){i=i===c?" ":jt(i);var r=i.length;if(r<2)return r?dr(i,e):i;var f=dr(i,$i(e/si(i)));return ri(i)?Ge(le(f),0,e).join(""):f.slice(0,e)}function bu(e,i,r,f){var u=i&h,d=Bi(e);function p(){for(var y=-1,x=arguments.length,F=-1,B=f.length,D=I(B+x),N=this&&this!==Rt&&this instanceof p?d:e;++F<B;)D[F]=f[F];for(;x--;)D[F++]=arguments[++y];return Qt(N,u?r:this,D)}return p}function xa(e){return function(i,r,f){return f&&typeof f!="number"&&Yt(i,r,f)&&(r=f=c),i=Be(i),r===c?(r=i,i=0):r=Be(r),f=f===c?i<r?1:-1:Be(f),ou(i,r,f,e)}}function dn(e){return function(i,r){return typeof i=="string"&&typeof r=="string"||(i=fe(i),r=fe(r)),e(i,r)}}function Sa(e,i,r,f,u,d,p,y,x,F){var B=i&U,D=B?p:c,N=B?c:p,W=B?d:c,J=B?c:d;i|=B?z:R,i&=~(B?R:z),i&_||(i&=~(h|g));var at=[e,i,u,W,D,J,N,y,x,F],$=r.apply(c,at);return Ir(e)&&Pa($,at),$.placeholder=f,za($,e,i)}function xr(e){var i=Lt[e];return function(r,f){if(r=fe(r),f=f==null?0:Ot(et(f),292),f){var u=(gt(r)+"e").split("e"),d=i(u[0]+"e"+(+u[1]+f));return u=(gt(d)+"e").split("e"),+(u[0]+"e"+(+u[1]-f))}return i(r)}}var Uu=oi&&1/Mi(new oi([,-0]))[1]==Nt?function(e){return new oi(e)}:Gr;function wa(e){return function(i){var r=kt(i);return r==Q?Zn(i):r==Kt?Mf(i):Ff(i,e(i))}}function Ae(e,i,r,f,u,d,p,y){var x=i&g;if(!x&&typeof e!="function")throw new ne(k);var F=f?f.length:0;if(F||(i&=~(z|R),f=u=c),p=p===c?p:Pt(et(p),0),y=y===c?y:et(y),F-=u?u.length:0,i&R){var B=f,D=u;f=u=c}var N=x?c:br(e),W=[e,i,r,f,u,B,D,d,p,y];if(N&&Mu(W,N),e=W[0],i=W[1],r=W[2],f=W[3],u=W[4],y=W[9]=W[9]===c?x?0:e.length:Pt(W[9]-F,0),!y&&i&(U|T)&&(i&=~(U|T)),!i||i==h)var J=Su(e,i,r);else i==U||i==T?J=wu(e,i,y):(i==z||i==(h|z))&&!u.length?J=bu(e,i,r,f):J=hn.apply(c,W);var at=N?na:Pa;return za(at(J,W),e,i)}function ba(e,i,r,f){return e===c||ce(e,ai[r])&&!wt.call(f,r)?i:e}function Ua(e,i,r,f,u,d){return Et(e)&&Et(i)&&(d.set(i,e),sn(e,i,c,Ua,d),d.delete(i)),e}function Eu(e){return Pi(e)?c:e}function Ea(e,i,r,f,u,d){var p=r&s,y=e.length,x=i.length;if(y!=x&&!(p&&x>y))return!1;var F=d.get(e);if(F&&d.get(i))return F==i;var B=-1,D=!0,N=r&a?new $e:c;for(d.set(e,i),d.set(i,e);++B<y;){var W=e[B],J=i[B];if(f)var at=p?f(J,W,B,i,e,d):f(W,J,B,e,i,d);if(at!==c){if(at)continue;D=!1;break}if(N){if(!Yn(i,function($,ot){if(!vi(N,ot)&&(W===$||u(W,$,r,f,d)))return N.push(ot)})){D=!1;break}}else if(!(W===J||u(W,J,r,f,d))){D=!1;break}}return d.delete(e),d.delete(i),D}function Au(e,i,r,f,u,d,p){switch(r){case ei:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case gi:return!(e.byteLength!=i.byteLength||!d(new Ki(e),new Ki(i)));case v:case L:case rt:return ce(+e,+i);case M:return e.name==i.name&&e.message==i.message;case we:case Pe:return e==i+"";case Q:var y=Zn;case Kt:var x=f&s;if(y||(y=Mi),e.size!=i.size&&!x)return!1;var F=p.get(e);if(F)return F==i;f|=a,p.set(e,i);var B=Ea(y(e),y(i),f,u,d,p);return p.delete(e),B;case qe:if(Ui)return Ui.call(e)==Ui.call(i)}return!1}function Iu(e,i,r,f,u,d){var p=r&s,y=Sr(e),x=y.length,F=Sr(i),B=F.length;if(x!=B&&!p)return!1;for(var D=x;D--;){var N=y[D];if(!(p?N in i:wt.call(i,N)))return!1}var W=d.get(e);if(W&&d.get(i))return W==i;var J=!0;d.set(e,i),d.set(i,e);for(var at=p;++D<x;){N=y[D];var $=e[N],ot=i[N];if(f)var yt=p?f(ot,$,N,i,e,d):f($,ot,N,e,i,d);if(!(yt===c?$===ot||u($,ot,r,f,d):yt)){J=!1;break}at||(at=N=="constructor")}if(J&&!at){var Wt=e.constructor,Vt=i.constructor;Wt!=Vt&&"constructor"in e&&"constructor"in i&&!(typeof Wt=="function"&&Wt instanceof Wt&&typeof Vt=="function"&&Vt instanceof Vt)&&(J=!1)}return d.delete(e),d.delete(i),J}function Ie(e){return Tr(Fa(e,c,Na),e+"")}function Sr(e){return Ks(e,zt,Er)}function wr(e){return Ks(e,Zt,Aa)}var br=Ji?function(e){return Ji.get(e)}:Gr;function cn(e){for(var i=e.name+"",r=bi[i],f=wt.call(bi,i)?r.length:0;f--;){var u=r[f],d=u.func;if(d==null||d==e)return u.name}return i}function di(e){var i=wt.call(l,"placeholder")?l:e;return i.placeholder}function Z(){var e=l.iteratee||Mr;return e=e===Mr?Zs:e,arguments.length?e(arguments[0],arguments[1]):e}function pn(e,i){var r=e.__data__;return Ru(i)?r[typeof i=="string"?"string":"hash"]:r.map}function Ur(e){for(var i=zt(e),r=i.length;r--;){var f=i[r],u=e[f];i[r]=[f,u,Ca(u)]}return i}function Je(e,i){var r=Df(e,i);return Xs(r)?r:c}function Tu(e){var i=wt.call(e,Xe),r=e[Xe];try{e[Xe]=c;var f=!0}catch{}var u=Wi.call(e);return f&&(i?e[Xe]=r:delete e[Xe]),u}var Er=Jn?function(e){return e==null?[]:(e=xt(e),ze(Jn(e),function(i){return zs.call(e,i)}))}:Hr,Aa=Jn?function(e){for(var i=[];e;)Re(i,Er(e)),e=qi(e);return i}:Hr,kt=Ht;(jn&&kt(new jn(new ArrayBuffer(1)))!=ei||xi&&kt(new xi)!=Q||tr&&kt(tr.resolve())!=Ft||oi&&kt(new oi)!=Kt||Si&&kt(new Si)!=_i)&&(kt=function(e){var i=Ht(e),r=i==_t?e.constructor:c,f=r?je(r):"";if(f)switch(f){case hh:return ei;case uh:return Q;case lh:return Ft;case dh:return Kt;case ch:return _i}return i});function Cu(e,i,r){for(var f=-1,u=r.length;++f<u;){var d=r[f],p=d.size;switch(d.type){case"drop":e+=p;break;case"dropRight":i-=p;break;case"take":i=Ot(i,e+p);break;case"takeRight":e=Pt(e,i-p);break}}return{start:e,end:i}}function Bu(e){var i=e.match(zo);return i?i[1].split(Ro):[]}function Ia(e,i,r){i=Ne(i,e);for(var f=-1,u=i.length,d=!1;++f<u;){var p=me(i[f]);if(!(d=e!=null&&r(e,p)))break;e=e[p]}return d||++f!=u?d:(u=e==null?0:e.length,!!u&&Sn(u)&&Te(p,u)&&(tt(e)||ti(e)))}function Fu(e){var i=e.length,r=new e.constructor(i);return i&&typeof e[0]=="string"&&wt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function Ta(e){return typeof e.constructor=="function"&&!Fi(e)?fi(qi(e)):{}}function Lu(e,i,r){var f=e.constructor;switch(i){case gi:return vr(e);case v:case L:return new f(+e);case ei:return _u(e,r);case En:case An:case In:case Tn:case Cn:case Bn:case Fn:case Ln:case Pn:return ua(e,r);case Q:return new f;case rt:case Pe:return new f(e);case we:return gu(e);case Kt:return new f;case qe:return yu(e)}}function Pu(e,i){var r=i.length;if(!r)return e;var f=r-1;return i[f]=(r>1?"& ":"")+i[f],i=i.join(r>2?", ":" "),e.replace(Po,\`{
/* [wrapped with \`+i+\`] */
\`)}function zu(e){return tt(e)||ti(e)||!!(Rs&&e&&e[Rs])}function Te(e,i){var r=typeof e;return i=i==null?Gt:i,!!i&&(r=="number"||r!="symbol"&&Yo.test(e))&&e>-1&&e%1==0&&e<i}function Yt(e,i,r){if(!Et(r))return!1;var f=typeof i;return(f=="number"?Xt(r)&&Te(i,r.length):f=="string"&&i in r)?ce(r[i],e):!1}function Ar(e,i){if(tt(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||te(e)?!0:Co.test(e)||!To.test(e)||i!=null&&e in xt(i)}function Ru(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function Ir(e){var i=cn(e),r=l[i];if(typeof r!="function"||!(i in ut.prototype))return!1;if(e===r)return!0;var f=br(r);return!!f&&e===f[0]}function Du(e){return!!Fs&&Fs in e}var Ou=Hi?Ce:Yr;function Fi(e){var i=e&&e.constructor,r=typeof i=="function"&&i.prototype||ai;return e===r}function Ca(e){return e===e&&!Et(e)}function Ba(e,i){return function(r){return r==null?!1:r[e]===i&&(i!==c||e in xt(r))}}function ku(e){var i=mn(e,function(f){return r.size===b&&r.clear(),f}),r=i.cache;return i}function Mu(e,i){var r=e[1],f=i[1],u=r|f,d=u<(h|g|Y),p=f==Y&&r==U||f==Y&&r==q&&e[7].length<=i[8]||f==(Y|q)&&i[7].length<=i[8]&&r==U;if(!(d||p))return e;f&h&&(e[2]=i[2],u|=r&h?0:_);var y=i[3];if(y){var x=e[3];e[3]=x?da(x,y,i[4]):y,e[4]=x?De(e[3],A):i[4]}return y=i[5],y&&(x=e[5],e[5]=x?ca(x,y,i[6]):y,e[6]=x?De(e[5],A):i[6]),y=i[7],y&&(e[7]=y),f&Y&&(e[8]=e[8]==null?i[8]:Ot(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=u,e}function Nu(e){var i=[];if(e!=null)for(var r in xt(e))i.push(r);return i}function Gu(e){return Wi.call(e)}function Fa(e,i,r){return i=Pt(i===c?e.length-1:i,0),function(){for(var f=arguments,u=-1,d=Pt(f.length-i,0),p=I(d);++u<d;)p[u]=f[i+u];u=-1;for(var y=I(i+1);++u<i;)y[u]=f[u];return y[i]=r(p),Qt(e,this,y)}}function La(e,i){return i.length<2?e:hi(e,ae(i,0,-1))}function Hu(e,i){for(var r=e.length,f=Ot(i.length,r),u=qt(e);f--;){var d=i[f];e[f]=Te(d,r)?u[d]:c}return e}var Pa=Ra(na),Li=eh||function(e,i){return Rt.setTimeout(e,i)},Tr=Ra(uu);function za(e,i,r){var f=i+"";return Tr(e,Pu(f,Yu(Bu(f),r)))}function Ra(e){var i=0,r=0;return function(){var f=ah(),u=_e-(f-r);if(r=f,u>0){if(++i>=he)return arguments[0]}else i=0;return e.apply(c,arguments)}}function _n(e,i){var r=-1,f=e.length,u=f-1;for(i=i===c?f:i;++r<i;){var d=lr(r,u),p=e[d];e[d]=e[r],e[r]=p}return e.length=i,e}var Da=ku(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Bo,function(r,f,u,d){i.push(u?d.replace(Oo,"$1"):f||r)}),i});function me(e){if(typeof e=="string"||te(e))return e;var i=e+"";return i=="0"&&1/e==-Nt?"-0":i}function je(e){if(e!=null){try{return Yi.call(e)}catch{}try{return e+""}catch{}}return""}function Yu(e,i){return ie(Un,function(r){var f="_."+r[0];i&r[1]&&!Oi(e,f)&&e.push(f)}),e.sort()}function Oa(e){if(e instanceof ut)return e.clone();var i=new re(e.__wrapped__,e.__chain__);return i.__actions__=qt(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function Wu(e,i,r){(r?Yt(e,i,r):i===c)?i=1:i=Pt(et(i),0);var f=e==null?0:e.length;if(!f||i<1)return[];for(var u=0,d=0,p=I($i(f/i));u<f;)p[d++]=ae(e,u,u+=i);return p}function Vu(e){for(var i=-1,r=e==null?0:e.length,f=0,u=[];++i<r;){var d=e[i];d&&(u[f++]=d)}return u}function Ku(){var e=arguments.length;if(!e)return[];for(var i=I(e-1),r=arguments[0],f=e;f--;)i[f-1]=arguments[f];return Re(tt(r)?qt(r):[r],Dt(i,1))}var qu=st(function(e,i){return Ct(e)?Ai(e,Dt(i,1,Ct,!0)):[]}),Xu=st(function(e,i){var r=oe(i);return Ct(r)&&(r=c),Ct(e)?Ai(e,Dt(i,1,Ct,!0),Z(r,2)):[]}),Zu=st(function(e,i){var r=oe(i);return Ct(r)&&(r=c),Ct(e)?Ai(e,Dt(i,1,Ct,!0),c,r):[]});function $u(e,i,r){var f=e==null?0:e.length;return f?(i=r||i===c?1:et(i),ae(e,i<0?0:i,f)):[]}function Qu(e,i,r){var f=e==null?0:e.length;return f?(i=r||i===c?1:et(i),i=f-i,ae(e,0,i<0?0:i)):[]}function Ju(e,i){return e&&e.length?on(e,Z(i,3),!0,!0):[]}function ju(e,i){return e&&e.length?on(e,Z(i,3),!0):[]}function tl(e,i,r,f){var u=e==null?0:e.length;return u?(r&&typeof r!="number"&&Yt(e,i,r)&&(r=0,f=u),Vh(e,i,r,f)):[]}function ka(e,i,r){var f=e==null?0:e.length;if(!f)return-1;var u=r==null?0:et(r);return u<0&&(u=Pt(f+u,0)),ki(e,Z(i,3),u)}function Ma(e,i,r){var f=e==null?0:e.length;if(!f)return-1;var u=f-1;return r!==c&&(u=et(r),u=r<0?Pt(f+u,0):Ot(u,f-1)),ki(e,Z(i,3),u,!0)}function Na(e){var i=e==null?0:e.length;return i?Dt(e,1):[]}function el(e){var i=e==null?0:e.length;return i?Dt(e,Nt):[]}function il(e,i){var r=e==null?0:e.length;return r?(i=i===c?1:et(i),Dt(e,i)):[]}function nl(e){for(var i=-1,r=e==null?0:e.length,f={};++i<r;){var u=e[i];f[u[0]]=u[1]}return f}function Ga(e){return e&&e.length?e[0]:c}function rl(e,i,r){var f=e==null?0:e.length;if(!f)return-1;var u=r==null?0:et(r);return u<0&&(u=Pt(f+u,0)),ni(e,i,u)}function sl(e){var i=e==null?0:e.length;return i?ae(e,0,-1):[]}var al=st(function(e){var i=Ut(e,gr);return i.length&&i[0]===e[0]?ar(i):[]}),ol=st(function(e){var i=oe(e),r=Ut(e,gr);return i===oe(r)?i=c:r.pop(),r.length&&r[0]===e[0]?ar(r,Z(i,2)):[]}),fl=st(function(e){var i=oe(e),r=Ut(e,gr);return i=typeof i=="function"?i:c,i&&r.pop(),r.length&&r[0]===e[0]?ar(r,c,i):[]});function hl(e,i){return e==null?"":rh.call(e,i)}function oe(e){var i=e==null?0:e.length;return i?e[i-1]:c}function ul(e,i,r){var f=e==null?0:e.length;if(!f)return-1;var u=f;return r!==c&&(u=et(r),u=u<0?Pt(f+u,0):Ot(u,f-1)),i===i?Gf(e,i,u):ki(e,Es,u,!0)}function ll(e,i){return e&&e.length?js(e,et(i)):c}var dl=st(Ha);function Ha(e,i){return e&&e.length&&i&&i.length?ur(e,i):e}function cl(e,i,r){return e&&e.length&&i&&i.length?ur(e,i,Z(r,2)):e}function pl(e,i,r){return e&&e.length&&i&&i.length?ur(e,i,c,r):e}var _l=Ie(function(e,i){var r=e==null?0:e.length,f=ir(e,i);return ia(e,Ut(i,function(u){return Te(u,r)?+u:u}).sort(la)),f});function gl(e,i){var r=[];if(!(e&&e.length))return r;var f=-1,u=[],d=e.length;for(i=Z(i,3);++f<d;){var p=e[f];i(p,f,e)&&(r.push(p),u.push(f))}return ia(e,u),r}function Cr(e){return e==null?e:fh.call(e)}function yl(e,i,r){var f=e==null?0:e.length;return f?(r&&typeof r!="number"&&Yt(e,i,r)?(i=0,r=f):(i=i==null?0:et(i),r=r===c?f:et(r)),ae(e,i,r)):[]}function vl(e,i){return an(e,i)}function ml(e,i,r){return cr(e,i,Z(r,2))}function xl(e,i){var r=e==null?0:e.length;if(r){var f=an(e,i);if(f<r&&ce(e[f],i))return f}return-1}function Sl(e,i){return an(e,i,!0)}function wl(e,i,r){return cr(e,i,Z(r,2),!0)}function bl(e,i){var r=e==null?0:e.length;if(r){var f=an(e,i,!0)-1;if(ce(e[f],i))return f}return-1}function Ul(e){return e&&e.length?ra(e):[]}function El(e,i){return e&&e.length?ra(e,Z(i,2)):[]}function Al(e){var i=e==null?0:e.length;return i?ae(e,1,i):[]}function Il(e,i,r){return e&&e.length?(i=r||i===c?1:et(i),ae(e,0,i<0?0:i)):[]}function Tl(e,i,r){var f=e==null?0:e.length;return f?(i=r||i===c?1:et(i),i=f-i,ae(e,i<0?0:i,f)):[]}function Cl(e,i){return e&&e.length?on(e,Z(i,3),!1,!0):[]}function Bl(e,i){return e&&e.length?on(e,Z(i,3)):[]}var Fl=st(function(e){return Me(Dt(e,1,Ct,!0))}),Ll=st(function(e){var i=oe(e);return Ct(i)&&(i=c),Me(Dt(e,1,Ct,!0),Z(i,2))}),Pl=st(function(e){var i=oe(e);return i=typeof i=="function"?i:c,Me(Dt(e,1,Ct,!0),c,i)});function zl(e){return e&&e.length?Me(e):[]}function Rl(e,i){return e&&e.length?Me(e,Z(i,2)):[]}function Dl(e,i){return i=typeof i=="function"?i:c,e&&e.length?Me(e,c,i):[]}function Br(e){if(!(e&&e.length))return[];var i=0;return e=ze(e,function(r){if(Ct(r))return i=Pt(r.length,i),!0}),qn(i,function(r){return Ut(e,Wn(r))})}function Ya(e,i){if(!(e&&e.length))return[];var r=Br(e);return i==null?r:Ut(r,function(f){return Qt(i,c,f)})}var Ol=st(function(e,i){return Ct(e)?Ai(e,i):[]}),kl=st(function(e){return _r(ze(e,Ct))}),Ml=st(function(e){var i=oe(e);return Ct(i)&&(i=c),_r(ze(e,Ct),Z(i,2))}),Nl=st(function(e){var i=oe(e);return i=typeof i=="function"?i:c,_r(ze(e,Ct),c,i)}),Gl=st(Br);function Hl(e,i){return fa(e||[],i||[],Ei)}function Yl(e,i){return fa(e||[],i||[],Ci)}var Wl=st(function(e){var i=e.length,r=i>1?e[i-1]:c;return r=typeof r=="function"?(e.pop(),r):c,Ya(e,r)});function Wa(e){var i=l(e);return i.__chain__=!0,i}function Vl(e,i){return i(e),e}function gn(e,i){return i(e)}var Kl=Ie(function(e){var i=e.length,r=i?e[0]:0,f=this.__wrapped__,u=function(d){return ir(d,e)};return i>1||this.__actions__.length||!(f instanceof ut)||!Te(r)?this.thru(u):(f=f.slice(r,+r+(i?1:0)),f.__actions__.push({func:gn,args:[u],thisArg:c}),new re(f,this.__chain__).thru(function(d){return i&&!d.length&&d.push(c),d}))});function ql(){return Wa(this)}function Xl(){return new re(this.value(),this.__chain__)}function Zl(){this.__values__===c&&(this.__values__=ro(this.value()));var e=this.__index__>=this.__values__.length,i=e?c:this.__values__[this.__index__++];return{done:e,value:i}}function $l(){return this}function Ql(e){for(var i,r=this;r instanceof tn;){var f=Oa(r);f.__index__=0,f.__values__=c,i?u.__wrapped__=f:i=f;var u=f;r=r.__wrapped__}return u.__wrapped__=e,i}function Jl(){var e=this.__wrapped__;if(e instanceof ut){var i=e;return this.__actions__.length&&(i=new ut(this)),i=i.reverse(),i.__actions__.push({func:gn,args:[Cr],thisArg:c}),new re(i,this.__chain__)}return this.thru(Cr)}function jl(){return oa(this.__wrapped__,this.__actions__)}var td=fn(function(e,i,r){wt.call(e,r)?++e[r]:Ee(e,r,1)});function ed(e,i,r){var f=tt(e)?bs:Wh;return r&&Yt(e,i,r)&&(i=c),f(e,Z(i,3))}function id(e,i){var r=tt(e)?ze:Ws;return r(e,Z(i,3))}var nd=ya(ka),rd=ya(Ma);function sd(e,i){return Dt(yn(e,i),1)}function ad(e,i){return Dt(yn(e,i),Nt)}function od(e,i,r){return r=r===c?1:et(r),Dt(yn(e,i),r)}function Va(e,i){var r=tt(e)?ie:ke;return r(e,Z(i,3))}function Ka(e,i){var r=tt(e)?Uf:Ys;return r(e,Z(i,3))}var fd=fn(function(e,i,r){wt.call(e,r)?e[r].push(i):Ee(e,r,[i])});function hd(e,i,r,f){e=Xt(e)?e:pi(e),r=r&&!f?et(r):0;var u=e.length;return r<0&&(r=Pt(u+r,0)),wn(e)?r<=u&&e.indexOf(i,r)>-1:!!u&&ni(e,i,r)>-1}var ud=st(function(e,i,r){var f=-1,u=typeof i=="function",d=Xt(e)?I(e.length):[];return ke(e,function(p){d[++f]=u?Qt(i,p,r):Ii(p,i,r)}),d}),ld=fn(function(e,i,r){Ee(e,r,i)});function yn(e,i){var r=tt(e)?Ut:$s;return r(e,Z(i,3))}function dd(e,i,r,f){return e==null?[]:(tt(i)||(i=i==null?[]:[i]),r=f?c:r,tt(r)||(r=r==null?[]:[r]),ta(e,i,r))}var cd=fn(function(e,i,r){e[r?0:1].push(i)},function(){return[[],[]]});function pd(e,i,r){var f=tt(e)?Hn:Is,u=arguments.length<3;return f(e,Z(i,4),r,u,ke)}function _d(e,i,r){var f=tt(e)?Ef:Is,u=arguments.length<3;return f(e,Z(i,4),r,u,Ys)}function gd(e,i){var r=tt(e)?ze:Ws;return r(e,xn(Z(i,3)))}function yd(e){var i=tt(e)?Ms:fu;return i(e)}function vd(e,i,r){(r?Yt(e,i,r):i===c)?i=1:i=et(i);var f=tt(e)?Mh:hu;return f(e,i)}function md(e){var i=tt(e)?Nh:lu;return i(e)}function xd(e){if(e==null)return 0;if(Xt(e))return wn(e)?si(e):e.length;var i=kt(e);return i==Q||i==Kt?e.size:fr(e).length}function Sd(e,i,r){var f=tt(e)?Yn:du;return r&&Yt(e,i,r)&&(i=c),f(e,Z(i,3))}var wd=st(function(e,i){if(e==null)return[];var r=i.length;return r>1&&Yt(e,i[0],i[1])?i=[]:r>2&&Yt(i[0],i[1],i[2])&&(i=[i[0]]),ta(e,Dt(i,1),[])}),vn=th||function(){return Rt.Date.now()};function bd(e,i){if(typeof i!="function")throw new ne(k);return e=et(e),function(){if(--e<1)return i.apply(this,arguments)}}function qa(e,i,r){return i=r?c:i,i=e&&i==null?e.length:i,Ae(e,Y,c,c,c,c,i)}function Xa(e,i){var r;if(typeof i!="function")throw new ne(k);return e=et(e),function(){return--e>0&&(r=i.apply(this,arguments)),e<=1&&(i=c),r}}var Fr=st(function(e,i,r){var f=h;if(r.length){var u=De(r,di(Fr));f|=z}return Ae(e,f,i,r,u)}),Za=st(function(e,i,r){var f=h|g;if(r.length){var u=De(r,di(Za));f|=z}return Ae(i,f,e,r,u)});function $a(e,i,r){i=r?c:i;var f=Ae(e,U,c,c,c,c,c,i);return f.placeholder=$a.placeholder,f}function Qa(e,i,r){i=r?c:i;var f=Ae(e,T,c,c,c,c,c,i);return f.placeholder=Qa.placeholder,f}function Ja(e,i,r){var f,u,d,p,y,x,F=0,B=!1,D=!1,N=!0;if(typeof e!="function")throw new ne(k);i=fe(i)||0,Et(r)&&(B=!!r.leading,D="maxWait"in r,d=D?Pt(fe(r.maxWait)||0,i):d,N="trailing"in r?!!r.trailing:N);function W(Bt){var pe=f,Fe=u;return f=u=c,F=Bt,p=e.apply(Fe,pe),p}function J(Bt){return F=Bt,y=Li(ot,i),B?W(Bt):p}function at(Bt){var pe=Bt-x,Fe=Bt-F,vo=i-pe;return D?Ot(vo,d-Fe):vo}function $(Bt){var pe=Bt-x,Fe=Bt-F;return x===c||pe>=i||pe<0||D&&Fe>=d}function ot(){var Bt=vn();if($(Bt))return yt(Bt);y=Li(ot,at(Bt))}function yt(Bt){return y=c,N&&f?W(Bt):(f=u=c,p)}function Wt(){y!==c&&pu(y),F=0,f=x=u=y=c}function Vt(){return y===c?p:yt(vn())}function Ye(){var Bt=vn(),pe=$(Bt);if(f=arguments,u=this,x=Bt,pe){if(y===c)return J(x);if(D)return y=Li(ot,i),W(x)}return y===c&&(y=Li(ot,i)),p}return Ye.cancel=Wt,Ye.flush=Vt,Ye}var Ud=st(function(e,i){return Hs(e,1,i)}),Ed=st(function(e,i,r){return Hs(e,fe(i)||0,r)});function Ad(e){return Ae(e,V)}function mn(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new ne(k);var r=function(){var f=arguments,u=i?i.apply(this,f):f[0],d=r.cache;if(d.has(u))return d.get(u);var p=e.apply(this,f);return r.cache=d.set(u,p)||d,p};return r.cache=new(mn.Cache||Ue),r}mn.Cache=Ue;function xn(e){if(typeof e!="function")throw new ne(k);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function Id(e){return Xa(2,e)}var Td=cu(function(e,i){i=i.length==1&&tt(i[0])?Ut(i[0],Jt(Z())):Ut(Dt(i,1),Jt(Z()));var r=i.length;return st(function(f){for(var u=-1,d=Ot(f.length,r);++u<d;)f[u]=i[u].call(this,f[u]);return Qt(e,this,f)})}),Lr=st(function(e,i){var r=De(i,di(Lr));return Ae(e,z,c,i,r)}),ja=st(function(e,i){var r=De(i,di(ja));return Ae(e,R,c,i,r)}),Cd=Ie(function(e,i){return Ae(e,q,c,c,c,i)});function Bd(e,i){if(typeof e!="function")throw new ne(k);return i=i===c?i:et(i),st(e,i)}function Fd(e,i){if(typeof e!="function")throw new ne(k);return i=i==null?0:Pt(et(i),0),st(function(r){var f=r[i],u=Ge(r,0,i);return f&&Re(u,f),Qt(e,this,u)})}function Ld(e,i,r){var f=!0,u=!0;if(typeof e!="function")throw new ne(k);return Et(r)&&(f="leading"in r?!!r.leading:f,u="trailing"in r?!!r.trailing:u),Ja(e,i,{leading:f,maxWait:i,trailing:u})}function Pd(e){return qa(e,1)}function zd(e,i){return Lr(yr(i),e)}function Rd(){if(!arguments.length)return[];var e=arguments[0];return tt(e)?e:[e]}function Dd(e){return se(e,n)}function Od(e,i){return i=typeof i=="function"?i:c,se(e,n,i)}function kd(e){return se(e,K|n)}function Md(e,i){return i=typeof i=="function"?i:c,se(e,K|n,i)}function Nd(e,i){return i==null||Gs(e,i,zt(i))}function ce(e,i){return e===i||e!==e&&i!==i}var Gd=dn(sr),Hd=dn(function(e,i){return e>=i}),ti=qs(function(){return arguments}())?qs:function(e){return It(e)&&wt.call(e,"callee")&&!zs.call(e,"callee")},tt=I.isArray,Yd=ys?Jt(ys):$h;function Xt(e){return e!=null&&Sn(e.length)&&!Ce(e)}function Ct(e){return It(e)&&Xt(e)}function Wd(e){return e===!0||e===!1||It(e)&&Ht(e)==v}var He=ih||Yr,Vd=vs?Jt(vs):Qh;function Kd(e){return It(e)&&e.nodeType===1&&!Pi(e)}function qd(e){if(e==null)return!0;if(Xt(e)&&(tt(e)||typeof e=="string"||typeof e.splice=="function"||He(e)||ci(e)||ti(e)))return!e.length;var i=kt(e);if(i==Q||i==Kt)return!e.size;if(Fi(e))return!fr(e).length;for(var r in e)if(wt.call(e,r))return!1;return!0}function Xd(e,i){return Ti(e,i)}function Zd(e,i,r){r=typeof r=="function"?r:c;var f=r?r(e,i):c;return f===c?Ti(e,i,c,r):!!f}function Pr(e){if(!It(e))return!1;var i=Ht(e);return i==M||i==G||typeof e.message=="string"&&typeof e.name=="string"&&!Pi(e)}function $d(e){return typeof e=="number"&&nh(e)}function Ce(e){if(!Et(e))return!1;var i=Ht(e);return i==ht||i==ct||i==P||i==Se}function to(e){return typeof e=="number"&&e==et(e)}function Sn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Gt}function Et(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function It(e){return e!=null&&typeof e=="object"}var eo=ms?Jt(ms):jh;function Qd(e,i){return e===i||or(e,i,Ur(i))}function Jd(e,i,r){return r=typeof r=="function"?r:c,or(e,i,Ur(i),r)}function jd(e){return io(e)&&e!=+e}function tc(e){if(Ou(e))throw new j(o);return Xs(e)}function ec(e){return e===null}function ic(e){return e==null}function io(e){return typeof e=="number"||It(e)&&Ht(e)==rt}function Pi(e){if(!It(e)||Ht(e)!=_t)return!1;var i=qi(e);if(i===null)return!0;var r=wt.call(i,"constructor")&&i.constructor;return typeof r=="function"&&r instanceof r&&Yi.call(r)==$f}var zr=xs?Jt(xs):tu;function nc(e){return to(e)&&e>=-Gt&&e<=Gt}var no=Ss?Jt(Ss):eu;function wn(e){return typeof e=="string"||!tt(e)&&It(e)&&Ht(e)==Pe}function te(e){return typeof e=="symbol"||It(e)&&Ht(e)==qe}var ci=ws?Jt(ws):iu;function rc(e){return e===c}function sc(e){return It(e)&&kt(e)==_i}function ac(e){return It(e)&&Ht(e)==xo}var oc=dn(hr),fc=dn(function(e,i){return e<=i});function ro(e){if(!e)return[];if(Xt(e))return wn(e)?le(e):qt(e);if(mi&&e[mi])return kf(e[mi]());var i=kt(e),r=i==Q?Zn:i==Kt?Mi:pi;return r(e)}function Be(e){if(!e)return e===0?e:0;if(e=fe(e),e===Nt||e===-Nt){var i=e<0?-1:1;return i*We}return e===e?e:0}function et(e){var i=Be(e),r=i%1;return i===i?r?i-r:i:0}function so(e){return e?Qe(et(e),0,dt):0}function fe(e){if(typeof e=="number")return e;if(te(e))return Ve;if(Et(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Et(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=e.replace(qr,"");var r=No.test(e);return r||Ho.test(e)?Sf(e.slice(2),r?2:8):Mo.test(e)?Ve:+e}function ao(e){return ve(e,Zt(e))}function hc(e){return e?Qe(et(e),-Gt,Gt):e===0?e:0}function gt(e){return e==null?"":jt(e)}var uc=ui(function(e,i){if(Fi(i)||Xt(i)){ve(i,zt(i),e);return}for(var r in i)wt.call(i,r)&&Ei(e,r,i[r])}),oo=ui(function(e,i){ve(i,Zt(i),e)}),bn=ui(function(e,i,r,f){ve(i,Zt(i),e,f)}),lc=ui(function(e,i,r,f){ve(i,zt(i),e,f)}),dc=Ie(ir);function cc(e,i){var r=fi(e);return i==null?r:Ns(r,i)}var pc=st(function(e,i){e=xt(e);var r=-1,f=i.length,u=f>2?i[2]:c;for(u&&Yt(i[0],i[1],u)&&(f=1);++r<f;)for(var d=i[r],p=Zt(d),y=-1,x=p.length;++y<x;){var F=p[y],B=e[F];(B===c||ce(B,ai[F])&&!wt.call(e,F))&&(e[F]=d[F])}return e}),_c=st(function(e){return e.push(c,Ua),Qt(fo,c,e)});function gc(e,i){return Us(e,Z(i,3),ye)}function yc(e,i){return Us(e,Z(i,3),rr)}function vc(e,i){return e==null?e:nr(e,Z(i,3),Zt)}function mc(e,i){return e==null?e:Vs(e,Z(i,3),Zt)}function xc(e,i){return e&&ye(e,Z(i,3))}function Sc(e,i){return e&&rr(e,Z(i,3))}function wc(e){return e==null?[]:rn(e,zt(e))}function bc(e){return e==null?[]:rn(e,Zt(e))}function Rr(e,i,r){var f=e==null?c:hi(e,i);return f===c?r:f}function Uc(e,i){return e!=null&&Ia(e,i,Kh)}function Dr(e,i){return e!=null&&Ia(e,i,qh)}var Ec=ma(function(e,i,r){i!=null&&typeof i.toString!="function"&&(i=Wi.call(i)),e[i]=r},kr($t)),Ac=ma(function(e,i,r){i!=null&&typeof i.toString!="function"&&(i=Wi.call(i)),wt.call(e,i)?e[i].push(r):e[i]=[r]},Z),Ic=st(Ii);function zt(e){return Xt(e)?ks(e):fr(e)}function Zt(e){return Xt(e)?ks(e,!0):nu(e)}function Tc(e,i){var r={};return i=Z(i,3),ye(e,function(f,u,d){Ee(r,i(f,u,d),f)}),r}function Cc(e,i){var r={};return i=Z(i,3),ye(e,function(f,u,d){Ee(r,u,i(f,u,d))}),r}var Bc=ui(function(e,i,r){sn(e,i,r)}),fo=ui(function(e,i,r,f){sn(e,i,r,f)}),Fc=Ie(function(e,i){var r={};if(e==null)return r;var f=!1;i=Ut(i,function(d){return d=Ne(d,e),f||(f=d.length>1),d}),ve(e,wr(e),r),f&&(r=se(r,K|t|n,Eu));for(var u=i.length;u--;)pr(r,i[u]);return r});function Lc(e,i){return ho(e,xn(Z(i)))}var Pc=Ie(function(e,i){return e==null?{}:su(e,i)});function ho(e,i){if(e==null)return{};var r=Ut(wr(e),function(f){return[f]});return i=Z(i),ea(e,r,function(f,u){return i(f,u[0])})}function zc(e,i,r){i=Ne(i,e);var f=-1,u=i.length;for(u||(u=1,e=c);++f<u;){var d=e==null?c:e[me(i[f])];d===c&&(f=u,d=r),e=Ce(d)?d.call(e):d}return e}function Rc(e,i,r){return e==null?e:Ci(e,i,r)}function Dc(e,i,r,f){return f=typeof f=="function"?f:c,e==null?e:Ci(e,i,r,f)}var uo=wa(zt),lo=wa(Zt);function Oc(e,i,r){var f=tt(e),u=f||He(e)||ci(e);if(i=Z(i,4),r==null){var d=e&&e.constructor;u?r=f?new d:[]:Et(e)?r=Ce(d)?fi(qi(e)):{}:r={}}return(u?ie:ye)(e,function(p,y,x){return i(r,p,y,x)}),r}function kc(e,i){return e==null?!0:pr(e,i)}function Mc(e,i,r){return e==null?e:aa(e,i,yr(r))}function Nc(e,i,r,f){return f=typeof f=="function"?f:c,e==null?e:aa(e,i,yr(r),f)}function pi(e){return e==null?[]:Xn(e,zt(e))}function Gc(e){return e==null?[]:Xn(e,Zt(e))}function Hc(e,i,r){return r===c&&(r=i,i=c),r!==c&&(r=fe(r),r=r===r?r:0),i!==c&&(i=fe(i),i=i===i?i:0),Qe(fe(e),i,r)}function Yc(e,i,r){return i=Be(i),r===c?(r=i,i=0):r=Be(r),e=fe(e),Xh(e,i,r)}function Wc(e,i,r){if(r&&typeof r!="boolean"&&Yt(e,i,r)&&(i=r=c),r===c&&(typeof i=="boolean"?(r=i,i=c):typeof e=="boolean"&&(r=e,e=c)),e===c&&i===c?(e=0,i=1):(e=Be(e),i===c?(i=e,e=0):i=Be(i)),e>i){var f=e;e=i,i=f}if(r||e%1||i%1){var u=Ds();return Ot(e+u*(i-e+xf("1e-"+((u+"").length-1))),i)}return lr(e,i)}var Vc=li(function(e,i,r){return i=i.toLowerCase(),e+(r?co(i):i)});function co(e){return Or(gt(e).toLowerCase())}function po(e){return e=gt(e),e&&e.replace(Wo,Pf).replace(uf,"")}function Kc(e,i,r){e=gt(e),i=jt(i);var f=e.length;r=r===c?f:Qe(et(r),0,f);var u=r;return r-=i.length,r>=0&&e.slice(r,u)==i}function qc(e){return e=gt(e),e&&Eo.test(e)?e.replace(Vr,zf):e}function Xc(e){return e=gt(e),e&&Fo.test(e)?e.replace(zn,"\\\\$&"):e}var Zc=li(function(e,i,r){return e+(r?"-":"")+i.toLowerCase()}),$c=li(function(e,i,r){return e+(r?" ":"")+i.toLowerCase()}),Qc=ga("toLowerCase");function Jc(e,i,r){e=gt(e),i=et(i);var f=i?si(e):0;if(!i||f>=i)return e;var u=(i-f)/2;return ln(Qi(u),r)+e+ln($i(u),r)}function jc(e,i,r){e=gt(e),i=et(i);var f=i?si(e):0;return i&&f<i?e+ln(i-f,r):e}function tp(e,i,r){e=gt(e),i=et(i);var f=i?si(e):0;return i&&f<i?ln(i-f,r)+e:e}function ep(e,i,r){return r||i==null?i=0:i&&(i=+i),oh(gt(e).replace(Xr,""),i||0)}function ip(e,i,r){return(r?Yt(e,i,r):i===c)?i=1:i=et(i),dr(gt(e),i)}function np(){var e=arguments,i=gt(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var rp=li(function(e,i,r){return e+(r?"_":"")+i.toLowerCase()});function sp(e,i,r){return r&&typeof r!="number"&&Yt(e,i,r)&&(i=r=c),r=r===c?dt:r>>>0,r?(e=gt(e),e&&(typeof i=="string"||i!=null&&!zr(i))&&(i=jt(i),!i&&ri(e))?Ge(le(e),0,r):e.split(i,r)):[]}var ap=li(function(e,i,r){return e+(r?" ":"")+Or(i)});function op(e,i,r){return e=gt(e),r=r==null?0:Qe(et(r),0,e.length),i=jt(i),e.slice(r,r+i.length)==i}function fp(e,i,r){var f=l.templateSettings;r&&Yt(e,i,r)&&(i=c),e=gt(e),i=bn({},i,f,ba);var u=bn({},i.imports,f.imports,ba),d=zt(u),p=Xn(u,d),y,x,F=0,B=i.interpolate||zi,D="__p += '",N=Qn((i.escape||zi).source+"|"+B.source+"|"+(B===Kr?ko:zi).source+"|"+(i.evaluate||zi).source+"|$","g"),W="//# sourceURL="+("sourceURL"in i?i.sourceURL:"lodash.templateSources["+ ++_f+"]")+\`
\`;e.replace(N,function($,ot,yt,Wt,Vt,Ye){return yt||(yt=Wt),D+=e.slice(F,Ye).replace(Vo,Rf),ot&&(y=!0,D+=\`' +
__e(\`+ot+\`) +
'\`),Vt&&(x=!0,D+=\`';
\`+Vt+\`;
__p += '\`),yt&&(D+=\`' +
((__t = (\`+yt+\`)) == null ? '' : __t) +
'\`),F=Ye+$.length,$}),D+=\`';
\`;var J=i.variable;J||(D=\`with (obj) {
\`+D+\`
}
\`),D=(x?D.replace(So,""):D).replace(wo,"$1").replace(bo,"$1;"),D="function("+(J||"obj")+\`) {
\`+(J?"":\`obj || (obj = {});
\`)+"var __t, __p = ''"+(y?", __e = _.escape":"")+(x?\`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
\`:\`;
\`)+D+\`return __p
}\`;var at=go(function(){return pt(d,W+"return "+D).apply(c,p)});if(at.source=D,Pr(at))throw at;return at}function hp(e){return gt(e).toLowerCase()}function up(e){return gt(e).toUpperCase()}function lp(e,i,r){if(e=gt(e),e&&(r||i===c))return e.replace(qr,"");if(!e||!(i=jt(i)))return e;var f=le(e),u=le(i),d=Ts(f,u),p=Cs(f,u)+1;return Ge(f,d,p).join("")}function dp(e,i,r){if(e=gt(e),e&&(r||i===c))return e.replace(Lo,"");if(!e||!(i=jt(i)))return e;var f=le(e),u=Cs(f,le(i))+1;return Ge(f,0,u).join("")}function cp(e,i,r){if(e=gt(e),e&&(r||i===c))return e.replace(Xr,"");if(!e||!(i=jt(i)))return e;var f=le(e),u=Ts(f,le(i));return Ge(f,u).join("")}function pp(e,i){var r=mt,f=vt;if(Et(i)){var u="separator"in i?i.separator:u;r="length"in i?et(i.length):r,f="omission"in i?jt(i.omission):f}e=gt(e);var d=e.length;if(ri(e)){var p=le(e);d=p.length}if(r>=d)return e;var y=r-si(f);if(y<1)return f;var x=p?Ge(p,0,y).join(""):e.slice(0,y);if(u===c)return x+f;if(p&&(y+=x.length-y),zr(u)){if(e.slice(y).search(u)){var F,B=x;for(u.global||(u=Qn(u.source,gt(Zr.exec(u))+"g")),u.lastIndex=0;F=u.exec(B);)var D=F.index;x=x.slice(0,D===c?y:D)}}else if(e.indexOf(jt(u),y)!=y){var N=x.lastIndexOf(u);N>-1&&(x=x.slice(0,N))}return x+f}function _p(e){return e=gt(e),e&&Uo.test(e)?e.replace(Wr,Hf):e}var gp=li(function(e,i,r){return e+(r?" ":"")+i.toUpperCase()}),Or=ga("toUpperCase");function _o(e,i,r){return e=gt(e),i=r?c:i,i===c?Of(e)?Vf(e):Tf(e):e.match(i)||[]}var go=st(function(e,i){try{return Qt(e,c,i)}catch(r){return Pr(r)?r:new j(r)}}),yp=Ie(function(e,i){return ie(i,function(r){r=me(r),Ee(e,r,Fr(e[r],e))}),e});function vp(e){var i=e==null?0:e.length,r=Z();return e=i?Ut(e,function(f){if(typeof f[1]!="function")throw new ne(k);return[r(f[0]),f[1]]}):[],st(function(f){for(var u=-1;++u<i;){var d=e[u];if(Qt(d[0],this,f))return Qt(d[1],this,f)}})}function mp(e){return Yh(se(e,K))}function kr(e){return function(){return e}}function xp(e,i){return e==null||e!==e?i:e}var Sp=va(),wp=va(!0);function $t(e){return e}function Mr(e){return Zs(typeof e=="function"?e:se(e,K))}function bp(e){return Qs(se(e,K))}function Up(e,i){return Js(e,se(i,K))}var Ep=st(function(e,i){return function(r){return Ii(r,e,i)}}),Ap=st(function(e,i){return function(r){return Ii(e,r,i)}});function Nr(e,i,r){var f=zt(i),u=rn(i,f);r==null&&!(Et(i)&&(u.length||!f.length))&&(r=i,i=e,e=this,u=rn(i,zt(i)));var d=!(Et(r)&&"chain"in r)||!!r.chain,p=Ce(e);return ie(u,function(y){var x=i[y];e[y]=x,p&&(e.prototype[y]=function(){var F=this.__chain__;if(d||F){var B=e(this.__wrapped__),D=B.__actions__=qt(this.__actions__);return D.push({func:x,args:arguments,thisArg:e}),B.__chain__=F,B}return x.apply(e,Re([this.value()],arguments))})}),e}function Ip(){return Rt._===this&&(Rt._=Qf),this}function Gr(){}function Tp(e){return e=et(e),st(function(i){return js(i,e)})}var Cp=mr(Ut),Bp=mr(bs),Fp=mr(Yn);function yo(e){return Ar(e)?Wn(me(e)):au(e)}function Lp(e){return function(i){return e==null?c:hi(e,i)}}var Pp=xa(),zp=xa(!0);function Hr(){return[]}function Yr(){return!1}function Rp(){return{}}function Dp(){return""}function Op(){return!0}function kp(e,i){if(e=et(e),e<1||e>Gt)return[];var r=dt,f=Ot(e,dt);i=Z(i),e-=dt;for(var u=qn(f,i);++r<e;)i(r);return u}function Mp(e){return tt(e)?Ut(e,me):te(e)?[e]:qt(Da(gt(e)))}function Np(e){var i=++Zf;return gt(e)+i}var Gp=un(function(e,i){return e+i},0),Hp=xr("ceil"),Yp=un(function(e,i){return e/i},1),Wp=xr("floor");function Vp(e){return e&&e.length?nn(e,$t,sr):c}function Kp(e,i){return e&&e.length?nn(e,Z(i,2),sr):c}function qp(e){return As(e,$t)}function Xp(e,i){return As(e,Z(i,2))}function Zp(e){return e&&e.length?nn(e,$t,hr):c}function $p(e,i){return e&&e.length?nn(e,Z(i,2),hr):c}var Qp=un(function(e,i){return e*i},1),Jp=xr("round"),jp=un(function(e,i){return e-i},0);function t_(e){return e&&e.length?Kn(e,$t):0}function e_(e,i){return e&&e.length?Kn(e,Z(i,2)):0}return l.after=bd,l.ary=qa,l.assign=uc,l.assignIn=oo,l.assignInWith=bn,l.assignWith=lc,l.at=dc,l.before=Xa,l.bind=Fr,l.bindAll=yp,l.bindKey=Za,l.castArray=Rd,l.chain=Wa,l.chunk=Wu,l.compact=Vu,l.concat=Ku,l.cond=vp,l.conforms=mp,l.constant=kr,l.countBy=td,l.create=cc,l.curry=$a,l.curryRight=Qa,l.debounce=Ja,l.defaults=pc,l.defaultsDeep=_c,l.defer=Ud,l.delay=Ed,l.difference=qu,l.differenceBy=Xu,l.differenceWith=Zu,l.drop=$u,l.dropRight=Qu,l.dropRightWhile=Ju,l.dropWhile=ju,l.fill=tl,l.filter=id,l.flatMap=sd,l.flatMapDeep=ad,l.flatMapDepth=od,l.flatten=Na,l.flattenDeep=el,l.flattenDepth=il,l.flip=Ad,l.flow=Sp,l.flowRight=wp,l.fromPairs=nl,l.functions=wc,l.functionsIn=bc,l.groupBy=fd,l.initial=sl,l.intersection=al,l.intersectionBy=ol,l.intersectionWith=fl,l.invert=Ec,l.invertBy=Ac,l.invokeMap=ud,l.iteratee=Mr,l.keyBy=ld,l.keys=zt,l.keysIn=Zt,l.map=yn,l.mapKeys=Tc,l.mapValues=Cc,l.matches=bp,l.matchesProperty=Up,l.memoize=mn,l.merge=Bc,l.mergeWith=fo,l.method=Ep,l.methodOf=Ap,l.mixin=Nr,l.negate=xn,l.nthArg=Tp,l.omit=Fc,l.omitBy=Lc,l.once=Id,l.orderBy=dd,l.over=Cp,l.overArgs=Td,l.overEvery=Bp,l.overSome=Fp,l.partial=Lr,l.partialRight=ja,l.partition=cd,l.pick=Pc,l.pickBy=ho,l.property=yo,l.propertyOf=Lp,l.pull=dl,l.pullAll=Ha,l.pullAllBy=cl,l.pullAllWith=pl,l.pullAt=_l,l.range=Pp,l.rangeRight=zp,l.rearg=Cd,l.reject=gd,l.remove=gl,l.rest=Bd,l.reverse=Cr,l.sampleSize=vd,l.set=Rc,l.setWith=Dc,l.shuffle=md,l.slice=yl,l.sortBy=wd,l.sortedUniq=Ul,l.sortedUniqBy=El,l.split=sp,l.spread=Fd,l.tail=Al,l.take=Il,l.takeRight=Tl,l.takeRightWhile=Cl,l.takeWhile=Bl,l.tap=Vl,l.throttle=Ld,l.thru=gn,l.toArray=ro,l.toPairs=uo,l.toPairsIn=lo,l.toPath=Mp,l.toPlainObject=ao,l.transform=Oc,l.unary=Pd,l.union=Fl,l.unionBy=Ll,l.unionWith=Pl,l.uniq=zl,l.uniqBy=Rl,l.uniqWith=Dl,l.unset=kc,l.unzip=Br,l.unzipWith=Ya,l.update=Mc,l.updateWith=Nc,l.values=pi,l.valuesIn=Gc,l.without=Ol,l.words=_o,l.wrap=zd,l.xor=kl,l.xorBy=Ml,l.xorWith=Nl,l.zip=Gl,l.zipObject=Hl,l.zipObjectDeep=Yl,l.zipWith=Wl,l.entries=uo,l.entriesIn=lo,l.extend=oo,l.extendWith=bn,Nr(l,l),l.add=Gp,l.attempt=go,l.camelCase=Vc,l.capitalize=co,l.ceil=Hp,l.clamp=Hc,l.clone=Dd,l.cloneDeep=kd,l.cloneDeepWith=Md,l.cloneWith=Od,l.conformsTo=Nd,l.deburr=po,l.defaultTo=xp,l.divide=Yp,l.endsWith=Kc,l.eq=ce,l.escape=qc,l.escapeRegExp=Xc,l.every=ed,l.find=nd,l.findIndex=ka,l.findKey=gc,l.findLast=rd,l.findLastIndex=Ma,l.findLastKey=yc,l.floor=Wp,l.forEach=Va,l.forEachRight=Ka,l.forIn=vc,l.forInRight=mc,l.forOwn=xc,l.forOwnRight=Sc,l.get=Rr,l.gt=Gd,l.gte=Hd,l.has=Uc,l.hasIn=Dr,l.head=Ga,l.identity=$t,l.includes=hd,l.indexOf=rl,l.inRange=Yc,l.invoke=Ic,l.isArguments=ti,l.isArray=tt,l.isArrayBuffer=Yd,l.isArrayLike=Xt,l.isArrayLikeObject=Ct,l.isBoolean=Wd,l.isBuffer=He,l.isDate=Vd,l.isElement=Kd,l.isEmpty=qd,l.isEqual=Xd,l.isEqualWith=Zd,l.isError=Pr,l.isFinite=$d,l.isFunction=Ce,l.isInteger=to,l.isLength=Sn,l.isMap=eo,l.isMatch=Qd,l.isMatchWith=Jd,l.isNaN=jd,l.isNative=tc,l.isNil=ic,l.isNull=ec,l.isNumber=io,l.isObject=Et,l.isObjectLike=It,l.isPlainObject=Pi,l.isRegExp=zr,l.isSafeInteger=nc,l.isSet=no,l.isString=wn,l.isSymbol=te,l.isTypedArray=ci,l.isUndefined=rc,l.isWeakMap=sc,l.isWeakSet=ac,l.join=hl,l.kebabCase=Zc,l.last=oe,l.lastIndexOf=ul,l.lowerCase=$c,l.lowerFirst=Qc,l.lt=oc,l.lte=fc,l.max=Vp,l.maxBy=Kp,l.mean=qp,l.meanBy=Xp,l.min=Zp,l.minBy=$p,l.stubArray=Hr,l.stubFalse=Yr,l.stubObject=Rp,l.stubString=Dp,l.stubTrue=Op,l.multiply=Qp,l.nth=ll,l.noConflict=Ip,l.noop=Gr,l.now=vn,l.pad=Jc,l.padEnd=jc,l.padStart=tp,l.parseInt=ep,l.random=Wc,l.reduce=pd,l.reduceRight=_d,l.repeat=ip,l.replace=np,l.result=zc,l.round=Jp,l.runInContext=m,l.sample=yd,l.size=xd,l.snakeCase=rp,l.some=Sd,l.sortedIndex=vl,l.sortedIndexBy=ml,l.sortedIndexOf=xl,l.sortedLastIndex=Sl,l.sortedLastIndexBy=wl,l.sortedLastIndexOf=bl,l.startCase=ap,l.startsWith=op,l.subtract=jp,l.sum=t_,l.sumBy=e_,l.template=fp,l.times=kp,l.toFinite=Be,l.toInteger=et,l.toLength=so,l.toLower=hp,l.toNumber=fe,l.toSafeInteger=hc,l.toString=gt,l.toUpper=up,l.trim=lp,l.trimEnd=dp,l.trimStart=cp,l.truncate=pp,l.unescape=_p,l.uniqueId=Np,l.upperCase=gp,l.upperFirst=Or,l.each=Va,l.eachRight=Ka,l.first=Ga,Nr(l,function(){var e={};return ye(l,function(i,r){wt.call(l.prototype,r)||(e[r]=i)}),e}(),{chain:!1}),l.VERSION=ft,ie(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){l[e].placeholder=l}),ie(["drop","take"],function(e,i){ut.prototype[e]=function(r){r=r===c?1:Pt(et(r),0);var f=this.__filtered__&&!i?new ut(this):this.clone();return f.__filtered__?f.__takeCount__=Ot(r,f.__takeCount__):f.__views__.push({size:Ot(r,dt),type:e+(f.__dir__<0?"Right":"")}),f},ut.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),ie(["filter","map","takeWhile"],function(e,i){var r=i+1,f=r==ge||r==ue;ut.prototype[e]=function(u){var d=this.clone();return d.__iteratees__.push({iteratee:Z(u,3),type:r}),d.__filtered__=d.__filtered__||f,d}}),ie(["head","last"],function(e,i){var r="take"+(i?"Right":"");ut.prototype[e]=function(){return this[r](1).value()[0]}}),ie(["initial","tail"],function(e,i){var r="drop"+(i?"":"Right");ut.prototype[e]=function(){return this.__filtered__?new ut(this):this[r](1)}}),ut.prototype.compact=function(){return this.filter($t)},ut.prototype.find=function(e){return this.filter(e).head()},ut.prototype.findLast=function(e){return this.reverse().find(e)},ut.prototype.invokeMap=st(function(e,i){return typeof e=="function"?new ut(this):this.map(function(r){return Ii(r,e,i)})}),ut.prototype.reject=function(e){return this.filter(xn(Z(e)))},ut.prototype.slice=function(e,i){e=et(e);var r=this;return r.__filtered__&&(e>0||i<0)?new ut(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),i!==c&&(i=et(i),r=i<0?r.dropRight(-i):r.take(i-e)),r)},ut.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ut.prototype.toArray=function(){return this.take(dt)},ye(ut.prototype,function(e,i){var r=/^(?:filter|find|map|reject)|While$/.test(i),f=/^(?:head|last)$/.test(i),u=l[f?"take"+(i=="last"?"Right":""):i],d=f||/^find/.test(i);u&&(l.prototype[i]=function(){var p=this.__wrapped__,y=f?[1]:arguments,x=p instanceof ut,F=y[0],B=x||tt(p),D=function(ot){var yt=u.apply(l,Re([ot],y));return f&&N?yt[0]:yt};B&&r&&typeof F=="function"&&F.length!=1&&(x=B=!1);var N=this.__chain__,W=!!this.__actions__.length,J=d&&!N,at=x&&!W;if(!d&&B){p=at?p:new ut(this);var $=e.apply(p,y);return $.__actions__.push({func:gn,args:[D],thisArg:c}),new re($,N)}return J&&at?e.apply(this,y):($=this.thru(D),J?f?$.value()[0]:$.value():$)})}),ie(["pop","push","shift","sort","splice","unshift"],function(e){var i=Gi[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",f=/^(?:pop|shift)$/.test(e);l.prototype[e]=function(){var u=arguments;if(f&&!this.__chain__){var d=this.value();return i.apply(tt(d)?d:[],u)}return this[r](function(p){return i.apply(tt(p)?p:[],u)})}}),ye(ut.prototype,function(e,i){var r=l[i];if(r){var f=r.name+"",u=bi[f]||(bi[f]=[]);u.push({name:i,func:r})}}),bi[hn(c,g).name]=[{name:"wrapper",func:c}],ut.prototype.clone=ph,ut.prototype.reverse=_h,ut.prototype.value=gh,l.prototype.at=Kl,l.prototype.chain=ql,l.prototype.commit=Xl,l.prototype.next=Zl,l.prototype.plant=Ql,l.prototype.reverse=Jl,l.prototype.toJSON=l.prototype.valueOf=l.prototype.value=jl,l.prototype.first=l.prototype.head,mi&&(l.prototype[mi]=$l),l},Ni=Kf();Rt._=Ni,S=function(){return Ni}.call(lt,X,lt,O),S!==c&&(O.exports=S)}).call(this)}).call(this,X("d8a2b18087957e350ade"),X("6a927222a29e571499a4")(Mt))},"1bc8edb861e50234ecc3":function(Mt,lt,X){var E=function(){var t=new Date,n=4,s=3,a=2,h=1,g=n,_={setLogLevel:function(U){U==this.debug?g=h:U==this.info?g=a:U==this.warn?g=s:(U==this.error,g=n)},debug:function(U,T){console.debug===void 0&&(console.debug=console.log),h>=g&&console.debug("["+E.getDurationString(new Date-t,1e3)+"]","["+U+"]",T)},log:function(U,T){this.debug(U.msg)},info:function(U,T){a>=g&&console.info("["+E.getDurationString(new Date-t,1e3)+"]","["+U+"]",T)},warn:function(U,T){s>=g&&console.warn("["+E.getDurationString(new Date-t,1e3)+"]","["+U+"]",T)},error:function(U,T){n>=g&&console.error("["+E.getDurationString(new Date-t,1e3)+"]","["+U+"]",T)}};return _}();E.getDurationString=function(t,n){var s;function a(z,R){for(var Y=""+z,q=Y.split(".");q[0].length<R;)q[0]="0"+q[0];return q.join(".")}t<0?(s=!0,t=-t):s=!1;var h=n||1,g=t/h,_=Math.floor(g/3600);g-=_*3600;var U=Math.floor(g/60);g-=U*60;var T=g*1e3;return g=Math.floor(g),T-=g*1e3,T=Math.floor(T),(s?"-":"")+_+":"+a(U,2)+":"+a(g,2)+"."+a(T,3)},E.printRanges=function(t){var n=t.length;if(n>0){for(var s="",a=0;a<n;a++)a>0&&(s+=","),s+="["+E.getDurationString(t.start(a))+","+E.getDurationString(t.end(a))+"]";return s}else return"(empty)"},lt.Log=E;var O=function(t){if(t instanceof ArrayBuffer)this.buffer=t,this.dataview=new DataView(t);else throw"Needs an array buffer";this.position=0};O.prototype.getPosition=function(){return this.position},O.prototype.getEndPosition=function(){return this.buffer.byteLength},O.prototype.getLength=function(){return this.buffer.byteLength},O.prototype.seek=function(t){var n=Math.max(0,Math.min(this.buffer.byteLength,t));return this.position=isNaN(n)||!isFinite(n)?0:n,!0},O.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},O.prototype.readAnyInt=function(t,n){var s=0;if(this.position+t<=this.buffer.byteLength){switch(t){case 1:n?s=this.dataview.getInt8(this.position):s=this.dataview.getUint8(this.position);break;case 2:n?s=this.dataview.getInt16(this.position):s=this.dataview.getUint16(this.position);break;case 3:if(n)throw"No method for reading signed 24 bits values";s=this.dataview.getUint8(this.position)<<16,s|=this.dataview.getUint8(this.position+1)<<8,s|=this.dataview.getUint8(this.position+2);break;case 4:n?s=this.dataview.getInt32(this.position):s=this.dataview.getUint32(this.position);break;case 8:if(n)throw"No method for reading signed 64 bits values";s=this.dataview.getUint32(this.position)<<32,s|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+t}return this.position+=t,s}else throw"Not enough bytes in buffer"},O.prototype.readUint8=function(){return this.readAnyInt(1,!1)},O.prototype.readUint16=function(){return this.readAnyInt(2,!1)},O.prototype.readUint24=function(){return this.readAnyInt(3,!1)},O.prototype.readUint32=function(){return this.readAnyInt(4,!1)},O.prototype.readUint64=function(){return this.readAnyInt(8,!1)},O.prototype.readString=function(t){if(this.position+t<=this.buffer.byteLength){for(var n="",s=0;s<t;s++)n+=String.fromCharCode(this.readUint8());return n}else throw"Not enough bytes in buffer"},O.prototype.readCString=function(){for(var t=[];;){var n=this.readUint8();if(n!==0)t.push(n);else break}return String.fromCharCode.apply(null,t)},O.prototype.readInt8=function(){return this.readAnyInt(1,!0)},O.prototype.readInt16=function(){return this.readAnyInt(2,!0)},O.prototype.readInt32=function(){return this.readAnyInt(4,!0)},O.prototype.readInt64=function(){return this.readAnyInt(8,!1)},O.prototype.readUint8Array=function(t){for(var n=new Uint8Array(t),s=0;s<t;s++)n[s]=this.readUint8();return n},O.prototype.readInt16Array=function(t){for(var n=new Int16Array(t),s=0;s<t;s++)n[s]=this.readInt16();return n},O.prototype.readUint16Array=function(t){for(var n=new Int16Array(t),s=0;s<t;s++)n[s]=this.readUint16();return n},O.prototype.readUint32Array=function(t){for(var n=new Uint32Array(t),s=0;s<t;s++)n[s]=this.readUint32();return n},O.prototype.readInt32Array=function(t){for(var n=new Int32Array(t),s=0;s<t;s++)n[s]=this.readInt32();return n},lt.MP4BoxStream=O;var S=function(t,n,s){this._byteOffset=n||0,t instanceof ArrayBuffer?this.buffer=t:typeof t=="object"?(this.dataView=t,n&&(this._byteOffset+=n)):this.buffer=new ArrayBuffer(t||0),this.position=0,this.endianness=s==null?S.LITTLE_ENDIAN:s};S.prototype={},S.prototype.getPosition=function(){return this.position},S.prototype._realloc=function(t){if(this._dynamicSize){var n=this._byteOffset+this.position+t,s=this._buffer.byteLength;if(n<=s){n>this._byteLength&&(this._byteLength=n);return}for(s<1&&(s=1);n>s;)s*=2;var a=new ArrayBuffer(s),h=new Uint8Array(this._buffer),g=new Uint8Array(a,0,h.length);g.set(h),this.buffer=a,this._byteLength=n}},S.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var t=new ArrayBuffer(this._byteLength),n=new Uint8Array(t),s=new Uint8Array(this._buffer,0,n.length);n.set(s),this.buffer=t}},S.BIG_ENDIAN=!1,S.LITTLE_ENDIAN=!0,S.prototype._byteLength=0,Object.defineProperty(S.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(S.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(t){this._buffer=t,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(S.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(t){this._byteOffset=t,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(S.prototype,"dataView",{get:function(){return this._dataView},set:function(t){this._byteOffset=t.byteOffset,this._buffer=t.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+t.byteLength}}),S.prototype.seek=function(t){var n=Math.max(0,Math.min(this.byteLength,t));this.position=isNaN(n)||!isFinite(n)?0:n},S.prototype.isEof=function(){return this.position>=this._byteLength},S.prototype.mapUint8Array=function(t){this._realloc(t*1);var n=new Uint8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=t*1,n},S.prototype.readInt32Array=function(t,n){t=t==null?this.byteLength-this.position/4:t;var s=new Int32Array(t);return S.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),S.arrayToNative(s,n==null?this.endianness:n),this.position+=s.byteLength,s},S.prototype.readInt16Array=function(t,n){t=t==null?this.byteLength-this.position/2:t;var s=new Int16Array(t);return S.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),S.arrayToNative(s,n==null?this.endianness:n),this.position+=s.byteLength,s},S.prototype.readInt8Array=function(t){t=t==null?this.byteLength-this.position:t;var n=new Int8Array(t);return S.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,t*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},S.prototype.readUint32Array=function(t,n){t=t==null?this.byteLength-this.position/4:t;var s=new Uint32Array(t);return S.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),S.arrayToNative(s,n==null?this.endianness:n),this.position+=s.byteLength,s},S.prototype.readUint16Array=function(t,n){t=t==null?this.byteLength-this.position/2:t;var s=new Uint16Array(t);return S.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),S.arrayToNative(s,n==null?this.endianness:n),this.position+=s.byteLength,s},S.prototype.readUint8Array=function(t){t=t==null?this.byteLength-this.position:t;var n=new Uint8Array(t);return S.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,t*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},S.prototype.readFloat64Array=function(t,n){t=t==null?this.byteLength-this.position/8:t;var s=new Float64Array(t);return S.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),S.arrayToNative(s,n==null?this.endianness:n),this.position+=s.byteLength,s},S.prototype.readFloat32Array=function(t,n){t=t==null?this.byteLength-this.position/4:t;var s=new Float32Array(t);return S.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,t*s.BYTES_PER_ELEMENT),S.arrayToNative(s,n==null?this.endianness:n),this.position+=s.byteLength,s},S.prototype.readInt32=function(t){var n=this._dataView.getInt32(this.position,t==null?this.endianness:t);return this.position+=4,n},S.prototype.readInt16=function(t){var n=this._dataView.getInt16(this.position,t==null?this.endianness:t);return this.position+=2,n},S.prototype.readInt8=function(){var t=this._dataView.getInt8(this.position);return this.position+=1,t},S.prototype.readUint32=function(t){var n=this._dataView.getUint32(this.position,t==null?this.endianness:t);return this.position+=4,n},S.prototype.readUint16=function(t){var n=this._dataView.getUint16(this.position,t==null?this.endianness:t);return this.position+=2,n},S.prototype.readUint8=function(){var t=this._dataView.getUint8(this.position);return this.position+=1,t},S.prototype.readFloat32=function(t){var n=this._dataView.getFloat32(this.position,t==null?this.endianness:t);return this.position+=4,n},S.prototype.readFloat64=function(t){var n=this._dataView.getFloat64(this.position,t==null?this.endianness:t);return this.position+=8,n},S.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,S.memcpy=function(t,n,s,a,h){var g=new Uint8Array(t,n,h),_=new Uint8Array(s,a,h);g.set(_)},S.arrayToNative=function(t,n){return n==this.endianness?t:this.flipArrayEndianness(t)},S.nativeToEndian=function(t,n){return this.endianness==n?t:this.flipArrayEndianness(t)},S.flipArrayEndianness=function(t){for(var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=0;s<t.byteLength;s+=t.BYTES_PER_ELEMENT)for(var a=s+t.BYTES_PER_ELEMENT-1,h=s;a>h;a--,h++){var g=n[h];n[h]=n[a],n[a]=g}return t},S.prototype.failurePosition=0,String.fromCharCodeUint8=function(t){for(var n=[],s=0;s<t.length;s++)n[s]=t[s];return String.fromCharCode.apply(null,n)},S.prototype.readString=function(t,n){return n==null||n=="ASCII"?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(t==null?this.byteLength-this.position:t)]):new TextDecoder(n).decode(this.mapUint8Array(t))},S.prototype.readCString=function(t){var n=this.byteLength-this.position,s=new Uint8Array(this._buffer,this._byteOffset+this.position),a=n;t!=null&&(a=Math.min(t,n));for(var h=0;h<a&&s[h]!==0;h++);var g=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(h)]);return t!=null?this.position+=a-h:h!=n&&(this.position+=1),g};var c=Math.pow(2,32);S.prototype.readInt64=function(){return this.readInt32()*c+this.readUint32()},S.prototype.readUint64=function(){return this.readUint32()*c+this.readUint32()},S.prototype.readInt64=function(){return this.readUint32()*c+this.readUint32()},S.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},lt.DataStream=S,S.prototype.save=function(t){var n=new Blob([this.buffer]);if(window.URL&&URL.createObjectURL){var s=window.URL.createObjectURL(n),a=document.createElement("a");document.body.appendChild(a),a.setAttribute("href",s),a.setAttribute("download",t),a.setAttribute("target","_self"),a.click(),window.URL.revokeObjectURL(s)}else throw"DataStream.save: Can't create object URL."},S.prototype._dynamicSize=!0,Object.defineProperty(S.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(t){t||this._trimAlloc(),this._dynamicSize=t}}),S.prototype.shift=function(t){var n=new ArrayBuffer(this._byteLength-t),s=new Uint8Array(n),a=new Uint8Array(this._buffer,t,s.length);s.set(a),this.buffer=n,this.position-=t},S.prototype.writeInt32Array=function(t,n){if(this._realloc(t.length*4),t instanceof Int32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)S.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt32Array(t.length,n);else for(var s=0;s<t.length;s++)this.writeInt32(t[s],n)},S.prototype.writeInt16Array=function(t,n){if(this._realloc(t.length*2),t instanceof Int16Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)S.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt16Array(t.length,n);else for(var s=0;s<t.length;s++)this.writeInt16(t[s],n)},S.prototype.writeInt8Array=function(t){if(this._realloc(t.length*1),t instanceof Int8Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)S.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt8Array(t.length);else for(var n=0;n<t.length;n++)this.writeInt8(t[n])},S.prototype.writeUint32Array=function(t,n){if(this._realloc(t.length*4),t instanceof Uint32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)S.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint32Array(t.length,n);else for(var s=0;s<t.length;s++)this.writeUint32(t[s],n)},S.prototype.writeUint16Array=function(t,n){if(this._realloc(t.length*2),t instanceof Uint16Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)S.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint16Array(t.length,n);else for(var s=0;s<t.length;s++)this.writeUint16(t[s],n)},S.prototype.writeUint8Array=function(t){if(this._realloc(t.length*1),t instanceof Uint8Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)S.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint8Array(t.length);else for(var n=0;n<t.length;n++)this.writeUint8(t[n])},S.prototype.writeFloat64Array=function(t,n){if(this._realloc(t.length*8),t instanceof Float64Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)S.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapFloat64Array(t.length,n);else for(var s=0;s<t.length;s++)this.writeFloat64(t[s],n)},S.prototype.writeFloat32Array=function(t,n){if(this._realloc(t.length*4),t instanceof Float32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)S.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapFloat32Array(t.length,n);else for(var s=0;s<t.length;s++)this.writeFloat32(t[s],n)},S.prototype.writeInt32=function(t,n){this._realloc(4),this._dataView.setInt32(this.position,t,n==null?this.endianness:n),this.position+=4},S.prototype.writeInt16=function(t,n){this._realloc(2),this._dataView.setInt16(this.position,t,n==null?this.endianness:n),this.position+=2},S.prototype.writeInt8=function(t){this._realloc(1),this._dataView.setInt8(this.position,t),this.position+=1},S.prototype.writeUint32=function(t,n){this._realloc(4),this._dataView.setUint32(this.position,t,n==null?this.endianness:n),this.position+=4},S.prototype.writeUint16=function(t,n){this._realloc(2),this._dataView.setUint16(this.position,t,n==null?this.endianness:n),this.position+=2},S.prototype.writeUint8=function(t){this._realloc(1),this._dataView.setUint8(this.position,t),this.position+=1},S.prototype.writeFloat32=function(t,n){this._realloc(4),this._dataView.setFloat32(this.position,t,n==null?this.endianness:n),this.position+=4},S.prototype.writeFloat64=function(t,n){this._realloc(8),this._dataView.setFloat64(this.position,t,n==null?this.endianness:n),this.position+=8},S.prototype.writeUCS2String=function(t,n,s){s==null&&(s=t.length);for(var a=0;a<t.length&&a<s;a++)this.writeUint16(t.charCodeAt(a),n);for(;a<s;a++)this.writeUint16(0)},S.prototype.writeString=function(t,n,s){var a=0;if(n==null||n=="ASCII")if(s!=null){var h=Math.min(t.length,s);for(a=0;a<h;a++)this.writeUint8(t.charCodeAt(a));for(;a<s;a++)this.writeUint8(0)}else for(a=0;a<t.length;a++)this.writeUint8(t.charCodeAt(a));else this.writeUint8Array(new TextEncoder(n).encode(t.substring(0,s)))},S.prototype.writeCString=function(t,n){var s=0;if(n!=null){var a=Math.min(t.length,n);for(s=0;s<a;s++)this.writeUint8(t.charCodeAt(s));for(;s<n;s++)this.writeUint8(0)}else{for(s=0;s<t.length;s++)this.writeUint8(t.charCodeAt(s));this.writeUint8(0)}},S.prototype.writeStruct=function(t,n){for(var s=0;s<t.length;s+=2){var a=t[s+1];this.writeType(a,n[t[s]],n)}},S.prototype.writeType=function(t,n,s){var a;if(typeof t=="function")return t(this,n);if(typeof t=="object"&&!(t instanceof Array))return t.set(this,n,s);var h=null,g="ASCII",_=this.position;switch(typeof t=="string"&&/:/.test(t)&&(a=t.split(":"),t=a[0],h=parseInt(a[1])),typeof t=="string"&&/,/.test(t)&&(a=t.split(","),t=a[0],g=parseInt(a[1])),t){case"uint8":this.writeUint8(n);break;case"int8":this.writeInt8(n);break;case"uint16":this.writeUint16(n,this.endianness);break;case"int16":this.writeInt16(n,this.endianness);break;case"uint32":this.writeUint32(n,this.endianness);break;case"int32":this.writeInt32(n,this.endianness);break;case"float32":this.writeFloat32(n,this.endianness);break;case"float64":this.writeFloat64(n,this.endianness);break;case"uint16be":this.writeUint16(n,S.BIG_ENDIAN);break;case"int16be":this.writeInt16(n,S.BIG_ENDIAN);break;case"uint32be":this.writeUint32(n,S.BIG_ENDIAN);break;case"int32be":this.writeInt32(n,S.BIG_ENDIAN);break;case"float32be":this.writeFloat32(n,S.BIG_ENDIAN);break;case"float64be":this.writeFloat64(n,S.BIG_ENDIAN);break;case"uint16le":this.writeUint16(n,S.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(n,S.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(n,S.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(n,S.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(n,S.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(n,S.LITTLE_ENDIAN);break;case"cstring":this.writeCString(n,h);break;case"string":this.writeString(n,g,h);break;case"u16string":this.writeUCS2String(n,this.endianness,h);break;case"u16stringle":this.writeUCS2String(n,S.LITTLE_ENDIAN,h);break;case"u16stringbe":this.writeUCS2String(n,S.BIG_ENDIAN,h);break;default:if(t.length==3){for(var U=t[1],T=0;T<n.length;T++)this.writeType(U,n[T]);break}else{this.writeStruct(t,n);break}}h!=null&&(this.position=_,this._realloc(h),this.position=_+h)},S.prototype.writeUint64=function(t){var n=Math.floor(t/c);this.writeUint32(n),this.writeUint32(t&4294967295)},S.prototype.writeUint24=function(t){this.writeUint8((t&16711680)>>16),this.writeUint8((t&65280)>>8),this.writeUint8(t&255)},S.prototype.adjustUint32=function(t,n){var s=this.position;this.seek(t),this.writeUint32(n),this.seek(s)},S.prototype.mapInt32Array=function(t,n){this._realloc(t*4);var s=new Int32Array(this._buffer,this.byteOffset+this.position,t);return S.arrayToNative(s,n==null?this.endianness:n),this.position+=t*4,s},S.prototype.mapInt16Array=function(t,n){this._realloc(t*2);var s=new Int16Array(this._buffer,this.byteOffset+this.position,t);return S.arrayToNative(s,n==null?this.endianness:n),this.position+=t*2,s},S.prototype.mapInt8Array=function(t){this._realloc(t*1);var n=new Int8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=t*1,n},S.prototype.mapUint32Array=function(t,n){this._realloc(t*4);var s=new Uint32Array(this._buffer,this.byteOffset+this.position,t);return S.arrayToNative(s,n==null?this.endianness:n),this.position+=t*4,s},S.prototype.mapUint16Array=function(t,n){this._realloc(t*2);var s=new Uint16Array(this._buffer,this.byteOffset+this.position,t);return S.arrayToNative(s,n==null?this.endianness:n),this.position+=t*2,s},S.prototype.mapFloat64Array=function(t,n){this._realloc(t*8);var s=new Float64Array(this._buffer,this.byteOffset+this.position,t);return S.arrayToNative(s,n==null?this.endianness:n),this.position+=t*8,s},S.prototype.mapFloat32Array=function(t,n){this._realloc(t*4);var s=new Float32Array(this._buffer,this.byteOffset+this.position,t);return S.arrayToNative(s,n==null?this.endianness:n),this.position+=t*4,s};var ft=function(t){this.buffers=[],this.bufferIndex=-1,t&&(this.insertBuffer(t),this.bufferIndex=0)};ft.prototype=new S(new ArrayBuffer,0,S.BIG_ENDIAN),ft.prototype.initialized=function(){var t;return this.bufferIndex>-1?!0:this.buffers.length>0?(t=this.buffers[0],t.fileStart===0?(this.buffer=t,this.bufferIndex=0,E.debug("MultiBufferStream","Stream ready for parsing"),!0):(E.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(E.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1)},ArrayBuffer.concat=function(t,n){E.debug("ArrayBuffer","Trying to create a new buffer of size: "+(t.byteLength+n.byteLength));var s=new Uint8Array(t.byteLength+n.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(n),t.byteLength),s.buffer},ft.prototype.reduceBuffer=function(t,n,s){var a;return a=new Uint8Array(s),a.set(new Uint8Array(t,n,s)),a.buffer.fileStart=t.fileStart+n,a.buffer.usedBytes=0,a.buffer},ft.prototype.insertBuffer=function(t){for(var n=!0,s=0;s<this.buffers.length;s++){var a=this.buffers[s];if(t.fileStart<=a.fileStart){if(t.fileStart===a.fileStart)if(t.byteLength>a.byteLength){this.buffers.splice(s,1),s--;continue}else E.warn("MultiBufferStream","Buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+") already appended, ignoring");else t.fileStart+t.byteLength<=a.fileStart||(t=this.reduceBuffer(t,0,a.fileStart-t.fileStart)),E.debug("MultiBufferStream","Appending new buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+")"),this.buffers.splice(s,0,t),s===0&&(this.buffer=t);n=!1;break}else if(t.fileStart<a.fileStart+a.byteLength){var h=a.fileStart+a.byteLength-t.fileStart,g=t.byteLength-h;if(g>0)t=this.reduceBuffer(t,h,g);else{n=!1;break}}}n&&(E.debug("MultiBufferStream","Appending new buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+")"),this.buffers.push(t),s===0&&(this.buffer=t))},ft.prototype.logBufferLevel=function(t){var n,s,a,h,g=[],_,U="";for(a=0,h=0,n=0;n<this.buffers.length;n++)s=this.buffers[n],n===0?(_={},g.push(_),_.start=s.fileStart,_.end=s.fileStart+s.byteLength,U+="["+_.start+"-"):_.end===s.fileStart?_.end=s.fileStart+s.byteLength:(_={},_.start=s.fileStart,U+=g[g.length-1].end-1+"], ["+_.start+"-",_.end=s.fileStart+s.byteLength,g.push(_)),a+=s.usedBytes,h+=s.byteLength;g.length>0&&(U+=_.end-1+"]");var T=t?E.info:E.debug;this.buffers.length===0?T("MultiBufferStream","No more buffer in memory"):T("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+a+"/"+h+" bytes), continuous ranges: "+U)},ft.prototype.cleanBuffers=function(){var t,n;for(t=0;t<this.buffers.length;t++)n=this.buffers[t],n.usedBytes===n.byteLength&&(E.debug("MultiBufferStream","Removing buffer #"+t),this.buffers.splice(t,1),t--)},ft.prototype.mergeNextBuffer=function(){var t;if(this.bufferIndex+1<this.buffers.length)if(t=this.buffers[this.bufferIndex+1],t.fileStart===this.buffer.fileStart+this.buffer.byteLength){var n=this.buffer.byteLength,s=this.buffer.usedBytes,a=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,t),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=s,this.buffer.fileStart=a,E.debug("ISOFile","Concatenating buffer for box parsing (length: "+n+"->"+this.buffer.byteLength+")"),!0}else return!1;else return!1},ft.prototype.findPosition=function(t,n,s){var a,h=null,g=-1;for(t===!0?a=0:a=this.bufferIndex;a<this.buffers.length&&(h=this.buffers[a],h.fileStart<=n);){g=a,s&&(h.fileStart+h.byteLength<=n?h.usedBytes=h.byteLength:h.usedBytes=n-h.fileStart,this.logBufferLevel());a++}return g!==-1?(h=this.buffers[g],h.fileStart+h.byteLength>=n?(E.debug("MultiBufferStream","Found position in existing buffer #"+g),g):-1):-1},ft.prototype.findEndContiguousBuf=function(t){var n,s,a,h=t!==void 0?t:this.bufferIndex;if(s=this.buffers[h],this.buffers.length>h+1)for(n=h+1;n<this.buffers.length&&(a=this.buffers[n],a.fileStart===s.fileStart+s.byteLength);n++)s=a;return s.fileStart+s.byteLength},ft.prototype.getEndFilePositionAfter=function(t){var n=this.findPosition(!0,t,!1);return n!==-1?this.findEndContiguousBuf(n):t},ft.prototype.addUsedBytes=function(t){this.buffer.usedBytes+=t,this.logBufferLevel()},ft.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},ft.prototype.seek=function(t,n,s){var a;return a=this.findPosition(n,t,s),a!==-1?(this.buffer=this.buffers[a],this.bufferIndex=a,this.position=t-this.buffer.fileStart,E.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(E.debug("MultiBufferStream","Position "+t+" not found in buffered data"),!1)},ft.prototype.getPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},ft.prototype.getLength=function(){return this.byteLength},ft.prototype.getEndPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},lt.MultiBufferStream=ft;var At=function(){var t=3,n=4,s=5,a=6,h=[];h[t]="ES_Descriptor",h[n]="DecoderConfigDescriptor",h[s]="DecoderSpecificInfo",h[a]="SLConfigDescriptor",this.getDescriptorName=function(U){return h[U]};var g=this,_={};return this.parseOneDescriptor=function(U){var T=0,z=0,R,Y,q;for(R=U.readUint8(),T++,q=U.readUint8(),T++;q&128;)z=(q&127)<<7,q=U.readUint8(),T++;return z+=q&127,E.debug("MPEG4DescriptorParser","Found "+(h[R]||"Descriptor "+R)+", size "+z+" at position "+U.getPosition()),h[R]?Y=new _[h[R]](z):Y=new _.Descriptor(z),Y.parse(U),Y},_.Descriptor=function(U,T){this.tag=U,this.size=T,this.descs=[]},_.Descriptor.prototype.parse=function(U){this.data=U.readUint8Array(this.size)},_.Descriptor.prototype.findDescriptor=function(U){for(var T=0;T<this.descs.length;T++)if(this.descs[T].tag==U)return this.descs[T];return null},_.Descriptor.prototype.parseRemainingDescriptors=function(U){for(var T=U.position;U.position<T+this.size;){var z=g.parseOneDescriptor(U);this.descs.push(z)}},_.ES_Descriptor=function(U){_.Descriptor.call(this,t,U)},_.ES_Descriptor.prototype=new _.Descriptor,_.ES_Descriptor.prototype.parse=function(U){if(this.ES_ID=U.readUint16(),this.flags=U.readUint8(),this.size-=3,this.flags&128?(this.dependsOn_ES_ID=U.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,this.flags&64){var T=U.readUint8();this.URL=U.readString(T),this.size-=T+1}else this.URL="";this.flags&32?(this.OCR_ES_ID=U.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(U)},_.ES_Descriptor.prototype.getOTI=function(U){var T=this.findDescriptor(n);return T?T.oti:0},_.ES_Descriptor.prototype.getAudioConfig=function(U){var T=this.findDescriptor(n);if(!T)return null;var z=T.findDescriptor(s);if(z&&z.data){var R=(z.data[0]&248)>>3;return R===31&&z.data.length>=2&&(R=32+((z.data[0]&7)<<3)+((z.data[1]&224)>>5)),R}else return null},_.DecoderConfigDescriptor=function(U){_.Descriptor.call(this,n,U)},_.DecoderConfigDescriptor.prototype=new _.Descriptor,_.DecoderConfigDescriptor.prototype.parse=function(U){this.oti=U.readUint8(),this.streamType=U.readUint8(),this.bufferSize=U.readUint24(),this.maxBitrate=U.readUint32(),this.avgBitrate=U.readUint32(),this.size-=13,this.parseRemainingDescriptors(U)},_.DecoderSpecificInfo=function(U){_.Descriptor.call(this,s,U)},_.DecoderSpecificInfo.prototype=new _.Descriptor,_.SLConfigDescriptor=function(U){_.Descriptor.call(this,a,U)},_.SLConfigDescriptor.prototype=new _.Descriptor,this};lt.MPEG4DescriptorParser=At;var o={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){o.FullBox.prototype=new o.Box,o.ContainerBox.prototype=new o.Box,o.SampleEntry.prototype=new o.Box,o.TrackGroupTypeBox.prototype=new o.FullBox,o.BASIC_BOXES.forEach(function(t){o.createBoxCtor(t)}),o.FULL_BOXES.forEach(function(t){o.createFullBoxCtor(t)}),o.CONTAINER_BOXES.forEach(function(t){o.createContainerBoxCtor(t[0],null,t[1])})},Box:function(t,n,s){this.type=t,this.size=n,this.uuid=s},FullBox:function(t,n,s){o.Box.call(this,t,n,s),this.flags=0,this.version=0},ContainerBox:function(t,n,s){o.Box.call(this,t,n,s),this.boxes=[]},SampleEntry:function(t,n,s,a){o.ContainerBox.call(this,t,n),this.hdr_size=s,this.start=a},SampleGroupEntry:function(t){this.grouping_type=t},TrackGroupTypeBox:function(t,n){o.FullBox.call(this,t,n)},createBoxCtor:function(t,n){o.boxCodes.push(t),o[t+"Box"]=function(s){o.Box.call(this,t,s)},o[t+"Box"].prototype=new o.Box,n&&(o[t+"Box"].prototype.parse=n)},createFullBoxCtor:function(t,n){o[t+"Box"]=function(s){o.FullBox.call(this,t,s)},o[t+"Box"].prototype=new o.FullBox,o[t+"Box"].prototype.parse=function(s){this.parseFullHeader(s),n&&n.call(this,s)}},addSubBoxArrays:function(t){if(t){this.subBoxNames=t;for(var n=t.length,s=0;s<n;s++)this[t[s]+"s"]=[]}},createContainerBoxCtor:function(t,n,s){o[t+"Box"]=function(a){o.ContainerBox.call(this,t,a),o.addSubBoxArrays.call(this,s)},o[t+"Box"].prototype=new o.ContainerBox,n&&(o[t+"Box"].prototype.parse=n)},createMediaSampleEntryCtor:function(t,n,s){o.sampleEntryCodes[t]=[],o[t+"SampleEntry"]=function(a,h){o.SampleEntry.call(this,a,h),o.addSubBoxArrays.call(this,s)},o[t+"SampleEntry"].prototype=new o.SampleEntry,n&&(o[t+"SampleEntry"].prototype.parse=n)},createSampleEntryCtor:function(t,n,s,a){o.sampleEntryCodes[t].push(n),o[n+"SampleEntry"]=function(h){o[t+"SampleEntry"].call(this,n,h),o.addSubBoxArrays.call(this,a)},o[n+"SampleEntry"].prototype=new o[t+"SampleEntry"],s&&(o[n+"SampleEntry"].prototype.parse=s)},createEncryptedSampleEntryCtor:function(t,n,s){o.createSampleEntryCtor.call(this,t,n,s,["sinf"])},createSampleGroupCtor:function(t,n){o[t+"SampleGroupEntry"]=function(s){o.SampleGroupEntry.call(this,t,s)},o[t+"SampleGroupEntry"].prototype=new o.SampleGroupEntry,n&&(o[t+"SampleGroupEntry"].prototype.parse=n)},createTrackGroupCtor:function(t,n){o[t+"TrackGroupTypeBox"]=function(s){o.TrackGroupTypeBox.call(this,t,s)},o[t+"TrackGroupTypeBox"].prototype=new o.TrackGroupTypeBox,n&&(o[t+"TrackGroupTypeBox"].prototype.parse=n)},createUUIDBox:function(t,n,s,a){o.UUIDs.push(t),o.UUIDBoxes[t]=function(h){n?o.FullBox.call(this,"uuid",h,t):s?o.ContainerBox.call(this,"uuid",h,t):o.Box.call(this,"uuid",h,t)},o.UUIDBoxes[t].prototype=n?new o.FullBox:s?new o.ContainerBox:new o.Box,a&&(n?o.UUIDBoxes[t].prototype.parse=function(h){this.parseFullHeader(h),a&&a.call(this,h)}:o.UUIDBoxes[t].prototype.parse=a)}};o.initialize(),o.TKHD_FLAG_ENABLED=1,o.TKHD_FLAG_IN_MOVIE=2,o.TKHD_FLAG_IN_PREVIEW=4,o.TFHD_FLAG_BASE_DATA_OFFSET=1,o.TFHD_FLAG_SAMPLE_DESC=2,o.TFHD_FLAG_SAMPLE_DUR=8,o.TFHD_FLAG_SAMPLE_SIZE=16,o.TFHD_FLAG_SAMPLE_FLAGS=32,o.TFHD_FLAG_DUR_EMPTY=65536,o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,o.TRUN_FLAGS_DATA_OFFSET=1,o.TRUN_FLAGS_FIRST_FLAG=4,o.TRUN_FLAGS_DURATION=256,o.TRUN_FLAGS_SIZE=512,o.TRUN_FLAGS_FLAGS=1024,o.TRUN_FLAGS_CTS_OFFSET=2048,o.Box.prototype.add=function(t){return this.addBox(new o[t+"Box"])},o.Box.prototype.addBox=function(t){return this.boxes.push(t),this[t.type+"s"]?this[t.type+"s"].push(t):this[t.type]=t,t},o.Box.prototype.set=function(t,n){return this[t]=n,this},o.Box.prototype.addEntry=function(t,n){var s=n||"entries";return this[s]||(this[s]=[]),this[s].push(t),this},lt.BoxParser=o,o.parseUUID=function(t){return o.parseHex16(t)},o.parseHex16=function(t){for(var n="",s=0;s<16;s++){var a=t.readUint8().toString(16);n+=a.length===1?"0"+a:a}return n},o.parseOneBox=function(t,n,s){var a,h=t.getPosition(),g=0,_,U;if(t.getEndPosition()-h<8)return E.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:o.ERR_NOT_ENOUGH_DATA};if(s&&s<8)return E.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:o.ERR_NOT_ENOUGH_DATA};var T=t.readUint32(),z=t.readString(4),R=z;if(E.debug("BoxParser","Found box of type '"+z+"' and size "+T+" at position "+h),g=8,z=="uuid"){if(t.getEndPosition()-t.getPosition()<16||s-g<16)return t.seek(h),E.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:o.ERR_NOT_ENOUGH_DATA};U=o.parseUUID(t),g+=16,R=U}if(T==1){if(t.getEndPosition()-t.getPosition()<8||s&&s-g<8)return t.seek(h),E.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+z+'" box'),{code:o.ERR_NOT_ENOUGH_DATA};T=t.readUint64(),g+=8}else if(T===0){if(s)T=s;else if(z!=="mdat")return E.error("BoxParser","Unlimited box size not supported for type: '"+z+"'"),a=new o.Box(z,T),{code:o.OK,box:a,size:a.size}}return T!==0&&T<g?(E.error("BoxParser","Box of type "+z+" has an invalid size "+T+" (too small to be a box)"),{code:o.ERR_NOT_ENOUGH_DATA,type:z,size:T,hdr_size:g,start:h}):T!==0&&s&&T>s?(E.error("BoxParser","Box of type '"+z+"' has a size "+T+" greater than its container size "+s),{code:o.ERR_NOT_ENOUGH_DATA,type:z,size:T,hdr_size:g,start:h}):T!==0&&h+T>t.getEndPosition()?(t.seek(h),E.info("BoxParser","Not enough data in stream to parse the entire '"+z+"' box"),{code:o.ERR_NOT_ENOUGH_DATA,type:z,size:T,hdr_size:g,start:h}):n?{code:o.OK,type:z,size:T,hdr_size:g,start:h}:(o[z+"Box"]?a=new o[z+"Box"](T):z!=="uuid"?(E.warn("BoxParser","Unknown box type: '"+z+"'"),a=new o.Box(z,T),a.has_unparsed_data=!0):o.UUIDBoxes[U]?a=new o.UUIDBoxes[U](T):(E.warn("BoxParser","Unknown uuid type: '"+U+"'"),a=new o.Box(z,T),a.uuid=U,a.has_unparsed_data=!0),a.hdr_size=g,a.start=h,a.write===o.Box.prototype.write&&a.type!=="mdat"&&(E.info("BoxParser","'"+R+"' box writing not yet implemented, keeping unparsed data in memory for later write"),a.parseDataAndRewind(t)),a.parse(t),_=t.getPosition()-(a.start+a.size),_<0?(E.warn("BoxParser","Parsing of box '"+R+"' did not read the entire indicated box data size (missing "+-_+" bytes), seeking forward"),t.seek(a.start+a.size)):_>0&&(E.error("BoxParser","Parsing of box '"+R+"' read "+_+" more bytes than the indicated box data size, seeking backwards"),a.size!==0&&t.seek(a.start+a.size)),{code:o.OK,box:a,size:a.size})},o.Box.prototype.parse=function(t){this.type!="mdat"?this.data=t.readUint8Array(this.size-this.hdr_size):this.size===0?t.seek(t.getEndPosition()):t.seek(this.start+this.size)},o.Box.prototype.parseDataAndRewind=function(t){this.data=t.readUint8Array(this.size-this.hdr_size),t.position-=this.size-this.hdr_size},o.FullBox.prototype.parseDataAndRewind=function(t){this.parseFullHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,t.position-=this.size-this.hdr_size},o.FullBox.prototype.parseFullHeader=function(t){this.version=t.readUint8(),this.flags=t.readUint24(),this.hdr_size+=4},o.FullBox.prototype.parse=function(t){this.parseFullHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size)},o.ContainerBox.prototype.parse=function(t){for(var n,s;t.getPosition()<this.start+this.size;)if(n=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),n.code===o.OK)if(s=n.box,this.boxes.push(s),this.subBoxNames&&this.subBoxNames.indexOf(s.type)!=-1)this[this.subBoxNames[this.subBoxNames.indexOf(s.type)]+"s"].push(s);else{var a=s.type!=="uuid"?s.type:s.uuid;this[a]?E.warn("Box of type "+a+" already stored in field of this type"):this[a]=s}else return},o.Box.prototype.parseLanguage=function(t){this.language=t.readUint16();var n=[];n[0]=this.language>>10&31,n[1]=this.language>>5&31,n[2]=this.language&31,this.languageString=String.fromCharCode(n[0]+96,n[1]+96,n[2]+96)},o.SAMPLE_ENTRY_TYPE_VISUAL="Visual",o.SAMPLE_ENTRY_TYPE_AUDIO="Audio",o.SAMPLE_ENTRY_TYPE_HINT="Hint",o.SAMPLE_ENTRY_TYPE_METADATA="Metadata",o.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",o.SAMPLE_ENTRY_TYPE_SYSTEM="System",o.SAMPLE_ENTRY_TYPE_TEXT="Text",o.SampleEntry.prototype.parseHeader=function(t){t.readUint8Array(6),this.data_reference_index=t.readUint16(),this.hdr_size+=8},o.SampleEntry.prototype.parse=function(t){this.parseHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size)},o.SampleEntry.prototype.parseDataAndRewind=function(t){this.parseHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,t.position-=this.size-this.hdr_size},o.SampleEntry.prototype.parseFooter=function(t){o.ContainerBox.prototype.parse.call(this,t)},o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_HINT),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SYSTEM),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_TEXT),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,function(t){var n;this.parseHeader(t),t.readUint16(),t.readUint16(),t.readUint32Array(3),this.width=t.readUint16(),this.height=t.readUint16(),this.horizresolution=t.readUint32(),this.vertresolution=t.readUint32(),t.readUint32(),this.frame_count=t.readUint16(),n=Math.min(31,t.readUint8()),this.compressorname=t.readString(n),n<31&&t.readString(31-n),this.depth=t.readUint16(),t.readUint16(),this.parseFooter(t)}),o.createMediaSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,function(t){this.parseHeader(t),t.readUint32Array(2),this.channel_count=t.readUint16(),this.samplesize=t.readUint16(),t.readUint16(),t.readUint16(),this.samplerate=t.readUint32()/(1<<16),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_TEXT,"enct"),o.createEncryptedSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"encm"),o.createBoxCtor("a1lx",function(t){var n=t.readUint8()&1,s=((n&1)+1)*16;this.layer_size=[];for(var a=0;a<3;a++)s==16?this.layer_size[a]=t.readUint16():this.layer_size[a]=t.readUint32()}),o.createBoxCtor("a1op",function(t){this.op_index=t.readUint8()}),o.createFullBoxCtor("auxC",function(t){this.aux_type=t.readCString();var n=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=t.readUint8Array(n)}),o.createBoxCtor("av1C",function(t){var n,s,a=t.readUint8();if(a>>7&!1){E.error("av1C marker problem");return}if(this.version=a&127,this.version!==1){E.error("av1C version "+this.version+" not supported");return}if(a=t.readUint8(),this.seq_profile=a>>5&7,this.seq_level_idx_0=a&31,a=t.readUint8(),this.seq_tier_0=a>>7&1,this.high_bitdepth=a>>6&1,this.twelve_bit=a>>5&1,this.monochrome=a>>4&1,this.chroma_subsampling_x=a>>3&1,this.chroma_subsampling_y=a>>2&1,this.chroma_sample_position=a&3,a=t.readUint8(),this.reserved_1=a>>5&7,this.reserved_1!==0){E.error("av1C reserved_1 parsing problem");return}if(this.initial_presentation_delay_present=a>>4&1,this.initial_presentation_delay_present===1)this.initial_presentation_delay_minus_one=a&15;else if(this.reserved_2=a&15,this.reserved_2!==0){E.error("av1C reserved_2 parsing problem");return}var h=this.size-this.hdr_size-4;this.configOBUs=t.readUint8Array(h)}),o.createBoxCtor("avcC",function(t){var n,s;for(this.configurationVersion=t.readUint8(),this.AVCProfileIndication=t.readUint8(),this.profile_compatibility=t.readUint8(),this.AVCLevelIndication=t.readUint8(),this.lengthSizeMinusOne=t.readUint8()&3,this.nb_SPS_nalus=t.readUint8()&31,s=this.size-this.hdr_size-6,this.SPS=[],n=0;n<this.nb_SPS_nalus;n++)this.SPS[n]={},this.SPS[n].length=t.readUint16(),this.SPS[n].nalu=t.readUint8Array(this.SPS[n].length),s-=2+this.SPS[n].length;for(this.nb_PPS_nalus=t.readUint8(),s--,this.PPS=[],n=0;n<this.nb_PPS_nalus;n++)this.PPS[n]={},this.PPS[n].length=t.readUint16(),this.PPS[n].nalu=t.readUint8Array(this.PPS[n].length),s-=2+this.PPS[n].length;s>0&&(this.ext=t.readUint8Array(s))}),o.createBoxCtor("btrt",function(t){this.bufferSizeDB=t.readUint32(),this.maxBitrate=t.readUint32(),this.avgBitrate=t.readUint32()}),o.createBoxCtor("clap",function(t){this.cleanApertureWidthN=t.readUint32(),this.cleanApertureWidthD=t.readUint32(),this.cleanApertureHeightN=t.readUint32(),this.cleanApertureHeightD=t.readUint32(),this.horizOffN=t.readUint32(),this.horizOffD=t.readUint32(),this.vertOffN=t.readUint32(),this.vertOffD=t.readUint32()}),o.createBoxCtor("clli",function(t){this.max_content_light_level=t.readUint16(),this.max_pic_average_light_level=t.readUint16()}),o.createFullBoxCtor("co64",function(t){var n,s;if(n=t.readUint32(),this.chunk_offsets=[],this.version===0)for(s=0;s<n;s++)this.chunk_offsets.push(t.readUint64())}),o.createFullBoxCtor("CoLL",function(t){this.maxCLL=t.readUint16(),this.maxFALL=t.readUint16()}),o.createBoxCtor("colr",function(t){if(this.colour_type=t.readString(4),this.colour_type==="nclx"){this.colour_primaries=t.readUint16(),this.transfer_characteristics=t.readUint16(),this.matrix_coefficients=t.readUint16();var n=t.readUint8();this.full_range_flag=n>>7}else this.colour_type==="rICC"?this.ICC_profile=t.readUint8Array(this.size-4):this.colour_type==="prof"&&(this.ICC_profile=t.readUint8Array(this.size-4))}),o.createFullBoxCtor("cprt",function(t){this.parseLanguage(t),this.notice=t.readCString()}),o.createFullBoxCtor("cslg",function(t){var n;this.version===0&&(this.compositionToDTSShift=t.readInt32(),this.leastDecodeToDisplayDelta=t.readInt32(),this.greatestDecodeToDisplayDelta=t.readInt32(),this.compositionStartTime=t.readInt32(),this.compositionEndTime=t.readInt32())}),o.createFullBoxCtor("ctts",function(t){var n,s;if(n=t.readUint32(),this.sample_counts=[],this.sample_offsets=[],this.version===0)for(s=0;s<n;s++){this.sample_counts.push(t.readUint32());var a=t.readInt32();a<0&&E.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(a)}else if(this.version==1)for(s=0;s<n;s++)this.sample_counts.push(t.readUint32()),this.sample_offsets.push(t.readInt32())}),o.createBoxCtor("dac3",function(t){var n=t.readUint8(),s=t.readUint8(),a=t.readUint8();this.fscod=n>>6,this.bsid=n>>1&31,this.bsmod=(n&1)<<2|s>>6&3,this.acmod=s>>3&7,this.lfeon=s>>2&1,this.bit_rate_code=s&3|a>>5&7}),o.createBoxCtor("dec3",function(t){var n=t.readUint16();this.data_rate=n>>3,this.num_ind_sub=n&7,this.ind_subs=[];for(var s=0;s<this.num_ind_sub+1;s++){var a={};this.ind_subs.push(a);var h=t.readUint8(),g=t.readUint8(),_=t.readUint8();a.fscod=h>>6,a.bsid=h>>1&31,a.bsmod=(h&1)<<4|g>>4&15,a.acmod=g>>1&7,a.lfeon=g&1,a.num_dep_sub=_>>1&15,a.num_dep_sub>0&&(a.chan_loc=(_&1)<<8|t.readUint8())}}),o.createFullBoxCtor("dfLa",function(t){var n=127,s=128,a=[],h=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];this.parseFullHeader(t);do{var g=t.readUint8(),_=Math.min(g&n,h.length-1);if(_?t.readUint8Array(t.readUint24()):(t.readUint8Array(13),this.samplerate=t.readUint32()>>12,t.readUint8Array(20)),a.push(h[_]),g&s)break}while(!0);this.numMetadataBlocks=a.length+" ("+a.join(", ")+")"}),o.createBoxCtor("dimm",function(t){this.bytessent=t.readUint64()}),o.createBoxCtor("dmax",function(t){this.time=t.readUint32()}),o.createBoxCtor("dmed",function(t){this.bytessent=t.readUint64()}),o.createBoxCtor("dOps",function(t){if(this.Version=t.readUint8(),this.OutputChannelCount=t.readUint8(),this.PreSkip=t.readUint16(),this.InputSampleRate=t.readUint32(),this.OutputGain=t.readInt16(),this.ChannelMappingFamily=t.readUint8(),this.ChannelMappingFamily!==0){this.StreamCount=t.readUint8(),this.CoupledCount=t.readUint8(),this.ChannelMapping=[];for(var n=0;n<this.OutputChannelCount;n++)this.ChannelMapping[n]=t.readUint8()}}),o.createFullBoxCtor("dref",function(t){var n,s;this.entries=[];for(var a=t.readUint32(),h=0;h<a;h++)if(n=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),n.code===o.OK)s=n.box,this.entries.push(s);else return}),o.createBoxCtor("drep",function(t){this.bytessent=t.readUint64()}),o.createFullBoxCtor("elng",function(t){this.extended_language=t.readString(this.size-this.hdr_size)}),o.createFullBoxCtor("elst",function(t){this.entries=[];for(var n=t.readUint32(),s=0;s<n;s++){var a={};this.entries.push(a),this.version===1?(a.segment_duration=t.readUint64(),a.media_time=t.readInt64()):(a.segment_duration=t.readUint32(),a.media_time=t.readInt32()),a.media_rate_integer=t.readInt16(),a.media_rate_fraction=t.readInt16()}}),o.createFullBoxCtor("emsg",function(t){this.version==1?(this.timescale=t.readUint32(),this.presentation_time=t.readUint64(),this.event_duration=t.readUint32(),this.id=t.readUint32(),this.scheme_id_uri=t.readCString(),this.value=t.readCString()):(this.scheme_id_uri=t.readCString(),this.value=t.readCString(),this.timescale=t.readUint32(),this.presentation_time_delta=t.readUint32(),this.event_duration=t.readUint32(),this.id=t.readUint32());var n=this.size-this.hdr_size-(4*4+(this.scheme_id_uri.length+1)+(this.value.length+1));this.version==1&&(n-=4),this.message_data=t.readUint8Array(n)}),o.createFullBoxCtor("esds",function(t){var n=t.readUint8Array(this.size-this.hdr_size);if(typeof At<"u"){var s=new At;this.esd=s.parseOneDescriptor(new S(n.buffer,0,S.BIG_ENDIAN))}}),o.createBoxCtor("fiel",function(t){this.fieldCount=t.readUint8(),this.fieldOrdering=t.readUint8()}),o.createBoxCtor("frma",function(t){this.data_format=t.readString(4)}),o.createBoxCtor("ftyp",function(t){var n=this.size-this.hdr_size;this.major_brand=t.readString(4),this.minor_version=t.readUint32(),n-=8,this.compatible_brands=[];for(var s=0;n>=4;)this.compatible_brands[s]=t.readString(4),n-=4,s++}),o.createFullBoxCtor("hdlr",function(t){this.version===0&&(t.readUint32(),this.handler=t.readString(4),t.readUint32Array(3),this.name=t.readString(this.size-this.hdr_size-20),this.name[this.name.length-1]==="\\0"&&(this.name=this.name.slice(0,-1)))}),o.createBoxCtor("hvcC",function(t){var n,s,a,h,g;this.configurationVersion=t.readUint8(),g=t.readUint8(),this.general_profile_space=g>>6,this.general_tier_flag=(g&32)>>5,this.general_profile_idc=g&31,this.general_profile_compatibility=t.readUint32(),this.general_constraint_indicator=t.readUint8Array(6),this.general_level_idc=t.readUint8(),this.min_spatial_segmentation_idc=t.readUint16()&4095,this.parallelismType=t.readUint8()&3,this.chroma_format_idc=t.readUint8()&3,this.bit_depth_luma_minus8=t.readUint8()&7,this.bit_depth_chroma_minus8=t.readUint8()&7,this.avgFrameRate=t.readUint16(),g=t.readUint8(),this.constantFrameRate=g>>6,this.numTemporalLayers=(g&13)>>3,this.temporalIdNested=(g&4)>>2,this.lengthSizeMinusOne=g&3,this.nalu_arrays=[];var _=t.readUint8();for(n=0;n<_;n++){var U=[];this.nalu_arrays.push(U),g=t.readUint8(),U.completeness=(g&128)>>7,U.nalu_type=g&63;var T=t.readUint16();for(s=0;s<T;s++){var z={};U.push(z),h=t.readUint16(),z.data=t.readUint8Array(h)}}}),o.createFullBoxCtor("iinf",function(t){var n;this.version===0?this.entry_count=t.readUint16():this.entry_count=t.readUint32(),this.item_infos=[];for(var s=0;s<this.entry_count;s++)if(n=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),n.code===o.OK)n.box.type!=="infe"&&E.error("BoxParser","Expected 'infe' box, got "+n.box.type),this.item_infos[s]=n.box;else return}),o.createFullBoxCtor("iloc",function(t){var n;n=t.readUint8(),this.offset_size=n>>4&15,this.length_size=n&15,n=t.readUint8(),this.base_offset_size=n>>4&15,this.version===1||this.version===2?this.index_size=n&15:this.index_size=0,this.items=[];var s=0;if(this.version<2)s=t.readUint16();else if(this.version===2)s=t.readUint32();else throw"version of iloc box not supported";for(var a=0;a<s;a++){var h={};if(this.items.push(h),this.version<2)h.item_ID=t.readUint16();else if(this.version===2)h.item_ID=t.readUint16();else throw"version of iloc box not supported";switch(this.version===1||this.version===2?h.construction_method=t.readUint16()&15:h.construction_method=0,h.data_reference_index=t.readUint16(),this.base_offset_size){case 0:h.base_offset=0;break;case 4:h.base_offset=t.readUint32();break;case 8:h.base_offset=t.readUint64();break;default:throw"Error reading base offset size"}var g=t.readUint16();h.extents=[];for(var _=0;_<g;_++){var U={};if(h.extents.push(U),this.version===1||this.version===2)switch(this.index_size){case 0:U.extent_index=0;break;case 4:U.extent_index=t.readUint32();break;case 8:U.extent_index=t.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:U.extent_offset=0;break;case 4:U.extent_offset=t.readUint32();break;case 8:U.extent_offset=t.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:U.extent_length=0;break;case 4:U.extent_length=t.readUint32();break;case 8:U.extent_length=t.readUint64();break;default:throw"Error reading extent index"}}}}),o.createBoxCtor("imir",function(t){var n=t.readUint8();this.reserved=n>>7,this.axis=n&1}),o.createFullBoxCtor("infe",function(t){if((this.version===0||this.version===1)&&(this.item_ID=t.readUint16(),this.item_protection_index=t.readUint16(),this.item_name=t.readCString(),this.content_type=t.readCString(),this.content_encoding=t.readCString()),this.version===1){this.extension_type=t.readString(4),E.warn("BoxParser","Cannot parse extension type"),t.seek(this.start+this.size);return}this.version>=2&&(this.version===2?this.item_ID=t.readUint16():this.version===3&&(this.item_ID=t.readUint32()),this.item_protection_index=t.readUint16(),this.item_type=t.readString(4),this.item_name=t.readCString(),this.item_type==="mime"?(this.content_type=t.readCString(),this.content_encoding=t.readCString()):this.item_type==="uri "&&(this.item_uri_type=t.readCString()))}),o.createFullBoxCtor("ipma",function(t){var n,s;for(entry_count=t.readUint32(),this.associations=[],n=0;n<entry_count;n++){var a={};this.associations.push(a),this.version<1?a.id=t.readUint16():a.id=t.readUint32();var h=t.readUint8();for(a.props=[],s=0;s<h;s++){var g=t.readUint8(),_={};a.props.push(_),_.essential=(g&128)>>7===1,this.flags&1?_.property_index=(g&127)<<8|t.readUint8():_.property_index=g&127}}}),o.createFullBoxCtor("iref",function(t){var n,s,a;for(this.references=[];t.getPosition()<this.start+this.size;)if(n=o.parseOneBox(t,!0,this.size-(t.getPosition()-this.start)),n.code===o.OK)this.version===0?a=new o.SingleItemTypeReferenceBox(n.type,n.size,n.hdr_size,n.start):a=new o.SingleItemTypeReferenceBoxLarge(n.type,n.size,n.hdr_size,n.start),a.write===o.Box.prototype.write&&a.type!=="mdat"&&(E.warn("BoxParser",a.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),a.parseDataAndRewind(t)),a.parse(t),this.references.push(a);else return}),o.createBoxCtor("irot",function(t){this.angle=t.readUint8()&3}),o.createFullBoxCtor("ispe",function(t){this.image_width=t.readUint32(),this.image_height=t.readUint32()}),o.createFullBoxCtor("kind",function(t){this.schemeURI=t.readCString(),this.value=t.readCString()}),o.createFullBoxCtor("leva",function(t){var n=t.readUint8();this.levels=[];for(var s=0;s<n;s++){var a={};this.levels[s]=a,a.track_ID=t.readUint32();var h=t.readUint8();switch(a.padding_flag=h>>7,a.assignment_type=h&127,a.assignment_type){case 0:a.grouping_type=t.readString(4);break;case 1:a.grouping_type=t.readString(4),a.grouping_type_parameter=t.readUint32();break;case 2:break;case 3:break;case 4:a.sub_track_id=t.readUint32();break;default:E.warn("BoxParser","Unknown leva assignement type")}}}),o.createBoxCtor("lsel",function(t){this.layer_id=t.readUint16()}),o.createBoxCtor("maxr",function(t){this.period=t.readUint32(),this.bytes=t.readUint32()}),o.createBoxCtor("mdcv",function(t){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=t.readUint16(),this.display_primaries[0].y=t.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=t.readUint16(),this.display_primaries[1].y=t.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=t.readUint16(),this.display_primaries[2].y=t.readUint16(),this.white_point={},this.white_point.x=t.readUint16(),this.white_point.y=t.readUint16(),this.max_display_mastering_luminance=t.readUint32(),this.min_display_mastering_luminance=t.readUint32()}),o.createFullBoxCtor("mdhd",function(t){this.version==1?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.timescale=t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.timescale=t.readUint32(),this.duration=t.readUint32()),this.parseLanguage(t),t.readUint16()}),o.createFullBoxCtor("mehd",function(t){this.flags&1&&(E.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.version==1?this.fragment_duration=t.readUint64():this.fragment_duration=t.readUint32()}),o.createFullBoxCtor("meta",function(t){this.boxes=[],o.ContainerBox.prototype.parse.call(this,t)}),o.createFullBoxCtor("mfhd",function(t){this.sequence_number=t.readUint32()}),o.createFullBoxCtor("mfro",function(t){this._size=t.readUint32()}),o.createFullBoxCtor("mvhd",function(t){this.version==1?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.timescale=t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.timescale=t.readUint32(),this.duration=t.readUint32()),this.rate=t.readUint32(),this.volume=t.readUint16()>>8,t.readUint16(),t.readUint32Array(2),this.matrix=t.readUint32Array(9),t.readUint32Array(6),this.next_track_id=t.readUint32()}),o.createBoxCtor("npck",function(t){this.packetssent=t.readUint32()}),o.createBoxCtor("nump",function(t){this.packetssent=t.readUint64()}),o.createFullBoxCtor("padb",function(t){var n=t.readUint32();this.padbits=[];for(var s=0;s<Math.floor((n+1)/2);s++)this.padbits=t.readUint8()}),o.createBoxCtor("pasp",function(t){this.hSpacing=t.readUint32(),this.vSpacing=t.readUint32()}),o.createBoxCtor("payl",function(t){this.text=t.readString(this.size-this.hdr_size)}),o.createBoxCtor("payt",function(t){this.payloadID=t.readUint32();var n=t.readUint8();this.rtpmap_string=t.readString(n)}),o.createFullBoxCtor("pdin",function(t){var n=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var s=0;s<n;s++)this.rate[s]=t.readUint32(),this.initial_delay[s]=t.readUint32()}),o.createFullBoxCtor("pitm",function(t){this.version===0?this.item_id=t.readUint16():this.item_id=t.readUint32()}),o.createFullBoxCtor("pixi",function(t){var n;for(this.num_channels=t.readUint8(),this.bits_per_channels=[],n=0;n<this.num_channels;n++)this.bits_per_channels[n]=t.readUint8()}),o.createBoxCtor("pmax",function(t){this.bytes=t.readUint32()}),o.createFullBoxCtor("prft",function(t){this.ref_track_id=t.readUint32(),this.ntp_timestamp=t.readUint64(),this.version===0?this.media_time=t.readUint32():this.media_time=t.readUint64()}),o.createFullBoxCtor("pssh",function(t){if(this.system_id=o.parseHex16(t),this.version>0){var n=t.readUint32();this.kid=[];for(var s=0;s<n;s++)this.kid[s]=o.parseHex16(t)}var a=t.readUint32();a>0&&(this.data=t.readUint8Array(a))}),o.createFullBoxCtor("clef",function(t){this.width=t.readUint32(),this.height=t.readUint32()}),o.createFullBoxCtor("enof",function(t){this.width=t.readUint32(),this.height=t.readUint32()}),o.createFullBoxCtor("prof",function(t){this.width=t.readUint32(),this.height=t.readUint32()}),o.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),o.createBoxCtor("rtp ",function(t){this.descriptionformat=t.readString(4),this.sdptext=t.readString(this.size-this.hdr_size-4)}),o.createFullBoxCtor("saio",function(t){this.flags&1&&(this.aux_info_type=t.readUint32(),this.aux_info_type_parameter=t.readUint32());var n=t.readUint32();this.offset=[];for(var s=0;s<n;s++)this.version===0?this.offset[s]=t.readUint32():this.offset[s]=t.readUint64()}),o.createFullBoxCtor("saiz",function(t){this.flags&1&&(this.aux_info_type=t.readUint32(),this.aux_info_type_parameter=t.readUint32()),this.default_sample_info_size=t.readUint8();var n=t.readUint32();if(this.sample_info_size=[],this.default_sample_info_size===0)for(var s=0;s<n;s++)this.sample_info_size[s]=t.readUint8()}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.namespace=t.readCString(),this.schema_location=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(t){this.parseHeader(t),this.namespace=t.readCString(),this.schema_location=t.readCString(),this.auxiliary_mime_types=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(t){this.parseHeader(t),this.displayFlags=t.readUint32(),this.horizontal_justification=t.readInt8(),this.vertical_justification=t.readInt8(),this.bg_color_rgba=t.readUint8Array(4),this.box_record=t.readInt16Array(4),this.style_record=t.readUint8Array(12),this.parseFooter(t)}),o.createSampleEntryCtor(o.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(t){this.parseHeader(t),this.parseFooter(t)}),o.createSampleGroupCtor("alst",function(t){var n,s=t.readUint16();for(this.first_output_sample=t.readUint16(),this.sample_offset=[],n=0;n<s;n++)this.sample_offset[n]=t.readUint32();var a=this.description_length-4-4*s;for(this.num_output_samples=[],this.num_total_samples=[],n=0;n<a/4;n++)this.num_output_samples[n]=t.readUint16(),this.num_total_samples[n]=t.readUint16()}),o.createSampleGroupCtor("avll",function(t){this.layerNumber=t.readUint8(),this.accurateStatisticsFlag=t.readUint8(),this.avgBitRate=t.readUint16(),this.avgFrameRate=t.readUint16()}),o.createSampleGroupCtor("avss",function(t){this.subSequenceIdentifier=t.readUint16(),this.layerNumber=t.readUint8();var n=t.readUint8();this.durationFlag=n>>7,this.avgRateFlag=n>>6&1,this.durationFlag&&(this.duration=t.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=t.readUint8(),this.avgBitRate=t.readUint16(),this.avgFrameRate=t.readUint16()),this.dependency=[];for(var s=t.readUint8(),a=0;a<s;a++){var h={};this.dependency.push(h),h.subSeqDirectionFlag=t.readUint8(),h.layerNumber=t.readUint8(),h.subSequenceIdentifier=t.readUint16()}}),o.createSampleGroupCtor("dtrt",function(t){E.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("mvif",function(t){E.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("prol",function(t){this.roll_distance=t.readInt16()}),o.createSampleGroupCtor("rap ",function(t){var n=t.readUint8();this.num_leading_samples_known=n>>7,this.num_leading_samples=n&127}),o.createSampleGroupCtor("rash",function(t){if(this.operation_point_count=t.readUint16(),this.description_length!==2+(this.operation_point_count===1?2:this.operation_point_count*6)+9)E.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=t.readUint8Array(this.description_length-2);else{if(this.operation_point_count===1)this.target_rate_share=t.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var n=0;n<this.operation_point_count;n++)this.available_bitrate[n]=t.readUint32(),this.target_rate_share[n]=t.readUint16()}this.maximum_bitrate=t.readUint32(),this.minimum_bitrate=t.readUint32(),this.discard_priority=t.readUint8()}}),o.createSampleGroupCtor("roll",function(t){this.roll_distance=t.readInt16()}),o.SampleGroupEntry.prototype.parse=function(t){E.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=t.readUint8Array(this.description_length)},o.createSampleGroupCtor("scif",function(t){E.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("scnm",function(t){E.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("seig",function(t){this.reserved=t.readUint8();var n=t.readUint8();this.crypt_byte_block=n>>4,this.skip_byte_block=n&15,this.isProtected=t.readUint8(),this.Per_Sample_IV_Size=t.readUint8(),this.KID=o.parseHex16(t),this.constant_IV_size=0,this.constant_IV=0,this.isProtected===1&&this.Per_Sample_IV_Size===0&&(this.constant_IV_size=t.readUint8(),this.constant_IV=t.readUint8Array(this.constant_IV_size))}),o.createSampleGroupCtor("stsa",function(t){E.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("sync",function(t){var n=t.readUint8();this.NAL_unit_type=n&63}),o.createSampleGroupCtor("tele",function(t){var n=t.readUint8();this.level_independently_decodable=n>>7}),o.createSampleGroupCtor("tsas",function(t){E.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("tscl",function(t){E.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createSampleGroupCtor("vipr",function(t){E.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),o.createFullBoxCtor("sbgp",function(t){this.grouping_type=t.readString(4),this.version===1?this.grouping_type_parameter=t.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var n=t.readUint32(),s=0;s<n;s++){var a={};this.entries.push(a),a.sample_count=t.readInt32(),a.group_description_index=t.readInt32()}}),o.createFullBoxCtor("schm",function(t){this.scheme_type=t.readString(4),this.scheme_version=t.readUint32(),this.flags&1&&(this.scheme_uri=t.readString(this.size-this.hdr_size-8))}),o.createBoxCtor("sdp ",function(t){this.sdptext=t.readString(this.size-this.hdr_size)}),o.createFullBoxCtor("sdtp",function(t){var n,s=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var a=0;a<s;a++)n=t.readUint8(),this.is_leading[a]=n>>6,this.sample_depends_on[a]=n>>4&3,this.sample_is_depended_on[a]=n>>2&3,this.sample_has_redundancy[a]=n&3}),o.createFullBoxCtor("senc"),o.createFullBoxCtor("sgpd",function(t){this.grouping_type=t.readString(4),E.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.version===1?this.default_length=t.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=t.readUint32()),this.entries=[];for(var n=t.readUint32(),s=0;s<n;s++){var a;o[this.grouping_type+"SampleGroupEntry"]?a=new o[this.grouping_type+"SampleGroupEntry"](this.grouping_type):a=new o.SampleGroupEntry(this.grouping_type),this.entries.push(a),this.version===1?this.default_length===0?a.description_length=t.readUint32():a.description_length=this.default_length:a.description_length=this.default_length,a.write===o.SampleGroupEntry.prototype.write&&(E.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),a.data=t.readUint8Array(a.description_length),t.position-=a.description_length),a.parse(t)}}),o.createFullBoxCtor("sidx",function(t){this.reference_ID=t.readUint32(),this.timescale=t.readUint32(),this.version===0?(this.earliest_presentation_time=t.readUint32(),this.first_offset=t.readUint32()):(this.earliest_presentation_time=t.readUint64(),this.first_offset=t.readUint64()),t.readUint16(),this.references=[];for(var n=t.readUint16(),s=0;s<n;s++){var a={};this.references.push(a);var h=t.readUint32();a.reference_type=h>>31&1,a.referenced_size=h&2147483647,a.subsegment_duration=t.readUint32(),h=t.readUint32(),a.starts_with_SAP=h>>31&1,a.SAP_type=h>>28&7,a.SAP_delta_time=h&268435455}}),o.SingleItemTypeReferenceBox=function(t,n,s,a){o.Box.call(this,t,n),this.hdr_size=s,this.start=a},o.SingleItemTypeReferenceBox.prototype=new o.Box,o.SingleItemTypeReferenceBox.prototype.parse=function(t){this.from_item_ID=t.readUint16();var n=t.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]=t.readUint16()},o.SingleItemTypeReferenceBoxLarge=function(t,n,s,a){o.Box.call(this,t,n),this.hdr_size=s,this.start=a},o.SingleItemTypeReferenceBoxLarge.prototype=new o.Box,o.SingleItemTypeReferenceBoxLarge.prototype.parse=function(t){this.from_item_ID=t.readUint32();var n=t.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]=t.readUint32()},o.createFullBoxCtor("SmDm",function(t){this.primaryRChromaticity_x=t.readUint16(),this.primaryRChromaticity_y=t.readUint16(),this.primaryGChromaticity_x=t.readUint16(),this.primaryGChromaticity_y=t.readUint16(),this.primaryBChromaticity_x=t.readUint16(),this.primaryBChromaticity_y=t.readUint16(),this.whitePointChromaticity_x=t.readUint16(),this.whitePointChromaticity_y=t.readUint16(),this.luminanceMax=t.readUint32(),this.luminanceMin=t.readUint32()}),o.createFullBoxCtor("smhd",function(t){this.balance=t.readUint16(),t.readUint16()}),o.createFullBoxCtor("ssix",function(t){this.subsegments=[];for(var n=t.readUint32(),s=0;s<n;s++){var a={};this.subsegments.push(a),a.ranges=[];for(var h=t.readUint32(),g=0;g<h;g++){var _={};a.ranges.push(_),_.level=t.readUint8(),_.range_size=t.readUint24()}}}),o.createFullBoxCtor("stco",function(t){var n;if(n=t.readUint32(),this.chunk_offsets=[],this.version===0)for(var s=0;s<n;s++)this.chunk_offsets.push(t.readUint32())}),o.createFullBoxCtor("stdp",function(t){var n=(this.size-this.hdr_size)/2;this.priority=[];for(var s=0;s<n;s++)this.priority[s]=t.readUint16()}),o.createFullBoxCtor("sthd"),o.createFullBoxCtor("stri",function(t){this.switch_group=t.readUint16(),this.alternate_group=t.readUint16(),this.sub_track_id=t.readUint32();var n=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=t.readUint32()}),o.createFullBoxCtor("stsc",function(t){var n,s;if(n=t.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],this.version===0)for(s=0;s<n;s++)this.first_chunk.push(t.readUint32()),this.samples_per_chunk.push(t.readUint32()),this.sample_description_index.push(t.readUint32())}),o.createFullBoxCtor("stsd",function(t){var n,s,a,h;for(this.entries=[],a=t.readUint32(),n=1;n<=a;n++)if(s=o.parseOneBox(t,!0,this.size-(t.getPosition()-this.start)),s.code===o.OK)o[s.type+"SampleEntry"]?(h=new o[s.type+"SampleEntry"](s.size),h.hdr_size=s.hdr_size,h.start=s.start):(E.warn("BoxParser","Unknown sample entry type: "+s.type),h=new o.SampleEntry(s.type,s.size,s.hdr_size,s.start)),h.write===o.SampleEntry.prototype.write&&(E.info("BoxParser","SampleEntry "+h.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),h.parseDataAndRewind(t)),h.parse(t),this.entries.push(h);else return}),o.createFullBoxCtor("stsg",function(t){this.grouping_type=t.readUint32();var n=t.readUint16();this.group_description_index=[];for(var s=0;s<n;s++)this.group_description_index[s]=t.readUint32()}),o.createFullBoxCtor("stsh",function(t){var n,s;if(n=t.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],this.version===0)for(s=0;s<n;s++)this.shadowed_sample_numbers.push(t.readUint32()),this.sync_sample_numbers.push(t.readUint32())}),o.createFullBoxCtor("stss",function(t){var n,s;if(s=t.readUint32(),this.version===0)for(this.sample_numbers=[],n=0;n<s;n++)this.sample_numbers.push(t.readUint32())}),o.createFullBoxCtor("stsz",function(t){var n;if(this.sample_sizes=[],this.version===0)for(this.sample_size=t.readUint32(),this.sample_count=t.readUint32(),n=0;n<this.sample_count;n++)this.sample_size===0?this.sample_sizes.push(t.readUint32()):this.sample_sizes[n]=this.sample_size}),o.createFullBoxCtor("stts",function(t){var n,s,a;if(n=t.readUint32(),this.sample_counts=[],this.sample_deltas=[],this.version===0)for(s=0;s<n;s++)this.sample_counts.push(t.readUint32()),a=t.readInt32(),a<0&&(E.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),a=1),this.sample_deltas.push(a)}),o.createFullBoxCtor("stvi",function(t){var n=t.readUint32();this.single_view_allowed=n&3,this.stereo_scheme=t.readUint32();var s=t.readUint32();this.stereo_indication_type=t.readString(s);var a,h;for(this.boxes=[];t.getPosition()<this.start+this.size;)if(a=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),a.code===o.OK)h=a.box,this.boxes.push(h),this[h.type]=h;else return}),o.createBoxCtor("styp",function(t){o.ftypBox.prototype.parse.call(this,t)}),o.createFullBoxCtor("stz2",function(t){var n,s,a;if(this.sample_sizes=[],this.version===0)if(this.reserved=t.readUint24(),this.field_size=t.readUint8(),a=t.readUint32(),this.field_size===4)for(n=0;n<a;n+=2){var h=t.readUint8();this.sample_sizes[n]=h>>4&15,this.sample_sizes[n+1]=h&15}else if(this.field_size===8)for(n=0;n<a;n++)this.sample_sizes[n]=t.readUint8();else if(this.field_size===16)for(n=0;n<a;n++)this.sample_sizes[n]=t.readUint16();else E.error("BoxParser","Error in length field in stz2 box")}),o.createFullBoxCtor("subs",function(t){var n,s,a,h;for(a=t.readUint32(),this.entries=[],n=0;n<a;n++){var g={};if(this.entries[n]=g,g.sample_delta=t.readUint32(),g.subsamples=[],h=t.readUint16(),h>0)for(s=0;s<h;s++){var _={};g.subsamples.push(_),this.version==1?_.size=t.readUint32():_.size=t.readUint16(),_.priority=t.readUint8(),_.discardable=t.readUint8(),_.codec_specific_parameters=t.readUint32()}}}),o.createFullBoxCtor("tenc",function(t){if(t.readUint8(),this.version===0)t.readUint8();else{var n=t.readUint8();this.default_crypt_byte_block=n>>4&15,this.default_skip_byte_block=n&15}this.default_isProtected=t.readUint8(),this.default_Per_Sample_IV_Size=t.readUint8(),this.default_KID=o.parseHex16(t),this.default_isProtected===1&&this.default_Per_Sample_IV_Size===0&&(this.default_constant_IV_size=t.readUint8(),this.default_constant_IV=t.readUint8Array(this.default_constant_IV_size))}),o.createFullBoxCtor("tfdt",function(t){this.version==1?this.baseMediaDecodeTime=t.readUint64():this.baseMediaDecodeTime=t.readUint32()}),o.createFullBoxCtor("tfhd",function(t){var n=0;this.track_id=t.readUint32(),this.size-this.hdr_size>n&&this.flags&o.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=t.readUint64(),n+=8):this.base_data_offset=0,this.size-this.hdr_size>n&&this.flags&o.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=t.readUint32(),n+=4):this.default_sample_description_index=0,this.size-this.hdr_size>n&&this.flags&o.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=t.readUint32(),n+=4):this.default_sample_duration=0,this.size-this.hdr_size>n&&this.flags&o.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=t.readUint32(),n+=4):this.default_sample_size=0,this.size-this.hdr_size>n&&this.flags&o.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=t.readUint32(),n+=4):this.default_sample_flags=0}),o.createFullBoxCtor("tfra",function(t){this.track_ID=t.readUint32(),t.readUint24();var n=t.readUint8();this.length_size_of_traf_num=n>>4&3,this.length_size_of_trun_num=n>>2&3,this.length_size_of_sample_num=n&3,this.entries=[];for(var s=t.readUint32(),a=0;a<s;a++)this.version===1?(this.time=t.readUint64(),this.moof_offset=t.readUint64()):(this.time=t.readUint32(),this.moof_offset=t.readUint32()),this.traf_number=t["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=t["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=t["readUint"+8*(this.length_size_of_sample_num+1)]()}),o.createFullBoxCtor("tkhd",function(t){this.version==1?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.track_id=t.readUint32(),t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.track_id=t.readUint32(),t.readUint32(),this.duration=t.readUint32()),t.readUint32Array(2),this.layer=t.readInt16(),this.alternate_group=t.readInt16(),this.volume=t.readInt16()>>8,t.readUint16(),this.matrix=t.readInt32Array(9),this.width=t.readUint32(),this.height=t.readUint32()}),o.createBoxCtor("tmax",function(t){this.time=t.readUint32()}),o.createBoxCtor("tmin",function(t){this.time=t.readUint32()}),o.createBoxCtor("totl",function(t){this.bytessent=t.readUint32()}),o.createBoxCtor("tpay",function(t){this.bytessent=t.readUint32()}),o.createBoxCtor("tpyl",function(t){this.bytessent=t.readUint64()}),o.TrackGroupTypeBox.prototype.parse=function(t){this.parseFullHeader(t),this.track_group_id=t.readUint32()},o.createTrackGroupCtor("msrc"),o.TrackReferenceTypeBox=function(t,n,s,a){o.Box.call(this,t,n),this.hdr_size=s,this.start=a},o.TrackReferenceTypeBox.prototype=new o.Box,o.TrackReferenceTypeBox.prototype.parse=function(t){this.track_ids=t.readUint32Array((this.size-this.hdr_size)/4)},o.trefBox.prototype.parse=function(t){for(var n,s;t.getPosition()<this.start+this.size;)if(n=o.parseOneBox(t,!0,this.size-(t.getPosition()-this.start)),n.code===o.OK)s=new o.TrackReferenceTypeBox(n.type,n.size,n.hdr_size,n.start),s.write===o.Box.prototype.write&&s.type!=="mdat"&&(E.info("BoxParser","TrackReference "+s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(t)),s.parse(t),this.boxes.push(s);else return},o.createFullBoxCtor("trep",function(t){for(this.track_ID=t.readUint32(),this.boxes=[];t.getPosition()<this.start+this.size;)if(ret=o.parseOneBox(t,!1,this.size-(t.getPosition()-this.start)),ret.code===o.OK)box=ret.box,this.boxes.push(box);else return}),o.createFullBoxCtor("trex",function(t){this.track_id=t.readUint32(),this.default_sample_description_index=t.readUint32(),this.default_sample_duration=t.readUint32(),this.default_sample_size=t.readUint32(),this.default_sample_flags=t.readUint32()}),o.createBoxCtor("trpy",function(t){this.bytessent=t.readUint64()}),o.createFullBoxCtor("trun",function(t){var n=0;if(this.sample_count=t.readUint32(),n+=4,this.size-this.hdr_size>n&&this.flags&o.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=t.readInt32(),n+=4):this.data_offset=0,this.size-this.hdr_size>n&&this.flags&o.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=t.readUint32(),n+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>n)for(var s=0;s<this.sample_count;s++)this.flags&o.TRUN_FLAGS_DURATION&&(this.sample_duration[s]=t.readUint32()),this.flags&o.TRUN_FLAGS_SIZE&&(this.sample_size[s]=t.readUint32()),this.flags&o.TRUN_FLAGS_FLAGS&&(this.sample_flags[s]=t.readUint32()),this.flags&o.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?this.sample_composition_time_offset[s]=t.readUint32():this.sample_composition_time_offset[s]=t.readInt32())}),o.createFullBoxCtor("tsel",function(t){this.switch_group=t.readUint32();var n=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=t.readUint32()}),o.createFullBoxCtor("txtC",function(t){this.config=t.readCString()}),o.createFullBoxCtor("url ",function(t){this.flags!==1&&(this.location=t.readCString())}),o.createFullBoxCtor("urn ",function(t){this.name=t.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=t.readCString())}),o.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(t){this.LiveServerManifest=t.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),o.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(t){this.system_id=o.parseHex16(t);var n=t.readUint32();n>0&&(this.data=t.readUint8Array(n))}),o.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),o.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(t){this.default_AlgorithmID=t.readUint24(),this.default_IV_size=t.readUint8(),this.default_KID=o.parseHex16(t)}),o.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(t){this.fragment_count=t.readUint8(),this.entries=[];for(var n=0;n<this.fragment_count;n++){var s={},a=0,h=0;this.version===1?(a=t.readUint64(),h=t.readUint64()):(a=t.readUint32(),h=t.readUint32()),s.absolute_time=a,s.absolute_duration=h,this.entries.push(s)}}),o.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(t){this.version===1?(this.absolute_time=t.readUint64(),this.duration=t.readUint64()):(this.absolute_time=t.readUint32(),this.duration=t.readUint32())}),o.createFullBoxCtor("vmhd",function(t){this.graphicsmode=t.readUint16(),this.opcolor=t.readUint16Array(3)}),o.createFullBoxCtor("vpcC",function(t){var n;this.version===1?(this.profile=t.readUint8(),this.level=t.readUint8(),n=t.readUint8(),this.bitDepth=n>>4,this.chromaSubsampling=n>>1&7,this.videoFullRangeFlag=n&1,this.colourPrimaries=t.readUint8(),this.transferCharacteristics=t.readUint8(),this.matrixCoefficients=t.readUint8(),this.codecIntializationDataSize=t.readUint16(),this.codecIntializationData=t.readUint8Array(this.codecIntializationDataSize)):(this.profile=t.readUint8(),this.level=t.readUint8(),n=t.readUint8(),this.bitDepth=n>>4&15,this.colorSpace=n&15,n=t.readUint8(),this.chromaSubsampling=n>>4&15,this.transferFunction=n>>1&7,this.videoFullRangeFlag=n&1,this.codecIntializationDataSize=t.readUint16(),this.codecIntializationData=t.readUint8Array(this.codecIntializationDataSize))}),o.createBoxCtor("vttC",function(t){this.text=t.readString(this.size-this.hdr_size)}),o.createFullBoxCtor("vvcC",function(t){var n,s,a={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(V){this.held_bits=V.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(V){this.held_bits=V.readUint16(),this.num_held_bits=16},extract_bits:function(V){var mt=this.held_bits>>this.num_held_bits-V&(1<<V)-1;return this.num_held_bits-=V,mt}};if(a.stream_read_1_bytes(t),a.extract_bits(5),this.lengthSizeMinusOne=a.extract_bits(2),this.ptl_present_flag=a.extract_bits(1),this.ptl_present_flag){a.stream_read_2_bytes(t),this.ols_idx=a.extract_bits(9),this.num_sublayers=a.extract_bits(3),this.constant_frame_rate=a.extract_bits(2),this.chroma_format_idc=a.extract_bits(2),a.stream_read_1_bytes(t),this.bit_depth_minus8=a.extract_bits(3),a.extract_bits(5);{if(a.stream_read_2_bytes(t),a.extract_bits(2),this.num_bytes_constraint_info=a.extract_bits(6),this.general_profile_idc=a.extract_bits(7),this.general_tier_flag=a.extract_bits(1),this.general_level_idc=t.readUint8(),a.stream_read_1_bytes(t),this.ptl_frame_only_constraint_flag=a.extract_bits(1),this.ptl_multilayer_enabled_flag=a.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(n=0;n<this.num_bytes_constraint_info-1;n++){var h=a.extract_bits(6);a.stream_read_1_bytes(t);var g=a.extract_bits(2);this.general_constraint_info[n]=h<<2|g}this.general_constraint_info[this.num_bytes_constraint_info-1]=a.extract_bits(6)}else a.extract_bits(6);for(a.stream_read_1_bytes(t),this.ptl_sublayer_present_mask=0,s=this.num_sublayers-2;s>=0;--s){var _=a.extract_bits(1);this.ptl_sublayer_present_mask|=_<<s}for(s=this.num_sublayers;s<=8&&this.num_sublayers>1;++s)a.extract_bits(1);for(s=this.num_sublayers-2;s>=0;--s)this.ptl_sublayer_present_mask&1<<s&&(this.sublayer_level_idc[s]=t.readUint8());if(this.ptl_num_sub_profiles=t.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(n=0;n<this.ptl_num_sub_profiles;n++)this.general_sub_profile_idc.push(t.readUint32())}this.max_picture_width=t.readUint16(),this.max_picture_height=t.readUint16(),this.avg_frame_rate=t.readUint16()}var U=12,T=13;this.nalu_arrays=[];var z=t.readUint8();for(n=0;n<z;n++){var R=[];this.nalu_arrays.push(R),a.stream_read_1_bytes(t),R.completeness=a.extract_bits(1),a.extract_bits(2),R.nalu_type=a.extract_bits(5);var Y=1;for(R.nalu_type!=T&&R.nalu_type!=U&&(Y=t.readUint16()),s=0;s<Y;s++){var q=t.readUint16();R.push({data:t.readUint8Array(q),length:q})}}}),o.createFullBoxCtor("vvnC",function(t){var n=strm.readUint8();this.lengthSizeMinusOne=n&3}),o.SampleEntry.prototype.isVideo=function(){return!1},o.SampleEntry.prototype.isAudio=function(){return!1},o.SampleEntry.prototype.isSubtitle=function(){return!1},o.SampleEntry.prototype.isMetadata=function(){return!1},o.SampleEntry.prototype.isHint=function(){return!1},o.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},o.SampleEntry.prototype.getWidth=function(){return""},o.SampleEntry.prototype.getHeight=function(){return""},o.SampleEntry.prototype.getChannelCount=function(){return""},o.SampleEntry.prototype.getSampleRate=function(){return""},o.SampleEntry.prototype.getSampleSize=function(){return""},o.VisualSampleEntry.prototype.isVideo=function(){return!0},o.VisualSampleEntry.prototype.getWidth=function(){return this.width},o.VisualSampleEntry.prototype.getHeight=function(){return this.height},o.AudioSampleEntry.prototype.isAudio=function(){return!0},o.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},o.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},o.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},o.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},o.MetadataSampleEntry.prototype.isMetadata=function(){return!0},o.decimalToHex=function(t,n){var s=Number(t).toString(16);for(n=typeof n>"u"||n===null?n=2:n;s.length<n;)s="0"+s;return s},o.avc1SampleEntry.prototype.getCodec=o.avc2SampleEntry.prototype.getCodec=o.avc3SampleEntry.prototype.getCodec=o.avc4SampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this);return this.avcC?t+"."+o.decimalToHex(this.avcC.AVCProfileIndication)+o.decimalToHex(this.avcC.profile_compatibility)+o.decimalToHex(this.avcC.AVCLevelIndication):t},o.hev1SampleEntry.prototype.getCodec=o.hvc1SampleEntry.prototype.getCodec=function(){var t,n=o.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(n+=".",this.hvcC.general_profile_space){case 0:n+="";break;case 1:n+="A";break;case 2:n+="B";break;case 3:n+="C";break}n+=this.hvcC.general_profile_idc,n+=".";var s=this.hvcC.general_profile_compatibility,a=0;for(t=0;t<32&&(a|=s&1,t!=31);t++)a<<=1,s>>=1;n+=o.decimalToHex(a,0),n+=".",this.hvcC.general_tier_flag===0?n+="L":n+="H",n+=this.hvcC.general_level_idc;var h=!1,g="";for(t=5;t>=0;t--)(this.hvcC.general_constraint_indicator[t]||h)&&(g="."+o.decimalToHex(this.hvcC.general_constraint_indicator[t],0)+g,h=!0);n+=g}return n},o.vvc1SampleEntry.prototype.getCodec=o.vvi1SampleEntry.prototype.getCodec=function(){var t,n=o.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){n+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?n+=".H":n+=".L",n+=this.vvcC.general_level_idc;var s="";if(this.vvcC.general_constraint_info){var a=[],h=0;h|=this.vvcC.ptl_frame_only_constraint<<7,h|=this.vvcC.ptl_multilayer_enabled<<6;var g;for(t=0;t<this.vvcC.general_constraint_info.length;++t)h|=this.vvcC.general_constraint_info[t]>>2&63,a.push(h),h&&(g=t),h=this.vvcC.general_constraint_info[t]>>2&3;if(g===void 0)s=".CA";else{s=".C";var _="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",U=0,T=0;for(t=0;t<=g;++t)for(U=U<<8|a[t],T+=8;T>=5;){var z=U>>T-5&31;s+=_[z],T-=5,U&=(1<<T)-1}T&&(U<<=5-T,s+=_[U&31])}}n+=s}return n},o.mp4aSampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var n=this.esds.esd.getOTI(),s=this.esds.esd.getAudioConfig();return t+"."+o.decimalToHex(n)+(s?"."+s:"")}else return t},o.stxtSampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this);return this.mime_format?t+"."+this.mime_format:t},o.vp08SampleEntry.prototype.getCodec=o.vp09SampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this),n=this.vpcC.level;n==0&&(n="00");var s=this.vpcC.bitDepth;return s==8&&(s="08"),t+".0"+this.vpcC.profile+"."+n+"."+s},o.av01SampleEntry.prototype.getCodec=function(){var t=o.SampleEntry.prototype.getCodec.call(this),n=this.av1C.seq_level_idx_0;n<10&&(n="0"+n);var s;return this.av1C.seq_profile===2&&this.av1C.high_bitdepth===1?s=this.av1C.twelve_bit===1?"12":"10":this.av1C.seq_profile<=2&&(s=this.av1C.high_bitdepth===1?"10":"08"),t+"."+this.av1C.seq_profile+"."+n+(this.av1C.seq_tier_0?"H":"M")+"."+s},o.Box.prototype.writeHeader=function(t,n){this.size+=8,this.size>c&&(this.size+=8),this.type==="uuid"&&(this.size+=16),E.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+t.getPosition()+(n||"")),this.size>c?t.writeUint32(1):(this.sizePosition=t.getPosition(),t.writeUint32(this.size)),t.writeString(this.type,null,4),this.type==="uuid"&&t.writeUint8Array(this.uuid),this.size>c&&t.writeUint64(this.size)},o.FullBox.prototype.writeHeader=function(t){this.size+=4,o.Box.prototype.writeHeader.call(this,t," v="+this.version+" f="+this.flags),t.writeUint8(this.version),t.writeUint24(this.flags)},o.Box.prototype.write=function(t){this.type==="mdat"?this.data&&(this.size=this.data.length,this.writeHeader(t),t.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(t),this.data&&t.writeUint8Array(this.data))},o.ContainerBox.prototype.write=function(t){this.size=0,this.writeHeader(t);for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&(this.boxes[n].write(t),this.size+=this.boxes[n].size);E.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.TrackReferenceTypeBox.prototype.write=function(t){this.size=this.track_ids.length*4,this.writeHeader(t),t.writeUint32Array(this.track_ids)},o.avcCBox.prototype.write=function(t){var n;for(this.size=7,n=0;n<this.SPS.length;n++)this.size+=2+this.SPS[n].length;for(n=0;n<this.PPS.length;n++)this.size+=2+this.PPS[n].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(t),t.writeUint8(this.configurationVersion),t.writeUint8(this.AVCProfileIndication),t.writeUint8(this.profile_compatibility),t.writeUint8(this.AVCLevelIndication),t.writeUint8(this.lengthSizeMinusOne+(63<<2)),t.writeUint8(this.SPS.length+(7<<5)),n=0;n<this.SPS.length;n++)t.writeUint16(this.SPS[n].length),t.writeUint8Array(this.SPS[n].nalu);for(t.writeUint8(this.PPS.length),n=0;n<this.PPS.length;n++)t.writeUint16(this.PPS[n].length),t.writeUint8Array(this.PPS[n].nalu);this.ext&&t.writeUint8Array(this.ext)},o.co64Box.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(t),t.writeUint32(this.chunk_offsets.length),n=0;n<this.chunk_offsets.length;n++)t.writeUint64(this.chunk_offsets[n])},o.cslgBox.prototype.write=function(t){var n;this.version=0,this.flags=0,this.size=4*5,this.writeHeader(t),t.writeInt32(this.compositionToDTSShift),t.writeInt32(this.leastDecodeToDisplayDelta),t.writeInt32(this.greatestDecodeToDisplayDelta),t.writeInt32(this.compositionStartTime),t.writeInt32(this.compositionEndTime)},o.cttsBox.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(t),t.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)t.writeUint32(this.sample_counts[n]),this.version===1?t.writeInt32(this.sample_offsets[n]):t.writeUint32(this.sample_offsets[n])},o.drefBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++)this.entries[n].write(t),this.size+=this.entries[n].size;E.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.elngBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(t),t.writeString(this.extended_language)},o.elstBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(t),t.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];t.writeUint32(s.segment_duration),t.writeInt32(s.media_time),t.writeInt16(s.media_rate_integer),t.writeInt16(s.media_rate_fraction)}},o.emsgBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(t),t.writeCString(this.scheme_id_uri),t.writeCString(this.value),t.writeUint32(this.timescale),t.writeUint32(this.presentation_time_delta),t.writeUint32(this.event_duration),t.writeUint32(this.id),t.writeUint8Array(this.message_data)},o.ftypBox.prototype.write=function(t){this.size=8+4*this.compatible_brands.length,this.writeHeader(t),t.writeString(this.major_brand,null,4),t.writeUint32(this.minor_version);for(var n=0;n<this.compatible_brands.length;n++)t.writeString(this.compatible_brands[n],null,4)},o.hdlrBox.prototype.write=function(t){this.size=5*4+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(t),t.writeUint32(0),t.writeString(this.handler,null,4),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeCString(this.name)},o.kindBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(t),t.writeCString(this.schemeURI),t.writeCString(this.value)},o.mdhdBox.prototype.write=function(t){this.size=4*4+2*2,this.flags=0,this.version=0,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.timescale),t.writeUint32(this.duration),t.writeUint16(this.language),t.writeUint16(0)},o.mehdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.fragment_duration)},o.mfhdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.sequence_number)},o.mvhdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=23*4+2*2,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.timescale),t.writeUint32(this.duration),t.writeUint32(this.rate),t.writeUint16(this.volume<<8),t.writeUint16(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32Array(this.matrix),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(this.next_track_id)},o.SampleEntry.prototype.writeHeader=function(t){this.size=8,o.Box.prototype.writeHeader.call(this,t),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint16(this.data_reference_index)},o.SampleEntry.prototype.writeFooter=function(t){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(t),this.size+=this.boxes[n].size;E.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.SampleEntry.prototype.write=function(t){this.writeHeader(t),t.writeUint8Array(this.data),this.size+=this.data.length,E.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.VisualSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=2*7+6*4+32,t.writeUint16(0),t.writeUint16(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint16(this.width),t.writeUint16(this.height),t.writeUint32(this.horizresolution),t.writeUint32(this.vertresolution),t.writeUint32(0),t.writeUint16(this.frame_count),t.writeUint8(Math.min(31,this.compressorname.length)),t.writeString(this.compressorname,null,31),t.writeUint16(this.depth),t.writeInt16(-1),this.writeFooter(t)},o.AudioSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=2*4+3*4,t.writeUint32(0),t.writeUint32(0),t.writeUint16(this.channel_count),t.writeUint16(this.samplesize),t.writeUint16(0),t.writeUint16(0),t.writeUint32(this.samplerate<<16),this.writeFooter(t)},o.stppSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,t.writeCString(this.namespace),t.writeCString(this.schema_location),t.writeCString(this.auxiliary_mime_types),this.writeFooter(t)},o.SampleGroupEntry.prototype.write=function(t){t.writeUint8Array(this.data)},o.sbgpBox.prototype.write=function(t){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(t),t.writeString(this.grouping_type,null,4),t.writeUint32(this.grouping_type_parameter),t.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];t.writeInt32(s.sample_count),t.writeInt32(s.group_description_index)}},o.sgpdBox.prototype.write=function(t){var n,s;for(this.flags=0,this.size=12,n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&(this.default_length===0&&(this.size+=4),this.size+=s.data.length);for(this.writeHeader(t),t.writeString(this.grouping_type,null,4),this.version===1&&t.writeUint32(this.default_length),this.version>=2&&t.writeUint32(this.default_sample_description_index),t.writeUint32(this.entries.length),n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&this.default_length===0&&t.writeUint32(s.description_length),s.write(t)},o.sidxBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*4+2+2+12*this.references.length,this.writeHeader(t),t.writeUint32(this.reference_ID),t.writeUint32(this.timescale),t.writeUint32(this.earliest_presentation_time),t.writeUint32(this.first_offset),t.writeUint16(0),t.writeUint16(this.references.length);for(var n=0;n<this.references.length;n++){var s=this.references[n];t.writeUint32(s.reference_type<<31|s.referenced_size),t.writeUint32(s.subsegment_duration),t.writeUint32(s.starts_with_SAP<<31|s.SAP_type<<28|s.SAP_delta_time)}},o.smhdBox.prototype.write=function(t){var n;this.version=0,this.flags=1,this.size=4,this.writeHeader(t),t.writeUint16(this.balance),t.writeUint16(0)},o.stcoBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(t),t.writeUint32(this.chunk_offsets.length),t.writeUint32Array(this.chunk_offsets)},o.stscBox.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(t),t.writeUint32(this.first_chunk.length),n=0;n<this.first_chunk.length;n++)t.writeUint32(this.first_chunk[n]),t.writeUint32(this.samples_per_chunk[n]),t.writeUint32(this.sample_description_index[n])},o.stsdBox.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(t),t.writeUint32(this.entries.length),this.size+=4,n=0;n<this.entries.length;n++)this.entries[n].write(t),this.size+=this.entries[n].size;E.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},o.stshBox.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(t),t.writeUint32(this.shadowed_sample_numbers.length),n=0;n<this.shadowed_sample_numbers.length;n++)t.writeUint32(this.shadowed_sample_numbers[n]),t.writeUint32(this.sync_sample_numbers[n])},o.stssBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(t),t.writeUint32(this.sample_numbers.length),t.writeUint32Array(this.sample_numbers)},o.stszBox.prototype.write=function(t){var n,s=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(n=0;n+1<this.sample_sizes.length;)if(this.sample_sizes[n+1]!==this.sample_sizes[0]){s=!1;break}else n++;else s=!1;this.size=8,s||(this.size+=4*this.sample_sizes.length),this.writeHeader(t),s?t.writeUint32(this.sample_sizes[0]):t.writeUint32(0),t.writeUint32(this.sample_sizes.length),s||t.writeUint32Array(this.sample_sizes)},o.sttsBox.prototype.write=function(t){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(t),t.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)t.writeUint32(this.sample_counts[n]),t.writeUint32(this.sample_deltas[n])},o.tfdtBox.prototype.write=function(t){var n=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>n?1:0,this.flags=0,this.size=4,this.version===1&&(this.size+=4),this.writeHeader(t),this.version===1?t.writeUint64(this.baseMediaDecodeTime):t.writeUint32(this.baseMediaDecodeTime)},o.tfhdBox.prototype.write=function(t){this.version=0,this.size=4,this.flags&o.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&o.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&o.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&o.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&o.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(t),t.writeUint32(this.track_id),this.flags&o.TFHD_FLAG_BASE_DATA_OFFSET&&t.writeUint64(this.base_data_offset),this.flags&o.TFHD_FLAG_SAMPLE_DESC&&t.writeUint32(this.default_sample_description_index),this.flags&o.TFHD_FLAG_SAMPLE_DUR&&t.writeUint32(this.default_sample_duration),this.flags&o.TFHD_FLAG_SAMPLE_SIZE&&t.writeUint32(this.default_sample_size),this.flags&o.TFHD_FLAG_SAMPLE_FLAGS&&t.writeUint32(this.default_sample_flags)},o.tkhdBox.prototype.write=function(t){this.version=0,this.size=4*18+2*4,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.track_id),t.writeUint32(0),t.writeUint32(this.duration),t.writeUint32(0),t.writeUint32(0),t.writeInt16(this.layer),t.writeInt16(this.alternate_group),t.writeInt16(this.volume<<8),t.writeUint16(0),t.writeInt32Array(this.matrix),t.writeUint32(this.width),t.writeUint32(this.height)},o.trexBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(t),t.writeUint32(this.track_id),t.writeUint32(this.default_sample_description_index),t.writeUint32(this.default_sample_duration),t.writeUint32(this.default_sample_size),t.writeUint32(this.default_sample_flags)},o.trunBox.prototype.write=function(t){this.version=0,this.size=4,this.flags&o.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&o.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&o.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&o.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&o.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&o.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(t),t.writeUint32(this.sample_count),this.flags&o.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=t.getPosition(),t.writeInt32(this.data_offset)),this.flags&o.TRUN_FLAGS_FIRST_FLAG&&t.writeUint32(this.first_sample_flags);for(var n=0;n<this.sample_count;n++)this.flags&o.TRUN_FLAGS_DURATION&&t.writeUint32(this.sample_duration[n]),this.flags&o.TRUN_FLAGS_SIZE&&t.writeUint32(this.sample_size[n]),this.flags&o.TRUN_FLAGS_FLAGS&&t.writeUint32(this.sample_flags[n]),this.flags&o.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?t.writeUint32(this.sample_composition_time_offset[n]):t.writeInt32(this.sample_composition_time_offset[n]))},o["url Box"].prototype.write=function(t){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(t),this.location&&t.writeCString(this.location)},o["urn Box"].prototype.write=function(t){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(t),t.writeCString(this.name),this.location&&t.writeCString(this.location)},o.vmhdBox.prototype.write=function(t){var n;this.version=0,this.flags=1,this.size=8,this.writeHeader(t),t.writeUint16(this.graphicsmode),t.writeUint16Array(this.opcolor)},o.cttsBox.prototype.unpack=function(t){var n,s,a;for(a=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)t[a].pts=t[a].dts+this.sample_offsets[n],a++},o.sttsBox.prototype.unpack=function(t){var n,s,a;for(a=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)a===0?t[a].dts=0:t[a].dts=t[a-1].dts+this.sample_deltas[n],a++},o.stcoBox.prototype.unpack=function(t){var n;for(n=0;n<this.chunk_offsets.length;n++)t[n].offset=this.chunk_offsets[n]},o.stscBox.prototype.unpack=function(t){var n,s,a,h,g;for(h=0,g=0,n=0;n<this.first_chunk.length;n++)for(s=0;s<(n+1<this.first_chunk.length?this.first_chunk[n+1]:1/0);s++)for(g++,a=0;a<this.samples_per_chunk[n];a++){if(t[h])t[h].description_index=this.sample_description_index[n],t[h].chunk_index=g;else return;h++}},o.stszBox.prototype.unpack=function(t){var n;for(n=0;n<this.sample_sizes.length;n++)t[n].size=this.sample_sizes[n]},o.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],o.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],o.boxEqualFields=function(t,n){if(t&&!n)return!1;var s;for(s in t)if(!(o.DIFF_BOXES_PROP_NAMES.indexOf(s)>-1)){if(t[s]instanceof o.Box||n[s]instanceof o.Box)continue;if(typeof t[s]>"u"||typeof n[s]>"u")continue;if(typeof t[s]=="function"||typeof n[s]=="function")continue;if(t.subBoxNames&&t.subBoxNames.indexOf(s.slice(0,4))>-1||n.subBoxNames&&n.subBoxNames.indexOf(s.slice(0,4))>-1)continue;if(s==="data"||s==="start"||s==="size"||s==="creation_time"||s==="modification_time")continue;if(o.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(s)>-1)continue;if(t[s]!==n[s])return!1}return!0},o.boxEqual=function(t,n){if(!o.boxEqualFields(t,n))return!1;for(var s=0;s<o.DIFF_BOXES_PROP_NAMES.length;s++){var a=o.DIFF_BOXES_PROP_NAMES[s];if(t[a]&&n[a]&&!o.boxEqual(t[a],n[a]))return!1}return!0};var k=function(){};k.prototype.parseSample=function(t){var n,s,a=new O(t.buffer);for(n=[];!a.isEos();)s=o.parseOneBox(a,!1),s.code===o.OK&&s.box.type==="vttc"&&n.push(s.box);return n},k.prototype.getText=function(t,n,s){function a(z,R,Y){return Y=Y||"0",z=z+"",z.length>=R?z:new Array(R-z.length+1).join(Y)+z}function h(z){var R=Math.floor(z/3600),Y=Math.floor((z-R*3600)/60),q=Math.floor(z-R*3600-Y*60),V=Math.floor((z-R*3600-Y*60-q)*1e3);return""+a(R,2)+":"+a(Y,2)+":"+a(q,2)+"."+a(V,3)}for(var g=this.parseSample(s),_="",U=0;U<g.length;U++){var T=g[U];_+=h(t)+" --> "+h(n)+\`\\r
\`,_+=T.payl.text}return _};var w=function(){};w.prototype.parseSample=function(t){var n={},s;n.resources=[];var a=new O(t.data.buffer);if(!t.subsamples||t.subsamples.length===0)n.documentString=a.readString(t.data.length);else if(n.documentString=a.readString(t.subsamples[0].size),t.subsamples.length>1)for(s=1;s<t.subsamples.length;s++)n.resources[s]=a.readUint8Array(t.subsamples[s].size);return typeof DOMParser<"u"&&(n.document=new DOMParser().parseFromString(n.documentString,"application/xml")),n};var b=function(){};b.prototype.parseSample=function(t){var n,s=new O(t.data.buffer);return n=s.readString(t.data.length),n},b.prototype.parseConfig=function(t){var n,s=new O(t.buffer);return s.readUint32(),n=s.readCString(),n},lt.XMLSubtitlein4Parser=w,lt.Textin4Parser=b;var A=function(t){this.stream=t||new ft,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1};A.prototype.setSegmentOptions=function(t,n,s){var a=this.getTrackById(t);if(a){var h={};this.fragmentedTracks.push(h),h.id=t,h.user=n,h.trak=a,a.nextSample=0,h.segmentStream=null,h.nb_samples=1e3,h.rapAlignement=!0,s&&(s.nbSamples&&(h.nb_samples=s.nbSamples),s.rapAlignement&&(h.rapAlignement=s.rapAlignement))}},A.prototype.unsetSegmentOptions=function(t){for(var n=-1,s=0;s<this.fragmentedTracks.length;s++){var a=this.fragmentedTracks[s];a.id==t&&(n=s)}n>-1&&this.fragmentedTracks.splice(n,1)},A.prototype.setExtractionOptions=function(t,n,s){var a=this.getTrackById(t);if(a){var h={};this.extractedTracks.push(h),h.id=t,h.user=n,h.trak=a,a.nextSample=0,h.nb_samples=1e3,h.samples=[],s&&s.nbSamples&&(h.nb_samples=s.nbSamples)}},A.prototype.unsetExtractionOptions=function(t){for(var n=-1,s=0;s<this.extractedTracks.length;s++){var a=this.extractedTracks[s];a.id==t&&(n=s)}n>-1&&this.extractedTracks.splice(n,1)},A.prototype.parse=function(){var t,n,s,a=!1;if(!(this.restoreParsePosition&&!this.restoreParsePosition()))for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}else if(this.saveParsePosition&&this.saveParsePosition(),n=o.parseOneBox(this.stream,a),n.code===o.ERR_NOT_ENOUGH_DATA)if(this.processIncompleteBox){if(this.processIncompleteBox(n))continue;return}else return;else{var h;switch(s=n.box,h=s.type!=="uuid"?s.type:s.uuid,this.boxes.push(s),h){case"mdat":this.mdats.push(s);break;case"moof":this.moofs.push(s);break;case"moov":this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0);default:this[h]!==void 0&&E.warn("ISOFile","Duplicate Box of type: "+h+", overriding previous occurrence"),this[h]=s;break}this.updateUsedBytes&&this.updateUsedBytes(s,n)}},A.prototype.checkBuffer=function(t){if(t==null)throw"Buffer must be defined and non empty";if(t.fileStart===void 0)throw"Buffer must have a fileStart property";return t.byteLength===0?(E.warn("ISOFile","Ignoring empty buffer (fileStart: "+t.fileStart+")"),this.stream.logBufferLevel(),!1):(E.info("ISOFile","Processing buffer (fileStart: "+t.fileStart+")"),t.usedBytes=0,this.stream.insertBuffer(t),this.stream.logBufferLevel(),this.stream.initialized()?!0:(E.warn("ISOFile","Not ready to start parsing"),!1))},A.prototype.appendBuffer=function(t,n){var s;if(this.checkBuffer(t))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(n),this.nextSeekPosition?(s=this.nextSeekPosition,this.nextSeekPosition=void 0):s=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(s=this.stream.getEndFilePositionAfter(s))):this.nextParsePosition?s=this.nextParsePosition:s=0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(E.info("ISOFile","Done processing buffer (fileStart: "+t.fileStart+") - next buffer to fetch should have a fileStart position of "+s),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),E.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),s},A.prototype.getInfo=function(){var t,n,s={},a,h,g,_,U=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(s.hasMoov=!0,s.duration=this.moov.mvhd.duration,s.timescale=this.moov.mvhd.timescale,s.isFragmented=this.moov.mvex!=null,s.isFragmented&&this.moov.mvex.mehd&&(s.fragment_duration=this.moov.mvex.mehd.fragment_duration),s.isProgressive=this.isProgressive,s.hasIOD=this.moov.iods!=null,s.brands=[],s.brands.push(this.ftyp.major_brand),s.brands=s.brands.concat(this.ftyp.compatible_brands),s.created=new Date(U+this.moov.mvhd.creation_time*1e3),s.modified=new Date(U+this.moov.mvhd.modification_time*1e3),s.tracks=[],s.audioTracks=[],s.videoTracks=[],s.subtitleTracks=[],s.metadataTracks=[],s.hintTracks=[],s.otherTracks=[],t=0;t<this.moov.traks.length;t++){if(a=this.moov.traks[t],_=a.mdia.minf.stbl.stsd.entries[0],h={},s.tracks.push(h),h.id=a.tkhd.track_id,h.name=a.mdia.hdlr.name,h.references=[],a.tref)for(n=0;n<a.tref.boxes.length;n++)g={},h.references.push(g),g.type=a.tref.boxes[n].type,g.track_ids=a.tref.boxes[n].track_ids;a.edts&&(h.edits=a.edts.elst.entries),h.created=new Date(U+a.tkhd.creation_time*1e3),h.modified=new Date(U+a.tkhd.modification_time*1e3),h.movie_duration=a.tkhd.duration,h.movie_timescale=s.timescale,h.layer=a.tkhd.layer,h.alternate_group=a.tkhd.alternate_group,h.volume=a.tkhd.volume,h.matrix=a.tkhd.matrix,h.track_width=a.tkhd.width/(1<<16),h.track_height=a.tkhd.height/(1<<16),h.timescale=a.mdia.mdhd.timescale,h.cts_shift=a.mdia.minf.stbl.cslg,h.duration=a.mdia.mdhd.duration,h.samples_duration=a.samples_duration,h.codec=_.getCodec(),h.kind=a.udta&&a.udta.kinds.length?a.udta.kinds[0]:{schemeURI:"",value:""},h.language=a.mdia.elng?a.mdia.elng.extended_language:a.mdia.mdhd.languageString,h.nb_samples=a.samples.length,h.size=a.samples_size,h.bitrate=h.size*8*h.timescale/h.samples_duration,_.isAudio()?(h.type="audio",s.audioTracks.push(h),h.audio={},h.audio.sample_rate=_.getSampleRate(),h.audio.channel_count=_.getChannelCount(),h.audio.sample_size=_.getSampleSize()):_.isVideo()?(h.type="video",s.videoTracks.push(h),h.video={},h.video.width=_.getWidth(),h.video.height=_.getHeight()):_.isSubtitle()?(h.type="subtitles",s.subtitleTracks.push(h)):_.isHint()?(h.type="metadata",s.hintTracks.push(h)):_.isMetadata()?(h.type="metadata",s.metadataTracks.push(h)):(h.type="metadata",s.otherTracks.push(h))}else s.hasMoov=!1;if(s.mime="",s.hasMoov&&s.tracks){for(s.videoTracks&&s.videoTracks.length>0?s.mime+='video/mp4; codecs="':s.audioTracks&&s.audioTracks.length>0?s.mime+='audio/mp4; codecs="':s.mime+='application/mp4; codecs="',t=0;t<s.tracks.length;t++)t!==0&&(s.mime+=","),s.mime+=s.tracks[t].codec;s.mime+='"; profiles="',s.mime+=this.ftyp.compatible_brands.join(),s.mime+='"'}return s},A.prototype.processSamples=function(t){var n,s;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&this.onSegment!==null)for(n=0;n<this.fragmentedTracks.length;n++){var a=this.fragmentedTracks[n];for(s=a.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){E.debug("ISOFile","Creating media fragment on track #"+a.id+" for sample "+s.nextSample);var h=this.createFragment(a.id,s.nextSample,a.segmentStream);if(h)a.segmentStream=h,s.nextSample++;else break;if((s.nextSample%a.nb_samples===0||t||s.nextSample>=s.samples.length)&&(E.info("ISOFile","Sending fragmented data on track #"+a.id+" for samples ["+Math.max(0,s.nextSample-a.nb_samples)+","+(s.nextSample-1)+"]"),E.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(a.id,a.user,a.segmentStream.buffer,s.nextSample,t||s.nextSample>=s.samples.length),a.segmentStream=null,a!==this.fragmentedTracks[n]))break}}if(this.onSamples!==null)for(n=0;n<this.extractedTracks.length;n++){var g=this.extractedTracks[n];for(s=g.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){E.debug("ISOFile","Exporting on track #"+g.id+" sample #"+s.nextSample);var _=this.getSample(s,s.nextSample);if(_)s.nextSample++,g.samples.push(_);else break;if((s.nextSample%g.nb_samples===0||s.nextSample>=s.samples.length)&&(E.debug("ISOFile","Sending samples on track #"+g.id+" for sample "+s.nextSample),this.onSamples&&this.onSamples(g.id,g.user,g.samples),g.samples=[],g!==this.extractedTracks[n]))break}}}},A.prototype.getBox=function(t){var n=this.getBoxes(t,!0);return n.length?n[0]:null},A.prototype.getBoxes=function(t,n){var s=[];return A._sweep.call(this,t,s,n),s},A._sweep=function(t,n,s){this.type&&this.type==t&&n.push(this);for(var a in this.boxes){if(n.length&&s)return;A._sweep.call(this.boxes[a],t,n,s)}},A.prototype.getTrackSamplesInfo=function(t){var n=this.getTrackById(t);if(n)return n.samples},A.prototype.getTrackSample=function(t,n){var s=this.getTrackById(t),a=this.getSample(s,n);return a},A.prototype.releaseUsedSamples=function(t,n){var s=0,a=this.getTrackById(t);a.lastValidSample||(a.lastValidSample=0);for(var h=a.lastValidSample;h<n;h++)s+=this.releaseSample(a,h);E.info("ISOFile","Track #"+t+" released samples up to "+n+" (released size: "+s+", remaining: "+this.samplesDataSize+")"),a.lastValidSample=n},A.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},A.prototype.stop=function(){this.sampleProcessingStarted=!1},A.prototype.flush=function(){E.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},A.prototype.seekTrack=function(t,n,s){var a,h,g=1/0,_=0,U=0,T;if(s.samples.length===0)return E.info("ISOFile","No sample in track, cannot seek! Using time "+E.getDurationString(0,1)+" and offset: "+0),{offset:0,time:0};for(a=0;a<s.samples.length;a++){if(h=s.samples[a],a===0)U=0,T=h.timescale;else if(h.cts>t*h.timescale){U=a-1;break}n&&h.is_sync&&(_=a)}for(n&&(U=_),t=s.samples[U].cts,s.nextSample=U;s.samples[U].alreadyRead===s.samples[U].size&&s.samples[U+1];)U++;return g=s.samples[U].offset+s.samples[U].alreadyRead,E.info("ISOFile","Seeking to "+(n?"RAP":"")+" sample #"+s.nextSample+" on track "+s.tkhd.track_id+", time "+E.getDurationString(t,T)+" and offset: "+g),{offset:g,time:t/T}},A.prototype.seek=function(t,n){var s=this.moov,a,h,g,_={offset:1/0,time:1/0};if(this.moov){for(g=0;g<s.traks.length;g++)a=s.traks[g],h=this.seekTrack(t,n,a),h.offset<_.offset&&(_.offset=h.offset),h.time<_.time&&(_.time=h.time);return E.info("ISOFile","Seeking at time "+E.getDurationString(_.time,1)+" needs a buffer with a fileStart position of "+_.offset),_.offset===1/0?_={offset:this.nextParsePosition,time:0}:_.offset=this.stream.getEndFilePositionAfter(_.offset),E.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+_.offset),_}else throw"Cannot seek: moov not received!"},A.prototype.equal=function(t){for(var n=0;n<this.boxes.length&&n<t.boxes.length;){var s=this.boxes[n],a=t.boxes[n];if(!o.boxEqual(s,a))return!1;n++}return!0},lt.ISOFile=A,A.prototype.lastBoxStartPosition=0,A.prototype.parsingMdat=null,A.prototype.nextParsePosition=0,A.prototype.discardMdatData=!1,A.prototype.processIncompleteBox=function(t){var n,s,a;return t.type==="mdat"?(n=new o[t.type+"Box"](t.size),this.parsingMdat=n,this.boxes.push(n),this.mdats.push(n),n.start=t.start,n.hdr_size=t.hdr_size,this.stream.addUsedBytes(n.hdr_size),this.lastBoxStartPosition=n.start+n.size,a=this.stream.seek(n.start+n.size,!1,this.discardMdatData),a?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=n.start+n.size,!1)):(t.type==="moov"&&(this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0)),s=this.stream.mergeNextBuffer?this.stream.mergeNextBuffer():!1,s?(this.nextParsePosition=this.stream.getEndPosition(),!0):(t.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+t.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},A.prototype.hasIncompleteMdat=function(){return this.parsingMdat!==null},A.prototype.processIncompleteMdat=function(){var t,n;return t=this.parsingMdat,n=this.stream.seek(t.start+t.size,!1,this.discardMdatData),n?(E.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},A.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},A.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},A.prototype.updateUsedBytes=function(t,n){this.stream.addUsedBytes&&(t.type==="mdat"?(this.stream.addUsedBytes(t.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(t.size-t.hdr_size)):this.stream.addUsedBytes(t.size))},A.prototype.add=o.Box.prototype.add,A.prototype.addBox=o.Box.prototype.addBox,A.prototype.init=function(t){var n=t||{},s=this.add("ftyp").set("major_brand",n.brands&&n.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",n.brands||["iso4"]),a=this.add("moov");return a.add("mvhd").set("timescale",n.timescale||600).set("rate",n.rate||1<<16).set("creation_time",0).set("modification_time",0).set("duration",n.duration||0).set("volume",n.width?0:256).set("matrix",[1<<16,0,0,0,1<<16,0,0,0,1073741824]).set("next_track_id",1),a.add("mvex"),this},A.prototype.addTrack=function(t){this.moov||this.init(t);var n=t||{};n.width=n.width||320,n.height=n.height||320,n.id=n.id||this.moov.mvhd.next_track_id,n.type=n.type||"avc1";var s=this.moov.add("trak");this.moov.mvhd.next_track_id=n.id+1,s.add("tkhd").set("flags",o.TKHD_FLAG_ENABLED|o.TKHD_FLAG_IN_MOVIE|o.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",n.id).set("duration",n.duration||0).set("layer",n.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",n.width<<16).set("height",n.height<<16);var a=s.add("mdia");a.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",n.timescale||1).set("duration",n.media_duration||0).set("language",n.language||"und"),a.add("hdlr").set("handler",n.hdlr||"vide").set("name",n.name||"Track created with MP4Box.js"),a.add("elng").set("extended_language",n.language||"fr-FR");var h=a.add("minf");if(o[n.type+"SampleEntry"]!==void 0){var g=new o[n.type+"SampleEntry"];g.data_reference_index=1;var _="";for(var U in o.sampleEntryCodes)for(var T=o.sampleEntryCodes[U],z=0;z<T.length;z++)if(T.indexOf(n.type)>-1){_=U;break}switch(_){case"Visual":if(h.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),g.set("width",n.width).set("height",n.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",n.type+" Compressor").set("depth",24),n.avcDecoderConfigRecord){var R=new o.avcCBox,Y=new O(n.avcDecoderConfigRecord);R.parse(Y),g.addBox(R)}break;case"Audio":h.add("smhd").set("balance",n.balance||0),g.set("channel_count",n.channel_count||2).set("samplesize",n.samplesize||16).set("samplerate",n.samplerate||1<<16);break;case"Hint":h.add("hmhd");break;case"Subtitle":switch(h.add("sthd"),n.type){case"stpp":g.set("namespace",n.namespace||"nonamespace").set("schema_location",n.schema_location||"").set("auxiliary_mime_types",n.auxiliary_mime_types||"");break}break;case"Metadata":h.add("nmhd");break;case"System":h.add("nmhd");break;default:h.add("nmhd");break}n.description&&g.addBox(n.description),n.description_boxes&&n.description_boxes.forEach(function(V){g.addBox(V)}),h.add("dinf").add("dref").addEntry(new o["url Box"]().set("flags",1));var q=h.add("stbl");return q.add("stsd").addEntry(g),q.add("stts").set("sample_counts",[]).set("sample_deltas",[]),q.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),q.add("stco").set("chunk_offsets",[]),q.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",n.id).set("default_sample_description_index",n.default_sample_description_index||1).set("default_sample_duration",n.default_sample_duration||0).set("default_sample_size",n.default_sample_size||0).set("default_sample_flags",n.default_sample_flags||0),this.buildTrakSampleLists(s),n.id}},o.Box.prototype.computeSize=function(t){var n=t||new S;n.endianness=S.BIG_ENDIAN,this.write(n)},A.prototype.addSample=function(t,n,s){var a=s||{},h={},g=this.getTrackById(t);if(g!==null){h.number=g.samples.length,h.track_id=g.tkhd.track_id,h.timescale=g.mdia.mdhd.timescale,h.description_index=a.sample_description_index?a.sample_description_index-1:0,h.description=g.mdia.minf.stbl.stsd.entries[h.description_index],h.data=n,h.size=n.byteLength,h.alreadyRead=h.size,h.duration=a.duration||1,h.cts=a.cts||0,h.dts=a.dts||0,h.is_sync=a.is_sync||!1,h.is_leading=a.is_leading||0,h.depends_on=a.depends_on||0,h.is_depended_on=a.is_depended_on||0,h.has_redundancy=a.has_redundancy||0,h.degradation_priority=a.degradation_priority||0,h.offset=0,h.subsamples=a.subsamples,g.samples.push(h),g.samples_size+=h.size,g.samples_duration+=h.duration,g.first_dts||(g.first_dts=a.dts),this.processSamples();var _=this.createSingleSampleMoof(h);return this.addBox(_),_.computeSize(),_.trafs[0].truns[0].data_offset=_.size+8,this.add("mdat").data=new Uint8Array(n),h}},A.prototype.createSingleSampleMoof=function(t){var n=0;t.is_sync?n=1<<25:n=1<<16;var s=new o.moofBox;s.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var a=s.add("traf"),h=this.getTrackById(t.track_id);return a.add("tfhd").set("track_id",t.track_id).set("flags",o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),a.add("tfdt").set("baseMediaDecodeTime",t.dts-(h.first_dts||0)),a.add("trun").set("flags",o.TRUN_FLAGS_DATA_OFFSET|o.TRUN_FLAGS_DURATION|o.TRUN_FLAGS_SIZE|o.TRUN_FLAGS_FLAGS|o.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[t.duration]).set("sample_size",[t.size]).set("sample_flags",[n]).set("sample_composition_time_offset",[t.cts-t.dts]),s},A.prototype.lastMoofIndex=0,A.prototype.samplesDataSize=0,A.prototype.resetTables=function(){var t,n,s,a,h,g,_,U;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,t=0;t<this.moov.traks.length;t++){n=this.moov.traks[t],n.tkhd.duration=0,n.mdia.mdhd.duration=0,s=n.mdia.minf.stbl.stco||n.mdia.minf.stbl.co64,s.chunk_offsets=[],a=n.mdia.minf.stbl.stsc,a.first_chunk=[],a.samples_per_chunk=[],a.sample_description_index=[],h=n.mdia.minf.stbl.stsz||n.mdia.minf.stbl.stz2,h.sample_sizes=[],g=n.mdia.minf.stbl.stts,g.sample_counts=[],g.sample_deltas=[],_=n.mdia.minf.stbl.ctts,_&&(_.sample_counts=[],_.sample_offsets=[]),U=n.mdia.minf.stbl.stss;var T=n.mdia.minf.stbl.boxes.indexOf(U);T!=-1&&(n.mdia.minf.stbl.boxes[T]=null)}},A.initSampleGroups=function(t,n,s,a,h){var g,_,U,T,z;function R(Y,q,V){this.grouping_type=Y,this.grouping_type_parameter=q,this.sbgp=V,this.last_sample_in_run=-1,this.entry_index=-1}for(n&&(n.sample_groups_info=[]),t.sample_groups_info||(t.sample_groups_info=[]),_=0;_<s.length;_++){for(z=s[_].grouping_type+"/"+s[_].grouping_type_parameter,T=new R(s[_].grouping_type,s[_].grouping_type_parameter,s[_]),n&&(n.sample_groups_info[z]=T),t.sample_groups_info[z]||(t.sample_groups_info[z]=T),g=0;g<a.length;g++)a[g].grouping_type===s[_].grouping_type&&(T.description=a[g],T.description.used=!0);if(h)for(g=0;g<h.length;g++)h[g].grouping_type===s[_].grouping_type&&(T.fragment_description=h[g],T.fragment_description.used=!0,T.is_fragment=!0)}if(n){if(h)for(_=0;_<h.length;_++)!h[_].used&&h[_].version>=2&&(z=h[_].grouping_type+"/0",T=new R(h[_].grouping_type,0),T.is_fragment=!0,n.sample_groups_info[z]||(n.sample_groups_info[z]=T))}else for(_=0;_<a.length;_++)!a[_].used&&a[_].version>=2&&(z=a[_].grouping_type+"/0",T=new R(a[_].grouping_type,0),t.sample_groups_info[z]||(t.sample_groups_info[z]=T))},A.setSampleGroupProperties=function(t,n,s,a){var h,g;n.sample_groups=[];for(h in a)if(n.sample_groups[h]={},n.sample_groups[h].grouping_type=a[h].grouping_type,n.sample_groups[h].grouping_type_parameter=a[h].grouping_type_parameter,s>=a[h].last_sample_in_run&&(a[h].last_sample_in_run<0&&(a[h].last_sample_in_run=0),a[h].entry_index++,a[h].entry_index<=a[h].sbgp.entries.length-1&&(a[h].last_sample_in_run+=a[h].sbgp.entries[a[h].entry_index].sample_count)),a[h].entry_index<=a[h].sbgp.entries.length-1?n.sample_groups[h].group_description_index=a[h].sbgp.entries[a[h].entry_index].group_description_index:n.sample_groups[h].group_description_index=-1,n.sample_groups[h].group_description_index!==0){var _;a[h].fragment_description?_=a[h].fragment_description:_=a[h].description,n.sample_groups[h].group_description_index>0?(n.sample_groups[h].group_description_index>65535?g=(n.sample_groups[h].group_description_index>>16)-1:g=n.sample_groups[h].group_description_index-1,_&&g>=0&&(n.sample_groups[h].description=_.entries[g])):_&&_.version>=2&&_.default_group_description_index>0&&(n.sample_groups[h].description=_.entries[_.default_group_description_index-1])}},A.process_sdtp=function(t,n,s){n&&(t?(n.is_leading=t.is_leading[s],n.depends_on=t.sample_depends_on[s],n.is_depended_on=t.sample_is_depended_on[s],n.has_redundancy=t.sample_has_redundancy[s]):(n.is_leading=0,n.depends_on=0,n.is_depended_on=0,n.has_redundancy=0))},A.prototype.buildSampleLists=function(){var t,n;for(t=0;t<this.moov.traks.length;t++)n=this.moov.traks[t],this.buildTrakSampleLists(n)},A.prototype.buildTrakSampleLists=function(t){var n,s,a,h,g,_,U,T,z,R,Y,q,V,mt,vt,he,_e,ge,Tt,ue,Nt,Gt,We,Ve,dt,xe;if(t.samples=[],t.samples_duration=0,t.samples_size=0,a=t.mdia.minf.stbl.stco||t.mdia.minf.stbl.co64,h=t.mdia.minf.stbl.stsc,g=t.mdia.minf.stbl.stsz||t.mdia.minf.stbl.stz2,_=t.mdia.minf.stbl.stts,U=t.mdia.minf.stbl.ctts,T=t.mdia.minf.stbl.stss,z=t.mdia.minf.stbl.stsd,R=t.mdia.minf.stbl.subs,V=t.mdia.minf.stbl.stdp,Y=t.mdia.minf.stbl.sbgps,q=t.mdia.minf.stbl.sgpds,Tt=-1,ue=-1,Nt=-1,Gt=-1,We=0,dt=0,xe=0,A.initSampleGroups(t,null,Y,q),!(typeof g>"u")){for(n=0;n<g.sample_sizes.length;n++){var it={};it.number=n,it.track_id=t.tkhd.track_id,it.timescale=t.mdia.mdhd.timescale,it.alreadyRead=0,t.samples[n]=it,it.size=g.sample_sizes[n],t.samples_size+=it.size,n===0?(vt=1,mt=0,it.chunk_index=vt,it.chunk_run_index=mt,ge=h.samples_per_chunk[mt],_e=0,mt+1<h.first_chunk.length?he=h.first_chunk[mt+1]-1:he=1/0):n<ge?(it.chunk_index=vt,it.chunk_run_index=mt):(vt++,it.chunk_index=vt,_e=0,vt<=he||(mt++,mt+1<h.first_chunk.length?he=h.first_chunk[mt+1]-1:he=1/0),it.chunk_run_index=mt,ge+=h.samples_per_chunk[mt]),it.description_index=h.sample_description_index[it.chunk_run_index]-1,it.description=z.entries[it.description_index],it.offset=a.chunk_offsets[it.chunk_index-1]+_e,_e+=it.size,n>Tt&&(ue++,Tt<0&&(Tt=0),Tt+=_.sample_counts[ue]),n>0?(t.samples[n-1].duration=_.sample_deltas[ue],t.samples_duration+=t.samples[n-1].duration,it.dts=t.samples[n-1].dts+t.samples[n-1].duration):it.dts=0,U?(n>=Nt&&(Gt++,Nt<0&&(Nt=0),Nt+=U.sample_counts[Gt]),it.cts=t.samples[n].dts+U.sample_offsets[Gt]):it.cts=it.dts,T?(n==T.sample_numbers[We]-1?(it.is_sync=!0,We++):(it.is_sync=!1,it.degradation_priority=0),R&&R.entries[dt].sample_delta+xe==n+1&&(it.subsamples=R.entries[dt].subsamples,xe+=R.entries[dt].sample_delta,dt++)):it.is_sync=!0,A.process_sdtp(t.mdia.minf.stbl.sdtp,it,it.number),V?it.degradation_priority=V.priority[n]:it.degradation_priority=0,R&&R.entries[dt].sample_delta+xe==n&&(it.subsamples=R.entries[dt].subsamples,xe+=R.entries[dt].sample_delta),(Y.length>0||q.length>0)&&A.setSampleGroupProperties(t,it,n,t.sample_groups_info)}n>0&&(t.samples[n-1].duration=Math.max(t.mdia.mdhd.duration-t.samples[n-1].dts,0),t.samples_duration+=t.samples[n-1].duration)}},A.prototype.updateSampleLists=function(){var t,n,s,a,h,g,_,U,T,z,R,Y,q,V,mt;if(this.moov!==void 0){for(;this.lastMoofIndex<this.moofs.length;)if(T=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,T.type=="moof")for(z=T,t=0;t<z.trafs.length;t++){for(R=z.trafs[t],Y=this.getTrackById(R.tfhd.track_id),q=this.getTrexById(R.tfhd.track_id),R.tfhd.flags&o.TFHD_FLAG_SAMPLE_DESC?a=R.tfhd.default_sample_description_index:a=q?q.default_sample_description_index:1,R.tfhd.flags&o.TFHD_FLAG_SAMPLE_DUR?h=R.tfhd.default_sample_duration:h=q?q.default_sample_duration:0,R.tfhd.flags&o.TFHD_FLAG_SAMPLE_SIZE?g=R.tfhd.default_sample_size:g=q?q.default_sample_size:0,R.tfhd.flags&o.TFHD_FLAG_SAMPLE_FLAGS?_=R.tfhd.default_sample_flags:_=q?q.default_sample_flags:0,R.sample_number=0,R.sbgps.length>0&&A.initSampleGroups(Y,R,R.sbgps,Y.mdia.minf.stbl.sgpds,R.sgpds),n=0;n<R.truns.length;n++){var vt=R.truns[n];for(s=0;s<vt.sample_count;s++){V={},V.moof_number=this.lastMoofIndex,V.number_in_traf=R.sample_number,R.sample_number++,V.number=Y.samples.length,R.first_sample_index=Y.samples.length,Y.samples.push(V),V.track_id=Y.tkhd.track_id,V.timescale=Y.mdia.mdhd.timescale,V.description_index=a-1,V.description=Y.mdia.minf.stbl.stsd.entries[V.description_index],V.size=g,vt.flags&o.TRUN_FLAGS_SIZE&&(V.size=vt.sample_size[s]),Y.samples_size+=V.size,V.duration=h,vt.flags&o.TRUN_FLAGS_DURATION&&(V.duration=vt.sample_duration[s]),Y.samples_duration+=V.duration,Y.first_traf_merged||s>0?V.dts=Y.samples[Y.samples.length-2].dts+Y.samples[Y.samples.length-2].duration:(R.tfdt?V.dts=R.tfdt.baseMediaDecodeTime:V.dts=0,Y.first_traf_merged=!0),V.cts=V.dts,vt.flags&o.TRUN_FLAGS_CTS_OFFSET&&(V.cts=V.dts+vt.sample_composition_time_offset[s]),mt=_,vt.flags&o.TRUN_FLAGS_FLAGS?mt=vt.sample_flags[s]:s===0&&vt.flags&o.TRUN_FLAGS_FIRST_FLAG&&(mt=vt.first_sample_flags),V.is_sync=!(mt>>16&1),V.is_leading=mt>>26&3,V.depends_on=mt>>24&3,V.is_depended_on=mt>>22&3,V.has_redundancy=mt>>20&3,V.degradation_priority=mt&65535;var he=!!(R.tfhd.flags&o.TFHD_FLAG_BASE_DATA_OFFSET),_e=!!(R.tfhd.flags&o.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),ge=!!(vt.flags&o.TRUN_FLAGS_DATA_OFFSET),Tt=0;he?Tt=R.tfhd.base_data_offset:_e||n===0?Tt=z.start:Tt=U,n===0&&s===0?ge?V.offset=Tt+vt.data_offset:V.offset=Tt:V.offset=U,U=V.offset+V.size,(R.sbgps.length>0||R.sgpds.length>0||Y.mdia.minf.stbl.sbgps.length>0||Y.mdia.minf.stbl.sgpds.length>0)&&A.setSampleGroupProperties(Y,V,V.number_in_traf,R.sample_groups_info)}}if(R.subs){Y.has_fragment_subsamples=!0;var ue=R.first_sample_index;for(n=0;n<R.subs.entries.length;n++)ue+=R.subs.entries[n].sample_delta,V=Y.samples[ue-1],V.subsamples=R.subs.entries[n].subsamples}}}},A.prototype.getSample=function(t,n){var s,a=t.samples[n];if(!this.moov)return null;if(!a.data)a.data=new Uint8Array(a.size),a.alreadyRead=0,this.samplesDataSize+=a.size,E.debug("ISOFile","Allocating sample #"+n+" on track #"+t.tkhd.track_id+" of size "+a.size+" (total: "+this.samplesDataSize+")");else if(a.alreadyRead==a.size)return a;for(;;){var h=this.stream.findPosition(!0,a.offset+a.alreadyRead,!1);if(h>-1){s=this.stream.buffers[h];var g=s.byteLength-(a.offset+a.alreadyRead-s.fileStart);if(a.size-a.alreadyRead<=g)return E.debug("ISOFile","Getting sample #"+n+" data (alreadyRead: "+a.alreadyRead+" offset: "+(a.offset+a.alreadyRead-s.fileStart)+" read size: "+(a.size-a.alreadyRead)+" full size: "+a.size+")"),S.memcpy(a.data.buffer,a.alreadyRead,s,a.offset+a.alreadyRead-s.fileStart,a.size-a.alreadyRead),s.usedBytes+=a.size-a.alreadyRead,this.stream.logBufferLevel(),a.alreadyRead=a.size,a;if(g===0)return null;E.debug("ISOFile","Getting sample #"+n+" partial data (alreadyRead: "+a.alreadyRead+" offset: "+(a.offset+a.alreadyRead-s.fileStart)+" read size: "+g+" full size: "+a.size+")"),S.memcpy(a.data.buffer,a.alreadyRead,s,a.offset+a.alreadyRead-s.fileStart,g),a.alreadyRead+=g,s.usedBytes+=g,this.stream.logBufferLevel()}else return null}},A.prototype.releaseSample=function(t,n){var s=t.samples[n];return s.data?(this.samplesDataSize-=s.size,s.data=null,s.alreadyRead=0,s.size):0},A.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},A.prototype.getCodecs=function(){var t,n="";for(t=0;t<this.moov.traks.length;t++){var s=this.moov.traks[t];t>0&&(n+=","),n+=s.mdia.minf.stbl.stsd.entries[0].getCodec()}return n},A.prototype.getTrexById=function(t){var n;if(!this.moov||!this.moov.mvex)return null;for(n=0;n<this.moov.mvex.trexs.length;n++){var s=this.moov.mvex.trexs[n];if(s.track_id==t)return s}return null},A.prototype.getTrackById=function(t){if(this.moov===void 0)return null;for(var n=0;n<this.moov.traks.length;n++){var s=this.moov.traks[n];if(s.tkhd.track_id==t)return s}return null},A.prototype.items=[],A.prototype.itemsDataSize=0,A.prototype.flattenItemInfo=function(){var t=this.items,n,s,a,h=this.meta;if(h!=null&&h.hdlr!==void 0&&h.iinf!==void 0){for(n=0;n<h.iinf.item_infos.length;n++)a={},a.id=h.iinf.item_infos[n].item_ID,t[a.id]=a,a.ref_to=[],a.name=h.iinf.item_infos[n].item_name,h.iinf.item_infos[n].protection_index>0&&(a.protection=h.ipro.protections[h.iinf.item_infos[n].protection_index-1]),h.iinf.item_infos[n].item_type?a.type=h.iinf.item_infos[n].item_type:a.type="mime",a.content_type=h.iinf.item_infos[n].content_type,a.content_encoding=h.iinf.item_infos[n].content_encoding;if(h.iloc)for(n=0;n<h.iloc.items.length;n++){var g,_=h.iloc.items[n];switch(a=t[_.item_ID],_.data_reference_index!==0&&(E.warn("Item storage with reference to other files: not supported"),a.source=h.dinf.boxes[_.data_reference_index-1]),_.construction_method){case 0:break;case 1:E.warn("Item storage with construction_method : not supported");break;case 2:E.warn("Item storage with construction_method : not supported");break}for(a.extents=[],a.size=0,s=0;s<_.extents.length;s++)a.extents[s]={},a.extents[s].offset=_.extents[s].extent_offset+_.base_offset,a.extents[s].length=_.extents[s].extent_length,a.extents[s].alreadyRead=0,a.size+=a.extents[s].length}if(h.pitm&&(t[h.pitm.item_id].primary=!0),h.iref)for(n=0;n<h.iref.references.length;n++){var U=h.iref.references[n];for(s=0;s<U.references.length;s++)t[U.from_item_ID].ref_to.push({type:U.type,id:U.references[s]})}if(h.iprp)for(var T=0;T<h.iprp.ipmas.length;T++){var z=h.iprp.ipmas[T];for(n=0;n<z.associations.length;n++){var R=z.associations[n];for(a=t[R.id],a.properties===void 0&&(a.properties={},a.properties.boxes=[]),s=0;s<R.props.length;s++){var Y=R.props[s];if(Y.property_index>0&&Y.property_index-1<h.iprp.ipco.boxes.length){var q=h.iprp.ipco.boxes[Y.property_index-1];a.properties[q.type]=q,a.properties.boxes.push(q)}}}}}},A.prototype.getItem=function(t){var n,s;if(!this.meta)return null;if(s=this.items[t],!s.data&&s.size)s.data=new Uint8Array(s.size),s.alreadyRead=0,this.itemsDataSize+=s.size,E.debug("ISOFile","Allocating item #"+t+" of size "+s.size+" (total: "+this.itemsDataSize+")");else if(s.alreadyRead===s.size)return s;for(var a=0;a<s.extents.length;a++){var h=s.extents[a];if(h.alreadyRead!==h.length){var g=this.stream.findPosition(!0,h.offset+h.alreadyRead,!1);if(g>-1){n=this.stream.buffers[g];var _=n.byteLength-(h.offset+h.alreadyRead-n.fileStart);if(h.length-h.alreadyRead<=_)E.debug("ISOFile","Getting item #"+t+" extent #"+a+" data (alreadyRead: "+h.alreadyRead+" offset: "+(h.offset+h.alreadyRead-n.fileStart)+" read size: "+(h.length-h.alreadyRead)+" full extent size: "+h.length+" full item size: "+s.size+")"),S.memcpy(s.data.buffer,s.alreadyRead,n,h.offset+h.alreadyRead-n.fileStart,h.length-h.alreadyRead),n.usedBytes+=h.length-h.alreadyRead,this.stream.logBufferLevel(),s.alreadyRead+=h.length-h.alreadyRead,h.alreadyRead=h.length;else return E.debug("ISOFile","Getting item #"+t+" extent #"+a+" partial data (alreadyRead: "+h.alreadyRead+" offset: "+(h.offset+h.alreadyRead-n.fileStart)+" read size: "+_+" full extent size: "+h.length+" full item size: "+s.size+")"),S.memcpy(s.data.buffer,s.alreadyRead,n,h.offset+h.alreadyRead-n.fileStart,_),h.alreadyRead+=_,s.alreadyRead+=_,n.usedBytes+=_,this.stream.logBufferLevel(),null}else return null}}return s.alreadyRead===s.size?s:null},A.prototype.releaseItem=function(t){var n=this.items[t];if(n.data){this.itemsDataSize-=n.size,n.data=null,n.alreadyRead=0;for(var s=0;s<n.extents.length;s++){var a=n.extents[s];a.alreadyRead=0}return n.size}else return 0},A.prototype.processItems=function(t){for(var n in this.items){var s=this.items[n];this.getItem(s.id),t&&!s.sent&&(t(s),s.sent=!0,s.data=null)}},A.prototype.hasItem=function(t){for(var n in this.items){var s=this.items[n];if(s.name===t)return s.id}return-1},A.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},A.prototype.getPrimaryItem=function(){return!this.meta||!this.meta.pitm?null:this.getItem(this.meta.pitm.item_id)},A.prototype.itemToFragmentedTrackFile=function(t){var n=t||{},s=null;if(n.itemId?s=this.getItem(n.itemId):s=this.getPrimaryItem(),s==null)return null;var a=new A;a.discardMdatData=!1;var h={type:s.type,description_boxes:s.properties.boxes};s.properties.ispe&&(h.width=s.properties.ispe.image_width,h.height=s.properties.ispe.image_height);var g=a.addTrack(h);return g?(a.addSample(g,s.data),a):null},A.prototype.write=function(t){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(t)},A.prototype.createFragment=function(t,n,s){var a=this.getTrackById(t),h=this.getSample(a,n);if(h==null)return h=a.samples[n],this.nextSeekPosition?this.nextSeekPosition=Math.min(h.offset+h.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=a.samples[n].offset+h.alreadyRead,null;var g=s||new S;g.endianness=S.BIG_ENDIAN;var _=this.createSingleSampleMoof(h);_.write(g),_.trafs[0].truns[0].data_offset=_.size+8,E.debug("MP4Box","Adjusting data_offset with new value "+_.trafs[0].truns[0].data_offset),g.adjustUint32(_.trafs[0].truns[0].data_offset_position,_.trafs[0].truns[0].data_offset);var U=new o.mdatBox;return U.data=h.data,U.write(g),g},A.writeInitializationSegment=function(t,n,s,a){var h,g,_,U,T;E.debug("ISOFile","Generating initialization segment");var z=new S;z.endianness=S.BIG_ENDIAN,t.write(z);var R=n.add("mvex");for(s&&R.add("mehd").set("fragment_duration",s),h=0;h<n.traks.length;h++)R.add("trex").set("track_id",n.traks[h].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",a).set("default_sample_size",0).set("default_sample_flags",1<<16);return n.write(z),z.buffer},A.prototype.save=function(t){var n=new S;n.endianness=S.BIG_ENDIAN,this.write(n),n.save(t)},A.prototype.getBuffer=function(){var t=new S;return t.endianness=S.BIG_ENDIAN,this.write(t),t.buffer},A.prototype.initializeSegmentation=function(){var t,n,s,a,h,g;for(this.onSegment===null&&E.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),a=[],t=0;t<this.fragmentedTracks.length;t++){var _=new o.moovBox;_.mvhd=this.moov.mvhd,_.boxes.push(_.mvhd),h=this.getTrackById(this.fragmentedTracks[t].id),_.boxes.push(h),_.traks.push(h),g={},g.id=h.tkhd.track_id,g.user=this.fragmentedTracks[t].user,g.buffer=A.writeInitializationSegment(this.ftyp,_,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[t].samples.length>0?this.moov.traks[t].samples[0].duration:0),a.push(g)}return a},o.Box.prototype.printHeader=function(t){this.size+=8,this.size>c&&(this.size+=8),this.type==="uuid"&&(this.size+=16),t.log(t.indent+"size:"+this.size),t.log(t.indent+"type:"+this.type)},o.FullBox.prototype.printHeader=function(t){this.size+=4,o.Box.prototype.printHeader.call(this,t),t.log(t.indent+"version:"+this.version),t.log(t.indent+"flags:"+this.flags)},o.Box.prototype.print=function(t){this.printHeader(t)},o.ContainerBox.prototype.print=function(t){this.printHeader(t);for(var n=0;n<this.boxes.length;n++)if(this.boxes[n]){var s=t.indent;t.indent+=" ",this.boxes[n].print(t),t.indent=s}},A.prototype.print=function(t){t.indent="";for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&this.boxes[n].print(t)},o.mvhdBox.prototype.print=function(t){o.FullBox.prototype.printHeader.call(this,t),t.log(t.indent+"creation_time: "+this.creation_time),t.log(t.indent+"modification_time: "+this.modification_time),t.log(t.indent+"timescale: "+this.timescale),t.log(t.indent+"duration: "+this.duration),t.log(t.indent+"rate: "+this.rate),t.log(t.indent+"volume: "+(this.volume>>8)),t.log(t.indent+"matrix: "+this.matrix.join(", ")),t.log(t.indent+"next_track_id: "+this.next_track_id)},o.tkhdBox.prototype.print=function(t){o.FullBox.prototype.printHeader.call(this,t),t.log(t.indent+"creation_time: "+this.creation_time),t.log(t.indent+"modification_time: "+this.modification_time),t.log(t.indent+"track_id: "+this.track_id),t.log(t.indent+"duration: "+this.duration),t.log(t.indent+"volume: "+(this.volume>>8)),t.log(t.indent+"matrix: "+this.matrix.join(", ")),t.log(t.indent+"layer: "+this.layer),t.log(t.indent+"alternate_group: "+this.alternate_group),t.log(t.indent+"width: "+this.width),t.log(t.indent+"height: "+this.height)};var K={};K.createFile=function(t,n){var s=t!==void 0?t:!0,a=new A(n);return a.discardMdatData=!s,a},lt.createFile=K.createFile},"3401ca108297c5111e56":function(Mt,lt,X){"use strict";X.r(lt),X.d(lt,"default",function(){return Ke});const E=Symbol("Comlink.proxy"),O=Symbol("Comlink.endpoint"),S=Symbol("Comlink.releaseProxy"),c=Symbol("Comlink.thrown"),ft=P=>typeof P=="object"&&P!==null||typeof P=="function",At={canHandle:P=>ft(P)&&P[E],serialize(P){const{port1:v,port2:L}=new MessageChannel;return w(P,v),[L,[L]]},deserialize(P){return P.start(),K(P)}},o={canHandle:P=>ft(P)&&c in P,serialize({value:P}){let v;return P instanceof Error?v={isError:!0,value:{message:P.message,name:P.name,stack:P.stack}}:v={isError:!1,value:P},[v,[]]},deserialize(P){throw P.isError?Object.assign(new Error(P.value.message),P.value):P.value}},k=new Map([["proxy",At],["throw",o]]);function w(P,v=self){v.addEventListener("message",function L(G){if(!G||!G.data)return;const{id:M,type:ht,path:ct}=Object.assign({path:[]},G.data),Q=(G.data.argumentList||[]).map(z);let rt;try{const nt=ct.slice(0,-1).reduce((Ft,Se)=>Ft[Se],P),_t=ct.reduce((Ft,Se)=>Ft[Se],P);switch(ht){case 0:rt=_t;break;case 1:nt[ct.slice(-1)[0]]=z(G.data.value),rt=!0;break;case 2:rt=_t.apply(nt,Q);break;case 3:{const Ft=new _t(...Q);rt=_(Ft)}break;case 4:{const{port1:Ft,port2:Se}=new MessageChannel;w(P,Se),rt=g(Ft,[Ft])}break;case 5:rt=void 0;break}}catch(nt){rt={value:nt,[c]:0}}Promise.resolve(rt).catch(nt=>({value:nt,[c]:0})).then(nt=>{const[_t,Ft]=T(nt);v.postMessage(Object.assign(Object.assign({},_t),{id:M}),Ft),ht===5&&(v.removeEventListener("message",L),A(v))})}),v.start&&v.start()}function b(P){return P.constructor.name==="MessagePort"}function A(P){b(P)&&P.close()}function K(P,v){return n(P,[],v)}function t(P){if(P)throw new Error("Proxy has been released and is not useable")}function n(P,v=[],L=function(){}){let G=!1;const M=new Proxy(L,{get(ht,ct){if(t(G),ct===S)return()=>R(P,{type:5,path:v.map(Q=>Q.toString())}).then(()=>{A(P),G=!0});if(ct==="then"){if(v.length===0)return{then:()=>M};const Q=R(P,{type:0,path:v.map(rt=>rt.toString())}).then(z);return Q.then.bind(Q)}return n(P,[...v,ct])},set(ht,ct,Q){t(G);const[rt,nt]=T(Q);return R(P,{type:1,path:[...v,ct].map(_t=>_t.toString()),value:rt},nt).then(z)},apply(ht,ct,Q){t(G);const rt=v[v.length-1];if(rt===O)return R(P,{type:4}).then(z);if(rt==="bind")return n(P,v.slice(0,-1));const[nt,_t]=a(Q);return R(P,{type:2,path:v.map(Ft=>Ft.toString()),argumentList:nt},_t).then(z)},construct(ht,ct){t(G);const[Q,rt]=a(ct);return R(P,{type:3,path:v.map(nt=>nt.toString()),argumentList:Q},rt).then(z)}});return M}function s(P){return Array.prototype.concat.apply([],P)}function a(P){const v=P.map(T);return[v.map(L=>L[0]),s(v.map(L=>L[1]))]}const h=new WeakMap;function g(P,v){return h.set(P,v),P}function _(P){return Object.assign(P,{[E]:!0})}function U(P,v=self,L="*"){return{postMessage:(G,M)=>P.postMessage(G,L,M),addEventListener:v.addEventListener.bind(v),removeEventListener:v.removeEventListener.bind(v)}}function T(P){for(const[v,L]of k)if(L.canHandle(P)){const[G,M]=L.serialize(P);return[{type:3,name:v,value:G},M]}return[{type:0,value:P},h.get(P)||[]]}function z(P){switch(P.type){case 3:return k.get(P.name).deserialize(P.value);case 0:return P.value}}function R(P,v,L){return new Promise(G=>{const M=Y();P.addEventListener("message",function ht(ct){!ct.data||!ct.data.id||ct.data.id!==M||(P.removeEventListener("message",ht),G(ct.data))}),P.start&&P.start(),P.postMessage(Object.assign({id:M},v),L)})}function Y(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var q=X("00f83bf39a29e0b57d1f"),V=X("dd178c240960309d01bb"),mt=X.n(V);const vt={LOG:1,VIDEO_INFO_READY:2,FRAME_READY:3,AVAILABLE_FRAME_RANGE:4,FRAMES_TS_INFO:5};var he=X("1bc8edb861e50234ecc3"),_e=X.n(he),ge=X("ab553d61d5aeaf067ee3");function Tt(P,v,L){return v=ue(v),v in P?Object.defineProperty(P,v,{value:L,enumerable:!0,configurable:!0,writable:!0}):P[v]=L,P}function ue(P){var v=Nt(P,"string");return typeof v=="symbol"?v:String(v)}function Nt(P,v){if(typeof P!="object"||P===null)return P;var L=P[Symbol.toPrimitive];if(L!==void 0){var G=L.call(P,v||"default");if(typeof G!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(P)}class Gt{constructor(v){this.data=new Uint8Array(v),this.idx=0,this.size=v}getData(){if(this.idx!==this.size)throw new Error("Mismatch between size reserved and sized used");return this.data.slice(0,this.idx)}writeUint8(v){this.data.set([v],this.idx),this.idx+=1}writeUint16(v){const L=new Uint16Array(1);L[0]=v;const G=new Uint8Array(L.buffer);this.data.set([G[1],G[0]],this.idx),this.idx+=2}writeUint8Array(v){this.data.set(v,this.idx),this.idx+=v.length}}const We=10**6;class Ve extends ge.EventEmitter{constructor(v,L,G=console){super(),Tt(this,"info",null),Tt(this,"track",null),Tt(this,"trackSamples",null),Tt(this,"durationSeconds",0),Tt(this,"_curFetchAbortCtrl",null),Tt(this,"_configCache",null),this.url=v,this.trackIndex=L,this.file=_e.a.createFile(),this.file.onError=G.error.bind(G),this.file.onReady=this._onReady.bind(this)}static getExtraData(v){let L,G=7;for(L=0;L<v.SPS.length;L++)G+=2+v.SPS[L].length;for(L=0;L<v.PPS.length;L++)G+=2+v.PPS[L].length;const M=new Gt(G);for(M.writeUint8(v.configurationVersion),M.writeUint8(v.AVCProfileIndication),M.writeUint8(v.profile_compatibility),M.writeUint8(v.AVCLevelIndication),M.writeUint8(v.lengthSizeMinusOne+(63<<2)),M.writeUint8(v.nb_SPS_nalus+(7<<5)),L=0;L<v.SPS.length;L++)M.writeUint16(v.SPS[L].length),M.writeUint8Array(v.SPS[L].nalu);for(M.writeUint8(v.nb_PPS_nalus),L=0;L<v.PPS.length;L++)M.writeUint16(v.PPS[L].length),M.writeUint8Array(v.PPS[L].nalu);return M.getData()}_sendRawChunk(v,L){this.emit("raw-chunk",v,L)}async init(){let v=new AbortController,L=await fetch(this.url,{signal:v.signal}),G=L.body.getReader(),M=0;for(;;){const{done:ht,value:ct}=await G.read();if(ht){this.file.flush();return}const Q=ct.buffer;Q.fileStart=M;const rt=M;M+=Q.byteLength;const nt=this.file.appendBuffer(Q);if(this._sendRawChunk(Q,rt),this.file.moov){this.file.flush(),await G.cancel(),v.abort();return}nt-M>=We&&(v=new AbortController,L=await fetch(this.url,{signal:v.signal,headers:{range:\`bytes=\${nt}-\`}}),M=nt,G=L.body.getReader())}}setVideoTrack(v){this.trackIndex=v,this._configCache=null,this.track=this.info.tracks[v],this.trak=this.file.moov.traks[v],this.trackTimescale=this.track.timescale,this.durationSeconds=Math.ceil(this.info.duration/this.info.timescale),this.trackSamples=this.trak.samples.map(L=>({index:L.number,cts:L.cts,dts:L.dts,isKey:L.is_sync,offset:L.offset,duration:L.duration,timescale:L.timescale,size:L.size}))}_onReady(v){this.info=v,this.emit("ready",this.info)}async _fetchRange(v,L){this._curFetchAbortCtrl&&(this._curFetchAbortCtrl.abort(),this._curFetchAbortCtrl=null);let G=\`bytes=\${v}-\`;L!=null&&(G+=String(L));const M=new AbortController;this._curFetchAbortCtrl=M;const ct=(await fetch(this.url,{signal:M.signal,headers:{range:G}})).body.getReader();let Q=Number(v);for(;;){const{done:rt,value:nt}=await ct.read();if(rt||M.signal.aborted){this._curFetchAbortCtrl===M&&(this._curFetchAbortCtrl=null),this.file.flush();return}const _t=nt.buffer;_t.fileStart=Q;const Ft=Q;Q+=_t.byteLength,this.file.appendBuffer(_t),this._sendRawChunk(_t,Ft)}}getConfig(){if(this._configCache)return this._configCache;const v=this.constructor.getExtraData(this.getAvccBox());return this._configCache={codec:this.track.codec,codedHeight:this.track.track_height,codedWidth:this.track.track_width,description:v},this._configCache}getAvccBox(){return this.file.moov.traks[this.trackIndex].mdia.minf.stbl.stsd.entries[0].avcC}getSample(v){return this.file.moov.traks[this.trackIndex].samples[v]?this.file.getSample(this.file.moov.traks[this.trackIndex],v):null}start(v){v!=null&&this.setVideoTrack(v),this.file.start()}sampleToVideoChunk(v){return new EncodedVideoChunk({type:v.is_sync?"key":"delta",timestamp:v.cts,duration:v.duration,data:v.data})}}function dt(P,v,L){return v=xe(v),v in P?Object.defineProperty(P,v,{value:L,enumerable:!0,configurable:!0,writable:!0}):P[v]=L,P}function xe(P){var v=it(P,"string");return typeof v=="symbol"?v:String(v)}function it(P,v){if(typeof P!="object"||P===null)return P;var L=P[Symbol.toPrimitive];if(L!==void 0){var G=L.call(P,v||"default");if(typeof G!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(P)}const Un={back:5,forward:5,preDecodeCount:0},Le=7;class Ke{constructor(v,L,G){dt(this,"_timestampToSampleMap",new Map),dt(this,"_timestampToFrameMap",new Map),dt(this,"_sampleToChunkCache",new WeakMap),dt(this,"demuxer",null),dt(this,"decoder",null),dt(this,"keyframes",[]),dt(this,"loadedByteIntervals",new mt.a),dt(this,"_lastQueuedDecoderSample",null),dt(this,"_currentFrameRange",{start:0,end:0}),dt(this,"_currentSampleRange",{start:0,end:0}),dt(this,"isReady",!1),dt(this,"_currentFlushPromise",null),dt(this,"_loading",!1),dt(this,"_currentFrame",null),dt(this,"preDecodeCount",0),this.url=v,this.trackIndex=L,this.onEventCb=G}async init(){this.isReady=!1,this._reconfigureDemuxer(),await this.demuxer.init(),this.trackIndex!=null&&this.setTrackIndex(this.trackIndex)}setUrl(v){this.url=v}setTrackIndex(v){this.trackIndex=v,this.demuxer.setVideoTrack(this.trackIndex),this._postTrackUpdate(),this.isReady||(this.isReady=!0)}_postTrackUpdate(){this._updateSamples(),this._reconfigureDecoder(),this.demuxer.start()}_log(v,...L){this.onEventCb(vt.LOG,v,...L)}_updateSamples(){this.demuxer.trackSamples.forEach(v=>{this._timestampToSampleMap.set(v.cts,v),v.isKey&&this.keyframes.push(v)}),this.orderedTrackSamples=Object(q.orderBy)(this.demuxer.trackSamples,v=>v.cts,"asc"),this.orderedTrackSamples.forEach((v,L)=>{this._timestampToFrameMap.set(v.cts,L)}),this.onEventCb(vt.FRAMES_TS_INFO,this._timestampToFrameMap)}_getSampleIndexByOffset(v,L=!0){let M=(L?q.sortedIndexBy:q.sortedLastIndexBy)(this.demuxer.trackSamples,{offset:v},"offset");return L&&(M-=1,M===-1&&(M=0)),M}_addLoadedInterval(v,L){const G=this.loadedByteIntervals.search(v-1,L+1),M={start:v,end:L};if(G.length&&(G.forEach(ht=>{this.loadedByteIntervals.remove(ht.start,ht.end,ht)}),M.start=Math.min(G[0].start,v),M.end=Math.max(G[G.length-1].end,L)),this.loadedByteIntervals.insert(M.start,M.end,M),this.orderedTrackSamples){const ct=this.loadedByteIntervals.search(-1/0,1/0).map(Q=>{const rt=this.demuxer.trackSamples[this._getSampleIndexByOffset(Q.start)];let nt=this.demuxer.trackSamples[this._getSampleIndexByOffset(Q.end,!1)],_t;return nt?(nt=this.demuxer.trackSamples[nt.index-1],_t=this._timestampToFrameMap.get(nt.cts)):_t=this.demuxer.trackSamples.length-1,{start:this._timestampToFrameMap.get(rt.cts),end:_t}});this.onEventCb(vt.AVAILABLE_FRAME_RANGE,ct)}}_findIntervalsToQuery(v,L){const G=this.loadedByteIntervals.search(v,L);if(!G.length)return[{start:v,end:L}];let M=null;const ht=[];return G.some(({start:ct,end:Q})=>{if(M){if(M.end<=Q)return M.end=Q,!0;M.end=ct-1,M={start:Q+1,end:L},ht.push(M)}else{if(v<ct&&ht.push({start:v,end:ct-1}),L<=Q)return!0;M={start:Q+1,end:L},ht.push(M)}return!1}),ht}_reconfigureDemuxer(){this.demuxer=new Ve(this.url,this.trackIndex),this.demuxer.on("ready",v=>{this.onEventCb(vt.VIDEO_INFO_READY,v)}),this.demuxer.on("raw-chunk",(v,L)=>{this._addLoadedInterval(L,L+v.byteLength-1),this._decodeFrames()})}_reconfigureDecoder(v=!1){(!this.decoder||v||this.decoder.state==="closed")&&(this.decoder=new VideoDecoder({output:G=>{this.addFrame(G).catch(M=>this._log("error",M))},error:(...G)=>{this._log("error",...G)}}));const L=this.demuxer.getConfig();if(this.decoder.configure(L),this.decoder.state!=="configured"){const G=new Error("Couldn't setup VideoDecoder");throw this._log("error",G),G}this._lastQueuedDecoderSample=null}_decodeFrames(){if(!this.isReady||this._currentFrame==null||!this.decoder)return;const v=this.orderedTrackSamples[this._currentFrame];if(!this._lastQueuedDecoderSample){let M=v;M.isKey||(M=this.keyframes[this._getKeyframeIndexByTime(M.cts/this.demuxer.trackTimescale,!0)]);const ht=this.demuxer.trackSamples[M.index-1];this._lastQueuedDecoderSample=ht!=null?ht:null}this.decoder.state!=="configured"&&this._reconfigureDecoder();const L=this._lastQueuedDecoderSample?this._lastQueuedDecoderSample.index+1:this._currentSampleRange.start,G=Math.min(this._currentSampleRange.end,v.index+Le+this.preDecodeCount);for(let M=L;M<=G;++M){const ht=this.demuxer.trackSamples[M],ct=this.demuxer.getSample(ht.index);if(!ct)break;let Q=this._sampleToChunkCache.get(ht);if(Q||(Q=this.demuxer.sampleToVideoChunk(ct),this._sampleToChunkCache.set(ht,Q)),this.decoder.state!=="configured"){this._reconfigureDecoder(),this._decodeFrames();break}this.decoder.decode(Q),this._lastQueuedDecoderSample=ht;const rt=this.demuxer.trackSamples[M+1];if(!rt||rt.isKey){this._flushFrames();break}}}async addFrame(v){const L=this._timestampToFrameMap.get(v.timestamp),G=this._timestampToSampleMap.get(v.timestamp);this.onEventCb(vt.FRAME_READY,g(v,[v]),L,G.cts),this._decodeFrames()}_getKeyframeIndexByTime(v,L=!0){let M=(L?q.sortedIndexBy:q.sortedLastIndexBy)(this.keyframes,{cts:v*this.demuxer.trackTimescale},"cts");return L&&(M-=1,M===-1&&(M=0)),M}_flushFrames(){if(this._currentFlushPromise)return this._currentFlushPromise;if(this._lastQueuedDecoderSample){const v=this.demuxer.trackSamples[this._lastQueuedDecoderSample.index+1];v&&!v.isKey&&(this._lastQueuedDecoderSample=null)}return this.decoder.state!=="configured"?null:(this._currentFlushPromise=this.decoder.flush(),this._currentFlushPromise.then(()=>{this._currentFlushPromise=null}).catch(v=>{this._currentFlushPromise=null,this._log("error",v)}),this._currentFlushPromise)}async seek(v,L=Un,G){const{back:M,forward:ht}=L;this.preDecodeCount=L.preDecodeCount;const ct=Math.max(0,Math.floor(v-M)),Q=Math.min(this.demuxer.durationSeconds,Math.ceil(v+ht)),rt=this.keyframes[this._getKeyframeIndexByTime(ct,!0)];let nt=this.keyframes[this._getKeyframeIndexByTime(Q,!1)];nt?rt!==nt&&this.demuxer.trackSamples[this.demuxer.trackSamples.length-1]!==nt&&(nt=this.demuxer.trackSamples[nt.index-1]):nt=this.demuxer.trackSamples[this.demuxer.trackSamples.length-1];const _t=rt.offset,Ft=nt.offset+nt.size-1,Se=rt.index>=this._currentSampleRange.start&&nt.index<=this._currentSampleRange.end,we=this._findIntervalsToQuery(_t,Ft);if(G&&this._lastQueuedDecoderSample&&(this._lastQueuedDecoderSample=null,this.decoder.state==="configured"&&this.decoder.reset()),Se){if(!we.length||this._loading){this._decodeFrames();return}}else if(this._currentSampleRange.start=rt.index,this._currentSampleRange.end=nt.index,this._currentFrameRange.start=this._timestampToFrameMap.get(rt.cts),this._currentFrameRange.end=this._timestampToFrameMap.get(nt.cts),this._lastQueuedDecoderSample&&(this._lastQueuedDecoderSample.cts<rt.cts||this._lastQueuedDecoderSample.cts>nt.cts)&&(this._lastQueuedDecoderSample=null),!we.length){this._decodeFrames();return}this._loading=!0;let Kt=!1;try{for(const Pe of we)try{await this.demuxer._fetchRange(Pe.start,Pe.end)}catch(qe){qe.name!=="AbortError"?this._log("error",qe):Kt=!0;break}}finally{Kt||(this._loading=!1)}}seekToFrame(v,...L){const G=this.orderedTrackSamples[v];if(!G)throw new Error("Not implemented. Gotta fetch more moof boxes to find the timestamp");return this._currentFrame=v,this.seek(G.cts/G.timescale,...L)}}w(Ke)},"66d0ec3bbf77b1358b91":function(Mt,lt){Mt.exports=function(E,O,S,c){var ft=S?S.call(c,E,O):void 0;if(ft!==void 0)return!!ft;if(E===O)return!0;if(typeof E!="object"||!E||typeof O!="object"||!O)return!1;var At=Object.keys(E),o=Object.keys(O);if(At.length!==o.length)return!1;for(var k=Object.prototype.hasOwnProperty.bind(O),w=0;w<At.length;w++){var b=At[w];if(!k(b))return!1;var A=E[b],K=O[b];if(ft=S?S.call(c,A,K,b):void 0,ft===!1||ft===void 0&&A!==K)return!1}return!0}},"6a927222a29e571499a4":function(Mt,lt){Mt.exports=function(X){return X.webpackPolyfill||(X.deprecate=function(){},X.paths=[],X.children||(X.children=[]),Object.defineProperty(X,"loaded",{enumerable:!0,get:function(){return X.l}}),Object.defineProperty(X,"id",{enumerable:!0,get:function(){return X.i}}),X.webpackPolyfill=1),X}},ab553d61d5aeaf067ee3:function(Mt,lt,X){"use strict";var E=Object.prototype.hasOwnProperty,O="~";function S(){}Object.create&&(S.prototype=Object.create(null),new S().__proto__||(O=!1));function c(k,w,b){this.fn=k,this.context=w,this.once=b||!1}function ft(k,w,b,A,K){if(typeof b!="function")throw new TypeError("The listener must be a function");var t=new c(b,A||k,K),n=O?O+w:w;return k._events[n]?k._events[n].fn?k._events[n]=[k._events[n],t]:k._events[n].push(t):(k._events[n]=t,k._eventsCount++),k}function At(k,w){--k._eventsCount===0?k._events=new S:delete k._events[w]}function o(){this._events=new S,this._eventsCount=0}o.prototype.eventNames=function(){var w=[],b,A;if(this._eventsCount===0)return w;for(A in b=this._events)E.call(b,A)&&w.push(O?A.slice(1):A);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(b)):w},o.prototype.listeners=function(w){var b=O?O+w:w,A=this._events[b];if(!A)return[];if(A.fn)return[A.fn];for(var K=0,t=A.length,n=new Array(t);K<t;K++)n[K]=A[K].fn;return n},o.prototype.listenerCount=function(w){var b=O?O+w:w,A=this._events[b];return A?A.fn?1:A.length:0},o.prototype.emit=function(w,b,A,K,t,n){var s=O?O+w:w;if(!this._events[s])return!1;var a=this._events[s],h=arguments.length,g,_;if(a.fn){switch(a.once&&this.removeListener(w,a.fn,void 0,!0),h){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,b),!0;case 3:return a.fn.call(a.context,b,A),!0;case 4:return a.fn.call(a.context,b,A,K),!0;case 5:return a.fn.call(a.context,b,A,K,t),!0;case 6:return a.fn.call(a.context,b,A,K,t,n),!0}for(_=1,g=new Array(h-1);_<h;_++)g[_-1]=arguments[_];a.fn.apply(a.context,g)}else{var U=a.length,T;for(_=0;_<U;_++)switch(a[_].once&&this.removeListener(w,a[_].fn,void 0,!0),h){case 1:a[_].fn.call(a[_].context);break;case 2:a[_].fn.call(a[_].context,b);break;case 3:a[_].fn.call(a[_].context,b,A);break;case 4:a[_].fn.call(a[_].context,b,A,K);break;default:if(!g)for(T=1,g=new Array(h-1);T<h;T++)g[T-1]=arguments[T];a[_].fn.apply(a[_].context,g)}}return!0},o.prototype.on=function(w,b,A){return ft(this,w,b,A,!1)},o.prototype.once=function(w,b,A){return ft(this,w,b,A,!0)},o.prototype.removeListener=function(w,b,A,K){var t=O?O+w:w;if(!this._events[t])return this;if(!b)return At(this,t),this;var n=this._events[t];if(n.fn)n.fn===b&&(!K||n.once)&&(!A||n.context===A)&&At(this,t);else{for(var s=0,a=[],h=n.length;s<h;s++)(n[s].fn!==b||K&&!n[s].once||A&&n[s].context!==A)&&a.push(n[s]);a.length?this._events[t]=a.length===1?a[0]:a:At(this,t)}return this},o.prototype.removeAllListeners=function(w){var b;return w?(b=O?O+w:w,this._events[b]&&At(this,b)):(this._events=new S,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=O,o.EventEmitter=o,Mt.exports=o},d8a2b18087957e350ade:function(Mt,lt){var X;X=function(){return this}();try{X=X||new Function("return this")()}catch{typeof window=="object"&&(X=window)}Mt.exports=X},dd178c240960309d01bb:function(Mt,lt,X){"use strict";Object.defineProperty(lt,"__esModule",{value:!0});var E=X("66d0ec3bbf77b1358b91");function O(k){return k===void 0?-1:k.height}var S=function(){function k(w,b){this.intervalTree=w,this.records=[],this.height=0,this.key=b.low,this.max=b.high,this.records.push(b)}return k.prototype.getNodeHigh=function(){for(var w=this.records[0].high,b=1;b<this.records.length;b++)this.records[b].high>w&&(w=this.records[b].high);return w},k.prototype.updateHeight=function(){this.height=Math.max(O(this.left),O(this.right))+1},k.prototype.updateMaxOfParents=function(){if(this!==void 0){var w=this.getNodeHigh();this.left!==void 0&&this.right!==void 0?this.max=Math.max(Math.max(this.left.max,this.right.max),w):this.left!==void 0&&this.right===void 0?this.max=Math.max(this.left.max,w):this.left===void 0&&this.right!==void 0?this.max=Math.max(this.right.max,w):this.max=w,this.parent&&this.parent.updateMaxOfParents()}},k.prototype._updateMaxAfterRightRotate=function(){var w=this.parent,b=w.left,A=b.getNodeHigh();b.left===void 0&&b.right!==void 0?b.max=Math.max(A,b.right.max):b.left!==void 0&&b.right===void 0?b.max=Math.max(A,b.left.max):b.left===void 0&&b.right===void 0?b.max=A:b.max=Math.max(Math.max(b.left.max,b.right.max),A);var K=this.getNodeHigh();this.left===void 0&&this.right!==void 0?this.max=Math.max(K,this.right.max):this.left!==void 0&&this.right===void 0?this.max=Math.max(K,this.left.max):this.left===void 0&&this.right===void 0?this.max=K:this.max=Math.max(Math.max(this.left.max,this.right.max),K),w.max=Math.max(Math.max(w.left.max,w.right.max),w.getNodeHigh())},k.prototype._updateMaxAfterLeftRotate=function(){var w=this.parent,b=w.right,A=b.getNodeHigh();b.left===void 0&&b.right!==void 0?b.max=Math.max(A,b.right.max):b.left!==void 0&&b.right===void 0?b.max=Math.max(A,b.left.max):b.left===void 0&&b.right===void 0?b.max=A:b.max=Math.max(Math.max(b.left.max,b.right.max),A);var K=this.getNodeHigh();this.left===void 0&&this.right!==void 0?this.max=Math.max(K,this.right.max):this.left!==void 0&&this.right===void 0?this.max=Math.max(K,this.left.max):this.left===void 0&&this.right===void 0?this.max=K:this.max=Math.max(Math.max(this.left.max,this.right.max),K),w.max=Math.max(Math.max(w.left.max,b.max),w.getNodeHigh())},k.prototype._leftRotate=function(){var w=this.right;w.parent=this.parent,w.parent===void 0?this.intervalTree.root=w:w.parent.left===this?w.parent.left=w:w.parent.right===this&&(w.parent.right=w),this.right=w.left,this.right!==void 0&&(this.right.parent=this),w.left=this,this.parent=w,this.updateHeight(),w.updateHeight()},k.prototype._rightRotate=function(){var w=this.left;w.parent=this.parent,w.parent===void 0?this.intervalTree.root=w:w.parent.left===this?w.parent.left=w:w.parent.right===this&&(w.parent.right=w),this.left=w.right,this.left!==void 0&&(this.left.parent=this),w.right=this,this.parent=w,this.updateHeight(),w.updateHeight()},k.prototype._rebalance=function(){if(O(this.left)>=2+O(this.right)){var w=this.left;O(w.left)>=O(w.right)?(this._rightRotate(),this._updateMaxAfterRightRotate()):(w._leftRotate(),this._rightRotate(),this._updateMaxAfterRightRotate())}else if(O(this.right)>=2+O(this.left)){var b=this.right;O(b.right)>=O(b.left)?(this._leftRotate(),this._updateMaxAfterLeftRotate()):(b._rightRotate(),this._leftRotate(),this._updateMaxAfterLeftRotate())}},k.prototype.insert=function(w){w.low<this.key?this.left===void 0?(this.left=new k(this.intervalTree,w),this.left.parent=this):this.left.insert(w):this.right===void 0?(this.right=new k(this.intervalTree,w),this.right.parent=this):this.right.insert(w),this.max<w.high&&(this.max=w.high),this.updateHeight(),this._rebalance()},k.prototype._getOverlappingRecords=function(w,b,A){if(w.key<=A&&b<=w.getNodeHigh()){for(var K=[],t=0;t<w.records.length;t++)w.records[t].high>=b&&K.push(w.records[t]);return K}return[]},k.prototype.search=function(w,b){if(this===void 0)return[];var A=[],K=[],t=[];return w>this.max?[]:(this.left!==void 0&&this.left.max>=w&&(A=this.left.search(w,b)),K=this._getOverlappingRecords(this,w,b),b<this.key?A.concat(K):(this.right!==void 0&&(t=this.right.search(w,b)),A.concat(K,t)))},k.prototype.searchExisting=function(w){if(this!==void 0){if(this.key===w)return this;if(w<this.key){if(this.left!==void 0)return this.left.searchExisting(w)}else if(this.right!==void 0)return this.right.searchExisting(w)}},k.prototype._minValue=function(){return this.left===void 0?this:this.left._minValue()},k.prototype.remove=function(w){var b=this.parent;if(w.key<this.key)return this.left!==void 0?this.left.remove(w):void 0;if(w.key>this.key)return this.right!==void 0?this.right.remove(w):void 0;if(this.left!==void 0&&this.right!==void 0){var A=this.right._minValue();return this.key=A.key,this.records=A.records,this.right.remove(this)}else{if(b.left===this)return this.right!==void 0?(b.left=this.right,this.right.parent=b):(b.left=this.left,this.left!==void 0&&(this.left.parent=b)),b.updateMaxOfParents(),b.updateHeight(),b._rebalance(),this;if(b.right===this)return this.right!==void 0?(b.right=this.right,this.right.parent=b):(b.right=this.left,this.left!==void 0&&(this.left.parent=b)),b.updateMaxOfParents(),b.updateHeight(),b._rebalance(),this}},k}();lt.Node=S;var c=function(){function k(){this.count=0}return k.prototype.insert=function(w){if(w.low>w.high)throw new Error("\`low\` value must be lower or equal to \`high\` value");if(this.root===void 0)return this.root=new S(this,w),this.count++,!0;var b=this.root.searchExisting(w.low);if(b!==void 0){for(var A=0;A<b.records.length;A++)if(E(b.records[A],w))return!1;return b.records.push(w),w.high>b.max&&(b.max=w.high,b.parent&&b.parent.updateMaxOfParents()),this.count++,!0}else return this.root.insert(w),this.count++,!0},k.prototype.search=function(w,b){return this.root===void 0?[]:this.root.search(w,b)},k.prototype.remove=function(w){if(this.root===void 0)return!1;var b=this.root.searchExisting(w.low);if(b===void 0)return!1;if(b.records.length>1){for(var A=void 0,K=0;K<b.records.length;K++)if(E(b.records[K],w)){A=b.records[K],b.records.splice(K,1);break}if(A){if(A=void 0,w.high===b.max){var t=b.getNodeHigh();b.left!==void 0&&b.right!==void 0?b.max=Math.max(Math.max(b.left.max,b.right.max),t):b.left!==void 0&&b.right===void 0?b.max=Math.max(b.left.max,t):b.left===void 0&&b.right!==void 0?b.max=Math.max(b.right.max,t):b.max=t,b.parent&&b.parent.updateMaxOfParents()}return this.count--,!0}else return!1}else if(b.records.length===1)if(E(b.records[0],w))if(this.root.key===b.key){var n=new S(this,{low:w.low,high:w.low});n.left=this.root,this.root.parent=n;var s=this.root.remove(b);return this.root=n.left,this.root!==void 0&&(this.root.parent=void 0),s?(s=void 0,this.count--,!0):!1}else{var s=this.root.remove(b);return s?(s=void 0,this.count--,!0):!1}else return!1;else return!1},k.prototype.inOrder=function(){return new At(this.root)},k.prototype.preOrder=function(){return new o(this.root)},k}();lt.IntervalTree=c;var ft=function(){function k(){this.tree=new c}return k.prototype.insert=function(w,b,A){return this.tree.insert({low:w,high:b,data:A})},k.prototype.remove=function(w,b,A){return this.tree.remove({low:w,high:b,data:A})},k.prototype.search=function(w,b){return this.tree.search(w,b).map(function(A){return A.data})},k.prototype.inOrder=function(){return this.tree.inOrder()},k.prototype.preOrder=function(){return this.tree.preOrder()},Object.defineProperty(k.prototype,"count",{get:function(){return this.tree.count},enumerable:!0,configurable:!0}),k}();lt.default=ft;var At=function(){function k(w){this.stack=[],w!==void 0&&this.push(w)}return k.prototype.next=function(){return this.currentNode===void 0?{done:!0,value:void 0}:this.i<this.currentNode.records.length?{done:!1,value:this.currentNode.records[this.i++]}:(this.currentNode.right!==void 0?this.push(this.currentNode.right):this.pop(),this.next())},k.prototype.push=function(w){for(this.currentNode=w,this.i=0;this.currentNode.left!==void 0;)this.stack.push(this.currentNode),this.currentNode=this.currentNode.left},k.prototype.pop=function(){this.currentNode=this.stack.pop(),this.i=0},k}();lt.InOrder=At,typeof Symbol=="function"&&(At.prototype[Symbol.iterator]=function(){return this});var o=function(){function k(w){this.stack=[],this.i=0,this.currentNode=w}return k.prototype.next=function(){return this.currentNode===void 0?{done:!0,value:void 0}:this.i<this.currentNode.records.length?{done:!1,value:this.currentNode.records[this.i++]}:(this.currentNode.right!==void 0&&this.push(this.currentNode.right),this.currentNode.left!==void 0&&this.push(this.currentNode.left),this.pop(),this.next())},k.prototype.push=function(w){this.stack.push(w)},k.prototype.pop=function(){this.currentNode=this.stack.pop(),this.i=0},k}();lt.PreOrder=o,typeof Symbol=="function"&&(o.prototype[Symbol.iterator]=function(){return this})}});
`,o.p+"6bc2172a1f3aecb6083b.js")}},aa2ddfdc77fbdd850fc6:function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("fontsize",function(h){return function(g){return h(this,"font","size",g)}})},aaf3f2dc8b62133d67ba:function(A,M){A.exports=function(o){if(typeof o!="function")throw TypeError(o+" is not a function!");return o}},ab553d61d5aeaf067ee3:function(A,M,o){"use strict";var h=Object.prototype.hasOwnProperty,v="~";function g(){}Object.create&&(g.prototype=Object.create(null),new g().__proto__||(v=!1));function m(T,P,D){this.fn=T,this.context=P,this.once=D||!1}function b(T,P,D,U,Y){if(typeof D!="function")throw new TypeError("The listener must be a function");var K=new m(D,U||T,Y),X=v?v+P:P;return T._events[X]?T._events[X].fn?T._events[X]=[T._events[X],K]:T._events[X].push(K):(T._events[X]=K,T._eventsCount++),T}function S(T,P){--T._eventsCount===0?T._events=new g:delete T._events[P]}function I(){this._events=new g,this._eventsCount=0}I.prototype.eventNames=function(){var P=[],D,U;if(this._eventsCount===0)return P;for(U in D=this._events)h.call(D,U)&&P.push(v?U.slice(1):U);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(D)):P},I.prototype.listeners=function(P){var D=v?v+P:P,U=this._events[D];if(!U)return[];if(U.fn)return[U.fn];for(var Y=0,K=U.length,X=new Array(K);Y<K;Y++)X[Y]=U[Y].fn;return X},I.prototype.listenerCount=function(P){var D=v?v+P:P,U=this._events[D];return U?U.fn?1:U.length:0},I.prototype.emit=function(P,D,U,Y,K,X){var W=v?v+P:P;if(!this._events[W])return!1;var j=this._events[W],Q=arguments.length,ne,ce;if(j.fn){switch(j.once&&this.removeListener(P,j.fn,void 0,!0),Q){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,D),!0;case 3:return j.fn.call(j.context,D,U),!0;case 4:return j.fn.call(j.context,D,U,Y),!0;case 5:return j.fn.call(j.context,D,U,Y,K),!0;case 6:return j.fn.call(j.context,D,U,Y,K,X),!0}for(ce=1,ne=new Array(Q-1);ce<Q;ce++)ne[ce-1]=arguments[ce];j.fn.apply(j.context,ne)}else{var ee=j.length,B;for(ce=0;ce<ee;ce++)switch(j[ce].once&&this.removeListener(P,j[ce].fn,void 0,!0),Q){case 1:j[ce].fn.call(j[ce].context);break;case 2:j[ce].fn.call(j[ce].context,D);break;case 3:j[ce].fn.call(j[ce].context,D,U);break;case 4:j[ce].fn.call(j[ce].context,D,U,Y);break;default:if(!ne)for(B=1,ne=new Array(Q-1);B<Q;B++)ne[B-1]=arguments[B];j[ce].fn.apply(j[ce].context,ne)}}return!0},I.prototype.on=function(P,D,U){return b(this,P,D,U,!1)},I.prototype.once=function(P,D,U){return b(this,P,D,U,!0)},I.prototype.removeListener=function(P,D,U,Y){var K=v?v+P:P;if(!this._events[K])return this;if(!D)return S(this,K),this;var X=this._events[K];if(X.fn)X.fn===D&&(!Y||X.once)&&(!U||X.context===U)&&S(this,K);else{for(var W=0,j=[],Q=X.length;W<Q;W++)(X[W].fn!==D||Y&&!X[W].once||U&&X[W].context!==U)&&j.push(X[W]);j.length?this._events[K]=j.length===1?j[0]:j:S(this,K)}return this},I.prototype.removeAllListeners=function(P){var D;return P?(D=v?v+P:P,this._events[D]&&S(this,D)):(this._events=new g,this._eventsCount=0),this},I.prototype.off=I.prototype.removeListener,I.prototype.addListener=I.prototype.on,I.prefixed=v,I.EventEmitter=I,A.exports=I},abe6c77689592409700a:function(A,M,o){var h=o("0c6bdb2f1e107b092ad8"),v=o("30b8e0406acca1d79148"),g=o("fdf9ec15fb80cd9b8df9")("match");A.exports=function(m){var b;return h(m)&&((b=m[g])!==void 0?!!b:v(m)=="RegExp")}},abf710223f9868f9ff0f:function(A,M,o){(function(h,v){(function(g,m){"use strict";if(g.setImmediate)return;var b=1,S={},I=!1,T=g.document,P;function D(B){typeof B!="function"&&(B=new Function(""+B));for(var $=new Array(arguments.length-1),oe=0;oe<$.length;oe++)$[oe]=arguments[oe+1];var Se={callback:B,args:$};return S[b]=Se,P(b),b++}function U(B){delete S[B]}function Y(B){var $=B.callback,oe=B.args;switch(oe.length){case 0:$();break;case 1:$(oe[0]);break;case 2:$(oe[0],oe[1]);break;case 3:$(oe[0],oe[1],oe[2]);break;default:$.apply(m,oe);break}}function K(B){if(I)setTimeout(K,0,B);else{var $=S[B];if($){I=!0;try{Y($)}finally{U(B),I=!1}}}}function X(){P=function(B){v.nextTick(function(){K(B)})}}function W(){if(g.postMessage&&!g.importScripts){var B=!0,$=g.onmessage;return g.onmessage=function(){B=!1},g.postMessage("","*"),g.onmessage=$,B}}function j(){var B="setImmediate$"+Math.random()+"$",$=function(oe){oe.source===g&&typeof oe.data=="string"&&oe.data.indexOf(B)===0&&K(+oe.data.slice(B.length))};g.addEventListener?g.addEventListener("message",$,!1):g.attachEvent("onmessage",$),P=function(oe){g.postMessage(B+oe,"*")}}function Q(){var B=new MessageChannel;B.port1.onmessage=function($){var oe=$.data;K(oe)},P=function($){B.port2.postMessage($)}}function ne(){var B=T.documentElement;P=function($){var oe=T.createElement("script");oe.onreadystatechange=function(){K($),oe.onreadystatechange=null,B.removeChild(oe),oe=null},B.appendChild(oe)}}function ce(){P=function(B){setTimeout(K,0,B)}}var ee=Object.getPrototypeOf&&Object.getPrototypeOf(g);ee=ee&&ee.setTimeout?ee:g,{}.toString.call(g.process)==="[object process]"?X():W()?j():g.MessageChannel?Q():T&&"onreadystatechange"in T.createElement("script")?ne():ce(),ee.setImmediate=D,ee.clearImmediate=U})(typeof self>"u"?typeof h>"u"?this:h:self)}).call(this,o("d8a2b18087957e350ade"),o("1a654c89165c3fdd23e9"))},ac1d26ab250b2816f917:function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("b12675786789dbc02df7");h(h.G+h.F*(parseFloat!=v),{parseFloat:v})},ac7065bf7cbe983177aa:function(A,M,o){var h=o("018197c10a6ce8e48027"),v=o("f231974c81033140970d").f,g={}.toString,m=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],b=function(S){try{return v(S)}catch{return m.slice()}};A.exports.f=function(I){return m&&g.call(I)=="[object Window]"?b(I):v(h(I))}},ae69b05663ee2a381de0:function(A,M,o){"use strict";var h=o("7f1f5a90a2ecaf92a049"),v=o("da33f9708fbb4cc901ff"),g=o("0a850ab3e6aa8900d3c4"),m=o("018197c10a6ce8e48027");A.exports=o("bbdbd7ce4b2cfe2c4547")(Array,"Array",function(b,S){this._t=m(b),this._i=0,this._k=S},function(){var b=this._t,S=this._k,I=this._i++;return!b||I>=b.length?(this._t=void 0,v(1)):S=="keys"?v(0,I):S=="values"?v(0,b[I]):v(0,[I,b[I]])},"values"),g.Arguments=g.Array,h("keys"),h("values"),h("entries")},aee866c649d1fbfdb85e:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("409f063042ff82279e38")(2);h(h.P+h.F*!o("155fc47f5eef242ee51b")([].filter,!0),"Array",{filter:function(m){return v(this,m,arguments[1])}})},aeebf6797391ce13e889:function(A,M,o){"use strict";o.d(M,"b",function(){return b}),o.d(M,"a",function(){return I});var h=o("00f83bf39a29e0b57d1f"),v=o.n(h),g=o("1b726e7ce4061546ecfc"),m=o("7d074b0d47dd6102152e");const b={IMAGES:"images",VOLUMES:"volumes",POINT_CLOUDS:"point_clouds",VIDEOS:"videos",POINT_CLOUD_EPISODES:"point_cloud_episodes"},S={[b.IMAGES]:"images",[b.VOLUMES]:"volumes",[b.POINT_CLOUDS]:"point cloud",[b.POINT_CLOUD_EPISODES]:"point cloud episodes",[b.VIDEOS]:"videos"},I={IMAGES_V1:"images_v1",IMAGES_V2:"images_v2",VIDEOS_V1:"videos_v1",VIDEOS_V2:"videos_v2",VIDEOS_V3:"videos_v3",VOLUMES_V1:"volumes_v1",POINT_CLOUDS_V1:"point_clouds_v1",POINT_CLOUD_EPISODES_V1:"point_cloud_episodes_v1"},T={READY:"ready",SYNC:"sync",ERROR:"error"},P={ALWAYS:"always",ON_HOVER:"on-hover",NEVER:"never"},D={ALWAYS:"always",NEVER:"never"},U={BBOX:"object_bbox",TOP_POINT:"top_point"},Y={[b.IMAGES]:[m.a.BITMAP,m.a.CUBOID,m.a.GRAPH,m.a.RECTANGLE,m.a.POINT,m.a.POLYLINE,m.a.POLYGON],[b.VIDEOS]:[m.a.BITMAP,m.a.RECTANGLE,m.a.POINT,m.a.POLYLINE,m.a.POLYGON,m.a.GRAPH],[b.POINT_CLOUDS]:[m.a.CUBOID_3D,m.a.POINT_CLOUD],[b.POINT_CLOUD_EPISODES]:[m.a.CUBOID_3D,m.a.POINT_CLOUD],[b.VOLUMES]:[m.a.BITMAP,m.a.POLYGON,m.a.RECTANGLE,m.a.MASK_3D]},K={pointsSize:"auto"},X={PROJECT:"project",MODEL:"model",PLUGIN:"plugin",WORKSPACE:"workspace",NOTEBOOK:"notebook"},W={polygonEditFill:!0,borderSize:"auto",pointsSize:5,pointShapeRadius:12,brushSize:5,axesOpacity:1,axesBorderSize:1,axesMainColor:"#FFFFFF",axesAdditionalColor:"#000000",enableAxesOnRect:!0,enableAxesOnSmartRect:!0,enableAxesOnGraph:!0,rectangleOpacity:0,rectangleBorderSize:5,defaultOpacity:.5,tagsCategorySeparator:"",showTagsMode:P.ON_HOVER,showGraphLabelsMode:D.ALWAYS,tagsLocationMode:U.TOP_POINT,showClassesMode:!1,showUsersMode:!1,showTagsUsersMode:!1,showObjectSizeMode:!1,allowDuplicateTags:!1,showGrid:!1,showContours:!1,gridRowsCount:3,gridColsCount:3,zoomMultiplier:1.1,defaultPolygonToolOption:g.a.CONSECUTIVE,bitmapToolErazeUnderlayingPixels:!1,preserveZoomDifference:!1,objectTagsDashedBorders:["confidence"],hookOnImageChange:"",expandPropertiesPanel:!0,showPointPositionOnDrag:!1,useOnlyOriginalImage:!1,toggleHotkeyTag:!1,defaultSmartModel:null,groupImages:!1,groupImagesByTagId:null,groupImagesSync:!1,showCustomInfo:!0,showHotkeyHint:!0,transparentPartsColor:{hex:"#FFFFFF",a:0},advancedSettings:{hideUnavailableTools:!1}},j=Object.keys(W);function Q(B,$,oe){const Se=B[oe],Fe=$[oe];typeof Se=="object"&&Se!=null&&!Array.isArray(Se)?Object.assign(Se,Fe):B[oe]=Fe}function ne(...B){return j.reduce(($,oe)=>{const Se=W[oe];return typeof Se=="object"&&Se!=null&&!Array.isArray(Se)?$[oe]=Object(h.cloneDeep)(Se):$[oe]=Se,B.forEach(Fe=>{!Fe||!(oe in Fe)||K[oe]===Fe[oe]||Q($,Fe,oe)}),$},{})}const ce={NONE:"none",ANY_STRING:"any_string",ANY_NUMBER:"any_number",ONE_OF_STRING:"oneof_string"},ee={...Object.values(ce).reduce((B,$)=>(B[$]={},B),{}),[ce.ANY_NUMBER]:{autoIncrement:!1}}},b12675786789dbc02df7:function(A,M,o){var h=o("e9323032e98511a09e82").parseFloat,v=o("3ed595a38226ae2a3783").trim;A.exports=1/h(o("5711e5187c61473cfa4a")+"-0")!==-1/0?function(m){var b=v(String(m),3),S=h(b);return S===0&&b.charAt(0)=="-"?-0:S}:h},b15e544636f08b726d1d:function(A,M,o){A.exports=!o("36dcda5e30871a360b8c")&&!o("2d639e7503de7c56ad49")(function(){return Object.defineProperty(o("ba429247ca80b1fbc743")("div"),"a",{get:function(){return 7}}).a!=7})},b23b3840b87c6a4cbe4f:function(A,M,o){"use strict";A.exports=h,h.Node=m,h.create=h;function h(b){var S=this;if(S instanceof h||(S=new h),S.tail=null,S.head=null,S.length=0,b&&typeof b.forEach=="function")b.forEach(function(P){S.push(P)});else if(arguments.length>0)for(var I=0,T=arguments.length;I<T;I++)S.push(arguments[I]);return S}h.prototype.removeNode=function(b){if(b.list!==this)throw new Error("removing node which does not belong to this list");var S=b.next,I=b.prev;S&&(S.prev=I),I&&(I.next=S),b===this.head&&(this.head=S),b===this.tail&&(this.tail=I),b.list.length--,b.next=null,b.prev=null,b.list=null},h.prototype.unshiftNode=function(b){if(b!==this.head){b.list&&b.list.removeNode(b);var S=this.head;b.list=this,b.next=S,S&&(S.prev=b),this.head=b,this.tail||(this.tail=b),this.length++}},h.prototype.pushNode=function(b){if(b!==this.tail){b.list&&b.list.removeNode(b);var S=this.tail;b.list=this,b.prev=S,S&&(S.next=b),this.tail=b,this.head||(this.head=b),this.length++}},h.prototype.push=function(){for(var b=0,S=arguments.length;b<S;b++)v(this,arguments[b]);return this.length},h.prototype.unshift=function(){for(var b=0,S=arguments.length;b<S;b++)g(this,arguments[b]);return this.length},h.prototype.pop=function(){if(this.tail){var b=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,b}},h.prototype.shift=function(){if(this.head){var b=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,b}},h.prototype.forEach=function(b,S){S=S||this;for(var I=this.head,T=0;I!==null;T++)b.call(S,I.value,T,this),I=I.next},h.prototype.forEachReverse=function(b,S){S=S||this;for(var I=this.tail,T=this.length-1;I!==null;T--)b.call(S,I.value,T,this),I=I.prev},h.prototype.get=function(b){for(var S=0,I=this.head;I!==null&&S<b;S++)I=I.next;if(S===b&&I!==null)return I.value},h.prototype.getReverse=function(b){for(var S=0,I=this.tail;I!==null&&S<b;S++)I=I.prev;if(S===b&&I!==null)return I.value},h.prototype.map=function(b,S){S=S||this;for(var I=new h,T=this.head;T!==null;)I.push(b.call(S,T.value,this)),T=T.next;return I},h.prototype.mapReverse=function(b,S){S=S||this;for(var I=new h,T=this.tail;T!==null;)I.push(b.call(S,T.value,this)),T=T.prev;return I},h.prototype.reduce=function(b,S){var I,T=this.head;if(arguments.length>1)I=S;else if(this.head)T=this.head.next,I=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var P=0;T!==null;P++)I=b(I,T.value,P),T=T.next;return I},h.prototype.reduceReverse=function(b,S){var I,T=this.tail;if(arguments.length>1)I=S;else if(this.tail)T=this.tail.prev,I=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var P=this.length-1;T!==null;P--)I=b(I,T.value,P),T=T.prev;return I},h.prototype.toArray=function(){for(var b=new Array(this.length),S=0,I=this.head;I!==null;S++)b[S]=I.value,I=I.next;return b},h.prototype.toArrayReverse=function(){for(var b=new Array(this.length),S=0,I=this.tail;I!==null;S++)b[S]=I.value,I=I.prev;return b},h.prototype.slice=function(b,S){S=S||this.length,S<0&&(S+=this.length),b=b||0,b<0&&(b+=this.length);var I=new h;if(S<b||S<0)return I;b<0&&(b=0),S>this.length&&(S=this.length);for(var T=0,P=this.head;P!==null&&T<b;T++)P=P.next;for(;P!==null&&T<S;T++,P=P.next)I.push(P.value);return I},h.prototype.sliceReverse=function(b,S){S=S||this.length,S<0&&(S+=this.length),b=b||0,b<0&&(b+=this.length);var I=new h;if(S<b||S<0)return I;b<0&&(b=0),S>this.length&&(S=this.length);for(var T=this.length,P=this.tail;P!==null&&T>S;T--)P=P.prev;for(;P!==null&&T>b;T--,P=P.prev)I.push(P.value);return I},h.prototype.reverse=function(){for(var b=this.head,S=this.tail,I=b;I!==null;I=I.prev){var T=I.prev;I.prev=I.next,I.next=T}return this.head=S,this.tail=b,this};function v(b,S){b.tail=new m(S,b.tail,null,b),b.head||(b.head=b.tail),b.length++}function g(b,S){b.head=new m(S,null,b.head,b),b.tail||(b.tail=b.head),b.length++}function m(b,S,I,T){if(!(this instanceof m))return new m(b,S,I,T);this.list=T,this.value=b,S?(S.next=this,this.prev=S):this.prev=null,I?(I.prev=this,this.next=I):this.next=null}try{o("9dad27de754d976db0f7")(h)}catch{}},b3315b5da9c92a3db2ae:function(A,M){},b38020fb3d86f832c727:function(A,M){},b3d2c7eadca68a717069:function(A,M,o){},b4800bc516820359bad3:function(A,M,o){var h=o("f8cf2e7afd370478f99e"),v=o("3c1abcaf432651c852c0"),g=o("e5f3df9816caf4a19edb"),m=o("5e7f3152dbd5f68ea917"),b=o("3091fc82fc780b1e9f35"),S=o("9ba7c6b5067bc2a0c49c"),I=o("45e95ff7deb186b1032c"),T=o("0c6bdb2f1e107b092ad8");function P(D,U,Y){var K=arguments.length<4?D:arguments[3],X=v.f(I(D),U),W,j;if(!X){if(T(j=g(D)))return P(j,U,Y,K);X=S(0)}if(m(X,"value")){if(X.writable===!1||!T(K))return!1;if(W=v.f(K,U)){if(W.get||W.set||W.writable===!1)return!1;W.value=Y,h.f(K,U,W)}else h.f(K,U,S(0,Y));return!0}return X.set===void 0?!1:(X.set.call(K,Y),!0)}b(b.S,"Reflect",{set:P})},b51af69bbd93da5c2190:function(A,M){},b5301206e9daae9e16c7:function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("126be16bb2f5f1c18403"),g=o("c445bef4faf25215ffcd"),m=/"/g,b=function(S,I,T,P){var D=String(g(S)),U="<"+I;return T!==""&&(U+=" "+T+'="'+String(P).replace(m,"&quot;")+'"'),U+">"+D+"</"+I+">"};A.exports=function(S,I){var T={};T[S]=I(b),h(h.P+h.F*v(function(){var P=""[S]('"');return P!==P.toLowerCase()||P.split('"').length>3}),"String",T)}},b63c7fc01af95038896e:function(A,M,o){"use strict";var h=o("0c6bdb2f1e107b092ad8"),v=o("e5f3df9816caf4a19edb"),g=o("fdf9ec15fb80cd9b8df9")("hasInstance"),m=Function.prototype;g in m||o("f8cf2e7afd370478f99e").f(m,g,{value:function(b){if(typeof this!="function"||!h(b))return!1;if(!h(this.prototype))return b instanceof this;for(;b=v(b);)if(this.prototype===b)return!0;return!1}})},b6577707b4602dd7f707:function(A,M,o){o("001882e373f9dca8517d"),A.exports=o("04aabd2475089fa3cacd").Object.getOwnPropertyDescriptors},b67e039c3485635fb25d:function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Date",{now:function(){return new Date().getTime()}})},b69b6a982b1b19fc5d05:function(A,M,o){"use strict";var h=o("e9323032e98511a09e82"),v=o("c4e1172cd86cf1507638"),g=o("5ac187c343d34c84f217"),m=o("fe764323ef07c8632dee"),b=o("fa9e288138e317a7a504"),S=o("5d61e0aac58adeaf65c8"),I=o("126be16bb2f5f1c18403"),T=o("dde7c1ae034e12bce98a"),P=o("6ae02b075e3300a8a961"),D=o("87ca1990df7e5ce5f6d4"),U=o("a76cc99c600b948806ec"),Y=o("f231974c81033140970d").f,K=o("f8cf2e7afd370478f99e").f,X=o("7dbfcf0fa32544819713"),W=o("e5a005c5c5eff4a503bf"),j="ArrayBuffer",Q="DataView",ne="prototype",ce="Wrong length!",ee="Wrong index!",B=h[j],$=h[Q],oe=h.Math,Se=h.RangeError,Fe=h.Infinity,ct=B,He=oe.abs,nt=oe.pow,Ae=oe.floor,Ve=oe.log,Ye=oe.LN2,st="buffer",de="byteLength",Ie="byteOffset",be=v?"_b":st,Ce=v?"_l":de,Ue=v?"_o":Ie;function Te(q,F,N){var le=new Array(N),Oe=N*8-F-1,re=(1<<Oe)-1,ie=re>>1,De=F===23?nt(2,-24)-nt(2,-77):0,je=0,pt=q<0||q===0&&1/q<0?1:0,Pt,Lt,jt;for(q=He(q),q!=q||q===Fe?(Lt=q!=q?1:0,Pt=re):(Pt=Ae(Ve(q)/Ye),q*(jt=nt(2,-Pt))<1&&(Pt--,jt*=2),Pt+ie>=1?q+=De/jt:q+=De*nt(2,1-ie),q*jt>=2&&(Pt++,jt/=2),Pt+ie>=re?(Lt=0,Pt=re):Pt+ie>=1?(Lt=(q*jt-1)*nt(2,F),Pt=Pt+ie):(Lt=q*nt(2,ie-1)*nt(2,F),Pt=0));F>=8;le[je++]=Lt&255,Lt/=256,F-=8);for(Pt=Pt<<F|Lt,Oe+=F;Oe>0;le[je++]=Pt&255,Pt/=256,Oe-=8);return le[--je]|=pt*128,le}function Le(q,F,N){var le=N*8-F-1,Oe=(1<<le)-1,re=Oe>>1,ie=le-7,De=N-1,je=q[De--],pt=je&127,Pt;for(je>>=7;ie>0;pt=pt*256+q[De],De--,ie-=8);for(Pt=pt&(1<<-ie)-1,pt>>=-ie,ie+=F;ie>0;Pt=Pt*256+q[De],De--,ie-=8);if(pt===0)pt=1-re;else{if(pt===Oe)return Pt?NaN:je?-Fe:Fe;Pt=Pt+nt(2,F),pt=pt-re}return(je?-1:1)*Pt*nt(2,pt-F)}function yt(q){return q[3]<<24|q[2]<<16|q[1]<<8|q[0]}function Mt(q){return[q&255]}function $t(q){return[q&255,q>>8&255]}function on(q){return[q&255,q>>8&255,q>>16&255,q>>24&255]}function un(q){return Te(q,52,8)}function Bn(q){return Te(q,23,4)}function qn(q,F,N){K(q[ne],F,{get:function(){return this[N]}})}function Rn(q,F,N,le){var Oe=+N,re=U(Oe);if(re+F>q[Ce])throw Se(ee);var ie=q[be]._b,De=re+q[Ue],je=ie.slice(De,De+F);return le?je:je.reverse()}function Fn(q,F,N,le,Oe,re){var ie=+N,De=U(ie);if(De+F>q[Ce])throw Se(ee);for(var je=q[be]._b,pt=De+q[Ue],Pt=le(+Oe),Lt=0;Lt<F;Lt++)je[pt+Lt]=Pt[re?Lt:F-Lt-1]}if(!m.ABV)B=function(F){T(this,B,j);var N=U(F);this._b=X.call(new Array(N),0),this[Ce]=N},$=function(F,N,le){T(this,$,Q),T(F,B,Q);var Oe=F[Ce],re=P(N);if(re<0||re>Oe)throw Se("Wrong offset!");if(le=le===void 0?Oe-re:D(le),re+le>Oe)throw Se(ce);this[be]=F,this[Ue]=re,this[Ce]=le},v&&(qn(B,de,"_l"),qn($,st,"_b"),qn($,de,"_l"),qn($,Ie,"_o")),S($[ne],{getInt8:function(F){return Rn(this,1,F)[0]<<24>>24},getUint8:function(F){return Rn(this,1,F)[0]},getInt16:function(F){var N=Rn(this,2,F,arguments[1]);return(N[1]<<8|N[0])<<16>>16},getUint16:function(F){var N=Rn(this,2,F,arguments[1]);return N[1]<<8|N[0]},getInt32:function(F){return yt(Rn(this,4,F,arguments[1]))},getUint32:function(F){return yt(Rn(this,4,F,arguments[1]))>>>0},getFloat32:function(F){return Le(Rn(this,4,F,arguments[1]),23,4)},getFloat64:function(F){return Le(Rn(this,8,F,arguments[1]),52,8)},setInt8:function(F,N){Fn(this,1,F,Mt,N)},setUint8:function(F,N){Fn(this,1,F,Mt,N)},setInt16:function(F,N){Fn(this,2,F,$t,N,arguments[2])},setUint16:function(F,N){Fn(this,2,F,$t,N,arguments[2])},setInt32:function(F,N){Fn(this,4,F,on,N,arguments[2])},setUint32:function(F,N){Fn(this,4,F,on,N,arguments[2])},setFloat32:function(F,N){Fn(this,4,F,Bn,N,arguments[2])},setFloat64:function(F,N){Fn(this,8,F,un,N,arguments[2])}});else{if(!I(function(){B(1)})||!I(function(){new B(-1)})||I(function(){return new B,new B(1.5),new B(NaN),B.name!=j})){B=function(F){return T(this,B),new ct(U(F))};for(var ai=B[ne]=ct[ne],hi=Y(ct),Zn=0,Yn;hi.length>Zn;)(Yn=hi[Zn++])in B||b(B,Yn,ct[Yn]);g||(ai.constructor=B)}var ei=new $(new B(2)),ki=$[ne].setInt8;ei.setInt8(0,2147483648),ei.setInt8(1,2147483649),(ei.getInt8(0)||!ei.getInt8(1))&&S($[ne],{setInt8:function(F,N){ki.call(this,F,N<<24>>24)},setUint8:function(F,N){ki.call(this,F,N<<24>>24)}},!0)}W(B,j),W($,Q),b($[ne],m.VIEW,!0),M[j]=B,M[Q]=$},b74079e17b74a7010ffb:function(A,M,o){"use strict";const h={VIEWS:"views",RUNS:"runs",DOWNLOADS:"downloads"}},b79a51580fec545385a2:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("47b1068e56d5f6625317"),g=o("3293ee358506ec9b7d32"),m=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(g);h(h.P+h.F*m,"String",{padEnd:function(S){return v(this,S,arguments.length>1?arguments[1]:void 0,!1)}})},ba429247ca80b1fbc743:function(A,M,o){var h=o("6b2cac041904481ec760"),v=o("1f598190b9f7d363a1ea").document,g=h(v)&&h(v.createElement);A.exports=function(m){return g?v.createElement(m):{}}},ba5246ed31a79503d644:function(A,M,o){var h=o("30b8e0406acca1d79148");A.exports=Object("z").propertyIsEnumerable(0)?Object:function(v){return h(v)=="String"?v.split(""):Object(v)}},bbdbd7ce4b2cfe2c4547:function(A,M,o){"use strict";var h=o("5ac187c343d34c84f217"),v=o("3091fc82fc780b1e9f35"),g=o("26949bccb98fdb02c86a"),m=o("fa9e288138e317a7a504"),b=o("0a850ab3e6aa8900d3c4"),S=o("160ccb785c60ef5e2657"),I=o("e5a005c5c5eff4a503bf"),T=o("e5f3df9816caf4a19edb"),P=o("fdf9ec15fb80cd9b8df9")("iterator"),D=!([].keys&&"next"in[].keys()),U="@@iterator",Y="keys",K="values",X=function(){return this};A.exports=function(W,j,Q,ne,ce,ee,B){S(Q,j,ne);var $=function(Ie){if(!D&&Ie in ct)return ct[Ie];switch(Ie){case Y:return function(){return new Q(this,Ie)};case K:return function(){return new Q(this,Ie)}}return function(){return new Q(this,Ie)}},oe=j+" Iterator",Se=ce==K,Fe=!1,ct=W.prototype,He=ct[P]||ct[U]||ce&&ct[ce],nt=He||$(ce),Ae=ce?Se?$("entries"):nt:void 0,Ve=j=="Array"&&ct.entries||He,Ye,st,de;if(Ve&&(de=T(Ve.call(new W)),de!==Object.prototype&&de.next&&(I(de,oe,!0),!h&&typeof de[P]!="function"&&m(de,P,X))),Se&&He&&He.name!==K&&(Fe=!0,nt=function(){return He.call(this)}),(!h||B)&&(D||Fe||!ct[P])&&m(ct,P,nt),b[j]=nt,b[oe]=X,ce)if(Ye={values:Se?nt:$(K),keys:ee?nt:$(Y),entries:Ae},B)for(st in Ye)st in ct||g(ct,st,Ye[st]);else v(v.P+v.F*(D||Fe),j,Ye);return Ye}},bc24726cb33e61794014:function(A,M){var o={}.hasOwnProperty;A.exports=function(h,v){return o.call(h,v)}},bcdf52108f8898bbcfd0:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("409f063042ff82279e38")(6),g="findIndex",m=!0;g in[]&&Array(1)[g](function(){m=!1}),h(h.P+h.F*m,"Array",{findIndex:function(S){return v(this,S,arguments.length>1?arguments[1]:void 0)}}),o("7f1f5a90a2ecaf92a049")(g)},bde4caa0455b2360b39e:function(A,M,o){M.f=o("fdf9ec15fb80cd9b8df9")},be1cb19a024036404bc8:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("409f063042ff82279e38")(0),g=o("155fc47f5eef242ee51b")([].forEach,!0);h(h.P+h.F*!g,"Array",{forEach:function(b){return v(this,b,arguments[1])}})},bf423d1d683f9a2529fc:function(A,M,o){"use strict";var h=o("a4bb2f14abe3755fd395"),v=o("0c6bdb2f1e107b092ad8"),g=o("87ca1990df7e5ce5f6d4"),m=o("a8ecafe71e21295d1184"),b=o("fdf9ec15fb80cd9b8df9")("isConcatSpreadable");function S(I,T,P,D,U,Y,K,X){for(var W=U,j=0,Q=K?m(K,X,3):!1,ne,ce;j<D;){if(j in P){if(ne=Q?Q(P[j],j,T):P[j],ce=!1,v(ne)&&(ce=ne[b],ce=ce!==void 0?!!ce:h(ne)),ce&&Y>0)W=S(I,T,ne,g(ne.length),W,Y-1)-1;else{if(W>=9007199254740991)throw TypeError();I[W]=ne}W++}j++}return W}A.exports=S},bf4ed8f48832d41bc412:function(A,M,o){"use strict";var h=o("82e7c27256e2d57d24b0"),v=o("8e52fe7d9c78070c4cb8"),g="Map";A.exports=o("5fff38dc6894e11cedd3")(g,function(m){return function(){return m(this,arguments.length>0?arguments[0]:void 0)}},{get:function(b){var S=h.getEntry(v(this,g),b);return S&&S.v},set:function(b,S){return h.def(v(this,g),b===0?0:b,S)}},h,!0)},bfe744ff6a7d3fb8b3b6:function(A,M,o){var h=o("f8cf2e7afd370478f99e"),v=o("45e95ff7deb186b1032c"),g=o("2fc08ef14d334fbecb33");A.exports=o("c4e1172cd86cf1507638")?Object.defineProperties:function(b,S){v(b);for(var I=g(S),T=I.length,P=0,D;T>P;)h.f(b,D=I[P++],S[D]);return b}},c021bf2eaf2f2e721a6e:function(A,M){A.exports=function(o){if(typeof o!="function")throw TypeError(o+" is not a function!");return o}},c158e3d9570919e57f44:function(A,M,o){var h=o("2fc08ef14d334fbecb33"),v=o("7057fe086dddfd19f86c"),g=o("777583f135984e6aaced");A.exports=function(m){var b=h(m),S=v.f;if(S)for(var I=S(m),T=g.f,P=0,D;I.length>P;)T.call(m,D=I[P++])&&b.push(D);return b}},c15b1b5fb34fea6d7f41:function(A,M,o){var h=o("30b8e0406acca1d79148");A.exports=function(v,g){if(typeof v!="number"&&h(v)!="Number")throw TypeError(g);return+v}},c2206f450d5acd9005bb:function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=Math.exp;h(h.S,"Math",{cosh:function(m){return(v(m=+m)+v(-m))/2}})},c2399cef222e655f5bdb:function(A,M,o){"use strict";const h={OPEN:"open",CLOSED:"closed"}},c2e34caf852f605007d8:function(A,M,o){"use strict";o.r(M),o.d(M,"EffectScope",function(){return Y}),o.d(M,"computed",function(){return bo}),o.d(M,"createApp",function(){return fd}),o.d(M,"createRef",function(){return ss}),o.d(M,"customRef",function(){return dt}),o.d(M,"defineAsyncComponent",function(){return Af}),o.d(M,"defineComponent",function(){return vd}),o.d(M,"del",function(){return Kn}),o.d(M,"effectScope",function(){return X}),o.d(M,"getCurrentInstance",function(){return st}),o.d(M,"getCurrentScope",function(){return W}),o.d(M,"h",function(){return Ii}),o.d(M,"inject",function(){return Eo}),o.d(M,"isRaw",function(){return Di}),o.d(M,"isReactive",function(){return Ti}),o.d(M,"isReadonly",function(){return Ft}),o.d(M,"isRef",function(){return Me}),o.d(M,"markRaw",function(){return as}),o.d(M,"nextTick",function(){return hd}),o.d(M,"onActivated",function(){return Ea}),o.d(M,"onBeforeMount",function(){return Zr}),o.d(M,"onBeforeUnmount",function(){return mo}),o.d(M,"onBeforeUpdate",function(){return ua}),o.d(M,"onDeactivated",function(){return za}),o.d(M,"onErrorCaptured",function(){return tu}),o.d(M,"onMounted",function(){return $s}),o.d(M,"onScopeDispose",function(){return j}),o.d(M,"onServerPrefetch",function(){return vo}),o.d(M,"onUnmounted",function(){return go}),o.d(M,"onUpdated",function(){return Hi}),o.d(M,"provide",function(){return Ta}),o.d(M,"proxyRefs",function(){return Ai}),o.d(M,"reactive",function(){return Ks}),o.d(M,"readonly",function(){return mn}),o.d(M,"ref",function(){return oi}),o.d(M,"set",function(){return Br}),o.d(M,"shallowReactive",function(){return ir}),o.d(M,"shallowReadonly",function(){return Gn}),o.d(M,"shallowRef",function(){return Bt}),o.d(M,"toRaw",function(){return Qt}),o.d(M,"toRef",function(){return Rt}),o.d(M,"toRefs",function(){return $e}),o.d(M,"triggerRef",function(){return Un}),o.d(M,"unref",function(){return it}),o.d(M,"useAttrs",function(){return Wc}),o.d(M,"useCSSModule",function(){return ld}),o.d(M,"useCssModule",function(){return ru}),o.d(M,"useSlots",function(){return Ef}),o.d(M,"warn",function(){return T}),o.d(M,"watch",function(){return Yu}),o.d(M,"watchEffect",function(){return iu}),o.d(M,"watchPostEffect",function(){return jc}),o.d(M,"watchSyncEffect",function(){return Hu}),o.d(M,"Vue",function(){return h}),o.d(M,"Vue2",function(){return Xc}),o.d(M,"isVue2",function(){return Tf}),o.d(M,"isVue3",function(){return au}),o.d(M,"version",function(){return ka}),o.d(M,"install",function(){return _r}),o.d(M,"Fragment",function(){return wf}),o.d(M,"Transition",function(){return Mf}),o.d(M,"TransitionGroup",function(){return Cf}),o.d(M,"Teleport",function(){return Of}),o.d(M,"Suspense",function(){return Pf}),o.d(M,"KeepAlive",function(){return If}),o.d(M,"hasInjectionContext",function(){return cs});var h=o("564382267519ae7fa9d8"),v=function(z,se){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,Re){xe.__proto__=Re}||function(xe,Re){for(var Xe in Re)Object.prototype.hasOwnProperty.call(Re,Xe)&&(xe[Xe]=Re[Xe])},v(z,se)};function g(z,se){if(typeof se!="function"&&se!==null)throw new TypeError("Class extends value "+String(se)+" is not a constructor or null");v(z,se);function xe(){this.constructor=z}z.prototype=se===null?Object.create(se):(xe.prototype=se.prototype,new xe)}var m=function(){return m=Object.assign||function(se){for(var xe,Re=1,Xe=arguments.length;Re<Xe;Re++){xe=arguments[Re];for(var zt in xe)Object.prototype.hasOwnProperty.call(xe,zt)&&(se[zt]=xe[zt])}return se},m.apply(this,arguments)};function b(z){var se=typeof Symbol=="function"&&Symbol.iterator,xe=se&&z[se],Re=0;if(xe)return xe.call(z);if(z&&typeof z.length=="number")return{next:function(){return z&&Re>=z.length&&(z=void 0),{value:z&&z[Re++],done:!z}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(z,se){var xe=typeof Symbol=="function"&&z[Symbol.iterator];if(!xe)return z;var Re=xe.call(z),Xe,zt=[],At;try{for(;(se===void 0||se-- >0)&&!(Xe=Re.next()).done;)zt.push(Xe.value)}catch(at){At={error:at}}finally{try{Xe&&!Xe.done&&(xe=Re.return)&&xe.call(Re)}finally{if(At)throw At.error}}return zt}function I(z,se,xe){if(xe||arguments.length===2)for(var Re=0,Xe=se.length,zt;Re<Xe;Re++)(zt||!(Re in se))&&(zt||(zt=Array.prototype.slice.call(se,0,Re)),zt[Re]=se[Re]);return z.concat(zt||Array.prototype.slice.call(se))}function T(z){var se;q(z,(se=st())===null||se===void 0?void 0:se.proxy)}var P,D=[],U=function(){function z(se){this.active=!0,this.effects=[],this.cleanups=[],this.vm=se}return z.prototype.run=function(se){if(this.active)try{return this.on(),se()}finally{this.off()}},z.prototype.on=function(){this.active&&(D.push(this),P=this)},z.prototype.off=function(){this.active&&(D.pop(),P=D[D.length-1])},z.prototype.stop=function(){this.active&&(this.vm.$destroy(),this.effects.forEach(function(se){return se.stop()}),this.cleanups.forEach(function(se){return se()}),this.active=!1)},z}(),Y=function(z){g(se,z);function se(xe){xe===void 0&&(xe=!1);var Re=this,Xe=void 0;return Ve(function(){Xe=Oe(He())}),Re=z.call(this,Xe)||this,xe||K(Re),Re}return se}(U);function K(z,se){var xe;if(se=se||P,se&&se.active){se.effects.push(z);return}var Re=(xe=st())===null||xe===void 0?void 0:xe.proxy;Re&&Re.$on("hook:destroyed",function(){return z.stop()})}function X(z){return new Y(z)}function W(){return P}function j(z){P&&P.cleanups.push(z)}function Q(){var z,se;return((z=W())===null||z===void 0?void 0:z.vm)||((se=st())===null||se===void 0?void 0:se.proxy)}function ne(z){if(!z.scope){var se=new U(z.proxy);z.scope=se,z.proxy.$on("hook:destroyed",function(){return se.stop()})}return z.scope}var ce=void 0;try{var ee=require("vue");ee&&Fe(ee)?ce=ee:ee&&"default"in ee&&Fe(ee.default)&&(ce=ee.default)}catch{}var B=null,$=null,oe=!0,Se="__composition_api_installed__";function Fe(z){return z&&ei(z)&&z.name==="Vue"}function ct(z){return B&&Mt(z,Se)}function He(){return B}function nt(){var z=B||ce;return z}function Ae(z){B=z,Object.defineProperty(z,Se,{configurable:!0,writable:!0,value:!0})}function Ve(z){var se=oe;oe=!1;try{z()}finally{oe=se}}function Ye(z){if(oe){var se=$;se==null||se.scope.off(),$=z,$==null||$.scope.on()}}function st(){return $}var de=new WeakMap;function Ie(z){if(de.has(z))return de.get(z);var se={proxy:z,update:z.$forceUpdate,type:z.$options,uid:z._uid,emit:z.$emit.bind(z),parent:null,root:null};ne(se);var xe=["data","props","attrs","refs","vnode","slots"];return xe.forEach(function(Re){Le(se,Re,{get:function(){return z["$".concat(Re)]}})}),Le(se,"isMounted",{get:function(){return z._isMounted}}),Le(se,"isUnmounted",{get:function(){return z._isDestroyed}}),Le(se,"isDeactivated",{get:function(){return z._inactive}}),Le(se,"emitted",{get:function(){return z._events}}),de.set(z,se),z.$parent&&(se.parent=Ie(z.$parent)),z.$root&&(se.root=Ie(z.$root)),se}var be=function(z){return Object.prototype.toString.call(z)};function Ce(z){return typeof z=="function"&&/native code/.test(z.toString())}var Ue=typeof Symbol<"u"&&Ce(Symbol)&&typeof Reflect<"u"&&Ce(Reflect.ownKeys),Te=function(z){return z};function Le(z,se,xe){var Re=xe.get,Xe=xe.set;Object.defineProperty(z,se,{enumerable:!0,configurable:!0,get:Re||Te,set:Xe||Te})}function yt(z,se,xe,Re){Object.defineProperty(z,se,{value:xe,enumerable:!!Re,writable:!0,configurable:!0})}function Mt(z,se){return Object.hasOwnProperty.call(z,se)}function $t(z,se){if(!z)throw new Error("[vue-composition-api] ".concat(se))}function on(z){return typeof z=="string"||typeof z=="number"||typeof z=="symbol"||typeof z=="boolean"}function un(z){return Array.isArray(z)}var Bn=Object.prototype.toString,qn=function(z){return Bn.call(z)},Rn=function(z){return qn(z)==="[object Map]"},Fn=function(z){return qn(z)==="[object Set]"},ai=4294967295;function hi(z){var se=parseFloat(String(z));return se>=0&&Math.floor(se)===se&&isFinite(z)&&se<=ai}function Zn(z){return z!==null&&typeof z=="object"}function Yn(z){return be(z)==="[object Object]"}function ei(z){return typeof z=="function"}function ki(z){return z==null}function q(z,se){var xe=nt();!xe||!xe.util?console.warn("[vue-composition-api] ".concat(z)):xe.util.warn(z,se)}function F(z,se,xe){if(typeof window<"u"&&typeof console<"u")console.error(z);else throw z}function N(z,se){return z===se?z!==0||1/z===1/se:z!==z&&se!==se}function le(z,se){return se=se||st(),se}function Oe(z,se){se===void 0&&(se={});var xe=z.config.silent;z.config.silent=!0;var Re=new z(se);return z.config.silent=xe,Re}function re(z){var se=He();return se&&z instanceof se}function ie(z,se){return function(){for(var xe=[],Re=0;Re<arguments.length;Re++)xe[Re]=arguments[Re];if(z.$scopedSlots[se])return z.$scopedSlots[se].apply(z,xe)}}function De(z,se){var xe;if(!z)xe={};else{if(z._normalized)return z._normalized;xe={};for(var Re in z)z[Re]&&Re[0]!=="$"&&(xe[Re]=!0)}for(var Re in se)Re in xe||(xe[Re]=!0);return xe}var je,pt=function(){if(!je){var z=Oe(He(),{computed:{value:function(){return 0}}}),se=z._computedWatchers.value.constructor,xe=z._data.__ob__.dep.constructor;je={Watcher:se,Dep:xe},z.$destroy()}return je};function Pt(z){return Ue?Symbol.for(z):z}var Lt=Pt("composition-api.preFlushQueue"),jt=Pt("composition-api.postFlushQueue"),cn="composition-api.refKey",Xn=new WeakMap,Li=new WeakMap,zn=new WeakMap;function Br(z,se,xe){var Re=He(),Xe=Re.util,zt=Xe.warn,At=Xe.defineReactive,at=z.__ob__;function ln(){at&&Zn(xe)&&!Mt(xe,"__ob__")&&$r(xe)}if(un(z)){if(hi(se))return z.length=Math.max(z.length,se),z.splice(se,1,xe),ln(),xe;if(se==="length"&&xe!==z.length)return z.length=xe,at==null||at.dep.notify(),xe}return se in z&&!(se in Object.prototype)?(z[se]=xe,ln(),xe):z._isVue||at&&at.vmCount?xe:at?(At(at.value,se,xe),or(z,se,xe),ln(),at.dep.notify(),xe):(z[se]=xe,xe)}var Qn=!1;function Rs(){return Qn}function bs(z){Qn=z}var xs=function(){function z(se){var xe=se.get,Re=se.set;Le(this,"value",{get:xe,set:Re})}return z}();function ss(z,se,xe){se===void 0&&(se=!1),xe===void 0&&(xe=!1);var Re=new xs(z);xe&&(Re.effect=!0);var Xe=Object.seal(Re);return se&&zn.set(Xe,!0),Xe}function oi(z){var se;if(Me(z))return z;var xe=Ks((se={},se[cn]=z,se));return ss({get:function(){return xe[cn]},set:function(Re){return xe[cn]=Re}})}function Me(z){return z instanceof xs}function it(z){return Me(z)?z.value:z}function $e(z){if(!Yn(z))return z;var se={};for(var xe in z)se[xe]=Rt(z,xe);return se}function dt(z){var se=oi(0);return ss(z(function(){return void se.value},function(){++se.value}))}function Rt(z,se){se in z||Br(z,se,void 0);var xe=z[se];return Me(xe)?xe:ss({get:function(){return z[se]},set:function(Re){return z[se]=Re}})}function Bt(z){var se;if(Me(z))return z;var xe=ir((se={},se[cn]=z,se));return ss({get:function(){return xe[cn]},set:function(Re){return xe[cn]=Re}})}function Un(z){Me(z)&&(bs(!0),z.value=z.value,bs(!1))}function Ai(z){var se,xe,Re;if(Ti(z))return z;var Xe=Ks((se={},se[cn]=z,se));yt(Xe,cn,Xe[cn],!1);var zt=function(Kt){Le(Xe,Kt,{get:function(){return Me(Xe[cn][Kt])?Xe[cn][Kt].value:Xe[cn][Kt]},set:function(Sn){if(Me(Xe[cn][Kt]))return Xe[cn][Kt].value=it(Sn);Xe[cn][Kt]=it(Sn)}})};try{for(var At=b(Object.keys(z)),at=At.next();!at.done;at=At.next()){var ln=at.value;zt(ln)}}catch(Kt){xe={error:Kt}}finally{try{at&&!at.done&&(Re=At.return)&&Re.call(At)}finally{if(xe)throw xe.error}}return Xe}var Ji="__v_skip";function Di(z){var se;return Boolean(z&&Mt(z,"__ob__")&&typeof z.__ob__=="object"&&((se=z.__ob__)===null||se===void 0?void 0:se[Ji]))}function Ti(z){var se;return Boolean(z&&Mt(z,"__ob__")&&typeof z.__ob__=="object"&&!(!((se=z.__ob__)===null||se===void 0)&&se[Ji]))}function Ar(z){if(!(!Yn(z)||Di(z)||un(z)||Me(z)||re(z)||Xn.has(z))){Xn.set(z,!0);for(var se=Object.keys(z),xe=0;xe<se.length;xe++)or(z,se[xe])}}function or(z,se,xe){if(se!=="__ob__"&&!Di(z[se])){var Re,Xe,zt=Object.getOwnPropertyDescriptor(z,se);if(zt){if(zt.configurable===!1)return;Re=zt.get,Xe=zt.set,(!Re||Xe)&&arguments.length===2&&(xe=z[se])}Ar(xe),Le(z,se,{get:function(){var at=Re?Re.call(z):xe;return se!==cn&&Me(at)?at.value:at},set:function(at){Re&&!Xe||(se!==cn&&Me(xe)&&!Me(at)?xe.value=at:(Xe&&Xe.call(z,at),xe=at),Ar(at))}})}}function oa(z){var se=nt(),xe;if(se.observable)xe=se.observable(z);else{var Re=Oe(se,{data:{$$state:z}});xe=Re._data.$$state}return Mt(xe,"__ob__")||$r(xe),xe}function $r(z,se){var xe,Re;if(se===void 0&&(se=new Set),!(se.has(z)||Mt(z,"__ob__")||!Object.isExtensible(z))){yt(z,"__ob__",ba(z)),se.add(z);try{for(var Xe=b(Object.keys(z)),zt=Xe.next();!zt.done;zt=Xe.next()){var At=zt.value,at=z[At];!(Yn(at)||un(at))||Di(at)||!Object.isExtensible(at)||$r(at,se)}}catch(ln){xe={error:ln}}finally{try{zt&&!zt.done&&(Re=Xe.return)&&Re.call(Xe)}finally{if(xe)throw xe.error}}}}function ba(z){return z===void 0&&(z={}),{value:z,dep:{notify:Te,depend:Te,addSub:Te,removeSub:Te}}}function xa(){return oa({}).__ob__}function ir(z){var se,xe;if(!Zn(z)||!(Yn(z)||un(z))||Di(z)||!Object.isExtensible(z))return z;var Re=oa(un(z)?[]:{}),Xe=Re.__ob__,zt=function(Kt){var Sn=z[Kt],Mn,qi,ii=Object.getOwnPropertyDescriptor(z,Kt);if(ii){if(ii.configurable===!1)return"continue";Mn=ii.get,qi=ii.set}Le(Re,Kt,{get:function(){var _n;return(_n=Xe.dep)===null||_n===void 0||_n.depend(),Sn},set:function(_n){var Gr;Mn&&!qi||!Rs()&&Sn===_n||(qi?qi.call(z,_n):Sn=_n,(Gr=Xe.dep)===null||Gr===void 0||Gr.notify())}})};try{for(var At=b(Object.keys(z)),at=At.next();!at.done;at=At.next()){var ln=at.value;zt(ln)}}catch(Kt){se={error:Kt}}finally{try{at&&!at.done&&(xe=At.return)&&xe.call(At)}finally{if(se)throw se.error}}return Re}function Ks(z){if(!Zn(z)||!(Yn(z)||un(z))||Di(z)||!Object.isExtensible(z))return z;var se=oa(z);return Ar(se),se}function as(z){if(!(Yn(z)||un(z))||!Object.isExtensible(z))return z;var se=xa();return se[Ji]=!0,yt(z,"__ob__",se),Li.set(z,!0),z}function Qt(z){var se;return Di(z)||!Object.isExtensible(z)?z:((se=z==null?void 0:z.__ob__)===null||se===void 0?void 0:se.value)||z}function Ft(z){return zn.has(z)}function mn(z){return zn.set(z,!0),z}function Gn(z){var se,xe;if(!Zn(z)||!(Yn(z)||un(z))||!Object.isExtensible(z)&&!Me(z))return z;var Re=Me(z)?new xs({}):Ti(z)?oa({}):{},Xe=Ks({}),zt=Xe.__ob__,At=function(Sn){var Mn=z[Sn],qi,ii=Object.getOwnPropertyDescriptor(z,Sn);if(ii){if(ii.configurable===!1&&!Me(z))return"continue";qi=ii.get}Le(Re,Sn,{get:function(){var _n=qi?qi.call(z):Mn;return zt.dep.depend(),_n},set:function(Lr){}})};try{for(var at=b(Object.keys(z)),ln=at.next();!ln.done;ln=at.next()){var Kt=ln.value;At(Kt)}}catch(Sn){se={error:Sn}}finally{try{ln&&!ln.done&&(xe=at.return)&&xe.call(at)}finally{if(se)throw se.error}}return zn.set(Re,!0),Re}function Kn(z,se){var xe=He(),Re=xe.util.warn;if(un(z)&&hi(se)){z.splice(se,1);return}var Xe=z.__ob__;z._isVue||Xe&&Xe.vmCount||Mt(z,se)&&(delete z[se],Xe&&Xe.dep.notify())}var Tr=function(z){return"on".concat(z[0].toUpperCase()+z.slice(1))};function Wi(z){return function(se,xe){var Re=le(Tr(z),xe);return Re&&hn(He(),Re,z,se)}}function hn(z,se,xe,Re){var Xe=se.proxy.$options,zt=z.config.optionMergeStrategies[xe],At=gr(se,Re);return Xe[xe]=zt(Xe[xe],At),At}function gr(z,se){return function(){for(var xe=[],Re=0;Re<arguments.length;Re++)xe[Re]=arguments[Re];var Xe=st();Ye(z);try{return se.apply(void 0,I([],S(xe),!1))}finally{Ye(Xe)}}}var Zr=Wi("beforeMount"),$s=Wi("mounted"),ua=Wi("beforeUpdate"),Hi=Wi("updated"),mo=Wi("beforeDestroy"),go=Wi("destroyed"),tu=Wi("errorCaptured"),Ea=Wi("activated"),za=Wi("deactivated"),vo=Wi("serverPrefetch"),Vi;function li(){us(this,Lt)}function Ki(){us(this,jt)}function os(z){return z[Lt]!==void 0}function Ls(z){z[Lt]=[],z[jt]=[],z.$on("hook:beforeUpdate",li),z.$on("hook:updated",Ki)}function Sa(z){return m({immediate:!1,deep:!1,flush:"pre"},z)}function ca(z){return m({flush:"pre"},z)}function Rr(){var z=Q();return z?os(z)||Ls(z):(Vi||(Vi=Oe(He())),z=Vi),z}function us(z,se){for(var xe=z[se],Re=0;Re<xe.length;Re++)xe[Re]();xe.length=0}function _o(z,se,xe){var Re=function(){z.$nextTick(function(){z[Lt].length&&us(z,Lt),z[jt].length&&us(z,jt)})};switch(xe){case"pre":Re(),z[Lt].push(se);break;case"post":Re(),z[jt].push(se);break;default:$t(!1,'flush must be one of ["post", "pre", "sync"], but got '.concat(xe));break}}function Aa(z,se,xe,Re){var Xe=z._watchers.length;return z.$watch(se,xe,{immediate:Re.immediateInvokeCallback,deep:Re.deep,lazy:Re.noRun,sync:Re.sync,before:Re.before}),z._watchers[Xe]}function nu(z,se){var xe=z.teardown;z.teardown=function(){for(var Re=[],Xe=0;Xe<arguments.length;Xe++)Re[Xe]=arguments[Xe];xe.apply(z,Re),se()}}function yo(z,se,xe,Re){var Xe,zt=Re.flush,At=zt==="sync",at,ln=function(Yi){at=function(){try{Yi()}catch(Mr){F(Mr,z,"onCleanup()")}}},Kt=function(){at&&(at(),at=null)},Sn=function(Yi){return At||z===Vi?Yi:function(){for(var Mr=[],Va=0;Va<arguments.length;Va++)Mr[Va]=arguments[Va];return _o(z,function(){Yi.apply(void 0,I([],S(Mr),!1))},zt)}};if(xe===null){var Mn=!1,qi=function(){if(!Mn)try{Mn=!0,se(ln)}finally{Mn=!1}},ii=Aa(z,qi,Te,{deep:Re.deep||!1,sync:At,before:Kt});nu(ii,Kt),ii.lazy=!1;var Lr=ii.get.bind(ii);return ii.get=Sn(Lr),function(){ii.teardown()}}var _n=Re.deep,Gr=!1,ur;if(Me(se)?ur=function(){return se.value}:Ti(se)?(ur=function(){return se},_n=!0):un(se)?(Gr=!0,ur=function(){return se.map(function(Yi){return Me(Yi)?Yi.value:Ti(Yi)?zr(Yi):ei(Yi)?Yi():Te})}):ei(se)?ur=se:ur=Te,_n){var Ku=ur;ur=function(){return zr(Ku())}}var To=function(Yi,Mr){if(!(!_n&&Gr&&Yi.every(function(Va,$i){return N(Va,Mr[$i])})))return Kt(),xe(Yi,Mr,ln)},ou=Sn(To);if(Re.immediate){var $u=ou,uu=function(Yi,Mr){return uu=$u,To(Yi,un(Yi)?[]:Mr)};ou=function(Yi,Mr){return uu(Yi,Mr)}}var Kc=z.$watch(ur,ou,{immediate:Re.immediate,deep:_n,sync:At}),wa=z._watchers[z._watchers.length-1];return Ti(wa.value)&&(!((Xe=wa.value.__ob__)===null||Xe===void 0)&&Xe.dep)&&_n&&wa.value.__ob__.dep.addSub({update:function(){wa.run()}}),nu(wa,Kt),function(){Kc()}}function iu(z,se){var xe=ca(se),Re=Rr();return yo(Re,z,null,xe)}function jc(z){return iu(z,{flush:"post"})}function Hu(z){return iu(z,{flush:"sync"})}function Yu(z,se,xe){var Re=null;ei(se)?Re=se:(xe=se,Re=null);var Xe=Sa(xe),zt=Rr();return yo(zt,z,Re,Xe)}function zr(z,se){if(se===void 0&&(se=new Set),!Zn(z)||se.has(z)||Li.has(z))return z;if(se.add(z),Me(z))zr(z.value,se);else if(un(z))for(var xe=0;xe<z.length;xe++)zr(z[xe],se);else if(Fn(z)||Rn(z))z.forEach(function(Xe){zr(Xe,se)});else if(Yn(z))for(var Re in z)zr(z[Re],se);return z}function bo(z){var se=Q(),xe,Re;ei(z)?xe=z:(xe=z.get,Re=z.set);var Xe,zt;if(se&&!se.$isServer){var At=pt(),at=At.Watcher,ln=At.Dep,Kt;zt=function(){return Kt||(Kt=new at(se,xe,Te,{lazy:!0})),Kt.dirty&&Kt.evaluate(),ln.target&&Kt.depend(),Kt.value},Xe=function(Mn){Re&&Re(Mn)}}else{var Sn=Oe(He(),{computed:{$$state:{get:xe,set:Re}}});se&&se.$on("hook:destroyed",function(){return Sn.$destroy()}),zt=function(){return Sn.$$state},Xe=function(Mn){Sn.$$state=Mn}}return ss({get:zt,set:Xe},!Re,!0)}var xo={};function Ga(z,se){for(var xe=se;xe;){if(xe._provided&&Mt(xe._provided,z))return xe._provided[z];xe=xe.$parent}return xo}function Ta(z,se){var xe,Re=(xe=le("provide"))===null||xe===void 0?void 0:xe.proxy;if(Re){if(!Re._provided){var Xe={};Le(Re,"_provided",{get:function(){return Xe},set:function(zt){return Object.assign(Xe,zt)}})}Re._provided[z]=se}}function Eo(z,se,xe){var Re;xe===void 0&&(xe=!1);var Xe=(Re=st())===null||Re===void 0?void 0:Re.proxy;if(Xe){if(!z)return se;var zt=Ga(z,Xe);if(zt!==xo)return zt;if(arguments.length>1)return xe&&ei(se)?se():se}}var So={},ru=function(z){var se;z===void 0&&(z="$style");var xe=st();if(!xe)return So;var Re=(se=xe.proxy)===null||se===void 0?void 0:se[z];return Re||So},ld=ru;function fd(z,se){se===void 0&&(se=void 0);var xe=He(),Re=void 0,Xe={},zt={config:xe.config,use:xe.use.bind(xe),mixin:xe.mixin.bind(xe),component:xe.component.bind(xe),provide:function(At,at){return Xe[At]=at,this},directive:function(At,at){return at?(xe.directive(At,at),zt):xe.directive(At)},mount:function(At,at){return Re||(Re=new xe(m(m({propsData:se},z),{provide:m(m({},Xe),z.provide)})),Re.$mount(At,at),Re)},unmount:function(){Re&&(Re.$destroy(),Re=void 0)}};return zt}var hd=function(){for(var se,xe=[],Re=0;Re<arguments.length;Re++)xe[Re]=arguments[Re];return(se=He())===null||se===void 0?void 0:se.nextTick.apply(this,xe)},Es,Ii=function(){for(var se,xe=[],Re=0;Re<arguments.length;Re++)xe[Re]=arguments[Re];var Xe=(this===null||this===void 0?void 0:this.proxy)||((se=st())===null||se===void 0?void 0:se.proxy);return Xe?Xe.$createElement.apply(Xe,xe):(Es||(Es=Oe(He()).$createElement),Es.apply(Es,xe))};function Ef(){return la().slots}function Wc(){return la().attrs}function la(){var z=st();return z.setupContext}function Xu(z,se,xe){var Re=z.__composition_api_state__=z.__composition_api_state__||{};Re[se]=xe}function dd(z,se){return(z.__composition_api_state__||{})[se]}var vr={set:Xu,get:dd};function Ao(z,se,xe){var Re=z.$options.props;!(se in z)&&!(Re&&Mt(Re,se))&&(Me(xe)?Le(z,se,{get:function(){return xe.value},set:function(Xe){xe.value=Xe}}):Le(z,se,{get:function(){return Ti(xe)&&xe.__ob__.dep.depend(),xe},set:function(Xe){xe=Xe}}))}function pd(z){var se=vr.get(z,"rawBindings")||{};if(!(!se||!Object.keys(se).length)){for(var xe=z.$refs,Re=vr.get(z,"refs")||[],Xe=0;Xe<Re.length;Xe++){var zt=Re[Xe],At=se[zt];!xe[zt]&&At&&Me(At)&&(At.value=null)}for(var at=Object.keys(xe),ln=[],Xe=0;Xe<at.length;Xe++){var zt=at[Xe],At=se[zt];xe[zt]&&At&&Me(At)&&(At.value=xe[zt],ln.push(zt))}vr.set(z,"refs",ln)}}function su(z){for(var se=[z._vnode];se.length;){var xe=se.pop();if(xe&&(xe.context&&pd(xe.context),xe.children))for(var Re=0;Re<xe.children.length;++Re)se.push(xe.children[Re])}}function Ri(z,se){var xe,Re;if(z){var Xe=vr.get(z,"attrBindings");if(!(!Xe&&!se)){if(!Xe){var zt=Ks({});Xe={ctx:se,data:zt},vr.set(z,"attrBindings",Xe),Le(se,"attrs",{get:function(){return Xe==null?void 0:Xe.data},set:function(){}})}var At=z.$attrs,at=function(Mn){Mt(Xe.data,Mn)||Le(Xe.data,Mn,{get:function(){return z.$attrs[Mn]}})};try{for(var ln=b(Object.keys(At)),Kt=ln.next();!Kt.done;Kt=ln.next()){var Sn=Kt.value;at(Sn)}}catch(Mn){xe={error:Mn}}finally{try{Kt&&!Kt.done&&(Re=ln.return)&&Re.call(ln)}finally{if(xe)throw xe.error}}}}}function Ci(z,se){var xe=z.$options._parentVnode;if(xe){for(var Re=vr.get(z,"slots")||[],Xe=De(xe.data.scopedSlots,z.$slots),zt=0;zt<Re.length;zt++){var At=Re[zt];Xe[At]||delete se[At]}for(var at=Object.keys(Xe),zt=0;zt<at.length;zt++){var At=at[zt];se[At]||(se[At]=ie(z,At))}vr.set(z,"slots",at)}}function Hc(z,se,xe){var Re=st();Ye(z);try{return se(z)}catch(Xe){if(xe)xe(Xe);else throw Xe}finally{Ye(Re)}}function md(z){z.mixin({beforeCreate:se,mounted:function(){su(this)},beforeUpdate:function(){Ri(this)},updated:function(){su(this)}});function se(){var At=this,at=At.$options,ln=at.setup,Kt=at.render;if(Kt&&(at.render=function(){for(var Mn=this,qi=[],ii=0;ii<arguments.length;ii++)qi[ii]=arguments[ii];return Hc(Ie(At),function(){return Kt.apply(Mn,qi)})}),!!ln&&ei(ln)){var Sn=at.data;at.data=function(){return xe(At,At.$props),ei(Sn)?Sn.call(At,At):Sn||{}}}}function xe(At,at){at===void 0&&(at={});var ln=At.$options.setup,Kt=zt(At),Sn=Ie(At);Sn.setupContext=Kt,yt(at,"__ob__",xa()),Ci(At,Kt.slots);var Mn;if(Hc(Sn,function(){Mn=ln(at,Kt)}),!!Mn){if(ei(Mn)){var qi=Mn;At.$options.render=function(){return Ci(At,Kt.slots),Hc(Sn,function(){return qi()})};return}else if(Zn(Mn)){Ti(Mn)&&(Mn=$e(Mn)),vr.set(At,"rawBindings",Mn);var ii=Mn;Object.keys(ii).forEach(function(Lr){var _n=ii[Lr];if(!Me(_n))if(Ti(_n))un(_n)&&(_n=oi(_n));else if(ei(_n)){var Gr=_n;_n=_n.bind(At),Object.keys(Gr).forEach(function(ur){_n[ur]=Gr[ur]})}else Zn(_n)?Xe(_n)&&Re(_n):_n=oi(_n);Ao(At,Lr,_n)});return}}}function Re(At,at){if(at===void 0&&(at=new Set),!at.has(At)&&!(!Yn(At)||Me(At)||Ti(At)||Di(At))){var ln=He(),Kt=ln.util.defineReactive;Object.keys(At).forEach(function(Sn){var Mn=At[Sn];Kt(At,Sn,Mn),Mn&&(at.add(Mn),Re(Mn,at))})}}function Xe(At,at){return at===void 0&&(at=new Map),at.has(At)?at.get(At):(at.set(At,!1),un(At)&&Ti(At)?(at.set(At,!0),!0):!Yn(At)||Di(At)||Me(At)?!1:Object.keys(At).some(function(ln){return Xe(At[ln],at)}))}function zt(At){var at={slots:{}},ln=["root","parent","refs","listeners","isServer","ssrContext"],Kt=["emit"];return ln.forEach(function(Sn){var Mn="$".concat(Sn);Le(at,Sn,{get:function(){return At[Mn]},set:function(){}})}),Ri(At,at),Kt.forEach(function(Sn){var Mn="$".concat(Sn);Le(at,Sn,{get:function(){return function(){for(var qi=[],ii=0;ii<arguments.length;ii++)qi[ii]=arguments[ii];var Lr=At[Mn];Lr.apply(At,qi)}}})}),at}}function Sf(z,se){if(!z)return se;if(!se)return z;for(var xe,Re,Xe,zt=Ue?Reflect.ownKeys(z):Object.keys(z),At=0;At<zt.length;At++)xe=zt[At],xe!=="__ob__"&&(Re=se[xe],Xe=z[xe],Mt(se,xe)?Re!==Xe&&Yn(Re)&&!Me(Re)&&Yn(Xe)&&!Me(Xe)&&Sf(Xe,Re):se[xe]=Xe);return se}function gd(z){ct(z)||(z.config.optionMergeStrategies.setup=function(se,xe){return function(Xe,zt){return Sf(ei(se)?se(Xe,zt)||{}:void 0,ei(xe)?xe(Xe,zt)||{}:void 0)}},Ae(z),md(z))}var Yc={install:function(z){return gd(z)}};function vd(z){return z}function Af(z){ei(z)&&(z={loader:z});var se=z.loader,xe=z.loadingComponent,Re=z.errorComponent,Xe=z.delay,zt=Xe===void 0?200:Xe,At=z.timeout,at=z.suspensible,ln=at===void 0?!1:at,Kt=z.onError,Sn=null,Mn=0,qi=function(){return Mn++,Sn=null,ii()},ii=function(){var Lr;return Sn||(Lr=Sn=se().catch(function(_n){if(_n=_n instanceof Error?_n:new Error(String(_n)),Kt)return new Promise(function(Gr,ur){var Ku=function(){return Gr(qi())},To=function(){return ur(_n)};Kt(_n,Ku,To,Mn+1)});throw _n}).then(function(_n){return Lr!==Sn&&Sn?Sn:(_n&&(_n.__esModule||_n[Symbol.toStringTag]==="Module")&&(_n=_n.default),_n)}))};return function(){var Lr=ii();return{component:Lr,delay:zt,timeout:At,error:Re,loading:xe}}}var Xm="1.7.1";typeof window<"u"&&window.Vue&&window.Vue.use(Yc);function _r(z){z=z||h,z&&!z.__composition_api_installed__&&z.use(Yc)}_r(h);var Tf=!0,au=!1,Xc=h,ka=h.version;function wr(z){return{setup(){throw new Error("[vue-demi] "+z+" is not supported in Vue 2. It's provided to avoid compiler errors.")}}}var wf=wr("Fragment"),Mf=wr("Transition"),Cf=wr("TransitionGroup"),Of=wr("Teleport"),Pf=wr("Suspense"),If=wr("KeepAlive");function cs(){return!!Yc.getCurrentInstance()}},c445bef4faf25215ffcd:function(A,M){A.exports=function(o){if(o==null)throw TypeError("Can't call method on  "+o);return o}},c45f65fd1d2862799856:function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("sub",function(h){return function(){return h(this,"sub","","")}})},c470d63f7ad2f6f4b1cf:function(A,M,o){var h=o("6b2cac041904481ec760");A.exports=function(v,g){if(!h(v))return v;var m,b;if(g&&typeof(m=v.toString)=="function"&&!h(b=m.call(v))||typeof(m=v.valueOf)=="function"&&!h(b=m.call(v))||!g&&typeof(m=v.toString)=="function"&&!h(b=m.call(v)))return b;throw TypeError("Can't convert object to primitive value")}},c4afccdce7577be3341e:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("fe764323ef07c8632dee"),g=o("b69b6a982b1b19fc5d05"),m=o("45e95ff7deb186b1032c"),b=o("dff1687ed27eabf28b37"),S=o("87ca1990df7e5ce5f6d4"),I=o("0c6bdb2f1e107b092ad8"),T=o("e9323032e98511a09e82").ArrayBuffer,P=o("5760c5a16066c01be8f5"),D=g.ArrayBuffer,U=g.DataView,Y=v.ABV&&T.isView,K=D.prototype.slice,X=v.VIEW,W="ArrayBuffer";h(h.G+h.W+h.F*(T!==D),{ArrayBuffer:D}),h(h.S+h.F*!v.CONSTR,W,{isView:function(Q){return Y&&Y(Q)||I(Q)&&X in Q}}),h(h.P+h.U+h.F*o("126be16bb2f5f1c18403")(function(){return!new D(2).slice(1,void 0).byteLength}),W,{slice:function(Q,ne){if(K!==void 0&&ne===void 0)return K.call(m(this),Q);for(var ce=m(this).byteLength,ee=b(Q,ce),B=b(ne===void 0?ce:ne,ce),$=new(P(this,D))(S(B-ee)),oe=new U(this),Se=new U($),Fe=0;ee<B;)Se.setUint8(Fe++,oe.getUint8(ee++));return $}}),o("648f39bb5d52ff46b948")(W)},c4e1172cd86cf1507638:function(A,M,o){A.exports=!o("126be16bb2f5f1c18403")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},c4ff9fc90ae775b45209:function(A,M,o){"use strict";o.d(M,"a",function(){return h});const h={ARCHITECTURE:"architecture",IMPORT:"import",DTL:"dtl",CUSTOM:"custom",AGENT:"agent",PYTHON:"python"},v={TRAIN:"TRAIN",INFERENCE:"INFERENCE",DEPLOY:"DEPLOY",DEPLOY_SMART:"DEPLOY_SMART",CUSTOM:"MAIN"},g={[v.TRAIN]:"trainImage",[v.INFERENCE]:"inferenceImage",[v.DEPLOY]:"deployImage",[v.DEPLOY_SMART]:"deploySmartImage",[v.CUSTOM]:"customDockerImage"},m=Object.keys(g).reduce((b,S)=>(b[g[S]]=S,b),{})},c5b98fbfdccc42a05514:function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.P,"Function",{bind:o("a04bbd0adfe65b3c1c6b")})},c6243458ed115fa89147:function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("big",function(h){return function(){return h(this,"big","","")}})},c65a88afe77d32cdd3a1:function(A,M,o){"use strict";o.r(M),o.d(M,"SlyImageWidget",function(){return US}),o.d(M,"SlyVideoWidget",function(){return oA});var h=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{ref:"root",staticClass:"sly-img-widget"},[t("div",{staticClass:"fullsize",staticStyle:{"z-index":"1"}},[t("move-scene-tool",{attrs:{camera:r.camera,"dom-element":r.domElement,"enable-zoom":r.sceneSettings.enableZoom,"enable-pan":r.sceneSettings.enablePan},on:{tool:function(n){r.viewControls=n}}}),r._v(" "),r._t("default")],2)])},v=[];h._withStripped=!0;var g=o("c2e34caf852f605007d8"),m=o("ab553d61d5aeaf067ee3"),b=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"graphics-renderer"},[t("renderer",{staticClass:"fullsize renderer-container",attrs:{views:r.views,"show-stats":r.showStats,"viewport-optimization":r.viewportOptimization,"on-demand":r.onDemand,dpr:r.dpr},on:{renderer:function(n){r.renderer=n},"render-error":function(n){return r.emitter.emit("render-error",n)},beforeRenderView:function(n){return r.emitter.emit("beforeRenderView",n)},afterRenderView:function(n){return r.emitter.emit("afterRenderView",n)},beforeRender:function(n){return r.emitter.emit("beforeRender",n)},afterRender:function(n){return r.emitter.emit("afterRender",n)},resizeView:function(n){return r.emitter.emit("resizeView",n)},screenshot:function(n){return r.emitter.emit("screenshot",n)},"object-pick":function(n){return r.emitter.emit("object-pick",n)}}})],1)},S=[];b._withStripped=!0;var I=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"renderer",attrs:{oncontextmenu:"return false"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:r.showStats!=null,expression:"showStats != null"}],ref:"statsbar",staticClass:"statsbar"},[t("div",{staticClass:"renderInfo",on:{click:function(n){r.stats.showRenderInfo=!r.stats.showRenderInfo}}},[r.stats.showRenderInfo?r._l(r.stats.renderInfo,function(n,i){return t("div",{key:i},[r._v(`
          `+r._s(i)+": "+r._s(n)+`
        `)])}):r._e(),r._v(" "),t("div",{staticStyle:{"text-align":"center"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!r.stats.showRenderInfo,expression:"!stats.showRenderInfo"}],staticClass:"mdi mdi-arrow-down-thick"}),r._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:r.stats.showRenderInfo,expression:"stats.showRenderInfo"}],staticClass:"mdi mdi-arrow-up-thick"})])],2)]),r._v(" "),r._l(r.normViews,function(n){return t("view-effects",{key:n.id,attrs:{renderer:r.renderer,view:n,data:r.viewsData[n.id]},on:{init:function(i){return r.initViewData(n.id)},effectComposer:function(i){return r.setEffectComposer(n,i)},"dom-resize":function(i){return r.onViewResize(n)},"dom-mousemove":function(i){return r.onViewMouseMove(n,i)},destroy:function(i){return r.onViewDestroy(n)},screenshot:function(i){return r.renderSceneOnDemand({view:n})}}})}),r._v(" "),r._l(r.normViews,function(n){return t("graphics-events",{key:n.id+"-scene",attrs:{graphics:n.scene,events:"changed"},on:{changed:function(i){return r.renderSceneOnDemand({view:n})}}})}),r._v(" "),r._l(r.normViews,function(n){return t("graphics-events",{key:n.id+"-camera",attrs:{graphics:n.camera,events:"changed"},on:{changed:function(i){return r.renderSceneOnDemand({view:n,camera:n.camera,changes:i})}}})}),r._v(" "),r._t("default",null,null,r.rendererScope)],2)},T=[];I._withStripped=!0;var P=o("00f83bf39a29e0b57d1f");/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const D="148",U={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Y={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},K=0,X=1,W=2,j=3,Q=0,ne=1,ce=2,ee=3,B=0,$=1,oe=2,Se=3,Fe=0,ct=1,He=2,nt=3,Ae=4,Ve=5,Ye=100,st=101,de=102,Ie=103,be=104,Ce=200,Ue=201,Te=202,Le=203,yt=204,Mt=205,$t=206,on=207,un=208,Bn=209,qn=210,Rn=0,Fn=1,ai=2,hi=3,Zn=4,Yn=5,ei=6,ki=7,q=0,F=1,N=2,le=0,Oe=1,re=2,ie=3,De=4,je=5,pt=300,Pt=301,Lt=302,jt=303,cn=304,Xn=306,Li=1e3,zn=1001,Br=1002,Qn=1003,Rs=1004,bs=1004,xs=1005,ss=1005,oi=1006,Me=1007,it=1007,$e=1008,dt=1008,Rt=1009,Bt=1010,Un=1011,Ai=1012,Ji=1013,Di=1014,Ti=1015,Ar=1016,or=1017,oa=1018,$r=1020,ba=1021,xa=1022,ir=1023,Ks=1024,as=1025,Qt=1026,Ft=1027,mn=1028,Gn=1029,Kn=1030,Tr=1031,Wi=1033,hn=33776,gr=33777,Zr=33778,$s=33779,ua=35840,Hi=35841,mo=35842,go=35843,tu=36196,Ea=37492,za=37496,vo=37808,Vi=37809,li=37810,Ki=37811,os=37812,Ls=37813,Sa=37814,ca=37815,Rr=37816,us=37817,_o=37818,Aa=37819,nu=37820,yo=37821,iu=36492,jc=2200,Hu=2201,Yu=2202,zr=2300,bo=2301,xo=2302,Ga=2400,Ta=2401,Eo=2402,So=2500,ru=2501,ld=0,fd=1,hd=2,Es=3e3,Ii=3001,Ef=3200,Wc=3201,la=0,Xu=1,dd="",vr="srgb",Ao="srgb-linear",pd=0,su=7680,Ri=7681,Ci=7682,Hc=7683,md=34055,Sf=34056,gd=5386,Yc=512,vd=513,Af=514,Xm=515,_r=516,Tf=517,au=518,Xc=519,ka=35044,wr=35048,wf=35040,Mf=35045,Cf=35049,Of=35041,Pf=35046,If=35050,cs=35042,z="100",se="300 es",xe=1035;class Re{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,u=i.length;s<u;s++)i[s].call(this,e);e.target=null}}}const Xe=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let zt=1234567;const At=Math.PI/180,at=180/Math.PI;function ln(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Xe[r&255]+Xe[r>>8&255]+Xe[r>>16&255]+Xe[r>>24&255]+"-"+Xe[e&255]+Xe[e>>8&255]+"-"+Xe[e>>16&15|64]+Xe[e>>24&255]+"-"+Xe[t&63|128]+Xe[t>>8&255]+"-"+Xe[t>>16&255]+Xe[t>>24&255]+Xe[n&255]+Xe[n>>8&255]+Xe[n>>16&255]+Xe[n>>24&255]).toLowerCase()}function Kt(r,e,t){return Math.max(e,Math.min(t,r))}function Sn(r,e){return(r%e+e)%e}function Mn(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function qi(r,e,t){return r!==e?(t-r)/(e-r):0}function ii(r,e,t){return(1-t)*r+t*e}function Lr(r,e,t,n){return ii(r,e,1-Math.exp(-t*n))}function _n(r,e=1){return e-Math.abs(Sn(r,e*2)-e)}function Gr(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function ur(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function Ku(r,e){return r+Math.floor(Math.random()*(e-r+1))}function To(r,e){return r+Math.random()*(e-r)}function ou(r){return r*(.5-Math.random())}function $u(r){r!==void 0&&(zt=r);let e=zt+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function uu(r){return r*At}function Kc(r){return r*at}function wa(r){return(r&r-1)===0&&r!==0}function Yi(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Mr(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Va(r,e,t,n,i){const s=Math.cos,u=Math.sin,c=s(t/2),d=u(t/2),p=s((e+n)/2),_=u((e+n)/2),E=s((e-n)/2),x=u((e-n)/2),w=s((n-e)/2),R=u((n-e)/2);switch(i){case"XYX":r.set(c*_,d*E,d*x,c*p);break;case"YZY":r.set(d*x,c*_,d*E,c*p);break;case"ZXZ":r.set(d*E,d*x,c*_,c*p);break;case"XZX":r.set(c*_,d*R,d*w,c*p);break;case"YXY":r.set(d*w,c*_,d*R,c*p);break;case"ZYZ":r.set(d*R,d*w,c*_,c*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function $i(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function wi(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}var Zu=Object.freeze({__proto__:null,DEG2RAD:At,RAD2DEG:at,generateUUID:ln,clamp:Kt,euclideanModulo:Sn,mapLinear:Mn,inverseLerp:qi,lerp:ii,damp:Lr,pingpong:_n,smoothstep:Gr,smootherstep:ur,randInt:Ku,randFloat:To,randFloatSpread:ou,seededRandom:$u,degToRad:uu,radToDeg:Kc,isPowerOfTwo:wa,ceilPowerOfTwo:Yi,floorPowerOfTwo:Mr,setQuaternionFromProperEuler:Va,normalize:wi,denormalize:$i});class vt{constructor(e=0,t=0){vt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,u=this.y-e.y;return this.x=s*n-u*i+e.x,this.y=s*i+u*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class kr{constructor(){kr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,s,u,c,d,p){const _=this.elements;return _[0]=e,_[1]=i,_[2]=c,_[3]=t,_[4]=s,_[5]=d,_[6]=n,_[7]=u,_[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,u=n[0],c=n[3],d=n[6],p=n[1],_=n[4],E=n[7],x=n[2],w=n[5],R=n[8],C=i[0],O=i[3],k=i[6],J=i[1],G=i[4],H=i[7],ae=i[2],me=i[5],we=i[8];return s[0]=u*C+c*J+d*ae,s[3]=u*O+c*G+d*me,s[6]=u*k+c*H+d*we,s[1]=p*C+_*J+E*ae,s[4]=p*O+_*G+E*me,s[7]=p*k+_*H+E*we,s[2]=x*C+w*J+R*ae,s[5]=x*O+w*G+R*me,s[8]=x*k+w*H+R*we,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],u=e[4],c=e[5],d=e[6],p=e[7],_=e[8];return t*u*_-t*c*p-n*s*_+n*c*d+i*s*p-i*u*d}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],u=e[4],c=e[5],d=e[6],p=e[7],_=e[8],E=_*u-c*p,x=c*d-_*s,w=p*s-u*d,R=t*E+n*x+i*w;if(R===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/R;return e[0]=E*C,e[1]=(i*p-_*n)*C,e[2]=(c*n-i*u)*C,e[3]=x*C,e[4]=(_*t-i*d)*C,e[5]=(i*s-c*t)*C,e[6]=w*C,e[7]=(n*d-p*t)*C,e[8]=(u*t-n*s)*C,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,u,c){const d=Math.cos(s),p=Math.sin(s);return this.set(n*d,n*p,-n*(d*u+p*c)+u+e,-i*p,i*d,-i*(-p*u+d*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(Rf.makeScale(e,t)),this}rotate(e){return this.premultiply(Rf.makeRotation(-e)),this}translate(e,t){return this.premultiply(Rf.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Rf=new kr;function _d(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const Km={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function cu(r,e){return new Km[r](e)}function Qu(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Ds(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function $c(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}const Lf={[vr]:{[Ao]:Ds},[Ao]:{[vr]:$c}},Dr={legacyMode:!0,get workingColorSpace(){return Ao},set workingColorSpace(r){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(r,e,t){if(this.legacyMode||e===t||!e||!t)return r;if(Lf[e]&&Lf[e][t]!==void 0){const n=Lf[e][t];return r.r=n(r.r),r.g=n(r.g),r.b=n(r.b),r}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(r,e){return this.convert(r,this.workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this.workingColorSpace)}},Df={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fi={r:0,g:0,b:0},Ss={h:0,s:0,l:0},wo={h:0,s:0,l:0};function Ff(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}function Zc(r,e){return e.r=r.r,e.g=r.g,e.b=r.b,e}class Zt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=vr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Dr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Dr.workingColorSpace){return this.r=e,this.g=t,this.b=n,Dr.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Dr.workingColorSpace){if(e=Sn(e,1),t=Kt(t,0,1),n=Kt(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,u=2*n-s;this.r=Ff(u,s,e+1/3),this.g=Ff(u,s,e),this.b=Ff(u,s,e-1/3)}return Dr.toWorkingColorSpace(this,i),this}setStyle(e,t=vr){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const u=i[1],c=i[2];switch(u){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Dr.toWorkingColorSpace(this,t),n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Dr.toWorkingColorSpace(this,t),n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const d=parseFloat(s[1])/360,p=parseFloat(s[2])/100,_=parseFloat(s[3])/100;return n(s[4]),this.setHSL(d,p,_,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],u=s.length;if(u===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Dr.toWorkingColorSpace(this,t),this;if(u===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Dr.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=vr){const n=Df[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ds(e.r),this.g=Ds(e.g),this.b=Ds(e.b),this}copyLinearToSRGB(e){return this.r=$c(e.r),this.g=$c(e.g),this.b=$c(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=vr){return Dr.fromWorkingColorSpace(Zc(this,Fi),e),Kt(Fi.r*255,0,255)<<16^Kt(Fi.g*255,0,255)<<8^Kt(Fi.b*255,0,255)<<0}getHexString(e=vr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Dr.workingColorSpace){Dr.fromWorkingColorSpace(Zc(this,Fi),t);const n=Fi.r,i=Fi.g,s=Fi.b,u=Math.max(n,i,s),c=Math.min(n,i,s);let d,p;const _=(c+u)/2;if(c===u)d=0,p=0;else{const E=u-c;switch(p=_<=.5?E/(u+c):E/(2-u-c),u){case n:d=(i-s)/E+(i<s?6:0);break;case i:d=(s-n)/E+2;break;case s:d=(n-i)/E+4;break}d/=6}return e.h=d,e.s=p,e.l=_,e}getRGB(e,t=Dr.workingColorSpace){return Dr.fromWorkingColorSpace(Zc(this,Fi),t),e.r=Fi.r,e.g=Fi.g,e.b=Fi.b,e}getStyle(e=vr){return Dr.fromWorkingColorSpace(Zc(this,Fi),e),e!==vr?`color(${e} ${Fi.r} ${Fi.g} ${Fi.b})`:`rgb(${Fi.r*255|0},${Fi.g*255|0},${Fi.b*255|0})`}offsetHSL(e,t,n){return this.getHSL(Ss),Ss.h+=e,Ss.s+=t,Ss.l+=n,this.setHSL(Ss.h,Ss.s,Ss.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ss),e.getHSL(wo);const n=ii(Ss.h,wo.h,t),i=ii(Ss.s,wo.s,t),s=ii(Ss.l,wo.l,t);return this.setHSL(n,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Zt.NAMES=Df;let Zs;class Fs{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Zs===void 0&&(Zs=Qu("canvas")),Zs.width=e.width,Zs.height=e.height;const n=Zs.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Zs}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Qu("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let u=0;u<s.length;u++)s[u]=Ds(s[u]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ds(t[n]/255)*255):t[n]=Ds(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class lu{constructor(e=null){this.isSource=!0,this.uuid=ln(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let u=0,c=i.length;u<c;u++)i[u].isDataTexture?s.push(Uf(i[u].image)):s.push(Uf(i[u]))}else s=Uf(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function Uf(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?Fs.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $m=0;class cr extends Re{constructor(e=cr.DEFAULT_IMAGE,t=cr.DEFAULT_MAPPING,n=zn,i=zn,s=oi,u=$e,c=ir,d=Rt,p=cr.DEFAULT_ANISOTROPY,_=Es){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$m++}),this.uuid=ln(),this.name="",this.source=new lu(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=u,this.anisotropy=p,this.format=c,this.internalFormat=null,this.type=d,this.offset=new vt(0,0),this.repeat=new vt(1,1),this.center=new vt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=_,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==pt)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Li:e.x=e.x-Math.floor(e.x);break;case zn:e.x=e.x<0?0:1;break;case Br:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Li:e.y=e.y-Math.floor(e.y);break;case zn:e.y=e.y<0?0:1;break;case Br:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}cr.DEFAULT_IMAGE=null,cr.DEFAULT_MAPPING=pt,cr.DEFAULT_ANISOTROPY=1;class di{constructor(e=0,t=0,n=0,i=1){di.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,u=e.elements;return this.x=u[0]*t+u[4]*n+u[8]*i+u[12]*s,this.y=u[1]*t+u[5]*n+u[9]*i+u[13]*s,this.z=u[2]*t+u[6]*n+u[10]*i+u[14]*s,this.w=u[3]*t+u[7]*n+u[11]*i+u[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const d=e.elements,p=d[0],_=d[4],E=d[8],x=d[1],w=d[5],R=d[9],C=d[2],O=d[6],k=d[10];if(Math.abs(_-x)<.01&&Math.abs(E-C)<.01&&Math.abs(R-O)<.01){if(Math.abs(_+x)<.1&&Math.abs(E+C)<.1&&Math.abs(R+O)<.1&&Math.abs(p+w+k-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const G=(p+1)/2,H=(w+1)/2,ae=(k+1)/2,me=(_+x)/4,we=(E+C)/4,V=(R+O)/4;return G>H&&G>ae?G<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(G),i=me/n,s=we/n):H>ae?H<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(H),n=me/i,s=V/i):ae<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(ae),n=we/s,i=V/s),this.set(n,i,s,t),this}let J=Math.sqrt((O-R)*(O-R)+(E-C)*(E-C)+(x-_)*(x-_));return Math.abs(J)<.001&&(J=1),this.x=(O-R)/J,this.y=(E-C)/J,this.z=(x-_)/J,this.w=Math.acos((p+w+k-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Xi extends Re{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new di(0,0,e,t),this.scissorTest=!1,this.viewport=new di(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new cr(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:oi,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new lu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ze extends cr{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Qn,this.minFilter=Qn,this.wrapR=zn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lt extends Xi{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new ze(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Je extends cr{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Qn,this.minFilter=Qn,this.wrapR=zn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tn extends Xi{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Je(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Vn extends Xi{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let u=0;u<n;u++)this.texture[u]=s.clone(),this.texture[u].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Nn{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,u,c){let d=n[i+0],p=n[i+1],_=n[i+2],E=n[i+3];const x=s[u+0],w=s[u+1],R=s[u+2],C=s[u+3];if(c===0){e[t+0]=d,e[t+1]=p,e[t+2]=_,e[t+3]=E;return}if(c===1){e[t+0]=x,e[t+1]=w,e[t+2]=R,e[t+3]=C;return}if(E!==C||d!==x||p!==w||_!==R){let O=1-c;const k=d*x+p*w+_*R+E*C,J=k>=0?1:-1,G=1-k*k;if(G>Number.EPSILON){const ae=Math.sqrt(G),me=Math.atan2(ae,k*J);O=Math.sin(O*me)/ae,c=Math.sin(c*me)/ae}const H=c*J;if(d=d*O+x*H,p=p*O+w*H,_=_*O+R*H,E=E*O+C*H,O===1-c){const ae=1/Math.sqrt(d*d+p*p+_*_+E*E);d*=ae,p*=ae,_*=ae,E*=ae}}e[t]=d,e[t+1]=p,e[t+2]=_,e[t+3]=E}static multiplyQuaternionsFlat(e,t,n,i,s,u){const c=n[i],d=n[i+1],p=n[i+2],_=n[i+3],E=s[u],x=s[u+1],w=s[u+2],R=s[u+3];return e[t]=c*R+_*E+d*w-p*x,e[t+1]=d*R+_*x+p*E-c*w,e[t+2]=p*R+_*w+c*x-d*E,e[t+3]=_*R-c*E-d*x-p*w,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,s=e._z,u=e._order,c=Math.cos,d=Math.sin,p=c(n/2),_=c(i/2),E=c(s/2),x=d(n/2),w=d(i/2),R=d(s/2);switch(u){case"XYZ":this._x=x*_*E+p*w*R,this._y=p*w*E-x*_*R,this._z=p*_*R+x*w*E,this._w=p*_*E-x*w*R;break;case"YXZ":this._x=x*_*E+p*w*R,this._y=p*w*E-x*_*R,this._z=p*_*R-x*w*E,this._w=p*_*E+x*w*R;break;case"ZXY":this._x=x*_*E-p*w*R,this._y=p*w*E+x*_*R,this._z=p*_*R+x*w*E,this._w=p*_*E-x*w*R;break;case"ZYX":this._x=x*_*E-p*w*R,this._y=p*w*E+x*_*R,this._z=p*_*R-x*w*E,this._w=p*_*E+x*w*R;break;case"YZX":this._x=x*_*E+p*w*R,this._y=p*w*E+x*_*R,this._z=p*_*R-x*w*E,this._w=p*_*E-x*w*R;break;case"XZY":this._x=x*_*E-p*w*R,this._y=p*w*E-x*_*R,this._z=p*_*R+x*w*E,this._w=p*_*E+x*w*R;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],u=t[1],c=t[5],d=t[9],p=t[2],_=t[6],E=t[10],x=n+c+E;if(x>0){const w=.5/Math.sqrt(x+1);this._w=.25/w,this._x=(_-d)*w,this._y=(s-p)*w,this._z=(u-i)*w}else if(n>c&&n>E){const w=2*Math.sqrt(1+n-c-E);this._w=(_-d)/w,this._x=.25*w,this._y=(i+u)/w,this._z=(s+p)/w}else if(c>E){const w=2*Math.sqrt(1+c-n-E);this._w=(s-p)/w,this._x=(i+u)/w,this._y=.25*w,this._z=(d+_)/w}else{const w=2*Math.sqrt(1+E-n-c);this._w=(u-i)/w,this._x=(s+p)/w,this._y=(d+_)/w,this._z=.25*w}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Kt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,u=e._w,c=t._x,d=t._y,p=t._z,_=t._w;return this._x=n*_+u*c+i*p-s*d,this._y=i*_+u*d+s*c-n*p,this._z=s*_+u*p+n*d-i*c,this._w=u*_-n*c-i*d-s*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,u=this._w;let c=u*e._w+n*e._x+i*e._y+s*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=u,this._x=n,this._y=i,this._z=s,this;const d=1-c*c;if(d<=Number.EPSILON){const w=1-t;return this._w=w*u+t*this._w,this._x=w*n+t*this._x,this._y=w*i+t*this._y,this._z=w*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const p=Math.sqrt(d),_=Math.atan2(p,c),E=Math.sin((1-t)*_)/p,x=Math.sin(t*_)/p;return this._w=u*E+this._w*x,this._x=n*E+this._x*x,this._y=i*E+this._y*x,this._z=s*E+this._z*x,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(s),n*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class he{constructor(e=0,t=0,n=0){he.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Qc.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Qc.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,u=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*u,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*u,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*u,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,u=e.y,c=e.z,d=e.w,p=d*t+u*i-c*n,_=d*n+c*t-s*i,E=d*i+s*n-u*t,x=-s*t-u*n-c*i;return this.x=p*d+x*-s+_*-c-E*-u,this.y=_*d+x*-u+E*-s-p*-c,this.z=E*d+x*-c+p*-u-_*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,u=t.x,c=t.y,d=t.z;return this.x=i*d-s*c,this.y=s*u-n*d,this.z=n*c-i*u,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Mi.copy(this).projectOnVector(e),this.sub(Mi)}reflect(e){return this.sub(Mi.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Kt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Mi=new he,Qc=new Nn;class fa{constructor(e=new he(1/0,1/0,1/0),t=new he(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,s=-1/0,u=-1/0,c=-1/0;for(let d=0,p=e.length;d<p;d+=3){const _=e[d],E=e[d+1],x=e[d+2];_<t&&(t=_),E<n&&(n=E),x<i&&(i=x),_>s&&(s=_),E>u&&(u=E),x>c&&(c=x)}return this.min.set(t,n,i),this.max.set(s,u,c),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,s=-1/0,u=-1/0,c=-1/0;for(let d=0,p=e.count;d<p;d++){const _=e.getX(d),E=e.getY(d),x=e.getZ(d);_<t&&(t=_),E<n&&(n=E),x<i&&(i=x),_>s&&(s=_),E>u&&(u=E),x>c&&(c=x)}return this.min.set(t,n,i),this.max.set(s,u,c),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ha.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0)if(t&&n.attributes!=null&&n.attributes.position!==void 0){const s=n.attributes.position;for(let u=0,c=s.count;u<c;u++)ha.fromBufferAttribute(s,u).applyMatrix4(e.matrixWorld),this.expandByPoint(ha)}else n.boundingBox===null&&n.computeBoundingBox(),Nf.copy(n.boundingBox),Nf.applyMatrix4(e.matrixWorld),this.union(Nf);const i=e.children;for(let s=0,u=i.length;s<u;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ha),ha.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ha),Jc.subVectors(this.max,Ha),Qs.subVectors(e.a,Ha),Ma.subVectors(e.b,Ha),Ca.subVectors(e.c,Ha),pi.subVectors(Ma,Qs),ja.subVectors(Ca,Ma),Wa.subVectors(Qs,Ca);let t=[0,-pi.z,pi.y,0,-ja.z,ja.y,0,-Wa.z,Wa.y,pi.z,0,-pi.x,ja.z,0,-ja.x,Wa.z,0,-Wa.x,-pi.y,pi.x,0,-ja.y,ja.x,0,-Wa.y,Wa.x,0];return!fu(t,Qs,Ma,Ca,Jc)||(t=[1,0,0,0,1,0,0,0,1],!fu(t,Qs,Ma,Ca,Jc))?!1:(qc.crossVectors(pi,ja),t=[qc.x,qc.y,qc.z],fu(t,Qs,Ma,Ca,Jc))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ha.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(ha).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(lr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),lr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),lr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),lr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),lr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),lr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),lr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),lr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(lr),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const lr=[new he,new he,new he,new he,new he,new he,new he,new he],ha=new he,Nf=new fa,Qs=new he,Ma=new he,Ca=new he,pi=new he,ja=new he,Wa=new he,Ha=new he,Jc=new he,qc=new he,Mo=new he;function fu(r,e,t,n,i){for(let s=0,u=r.length-3;s<=u;s+=3){Mo.fromArray(r,s);const c=i.x*Math.abs(Mo.x)+i.y*Math.abs(Mo.y)+i.z*Math.abs(Mo.z),d=e.dot(Mo),p=t.dot(Mo),_=n.dot(Mo);if(Math.max(-Math.max(d,p,_),Math.min(d,p,_))>c)return!1}return!0}const Ya=new fa,Xa=new he,el=new he;class Us{constructor(e=new he,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Ya.setFromPoints(e).getCenter(n);let i=0;for(let s=0,u=e.length;s<u;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Xa.subVectors(e,this.center);const t=Xa.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Xa,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(el.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Xa.copy(e.center).add(el)),this.expandByPoint(Xa.copy(e.center).sub(el))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const da=new he,tl=new he,Co=new he,Oa=new he,Oo=new he,pa=new he,hu=new he;class nl{constructor(e=new he,t=new he(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,da)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=da.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(da.copy(this.direction).multiplyScalar(t).add(this.origin),da.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){tl.copy(e).add(t).multiplyScalar(.5),Co.copy(t).sub(e).normalize(),Oa.copy(this.origin).sub(tl);const s=e.distanceTo(t)*.5,u=-this.direction.dot(Co),c=Oa.dot(this.direction),d=-Oa.dot(Co),p=Oa.lengthSq(),_=Math.abs(1-u*u);let E,x,w,R;if(_>0)if(E=u*d-c,x=u*c-d,R=s*_,E>=0)if(x>=-R)if(x<=R){const C=1/_;E*=C,x*=C,w=E*(E+u*x+2*c)+x*(u*E+x+2*d)+p}else x=s,E=Math.max(0,-(u*x+c)),w=-E*E+x*(x+2*d)+p;else x=-s,E=Math.max(0,-(u*x+c)),w=-E*E+x*(x+2*d)+p;else x<=-R?(E=Math.max(0,-(-u*s+c)),x=E>0?-s:Math.min(Math.max(-s,-d),s),w=-E*E+x*(x+2*d)+p):x<=R?(E=0,x=Math.min(Math.max(-s,-d),s),w=x*(x+2*d)+p):(E=Math.max(0,-(u*s+c)),x=E>0?s:Math.min(Math.max(-s,-d),s),w=-E*E+x*(x+2*d)+p);else x=u>0?-s:s,E=Math.max(0,-(u*x+c)),w=-E*E+x*(x+2*d)+p;return n&&n.copy(this.direction).multiplyScalar(E).add(this.origin),i&&i.copy(Co).multiplyScalar(x).add(tl),w}intersectSphere(e,t){da.subVectors(e.center,this.origin);const n=da.dot(this.direction),i=da.dot(da)-n*n,s=e.radius*e.radius;if(i>s)return null;const u=Math.sqrt(s-i),c=n-u,d=n+u;return c<0&&d<0?null:c<0?this.at(d,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,u,c,d;const p=1/this.direction.x,_=1/this.direction.y,E=1/this.direction.z,x=this.origin;return p>=0?(n=(e.min.x-x.x)*p,i=(e.max.x-x.x)*p):(n=(e.max.x-x.x)*p,i=(e.min.x-x.x)*p),_>=0?(s=(e.min.y-x.y)*_,u=(e.max.y-x.y)*_):(s=(e.max.y-x.y)*_,u=(e.min.y-x.y)*_),n>u||s>i||((s>n||isNaN(n))&&(n=s),(u<i||isNaN(i))&&(i=u),E>=0?(c=(e.min.z-x.z)*E,d=(e.max.z-x.z)*E):(c=(e.max.z-x.z)*E,d=(e.min.z-x.z)*E),n>d||c>i)||((c>n||n!==n)&&(n=c),(d<i||i!==i)&&(i=d),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,da)!==null}intersectTriangle(e,t,n,i,s){Oo.subVectors(t,e),pa.subVectors(n,e),hu.crossVectors(Oo,pa);let u=this.direction.dot(hu),c;if(u>0){if(i)return null;c=1}else if(u<0)c=-1,u=-u;else return null;Oa.subVectors(this.origin,e);const d=c*this.direction.dot(pa.crossVectors(Oa,pa));if(d<0)return null;const p=c*this.direction.dot(Oo.cross(Oa));if(p<0||d+p>u)return null;const _=-c*Oa.dot(hu);return _<0?null:this.at(_/u,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class kn{constructor(){kn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,s,u,c,d,p,_,E,x,w,R,C,O){const k=this.elements;return k[0]=e,k[4]=t,k[8]=n,k[12]=i,k[1]=s,k[5]=u,k[9]=c,k[13]=d,k[2]=p,k[6]=_,k[10]=E,k[14]=x,k[3]=w,k[7]=R,k[11]=C,k[15]=O,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new kn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/du.setFromMatrixColumn(e,0).length(),s=1/du.setFromMatrixColumn(e,1).length(),u=1/du.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*u,t[9]=n[9]*u,t[10]=n[10]*u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,u=Math.cos(n),c=Math.sin(n),d=Math.cos(i),p=Math.sin(i),_=Math.cos(s),E=Math.sin(s);if(e.order==="XYZ"){const x=u*_,w=u*E,R=c*_,C=c*E;t[0]=d*_,t[4]=-d*E,t[8]=p,t[1]=w+R*p,t[5]=x-C*p,t[9]=-c*d,t[2]=C-x*p,t[6]=R+w*p,t[10]=u*d}else if(e.order==="YXZ"){const x=d*_,w=d*E,R=p*_,C=p*E;t[0]=x+C*c,t[4]=R*c-w,t[8]=u*p,t[1]=u*E,t[5]=u*_,t[9]=-c,t[2]=w*c-R,t[6]=C+x*c,t[10]=u*d}else if(e.order==="ZXY"){const x=d*_,w=d*E,R=p*_,C=p*E;t[0]=x-C*c,t[4]=-u*E,t[8]=R+w*c,t[1]=w+R*c,t[5]=u*_,t[9]=C-x*c,t[2]=-u*p,t[6]=c,t[10]=u*d}else if(e.order==="ZYX"){const x=u*_,w=u*E,R=c*_,C=c*E;t[0]=d*_,t[4]=R*p-w,t[8]=x*p+C,t[1]=d*E,t[5]=C*p+x,t[9]=w*p-R,t[2]=-p,t[6]=c*d,t[10]=u*d}else if(e.order==="YZX"){const x=u*d,w=u*p,R=c*d,C=c*p;t[0]=d*_,t[4]=C-x*E,t[8]=R*E+w,t[1]=E,t[5]=u*_,t[9]=-c*_,t[2]=-p*_,t[6]=w*E+R,t[10]=x-C*E}else if(e.order==="XZY"){const x=u*d,w=u*p,R=c*d,C=c*p;t[0]=d*_,t[4]=-E,t[8]=p*_,t[1]=x*E+C,t[5]=u*_,t[9]=w*E-R,t[2]=R*E-w,t[6]=c*_,t[10]=C*E+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(il,e,Bf)}lookAt(e,t,n){const i=this.elements;return As.subVectors(e,t),As.lengthSq()===0&&(As.z=1),As.normalize(),Ka.crossVectors(n,As),Ka.lengthSq()===0&&(Math.abs(n.z)===1?As.x+=1e-4:As.z+=1e-4,As.normalize(),Ka.crossVectors(n,As)),Ka.normalize(),rl.crossVectors(As,Ka),i[0]=Ka.x,i[4]=rl.x,i[8]=As.x,i[1]=Ka.y,i[5]=rl.y,i[9]=As.y,i[2]=Ka.z,i[6]=rl.z,i[10]=As.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,u=n[0],c=n[4],d=n[8],p=n[12],_=n[1],E=n[5],x=n[9],w=n[13],R=n[2],C=n[6],O=n[10],k=n[14],J=n[3],G=n[7],H=n[11],ae=n[15],me=i[0],we=i[4],V=i[8],pe=i[12],ve=i[1],Ge=i[5],ot=i[9],We=i[13],Ne=i[2],rt=i[6],ut=i[10],It=i[14],Et=i[3],tt=i[7],Qe=i[11],qe=i[15];return s[0]=u*me+c*ve+d*Ne+p*Et,s[4]=u*we+c*Ge+d*rt+p*tt,s[8]=u*V+c*ot+d*ut+p*Qe,s[12]=u*pe+c*We+d*It+p*qe,s[1]=_*me+E*ve+x*Ne+w*Et,s[5]=_*we+E*Ge+x*rt+w*tt,s[9]=_*V+E*ot+x*ut+w*Qe,s[13]=_*pe+E*We+x*It+w*qe,s[2]=R*me+C*ve+O*Ne+k*Et,s[6]=R*we+C*Ge+O*rt+k*tt,s[10]=R*V+C*ot+O*ut+k*Qe,s[14]=R*pe+C*We+O*It+k*qe,s[3]=J*me+G*ve+H*Ne+ae*Et,s[7]=J*we+G*Ge+H*rt+ae*tt,s[11]=J*V+G*ot+H*ut+ae*Qe,s[15]=J*pe+G*We+H*It+ae*qe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],u=e[1],c=e[5],d=e[9],p=e[13],_=e[2],E=e[6],x=e[10],w=e[14],R=e[3],C=e[7],O=e[11],k=e[15];return R*(+s*d*E-i*p*E-s*c*x+n*p*x+i*c*w-n*d*w)+C*(+t*d*w-t*p*x+s*u*x-i*u*w+i*p*_-s*d*_)+O*(+t*p*E-t*c*w-s*u*E+n*u*w+s*c*_-n*p*_)+k*(-i*c*_-t*d*E+t*c*x+i*u*E-n*u*x+n*d*_)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],u=e[4],c=e[5],d=e[6],p=e[7],_=e[8],E=e[9],x=e[10],w=e[11],R=e[12],C=e[13],O=e[14],k=e[15],J=E*O*p-C*x*p+C*d*w-c*O*w-E*d*k+c*x*k,G=R*x*p-_*O*p-R*d*w+u*O*w+_*d*k-u*x*k,H=_*C*p-R*E*p+R*c*w-u*C*w-_*c*k+u*E*k,ae=R*E*d-_*C*d-R*c*x+u*C*x+_*c*O-u*E*O,me=t*J+n*G+i*H+s*ae;if(me===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const we=1/me;return e[0]=J*we,e[1]=(C*x*s-E*O*s-C*i*w+n*O*w+E*i*k-n*x*k)*we,e[2]=(c*O*s-C*d*s+C*i*p-n*O*p-c*i*k+n*d*k)*we,e[3]=(E*d*s-c*x*s-E*i*p+n*x*p+c*i*w-n*d*w)*we,e[4]=G*we,e[5]=(_*O*s-R*x*s+R*i*w-t*O*w-_*i*k+t*x*k)*we,e[6]=(R*d*s-u*O*s-R*i*p+t*O*p+u*i*k-t*d*k)*we,e[7]=(u*x*s-_*d*s+_*i*p-t*x*p-u*i*w+t*d*w)*we,e[8]=H*we,e[9]=(R*E*s-_*C*s-R*n*w+t*C*w+_*n*k-t*E*k)*we,e[10]=(u*C*s-R*c*s+R*n*p-t*C*p-u*n*k+t*c*k)*we,e[11]=(_*c*s-u*E*s-_*n*p+t*E*p+u*n*w-t*c*w)*we,e[12]=ae*we,e[13]=(_*C*i-R*E*i+R*n*x-t*C*x-_*n*O+t*E*O)*we,e[14]=(R*c*i-u*C*i-R*n*d+t*C*d+u*n*O-t*c*O)*we,e[15]=(u*E*i-_*c*i+_*n*d-t*E*d-u*n*x+t*c*x)*we,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,u=e.x,c=e.y,d=e.z,p=s*u,_=s*c;return this.set(p*u+n,p*c-i*d,p*d+i*c,0,p*c+i*d,_*c+n,_*d-i*u,0,p*d-i*c,_*d+i*u,s*d*d+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,u){return this.set(1,n,s,0,e,1,u,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,u=t._y,c=t._z,d=t._w,p=s+s,_=u+u,E=c+c,x=s*p,w=s*_,R=s*E,C=u*_,O=u*E,k=c*E,J=d*p,G=d*_,H=d*E,ae=n.x,me=n.y,we=n.z;return i[0]=(1-(C+k))*ae,i[1]=(w+H)*ae,i[2]=(R-G)*ae,i[3]=0,i[4]=(w-H)*me,i[5]=(1-(x+k))*me,i[6]=(O+J)*me,i[7]=0,i[8]=(R+G)*we,i[9]=(O-J)*we,i[10]=(1-(x+C))*we,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=du.set(i[0],i[1],i[2]).length();const u=du.set(i[4],i[5],i[6]).length(),c=du.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ls.copy(this);const p=1/s,_=1/u,E=1/c;return ls.elements[0]*=p,ls.elements[1]*=p,ls.elements[2]*=p,ls.elements[4]*=_,ls.elements[5]*=_,ls.elements[6]*=_,ls.elements[8]*=E,ls.elements[9]*=E,ls.elements[10]*=E,t.setFromRotationMatrix(ls),n.x=s,n.y=u,n.z=c,this}makePerspective(e,t,n,i,s,u){const c=this.elements,d=2*s/(t-e),p=2*s/(n-i),_=(t+e)/(t-e),E=(n+i)/(n-i),x=-(u+s)/(u-s),w=-2*u*s/(u-s);return c[0]=d,c[4]=0,c[8]=_,c[12]=0,c[1]=0,c[5]=p,c[9]=E,c[13]=0,c[2]=0,c[6]=0,c[10]=x,c[14]=w,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,i,s,u){const c=this.elements,d=1/(t-e),p=1/(n-i),_=1/(u-s),E=(t+e)*d,x=(n+i)*p,w=(u+s)*_;return c[0]=2*d,c[4]=0,c[8]=0,c[12]=-E,c[1]=0,c[5]=2*p,c[9]=0,c[13]=-x,c[2]=0,c[6]=0,c[10]=-2*_,c[14]=-w,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const du=new he,ls=new kn,il=new he(0,0,0),Bf=new he(1,1,1),Ka=new he,rl=new he,As=new he,yd=new kn,fr=new Nn;class rr{constructor(e=0,t=0,n=0,i=rr.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],u=i[4],c=i[8],d=i[1],p=i[5],_=i[9],E=i[2],x=i[6],w=i[10];switch(t){case"XYZ":this._y=Math.asin(Kt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-_,w),this._z=Math.atan2(-u,s)):(this._x=Math.atan2(x,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Kt(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(c,w),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-E,s),this._z=0);break;case"ZXY":this._x=Math.asin(Kt(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-E,w),this._z=Math.atan2(-u,p)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-Kt(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(x,w),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-u,p));break;case"YZX":this._z=Math.asin(Kt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-_,p),this._y=Math.atan2(-E,s)):(this._x=0,this._y=Math.atan2(c,w));break;case"XZY":this._z=Math.asin(-Kt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(x,p),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-_,w),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return yd.makeRotationFromQuaternion(e),this.setFromRotationMatrix(yd,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return fr.setFromEuler(this),this.setFromQuaternion(fr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}rr.DefaultOrder="XYZ",rr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class zf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Zm=0;const Gf=new he,pu=new Nn,Js=new kn,$a=new he,Po=new he,mu=new he,Ju=new Nn,gu=new he(1,0,0),qu=new he(0,1,0),vu=new he(0,0,1),Qm={type:"added"},bd={type:"removed"};class ui extends Re{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Zm++}),this.uuid=ln(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ui.DefaultUp.clone();const e=new he,t=new rr,n=new Nn,i=new he(1,1,1);function s(){n.setFromEuler(t,!1)}function u(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new kn},normalMatrix:{value:new kr}}),this.matrix=new kn,this.matrixWorld=new kn,this.matrixAutoUpdate=ui.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ui.DefaultMatrixWorldAutoUpdate,this.layers=new zf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return pu.setFromAxisAngle(e,t),this.quaternion.multiply(pu),this}rotateOnWorldAxis(e,t){return pu.setFromAxisAngle(e,t),this.quaternion.premultiply(pu),this}rotateX(e){return this.rotateOnAxis(gu,e)}rotateY(e){return this.rotateOnAxis(qu,e)}rotateZ(e){return this.rotateOnAxis(vu,e)}translateOnAxis(e,t){return Gf.copy(e).applyQuaternion(this.quaternion),this.position.add(Gf.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(gu,e)}translateY(e){return this.translateOnAxis(qu,e)}translateZ(e){return this.translateOnAxis(vu,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Js.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?$a.copy(e):$a.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Po.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Js.lookAt(Po,$a,this.up):Js.lookAt($a,Po,this.up),this.quaternion.setFromRotationMatrix(Js),i&&(Js.extractRotation(i.matrixWorld),pu.setFromRotationMatrix(Js),this.quaternion.premultiply(pu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Qm)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(bd)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(bd)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Js.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Js.multiply(e.parent.matrixWorld)),e.applyMatrix4(Js),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const u=this.children[n].getObjectByProperty(e,t);if(u!==void 0)return u}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,s=this.children.length;i<s;i++){const u=this.children[i].getObjectsByProperty(e,t);u.length>0&&(n=n.concat(u))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Po,e,mu),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Po,Ju,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,u=i.length;s<u;s++){const c=i[s];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(c,d){return c[d.uuid]===void 0&&(c[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const d=c.shapes;if(Array.isArray(d))for(let p=0,_=d.length;p<_;p++){const E=d[p];s(e.shapes,E)}else s(e.shapes,d)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let d=0,p=this.material.length;d<p;d++)c.push(s(e.materials,this.material[d]));i.material=c}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let c=0;c<this.children.length;c++)i.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let c=0;c<this.animations.length;c++){const d=this.animations[c];i.animations.push(s(e.animations,d))}}if(t){const c=u(e.geometries),d=u(e.materials),p=u(e.textures),_=u(e.images),E=u(e.shapes),x=u(e.skeletons),w=u(e.animations),R=u(e.nodes);c.length>0&&(n.geometries=c),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),_.length>0&&(n.images=_),E.length>0&&(n.shapes=E),x.length>0&&(n.skeletons=x),w.length>0&&(n.animations=w),R.length>0&&(n.nodes=R)}return n.object=i,n;function u(c){const d=[];for(const p in c){const _=c[p];delete _.metadata,d.push(_)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}ui.DefaultUp=new he(0,1,0),ui.DefaultMatrixAutoUpdate=!0,ui.DefaultMatrixWorldAutoUpdate=!0;const qs=new he,Pa=new he,_u=new he,Ts=new he,Io=new he,te=new he,Ro=new he,yu=new he,fs=new he,ti=new he;class ea{constructor(e=new he,t=new he,n=new he){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),qs.subVectors(e,t),i.cross(qs);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){qs.subVectors(i,t),Pa.subVectors(n,t),_u.subVectors(e,t);const u=qs.dot(qs),c=qs.dot(Pa),d=qs.dot(_u),p=Pa.dot(Pa),_=Pa.dot(_u),E=u*p-c*c;if(E===0)return s.set(-2,-1,-1);const x=1/E,w=(p*d-c*_)*x,R=(u*_-c*d)*x;return s.set(1-w-R,R,w)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Ts),Ts.x>=0&&Ts.y>=0&&Ts.x+Ts.y<=1}static getUV(e,t,n,i,s,u,c,d){return this.getBarycoord(e,t,n,i,Ts),d.set(0,0),d.addScaledVector(s,Ts.x),d.addScaledVector(u,Ts.y),d.addScaledVector(c,Ts.z),d}static isFrontFacing(e,t,n,i){return qs.subVectors(n,t),Pa.subVectors(e,t),qs.cross(Pa).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qs.subVectors(this.c,this.b),Pa.subVectors(this.a,this.b),qs.cross(Pa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ea.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ea.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,s){return ea.getUV(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return ea.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ea.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let u,c;Io.subVectors(i,n),te.subVectors(s,n),yu.subVectors(e,n);const d=Io.dot(yu),p=te.dot(yu);if(d<=0&&p<=0)return t.copy(n);fs.subVectors(e,i);const _=Io.dot(fs),E=te.dot(fs);if(_>=0&&E<=_)return t.copy(i);const x=d*E-_*p;if(x<=0&&d>=0&&_<=0)return u=d/(d-_),t.copy(n).addScaledVector(Io,u);ti.subVectors(e,s);const w=Io.dot(ti),R=te.dot(ti);if(R>=0&&w<=R)return t.copy(s);const C=w*p-d*R;if(C<=0&&p>=0&&R<=0)return c=p/(p-R),t.copy(n).addScaledVector(te,c);const O=_*R-w*E;if(O<=0&&E-_>=0&&w-R>=0)return Ro.subVectors(s,i),c=(E-_)/(E-_+(w-R)),t.copy(i).addScaledVector(Ro,c);const k=1/(O+C+x);return u=C*k,c=x*k,t.copy(n).addScaledVector(Io,u).addScaledVector(te,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Jm=0;class Qr extends Re{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Jm++}),this.uuid=ln(),this.name="",this.type="Material",this.blending=ct,this.side=B,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=yt,this.blendDst=Mt,this.blendEquation=Ye,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=hi,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Xc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=su,this.stencilZFail=su,this.stencilZPass=su,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ct&&(n.blending=this.blending),this.side!==B&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const u=[];for(const c in s){const d=s[c];delete d.metadata,u.push(d)}return u}if(t){const s=i(e.textures),u=i(e.images);s.length>0&&(n.textures=s),u.length>0&&(n.images=u)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class er extends Qr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const hr=new he,sl=new vt;class Ui{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=ka,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)sl.fromBufferAttribute(this,t),sl.applyMatrix3(e),this.setXY(t,sl.x,sl.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)hr.fromBufferAttribute(this,t),hr.applyMatrix3(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)hr.fromBufferAttribute(this,t),hr.applyMatrix4(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)hr.fromBufferAttribute(this,t),hr.applyNormalMatrix(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)hr.fromBufferAttribute(this,t),hr.transformDirection(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=$i(t,this.array)),t}setX(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=$i(t,this.array)),t}setY(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=$i(t,this.array)),t}setZ(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=$i(t,this.array)),t}setW(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array),i=wi(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array),i=wi(i,this.array),s=wi(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ka&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class R_ extends Ui{constructor(e,t,n){super(new Int8Array(e),t,n)}}class L_ extends Ui{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Za extends Ui{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class D_ extends Ui{constructor(e,t,n){super(new Int16Array(e),t,n)}}class xd extends Ui{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class F_ extends Ui{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Ed extends Ui{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class U_ extends Ui{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}}class Jt extends Ui{constructor(e,t,n){super(new Float32Array(e),t,n)}}class N_ extends Ui{constructor(e,t,n){super(new Float64Array(e),t,n)}}let qm=0;const Ns=new kn,kf=new ui,bu=new he,yr=new fa,ec=new fa,Cr=new he;class An extends Re{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:qm++}),this.uuid=ln(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(_d(e)?Ed:xd)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new kr().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ns.makeRotationFromQuaternion(e),this.applyMatrix4(Ns),this}rotateX(e){return Ns.makeRotationX(e),this.applyMatrix4(Ns),this}rotateY(e){return Ns.makeRotationY(e),this.applyMatrix4(Ns),this}rotateZ(e){return Ns.makeRotationZ(e),this.applyMatrix4(Ns),this}translate(e,t,n){return Ns.makeTranslation(e,t,n),this.applyMatrix4(Ns),this}scale(e,t,n){return Ns.makeScale(e,t,n),this.applyMatrix4(Ns),this}lookAt(e){return kf.lookAt(e),kf.updateMatrix(),this.applyMatrix4(kf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bu).negate(),this.translate(bu.x,bu.y,bu.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Jt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new he(-1/0,-1/0,-1/0),new he(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];yr.setFromBufferAttribute(s),this.morphTargetsRelative?(Cr.addVectors(this.boundingBox.min,yr.min),this.boundingBox.expandByPoint(Cr),Cr.addVectors(this.boundingBox.max,yr.max),this.boundingBox.expandByPoint(Cr)):(this.boundingBox.expandByPoint(yr.min),this.boundingBox.expandByPoint(yr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Us);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new he,1/0);return}if(e){const n=this.boundingSphere.center;if(yr.setFromBufferAttribute(e),t)for(let s=0,u=t.length;s<u;s++){const c=t[s];ec.setFromBufferAttribute(c),this.morphTargetsRelative?(Cr.addVectors(yr.min,ec.min),yr.expandByPoint(Cr),Cr.addVectors(yr.max,ec.max),yr.expandByPoint(Cr)):(yr.expandByPoint(ec.min),yr.expandByPoint(ec.max))}yr.getCenter(n);let i=0;for(let s=0,u=e.count;s<u;s++)Cr.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Cr));if(t)for(let s=0,u=t.length;s<u;s++){const c=t[s],d=this.morphTargetsRelative;for(let p=0,_=c.count;p<_;p++)Cr.fromBufferAttribute(c,p),d&&(bu.fromBufferAttribute(e,p),Cr.add(bu)),i=Math.max(i,n.distanceToSquared(Cr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,s=t.normal.array,u=t.uv.array,c=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ui(new Float32Array(4*c),4));const d=this.getAttribute("tangent").array,p=[],_=[];for(let ve=0;ve<c;ve++)p[ve]=new he,_[ve]=new he;const E=new he,x=new he,w=new he,R=new vt,C=new vt,O=new vt,k=new he,J=new he;function G(ve,Ge,ot){E.fromArray(i,ve*3),x.fromArray(i,Ge*3),w.fromArray(i,ot*3),R.fromArray(u,ve*2),C.fromArray(u,Ge*2),O.fromArray(u,ot*2),x.sub(E),w.sub(E),C.sub(R),O.sub(R);const We=1/(C.x*O.y-O.x*C.y);isFinite(We)&&(k.copy(x).multiplyScalar(O.y).addScaledVector(w,-C.y).multiplyScalar(We),J.copy(w).multiplyScalar(C.x).addScaledVector(x,-O.x).multiplyScalar(We),p[ve].add(k),p[Ge].add(k),p[ot].add(k),_[ve].add(J),_[Ge].add(J),_[ot].add(J))}let H=this.groups;H.length===0&&(H=[{start:0,count:n.length}]);for(let ve=0,Ge=H.length;ve<Ge;++ve){const ot=H[ve],We=ot.start,Ne=ot.count;for(let rt=We,ut=We+Ne;rt<ut;rt+=3)G(n[rt+0],n[rt+1],n[rt+2])}const ae=new he,me=new he,we=new he,V=new he;function pe(ve){we.fromArray(s,ve*3),V.copy(we);const Ge=p[ve];ae.copy(Ge),ae.sub(we.multiplyScalar(we.dot(Ge))).normalize(),me.crossVectors(V,Ge);const We=me.dot(_[ve])<0?-1:1;d[ve*4]=ae.x,d[ve*4+1]=ae.y,d[ve*4+2]=ae.z,d[ve*4+3]=We}for(let ve=0,Ge=H.length;ve<Ge;++ve){const ot=H[ve],We=ot.start,Ne=ot.count;for(let rt=We,ut=We+Ne;rt<ut;rt+=3)pe(n[rt+0]),pe(n[rt+1]),pe(n[rt+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ui(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let x=0,w=n.count;x<w;x++)n.setXYZ(x,0,0,0);const i=new he,s=new he,u=new he,c=new he,d=new he,p=new he,_=new he,E=new he;if(e)for(let x=0,w=e.count;x<w;x+=3){const R=e.getX(x+0),C=e.getX(x+1),O=e.getX(x+2);i.fromBufferAttribute(t,R),s.fromBufferAttribute(t,C),u.fromBufferAttribute(t,O),_.subVectors(u,s),E.subVectors(i,s),_.cross(E),c.fromBufferAttribute(n,R),d.fromBufferAttribute(n,C),p.fromBufferAttribute(n,O),c.add(_),d.add(_),p.add(_),n.setXYZ(R,c.x,c.y,c.z),n.setXYZ(C,d.x,d.y,d.z),n.setXYZ(O,p.x,p.y,p.z)}else for(let x=0,w=t.count;x<w;x+=3)i.fromBufferAttribute(t,x+0),s.fromBufferAttribute(t,x+1),u.fromBufferAttribute(t,x+2),_.subVectors(u,s),E.subVectors(i,s),_.cross(E),n.setXYZ(x+0,_.x,_.y,_.z),n.setXYZ(x+1,_.x,_.y,_.z),n.setXYZ(x+2,_.x,_.y,_.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Cr.fromBufferAttribute(e,t),Cr.normalize(),e.setXYZ(t,Cr.x,Cr.y,Cr.z)}toNonIndexed(){function e(c,d){const p=c.array,_=c.itemSize,E=c.normalized,x=new p.constructor(d.length*_);let w=0,R=0;for(let C=0,O=d.length;C<O;C++){c.isInterleavedBufferAttribute?w=d[C]*c.data.stride+c.offset:w=d[C]*_;for(let k=0;k<_;k++)x[R++]=p[w++]}return new Ui(x,_,E)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new An,n=this.index.array,i=this.attributes;for(const c in i){const d=i[c],p=e(d,n);t.setAttribute(c,p)}const s=this.morphAttributes;for(const c in s){const d=[],p=s[c];for(let _=0,E=p.length;_<E;_++){const x=p[_],w=e(x,n);d.push(w)}t.morphAttributes[c]=d}t.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let c=0,d=u.length;c<d;c++){const p=u[c];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const d in n){const p=n[d];e.data.attributes[d]=p.toJSON(e.data)}const i={};let s=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],_=[];for(let E=0,x=p.length;E<x;E++){const w=p[E];_.push(w.toJSON(e.data))}_.length>0&&(i[d]=_,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const p in i){const _=i[p];this.setAttribute(p,_.clone(t))}const s=e.morphAttributes;for(const p in s){const _=[],E=s[p];for(let x=0,w=E.length;x<w;x++)_.push(E[x].clone(t));this.morphAttributes[p]=_}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let p=0,_=u.length;p<_;p++){const E=u[p];this.addGroup(E.start,E.count,E.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Sd=new kn,xu=new nl,Vf=new Us,tc=new he,nc=new he,Eu=new he,al=new he,ol=new he,ul=new vt,Su=new vt,Qa=new vt,Au=new he,cl=new he;class dr extends ui{constructor(e=new An,t=new er){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,u=i.length;s<u;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,u=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const c=this.morphTargetInfluences;if(s&&c){ol.set(0,0,0);for(let d=0,p=s.length;d<p;d++){const _=c[d],E=s[d];_!==0&&(al.fromBufferAttribute(E,e),u?ol.addScaledVector(al,_):ol.addScaledVector(al.sub(t),_))}t.add(ol)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Vf.copy(n.boundingSphere),Vf.applyMatrix4(s),e.ray.intersectsSphere(Vf)===!1)||(Sd.copy(s).invert(),xu.copy(e.ray).applyMatrix4(Sd),n.boundingBox!==null&&xu.intersectsBox(n.boundingBox)===!1))return;let u;const c=n.index,d=n.attributes.position,p=n.attributes.uv,_=n.attributes.uv2,E=n.groups,x=n.drawRange;if(c!==null)if(Array.isArray(i))for(let w=0,R=E.length;w<R;w++){const C=E[w],O=i[C.materialIndex],k=Math.max(C.start,x.start),J=Math.min(c.count,Math.min(C.start+C.count,x.start+x.count));for(let G=k,H=J;G<H;G+=3){const ae=c.getX(G),me=c.getX(G+1),we=c.getX(G+2);u=Bs(this,O,e,xu,p,_,ae,me,we),u&&(u.faceIndex=Math.floor(G/3),u.face.materialIndex=C.materialIndex,t.push(u))}}else{const w=Math.max(0,x.start),R=Math.min(c.count,x.start+x.count);for(let C=w,O=R;C<O;C+=3){const k=c.getX(C),J=c.getX(C+1),G=c.getX(C+2);u=Bs(this,i,e,xu,p,_,k,J,G),u&&(u.faceIndex=Math.floor(C/3),t.push(u))}}else if(d!==void 0)if(Array.isArray(i))for(let w=0,R=E.length;w<R;w++){const C=E[w],O=i[C.materialIndex],k=Math.max(C.start,x.start),J=Math.min(d.count,Math.min(C.start+C.count,x.start+x.count));for(let G=k,H=J;G<H;G+=3){const ae=G,me=G+1,we=G+2;u=Bs(this,O,e,xu,p,_,ae,me,we),u&&(u.faceIndex=Math.floor(G/3),u.face.materialIndex=C.materialIndex,t.push(u))}}else{const w=Math.max(0,x.start),R=Math.min(d.count,x.start+x.count);for(let C=w,O=R;C<O;C+=3){const k=C,J=C+1,G=C+2;u=Bs(this,i,e,xu,p,_,k,J,G),u&&(u.faceIndex=Math.floor(C/3),t.push(u))}}}}function eg(r,e,t,n,i,s,u,c){let d;if(e.side===$?d=n.intersectTriangle(u,s,i,!0,c):d=n.intersectTriangle(i,s,u,e.side===B,c),d===null)return null;cl.copy(c),cl.applyMatrix4(r.matrixWorld);const p=t.ray.origin.distanceTo(cl);return p<t.near||p>t.far?null:{distance:p,point:cl.clone(),object:r}}function Bs(r,e,t,n,i,s,u,c,d){r.getVertexPosition(u,tc),r.getVertexPosition(c,nc),r.getVertexPosition(d,Eu);const p=eg(r,e,t,n,tc,nc,Eu,Au);if(p){i&&(ul.fromBufferAttribute(i,u),Su.fromBufferAttribute(i,c),Qa.fromBufferAttribute(i,d),p.uv=ea.getUV(Au,tc,nc,Eu,ul,Su,Qa,new vt)),s&&(ul.fromBufferAttribute(s,u),Su.fromBufferAttribute(s,c),Qa.fromBufferAttribute(s,d),p.uv2=ea.getUV(Au,tc,nc,Eu,ul,Su,Qa,new vt));const _={a:u,b:c,c:d,normal:new he,materialIndex:0};ea.getNormal(tc,nc,Eu,_.normal),p.face=_}return p}class ma extends An{constructor(e=1,t=1,n=1,i=1,s=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:u};const c=this;i=Math.floor(i),s=Math.floor(s),u=Math.floor(u);const d=[],p=[],_=[],E=[];let x=0,w=0;R("z","y","x",-1,-1,n,t,e,u,s,0),R("z","y","x",1,-1,n,t,-e,u,s,1),R("x","z","y",1,1,e,n,t,i,u,2),R("x","z","y",1,-1,e,n,-t,i,u,3),R("x","y","z",1,-1,e,t,n,i,s,4),R("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(d),this.setAttribute("position",new Jt(p,3)),this.setAttribute("normal",new Jt(_,3)),this.setAttribute("uv",new Jt(E,2));function R(C,O,k,J,G,H,ae,me,we,V,pe){const ve=H/we,Ge=ae/V,ot=H/2,We=ae/2,Ne=me/2,rt=we+1,ut=V+1;let It=0,Et=0;const tt=new he;for(let Qe=0;Qe<ut;Qe++){const qe=Qe*Ge-We;for(let et=0;et<rt;et++){const Ut=et*ve-ot;tt[C]=Ut*J,tt[O]=qe*G,tt[k]=Ne,p.push(tt.x,tt.y,tt.z),tt[C]=0,tt[O]=0,tt[k]=me>0?1:-1,_.push(tt.x,tt.y,tt.z),E.push(et/we),E.push(1-Qe/V),It+=1}}for(let Qe=0;Qe<V;Qe++)for(let qe=0;qe<we;qe++){const et=x+qe+rt*Qe,Ut=x+qe+rt*(Qe+1),Dt=x+(qe+1)+rt*(Qe+1),Yt=x+(qe+1)+rt*Qe;d.push(et,Ut,Yt),d.push(Ut,Dt,Yt),Et+=6}c.addGroup(w,Et,pe),w+=Et,x+=It}}static fromJSON(e){return new ma(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zs(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Ni(r){const e={};for(let t=0;t<r.length;t++){const n=zs(r[t]);for(const i in n)e[i]=n[i]}return e}function tg(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function jf(r){return r.getRenderTarget()===null&&r.outputEncoding===Ii?vr:Ao}const Ia={clone:zs,merge:Ni};var ic=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ja=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Zi extends Qr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ic,this.fragmentShader=Ja,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zs(e.uniforms),this.uniformsGroups=tg(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const u=this.uniforms[i].value;u&&u.isTexture?t.uniforms[i]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?t.uniforms[i]={type:"c",value:u.getHex()}:u&&u.isVector2?t.uniforms[i]={type:"v2",value:u.toArray()}:u&&u.isVector3?t.uniforms[i]={type:"v3",value:u.toArray()}:u&&u.isVector4?t.uniforms[i]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?t.uniforms[i]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?t.uniforms[i]={type:"m4",value:u.toArray()}:t.uniforms[i]={value:u}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ll extends ui{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new kn,this.projectionMatrix=new kn,this.projectionMatrixInverse=new kn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class pr extends ll{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=at*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(At*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return at*2*Math.atan(Math.tan(At*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,s,u){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(At*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const u=this.view;if(this.view!==null&&this.view.enabled){const d=u.fullWidth,p=u.fullHeight;s+=u.offsetX*i/d,t-=u.offsetY*n/p,i*=u.width/d,n*=u.height/p}const c=this.filmOffset;c!==0&&(s+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Tu=-90,Lo=1;class Fr extends ui{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const i=new pr(Tu,Lo,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new pr(Tu,Lo,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const u=new pr(Tu,Lo,e,t);u.layers=this.layers,u.up.set(0,0,-1),u.lookAt(0,1,0),this.add(u);const c=new pr(Tu,Lo,e,t);c.layers=this.layers,c.up.set(0,0,1),c.lookAt(0,-1,0),this.add(c);const d=new pr(Tu,Lo,e,t);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(0,0,1),this.add(d);const p=new pr(Tu,Lo,e,t);p.layers=this.layers,p.up.set(0,1,0),p.lookAt(0,0,-1),this.add(p)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[i,s,u,c,d,p]=this.children,_=e.getRenderTarget(),E=e.toneMapping,x=e.xr.enabled;e.toneMapping=le,e.xr.enabled=!1;const w=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,u),e.setRenderTarget(n,3),e.render(t,c),e.setRenderTarget(n,4),e.render(t,d),n.texture.generateMipmaps=w,e.setRenderTarget(n,5),e.render(t,p),e.setRenderTarget(_),e.toneMapping=E,e.xr.enabled=x,n.texture.needsPMREMUpdate=!0}}class wu extends cr{constructor(e,t,n,i,s,u,c,d,p,_){e=e!==void 0?e:[],t=t!==void 0?t:Pt,super(e,t,n,i,s,u,c,d,p,_),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Ad extends Xi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new wu(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:oi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ma(5,5,5),s=new Zi({name:"CubemapFromEquirect",uniforms:zs(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:$,blending:Fe});s.uniforms.tEquirect.value=t;const u=new dr(i,s),c=t.minFilter;return t.minFilter===$e&&(t.minFilter=oi),new Fr(1,10,this).update(e,u),t.minFilter=c,u.geometry.dispose(),u.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(t,n,i);e.setRenderTarget(s)}}const Gs=new he,Wf=new he,fl=new kr;class ks{constructor(e=new he(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Gs.subVectors(n,t).cross(Wf.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Gs),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(n).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||fl.getNormalMatrix(e),i=this.coplanarPoint(Gs).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Do=new Us,Or=new he;class rc{constructor(e=new ks,t=new ks,n=new ks,i=new ks,s=new ks,u=new ks){this.planes=[e,t,n,i,s,u]}set(e,t,n,i,s,u){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(i),c[4].copy(s),c[5].copy(u),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],s=n[1],u=n[2],c=n[3],d=n[4],p=n[5],_=n[6],E=n[7],x=n[8],w=n[9],R=n[10],C=n[11],O=n[12],k=n[13],J=n[14],G=n[15];return t[0].setComponents(c-i,E-d,C-x,G-O).normalize(),t[1].setComponents(c+i,E+d,C+x,G+O).normalize(),t[2].setComponents(c+s,E+p,C+w,G+k).normalize(),t[3].setComponents(c-s,E-p,C-w,G-k).normalize(),t[4].setComponents(c-u,E-_,C-R,G-J).normalize(),t[5].setComponents(c+u,E+_,C+R,G+J).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Do.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Do)}intersectsSprite(e){return Do.center.set(0,0,0),Do.radius=.7071067811865476,Do.applyMatrix4(e.matrixWorld),this.intersectsSphere(Do)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Or.x=i.normal.x>0?e.max.x:e.min.x,Or.y=i.normal.y>0?e.max.y:e.min.y,Or.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Or)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Td(){let r=null,e=!1,t=null,n=null;function i(s,u){t(s,u),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function ng(r,e){const t=e.isWebGL2,n=new WeakMap;function i(p,_){const E=p.array,x=p.usage,w=r.createBuffer();r.bindBuffer(_,w),r.bufferData(_,E,x),p.onUploadCallback();let R;if(E instanceof Float32Array)R=5126;else if(E instanceof Uint16Array)if(p.isFloat16BufferAttribute)if(t)R=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else R=5123;else if(E instanceof Int16Array)R=5122;else if(E instanceof Uint32Array)R=5125;else if(E instanceof Int32Array)R=5124;else if(E instanceof Int8Array)R=5120;else if(E instanceof Uint8Array)R=5121;else if(E instanceof Uint8ClampedArray)R=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+E);return{buffer:w,type:R,bytesPerElement:E.BYTES_PER_ELEMENT,version:p.version}}function s(p,_,E){const x=_.array,w=_.updateRange;r.bindBuffer(E,p),w.count===-1?r.bufferSubData(E,0,x):(t?r.bufferSubData(E,w.offset*x.BYTES_PER_ELEMENT,x,w.offset,w.count):r.bufferSubData(E,w.offset*x.BYTES_PER_ELEMENT,x.subarray(w.offset,w.offset+w.count)),w.count=-1),_.onUploadCallback()}function u(p){return p.isInterleavedBufferAttribute&&(p=p.data),n.get(p)}function c(p){p.isInterleavedBufferAttribute&&(p=p.data);const _=n.get(p);_&&(r.deleteBuffer(_.buffer),n.delete(p))}function d(p,_){if(p.isGLBufferAttribute){const x=n.get(p);(!x||x.version<p.version)&&n.set(p,{buffer:p.buffer,type:p.type,bytesPerElement:p.elementSize,version:p.version});return}p.isInterleavedBufferAttribute&&(p=p.data);const E=n.get(p);E===void 0?n.set(p,i(p,_)):E.version<p.version&&(s(E.buffer,p,_),E.version=p.version)}return{get:u,remove:c,update:d}}class qa extends An{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,u=t/2,c=Math.floor(n),d=Math.floor(i),p=c+1,_=d+1,E=e/c,x=t/d,w=[],R=[],C=[],O=[];for(let k=0;k<_;k++){const J=k*x-u;for(let G=0;G<p;G++){const H=G*E-s;R.push(H,-J,0),C.push(0,0,1),O.push(G/c),O.push(1-k/d)}}for(let k=0;k<d;k++)for(let J=0;J<c;J++){const G=J+p*k,H=J+p*(k+1),ae=J+1+p*(k+1),me=J+1+p*k;w.push(G,H,me),w.push(H,ae,me)}this.setIndex(w),this.setAttribute("position",new Jt(R,3)),this.setAttribute("normal",new Jt(C,3)),this.setAttribute("uv",new Jt(O,2))}static fromJSON(e){return new qa(e.width,e.height,e.widthSegments,e.heightSegments)}}var Hf=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,ig=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sc=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,wd=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,rg=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,sg=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ac="vec3 transformed = vec3( position );",ag=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,og=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Yf=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Md=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ug=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,cg=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,lg=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Cd=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Xf=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,fg=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Kf=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Od=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Pd=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Id=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,hl=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,hg=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Rd=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Ld=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dg=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Dd="gl_FragColor = linearToOutputTexel( gl_FragColor );",pg=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,$f=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Fd=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Zf=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,mg=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Qf=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Jn=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,gg=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,vg=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,oc=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ud=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_g=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,yg=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Vs=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,bg=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dl=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Jf=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Nd=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Bd=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,ws=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,eo=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,qf=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,zd=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,pl=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Gd=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,eh=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,kd=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,th=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nh=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,to=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,xg=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,no=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Eg=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Vd=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ih=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Sg=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ag=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Tg=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,jd=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Wd=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,wg=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Hd=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Yd=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hs=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ga=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Mg=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Cg=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,ml=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Mu=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Xd=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Kd=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Og=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,$d=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Cu=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,uc=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Pg=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Zd=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Qd=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,gl=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Jd=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,vl=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,rh=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_l=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ig=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,qd=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,yl=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ep=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,sh=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Rg=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tp=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ra=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,np=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,ip=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Lg=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,rp=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Dg=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Fg=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,La=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,ah=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const On={alphamap_fragment:Hf,alphamap_pars_fragment:ig,alphatest_fragment:sc,alphatest_pars_fragment:wd,aomap_fragment:rg,aomap_pars_fragment:sg,begin_vertex:ac,beginnormal_vertex:ag,bsdfs:og,iridescence_fragment:Yf,bumpmap_pars_fragment:Md,clipping_planes_fragment:ug,clipping_planes_pars_fragment:cg,clipping_planes_pars_vertex:lg,clipping_planes_vertex:Cd,color_fragment:Xf,color_pars_fragment:fg,color_pars_vertex:Kf,color_vertex:Od,common:Pd,cube_uv_reflection_fragment:Id,defaultnormal_vertex:hl,displacementmap_pars_vertex:hg,displacementmap_vertex:Rd,emissivemap_fragment:Ld,emissivemap_pars_fragment:dg,encodings_fragment:Dd,encodings_pars_fragment:pg,envmap_fragment:$f,envmap_common_pars_fragment:Fd,envmap_pars_fragment:Zf,envmap_pars_vertex:mg,envmap_physical_pars_fragment:Jf,envmap_vertex:Qf,fog_vertex:Jn,fog_pars_vertex:gg,fog_fragment:vg,fog_pars_fragment:oc,gradientmap_pars_fragment:Ud,lightmap_fragment:_g,lightmap_pars_fragment:yg,lights_lambert_fragment:Vs,lights_lambert_pars_fragment:bg,lights_pars_begin:dl,lights_toon_fragment:Nd,lights_toon_pars_fragment:Bd,lights_phong_fragment:ws,lights_phong_pars_fragment:eo,lights_physical_fragment:qf,lights_physical_pars_fragment:zd,lights_fragment_begin:pl,lights_fragment_maps:Gd,lights_fragment_end:eh,logdepthbuf_fragment:kd,logdepthbuf_pars_fragment:th,logdepthbuf_pars_vertex:nh,logdepthbuf_vertex:to,map_fragment:xg,map_pars_fragment:no,map_particle_fragment:Eg,map_particle_pars_fragment:Vd,metalnessmap_fragment:ih,metalnessmap_pars_fragment:Sg,morphcolor_vertex:Ag,morphnormal_vertex:Tg,morphtarget_pars_vertex:jd,morphtarget_vertex:Wd,normal_fragment_begin:wg,normal_fragment_maps:Hd,normal_pars_fragment:Yd,normal_pars_vertex:hs,normal_vertex:ga,normalmap_pars_fragment:Mg,clearcoat_normal_fragment_begin:Cg,clearcoat_normal_fragment_maps:ml,clearcoat_pars_fragment:Mu,iridescence_pars_fragment:Xd,output_fragment:Kd,packing:Og,premultiplied_alpha_fragment:$d,project_vertex:Cu,dithering_fragment:uc,dithering_pars_fragment:Pg,roughnessmap_fragment:Zd,roughnessmap_pars_fragment:Qd,shadowmap_pars_fragment:gl,shadowmap_pars_vertex:Jd,shadowmap_vertex:vl,shadowmask_pars_fragment:rh,skinbase_vertex:_l,skinning_pars_vertex:Ig,skinning_vertex:qd,skinnormal_vertex:yl,specularmap_fragment:ep,specularmap_pars_fragment:sh,tonemapping_fragment:Rg,tonemapping_pars_fragment:tp,transmission_fragment:Ra,transmission_pars_fragment:np,uv_pars_fragment:ip,uv_pars_vertex:Lg,uv_vertex:rp,uv2_pars_fragment:Dg,uv2_pars_vertex:Fg,uv2_vertex:La,worldpos_vertex:ah,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`},Gt={common:{diffuse:{value:new Zt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new kr},uv2Transform:{value:new kr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new vt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new kr}},sprite:{diffuse:{value:new Zt(16777215)},opacity:{value:1},center:{value:new vt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new kr}}},Vr={basic:{uniforms:Ni([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.fog]),vertexShader:On.meshbasic_vert,fragmentShader:On.meshbasic_frag},lambert:{uniforms:Ni([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,Gt.lights,{emissive:{value:new Zt(0)}}]),vertexShader:On.meshlambert_vert,fragmentShader:On.meshlambert_frag},phong:{uniforms:Ni([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,Gt.lights,{emissive:{value:new Zt(0)},specular:{value:new Zt(1118481)},shininess:{value:30}}]),vertexShader:On.meshphong_vert,fragmentShader:On.meshphong_frag},standard:{uniforms:Ni([Gt.common,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.roughnessmap,Gt.metalnessmap,Gt.fog,Gt.lights,{emissive:{value:new Zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag},toon:{uniforms:Ni([Gt.common,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.gradientmap,Gt.fog,Gt.lights,{emissive:{value:new Zt(0)}}]),vertexShader:On.meshtoon_vert,fragmentShader:On.meshtoon_frag},matcap:{uniforms:Ni([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,{matcap:{value:null}}]),vertexShader:On.meshmatcap_vert,fragmentShader:On.meshmatcap_frag},points:{uniforms:Ni([Gt.points,Gt.fog]),vertexShader:On.points_vert,fragmentShader:On.points_frag},dashed:{uniforms:Ni([Gt.common,Gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:On.linedashed_vert,fragmentShader:On.linedashed_frag},depth:{uniforms:Ni([Gt.common,Gt.displacementmap]),vertexShader:On.depth_vert,fragmentShader:On.depth_frag},normal:{uniforms:Ni([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,{opacity:{value:1}}]),vertexShader:On.meshnormal_vert,fragmentShader:On.meshnormal_frag},sprite:{uniforms:Ni([Gt.sprite,Gt.fog]),vertexShader:On.sprite_vert,fragmentShader:On.sprite_frag},background:{uniforms:{uvTransform:{value:new kr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:On.background_vert,fragmentShader:On.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:On.backgroundCube_vert,fragmentShader:On.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:On.cube_vert,fragmentShader:On.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:On.equirect_vert,fragmentShader:On.equirect_frag},distanceRGBA:{uniforms:Ni([Gt.common,Gt.displacementmap,{referencePosition:{value:new he},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:On.distanceRGBA_vert,fragmentShader:On.distanceRGBA_frag},shadow:{uniforms:Ni([Gt.lights,Gt.fog,{color:{value:new Zt(0)},opacity:{value:1}}]),vertexShader:On.shadow_vert,fragmentShader:On.shadow_frag}};Vr.physical={uniforms:Ni([Vr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new vt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Zt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new vt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Zt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Zt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag};const lc={r:0,b:0,g:0};function fc(r,e,t,n,i,s,u){const c=new Zt(0);let d=s===!0?0:1,p,_,E=null,x=0,w=null;function R(O,k){let J=!1,G=k.isScene===!0?k.background:null;G&&G.isTexture&&(G=(k.backgroundBlurriness>0?t:e).get(G));const H=r.xr,ae=H.getSession&&H.getSession();ae&&ae.environmentBlendMode==="additive"&&(G=null),G===null?C(c,d):G&&G.isColor&&(C(G,1),J=!0),(r.autoClear||J)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),G&&(G.isCubeTexture||G.mapping===Xn)?(_===void 0&&(_=new dr(new ma(1,1,1),new Zi({name:"BackgroundCubeMaterial",uniforms:zs(Vr.backgroundCube.uniforms),vertexShader:Vr.backgroundCube.vertexShader,fragmentShader:Vr.backgroundCube.fragmentShader,side:$,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),_.geometry.deleteAttribute("uv"),_.onBeforeRender=function(me,we,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(_.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(_)),_.material.uniforms.envMap.value=G,_.material.uniforms.flipEnvMap.value=G.isCubeTexture&&G.isRenderTargetTexture===!1?-1:1,_.material.uniforms.backgroundBlurriness.value=k.backgroundBlurriness,_.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,_.material.toneMapped=G.encoding!==Ii,(E!==G||x!==G.version||w!==r.toneMapping)&&(_.material.needsUpdate=!0,E=G,x=G.version,w=r.toneMapping),_.layers.enableAll(),O.unshift(_,_.geometry,_.material,0,0,null)):G&&G.isTexture&&(p===void 0&&(p=new dr(new qa(2,2),new Zi({name:"BackgroundMaterial",uniforms:zs(Vr.background.uniforms),vertexShader:Vr.background.vertexShader,fragmentShader:Vr.background.fragmentShader,side:B,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(p)),p.material.uniforms.t2D.value=G,p.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,p.material.toneMapped=G.encoding!==Ii,G.matrixAutoUpdate===!0&&G.updateMatrix(),p.material.uniforms.uvTransform.value.copy(G.matrix),(E!==G||x!==G.version||w!==r.toneMapping)&&(p.material.needsUpdate=!0,E=G,x=G.version,w=r.toneMapping),p.layers.enableAll(),O.unshift(p,p.geometry,p.material,0,0,null))}function C(O,k){O.getRGB(lc,jf(r)),n.buffers.color.setClear(lc.r,lc.g,lc.b,k,u)}return{getClearColor:function(){return c},setClearColor:function(O,k=1){c.set(O),d=k,C(c,d)},getClearAlpha:function(){return d},setClearAlpha:function(O){d=O,C(c,d)},render:R}}function ch(r,e,t,n){const i=r.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),u=n.isWebGL2||s!==null,c={},d=O(null);let p=d,_=!1;function E(Ne,rt,ut,It,Et){let tt=!1;if(u){const Qe=C(It,ut,rt);p!==Qe&&(p=Qe,w(p.object)),tt=k(Ne,It,ut,Et),tt&&J(Ne,It,ut,Et)}else{const Qe=rt.wireframe===!0;(p.geometry!==It.id||p.program!==ut.id||p.wireframe!==Qe)&&(p.geometry=It.id,p.program=ut.id,p.wireframe=Qe,tt=!0)}Et!==null&&t.update(Et,34963),(tt||_)&&(_=!1,V(Ne,rt,ut,It),Et!==null&&r.bindBuffer(34963,t.get(Et).buffer))}function x(){return n.isWebGL2?r.createVertexArray():s.createVertexArrayOES()}function w(Ne){return n.isWebGL2?r.bindVertexArray(Ne):s.bindVertexArrayOES(Ne)}function R(Ne){return n.isWebGL2?r.deleteVertexArray(Ne):s.deleteVertexArrayOES(Ne)}function C(Ne,rt,ut){const It=ut.wireframe===!0;let Et=c[Ne.id];Et===void 0&&(Et={},c[Ne.id]=Et);let tt=Et[rt.id];tt===void 0&&(tt={},Et[rt.id]=tt);let Qe=tt[It];return Qe===void 0&&(Qe=O(x()),tt[It]=Qe),Qe}function O(Ne){const rt=[],ut=[],It=[];for(let Et=0;Et<i;Et++)rt[Et]=0,ut[Et]=0,It[Et]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:rt,enabledAttributes:ut,attributeDivisors:It,object:Ne,attributes:{},index:null}}function k(Ne,rt,ut,It){const Et=p.attributes,tt=rt.attributes;let Qe=0;const qe=ut.getAttributes();for(const et in qe)if(qe[et].location>=0){const Dt=Et[et];let Yt=tt[et];if(Yt===void 0&&(et==="instanceMatrix"&&Ne.instanceMatrix&&(Yt=Ne.instanceMatrix),et==="instanceColor"&&Ne.instanceColor&&(Yt=Ne.instanceColor)),Dt===void 0||Dt.attribute!==Yt||Yt&&Dt.data!==Yt.data)return!0;Qe++}return p.attributesNum!==Qe||p.index!==It}function J(Ne,rt,ut,It){const Et={},tt=rt.attributes;let Qe=0;const qe=ut.getAttributes();for(const et in qe)if(qe[et].location>=0){let Dt=tt[et];Dt===void 0&&(et==="instanceMatrix"&&Ne.instanceMatrix&&(Dt=Ne.instanceMatrix),et==="instanceColor"&&Ne.instanceColor&&(Dt=Ne.instanceColor));const Yt={};Yt.attribute=Dt,Dt&&Dt.data&&(Yt.data=Dt.data),Et[et]=Yt,Qe++}p.attributes=Et,p.attributesNum=Qe,p.index=It}function G(){const Ne=p.newAttributes;for(let rt=0,ut=Ne.length;rt<ut;rt++)Ne[rt]=0}function H(Ne){ae(Ne,0)}function ae(Ne,rt){const ut=p.newAttributes,It=p.enabledAttributes,Et=p.attributeDivisors;ut[Ne]=1,It[Ne]===0&&(r.enableVertexAttribArray(Ne),It[Ne]=1),Et[Ne]!==rt&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ne,rt),Et[Ne]=rt)}function me(){const Ne=p.newAttributes,rt=p.enabledAttributes;for(let ut=0,It=rt.length;ut<It;ut++)rt[ut]!==Ne[ut]&&(r.disableVertexAttribArray(ut),rt[ut]=0)}function we(Ne,rt,ut,It,Et,tt){n.isWebGL2===!0&&(ut===5124||ut===5125)?r.vertexAttribIPointer(Ne,rt,ut,Et,tt):r.vertexAttribPointer(Ne,rt,ut,It,Et,tt)}function V(Ne,rt,ut,It){if(n.isWebGL2===!1&&(Ne.isInstancedMesh||It.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;G();const Et=It.attributes,tt=ut.getAttributes(),Qe=rt.defaultAttributeValues;for(const qe in tt){const et=tt[qe];if(et.location>=0){let Ut=Et[qe];if(Ut===void 0&&(qe==="instanceMatrix"&&Ne.instanceMatrix&&(Ut=Ne.instanceMatrix),qe==="instanceColor"&&Ne.instanceColor&&(Ut=Ne.instanceColor)),Ut!==void 0){const Dt=Ut.normalized,Yt=Ut.itemSize,ft=t.get(Ut);if(ft===void 0)continue;const Ln=ft.buffer,rn=ft.type,sn=ft.bytesPerElement;if(Ut.isInterleavedBufferAttribute){const Wt=Ut.data,Pn=Wt.stride,wt=Ut.offset;if(Wt.isInstancedInterleavedBuffer){for(let bt=0;bt<et.locationSize;bt++)ae(et.location+bt,Wt.meshPerAttribute);Ne.isInstancedMesh!==!0&&It._maxInstanceCount===void 0&&(It._maxInstanceCount=Wt.meshPerAttribute*Wt.count)}else for(let bt=0;bt<et.locationSize;bt++)H(et.location+bt);r.bindBuffer(34962,Ln);for(let bt=0;bt<et.locationSize;bt++)we(et.location+bt,Yt/et.locationSize,rn,Dt,Pn*sn,(wt+Yt/et.locationSize*bt)*sn)}else{if(Ut.isInstancedBufferAttribute){for(let Wt=0;Wt<et.locationSize;Wt++)ae(et.location+Wt,Ut.meshPerAttribute);Ne.isInstancedMesh!==!0&&It._maxInstanceCount===void 0&&(It._maxInstanceCount=Ut.meshPerAttribute*Ut.count)}else for(let Wt=0;Wt<et.locationSize;Wt++)H(et.location+Wt);r.bindBuffer(34962,Ln);for(let Wt=0;Wt<et.locationSize;Wt++)we(et.location+Wt,Yt/et.locationSize,rn,Dt,Yt*sn,Yt/et.locationSize*Wt*sn)}}else if(Qe!==void 0){const Dt=Qe[qe];if(Dt!==void 0)switch(Dt.length){case 2:r.vertexAttrib2fv(et.location,Dt);break;case 3:r.vertexAttrib3fv(et.location,Dt);break;case 4:r.vertexAttrib4fv(et.location,Dt);break;default:r.vertexAttrib1fv(et.location,Dt)}}}}me()}function pe(){ot();for(const Ne in c){const rt=c[Ne];for(const ut in rt){const It=rt[ut];for(const Et in It)R(It[Et].object),delete It[Et];delete rt[ut]}delete c[Ne]}}function ve(Ne){if(c[Ne.id]===void 0)return;const rt=c[Ne.id];for(const ut in rt){const It=rt[ut];for(const Et in It)R(It[Et].object),delete It[Et];delete rt[ut]}delete c[Ne.id]}function Ge(Ne){for(const rt in c){const ut=c[rt];if(ut[Ne.id]===void 0)continue;const It=ut[Ne.id];for(const Et in It)R(It[Et].object),delete It[Et];delete ut[Ne.id]}}function ot(){We(),_=!0,p!==d&&(p=d,w(p.object))}function We(){d.geometry=null,d.program=null,d.wireframe=!1}return{setup:E,reset:ot,resetDefaultState:We,dispose:pe,releaseStatesOfGeometry:ve,releaseStatesOfProgram:Ge,initAttributes:G,enableAttribute:H,disableUnusedAttributes:me}}function fp(r,e,t,n){const i=n.isWebGL2;let s;function u(p){s=p}function c(p,_){r.drawArrays(s,p,_),t.update(_,s,1)}function d(p,_,E){if(E===0)return;let x,w;if(i)x=r,w="drawArraysInstanced";else if(x=e.get("ANGLE_instanced_arrays"),w="drawArraysInstancedANGLE",x===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[w](s,p,_,E),t.update(_,s,E)}this.setMode=u,this.render=c,this.renderInstances=d}function hp(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const we=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(we.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(we){if(we==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";we="mediump"}return we==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const u=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext;let c=t.precision!==void 0?t.precision:"highp";const d=s(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const p=u||e.has("WEBGL_draw_buffers"),_=t.logarithmicDepthBuffer===!0,E=r.getParameter(34930),x=r.getParameter(35660),w=r.getParameter(3379),R=r.getParameter(34076),C=r.getParameter(34921),O=r.getParameter(36347),k=r.getParameter(36348),J=r.getParameter(36349),G=x>0,H=u||e.has("OES_texture_float"),ae=G&&H,me=u?r.getParameter(36183):0;return{isWebGL2:u,drawBuffers:p,getMaxAnisotropy:i,getMaxPrecision:s,precision:c,logarithmicDepthBuffer:_,maxTextures:E,maxVertexTextures:x,maxTextureSize:w,maxCubemapSize:R,maxAttributes:C,maxVertexUniforms:O,maxVaryings:k,maxFragmentUniforms:J,vertexTextures:G,floatFragmentTextures:H,floatVertexTextures:ae,maxSamples:me}}function xl(r){const e=this;let t=null,n=0,i=!1,s=!1;const u=new ks,c=new kr,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(E,x,w){const R=E.length!==0||x||n!==0||i;return i=x,t=_(E,w,0),n=E.length,R},this.beginShadows=function(){s=!0,_(null)},this.endShadows=function(){s=!1,p()},this.setState=function(E,x,w){const R=E.clippingPlanes,C=E.clipIntersection,O=E.clipShadows,k=r.get(E);if(!i||R===null||R.length===0||s&&!O)s?_(null):p();else{const J=s?0:n,G=J*4;let H=k.clippingState||null;d.value=H,H=_(R,x,G,w);for(let ae=0;ae!==G;++ae)H[ae]=t[ae];k.clippingState=H,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=J}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function _(E,x,w,R){const C=E!==null?E.length:0;let O=null;if(C!==0){if(O=d.value,R!==!0||O===null){const k=w+C*4,J=x.matrixWorldInverse;c.getNormalMatrix(J),(O===null||O.length<k)&&(O=new Float32Array(k));for(let G=0,H=w;G!==C;++G,H+=4)u.copy(E[G]).applyMatrix4(J,c),u.normal.toArray(O,H),O[H+3]=u.constant}d.value=O,d.needsUpdate=!0}return e.numPlanes=C,e.numIntersection=0,O}}function dp(r){let e=new WeakMap;function t(u,c){return c===jt?u.mapping=Pt:c===cn&&(u.mapping=Lt),u}function n(u){if(u&&u.isTexture&&u.isRenderTargetTexture===!1){const c=u.mapping;if(c===jt||c===cn)if(e.has(u)){const d=e.get(u).texture;return t(d,u.mapping)}else{const d=u.image;if(d&&d.height>0){const p=new Ad(d.height/2);return p.fromEquirectangularTexture(r,u),e.set(u,p),u.addEventListener("dispose",i),t(p.texture,u.mapping)}else return null}}return u}function i(u){const c=u.target;c.removeEventListener("dispose",i);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class qr extends ll{constructor(e=-1,t=1,n=1,i=-1,s=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=u,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,u=n+e,c=i+t,d=i-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,u=s+p*this.view.width,c-=_*this.view.offsetY,d=c-_*this.view.height}this.projectionMatrix.makeOrthographic(s,u,c,d,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const js=4,pp=[.125,.215,.35,.446,.526,.582],ro=20,lh=new qr,mp=new Zt;let fh=null;const Fo=(1+Math.sqrt(5))/2,Pu=1/Fo,gp=[new he(1,1,1),new he(-1,1,1),new he(1,1,-1),new he(-1,1,-1),new he(0,Fo,Pu),new he(0,Fo,-Pu),new he(Pu,0,Fo),new he(-Pu,0,Fo),new he(Fo,Pu,0),new he(-Fo,Pu,0)];class vp{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){fh=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=dh(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=hh(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(fh),e.scissorTest=!1,El(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Pt||e.mapping===Lt?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),fh=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:Ar,format:ir,encoding:Es,depthBuffer:!1},i=_p(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_p(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=kg(s)),this._blurMaterial=Vg(s,e,t)}return i}_compileMaterial(e){const t=new dr(this._lodPlanes[0],e);this._renderer.compile(t,lh)}_sceneToCubeUV(e,t,n,i){const c=new pr(90,1,t,n),d=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],_=this._renderer,E=_.autoClear,x=_.toneMapping;_.getClearColor(mp),_.toneMapping=le,_.autoClear=!1;const w=new er({name:"PMREM.Background",side:$,depthWrite:!1,depthTest:!1}),R=new dr(new ma,w);let C=!1;const O=e.background;O?O.isColor&&(w.color.copy(O),e.background=null,C=!0):(w.color.copy(mp),C=!0);for(let k=0;k<6;k++){const J=k%3;J===0?(c.up.set(0,d[k],0),c.lookAt(p[k],0,0)):J===1?(c.up.set(0,0,d[k]),c.lookAt(0,p[k],0)):(c.up.set(0,d[k],0),c.lookAt(0,0,p[k]));const G=this._cubeSize;El(i,J*G,k>2?G:0,G,G),_.setRenderTarget(i),C&&_.render(R,c),_.render(e,c)}R.geometry.dispose(),R.material.dispose(),_.toneMapping=x,_.autoClear=E,e.background=O}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Pt||e.mapping===Lt;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=dh()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=hh());const s=i?this._cubemapMaterial:this._equirectMaterial,u=new dr(this._lodPlanes[0],s),c=s.uniforms;c.envMap.value=e;const d=this._cubeSize;El(t,0,0,3*d,2*d),n.setRenderTarget(t),n.render(u,lh)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),u=gp[(i-1)%gp.length];this._blur(e,i-1,i,s,u)}t.autoClear=n}_blur(e,t,n,i,s){const u=this._pingPongRenderTarget;this._halfBlur(e,u,t,n,i,"latitudinal",s),this._halfBlur(u,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,u,c){const d=this._renderer,p=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const _=3,E=new dr(this._lodPlanes[i],p),x=p.uniforms,w=this._sizeLods[n]-1,R=isFinite(s)?Math.PI/(2*w):2*Math.PI/(2*ro-1),C=s/R,O=isFinite(s)?1+Math.floor(_*C):ro;O>ro&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${O} samples when the maximum is set to ${ro}`);const k=[];let J=0;for(let we=0;we<ro;++we){const V=we/C,pe=Math.exp(-V*V/2);k.push(pe),we===0?J+=pe:we<O&&(J+=2*pe)}for(let we=0;we<k.length;we++)k[we]=k[we]/J;x.envMap.value=e.texture,x.samples.value=O,x.weights.value=k,x.latitudinal.value=u==="latitudinal",c&&(x.poleAxis.value=c);const{_lodMax:G}=this;x.dTheta.value=R,x.mipInt.value=G-n;const H=this._sizeLods[i],ae=3*H*(i>G-js?i-G+js:0),me=4*(this._cubeSize-H);El(t,ae,me,3*H,2*H),d.setRenderTarget(t),d.render(E,lh)}}function kg(r){const e=[],t=[],n=[];let i=r;const s=r-js+1+pp.length;for(let u=0;u<s;u++){const c=Math.pow(2,i);t.push(c);let d=1/c;u>r-js?d=pp[u-r+js-1]:u===0&&(d=0),n.push(d);const p=1/(c-2),_=-p,E=1+p,x=[_,_,E,_,E,E,_,_,E,E,_,E],w=6,R=6,C=3,O=2,k=1,J=new Float32Array(C*R*w),G=new Float32Array(O*R*w),H=new Float32Array(k*R*w);for(let me=0;me<w;me++){const we=me%3*2/3-1,V=me>2?0:-1,pe=[we,V,0,we+2/3,V,0,we+2/3,V+1,0,we,V,0,we+2/3,V+1,0,we,V+1,0];J.set(pe,C*R*me),G.set(x,O*R*me);const ve=[me,me,me,me,me,me];H.set(ve,k*R*me)}const ae=new An;ae.setAttribute("position",new Ui(J,C)),ae.setAttribute("uv",new Ui(G,O)),ae.setAttribute("faceIndex",new Ui(H,k)),e.push(ae),i>js&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function _p(r,e,t){const n=new Xi(r,e,t);return n.texture.mapping=Xn,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function El(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function Vg(r,e,t){const n=new Float32Array(ro),i=new he(0,1,0);return new Zi({name:"SphericalGaussianBlur",defines:{n:ro,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Sl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fe,depthTest:!1,depthWrite:!1})}function hh(){return new Zi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Sl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fe,depthTest:!1,depthWrite:!1})}function dh(){return new Zi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Sl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fe,depthTest:!1,depthWrite:!1})}function Sl(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function jg(r){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const d=c.mapping,p=d===jt||d===cn,_=d===Pt||d===Lt;if(p||_)if(c.isRenderTargetTexture&&c.needsPMREMUpdate===!0){c.needsPMREMUpdate=!1;let E=e.get(c);return t===null&&(t=new vp(r)),E=p?t.fromEquirectangular(c,E):t.fromCubemap(c,E),e.set(c,E),E.texture}else{if(e.has(c))return e.get(c).texture;{const E=c.image;if(p&&E&&E.height>0||_&&E&&i(E)){t===null&&(t=new vp(r));const x=p?t.fromEquirectangular(c):t.fromCubemap(c);return e.set(c,x),c.addEventListener("dispose",s),x.texture}else return null}}}return c}function i(c){let d=0;const p=6;for(let _=0;_<p;_++)c[_]!==void 0&&d++;return d===p}function s(c){const d=c.target;d.removeEventListener("dispose",s);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function u(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:u}}function Wg(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function Hg(r,e,t,n){const i={},s=new WeakMap;function u(E){const x=E.target;x.index!==null&&e.remove(x.index);for(const R in x.attributes)e.remove(x.attributes[R]);x.removeEventListener("dispose",u),delete i[x.id];const w=s.get(x);w&&(e.remove(w),s.delete(x)),n.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,t.memory.geometries--}function c(E,x){return i[x.id]===!0||(x.addEventListener("dispose",u),i[x.id]=!0,t.memory.geometries++),x}function d(E){const x=E.attributes;for(const R in x)e.update(x[R],34962);const w=E.morphAttributes;for(const R in w){const C=w[R];for(let O=0,k=C.length;O<k;O++)e.update(C[O],34962)}}function p(E){const x=[],w=E.index,R=E.attributes.position;let C=0;if(w!==null){const J=w.array;C=w.version;for(let G=0,H=J.length;G<H;G+=3){const ae=J[G+0],me=J[G+1],we=J[G+2];x.push(ae,me,me,we,we,ae)}}else{const J=R.array;C=R.version;for(let G=0,H=J.length/3-1;G<H;G+=3){const ae=G+0,me=G+1,we=G+2;x.push(ae,me,me,we,we,ae)}}const O=new(_d(x)?Ed:xd)(x,1);O.version=C;const k=s.get(E);k&&e.remove(k),s.set(E,O)}function _(E){const x=s.get(E);if(x){const w=E.index;w!==null&&x.version<w.version&&p(E)}else p(E);return s.get(E)}return{get:c,update:d,getWireframeAttribute:_}}function yp(r,e,t,n){const i=n.isWebGL2;let s;function u(x){s=x}let c,d;function p(x){c=x.type,d=x.bytesPerElement}function _(x,w){r.drawElements(s,w,c,x*d),t.update(w,s,1)}function E(x,w,R){if(R===0)return;let C,O;if(i)C=r,O="drawElementsInstanced";else if(C=e.get("ANGLE_instanced_arrays"),O="drawElementsInstancedANGLE",C===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}C[O](s,w,c,x*d,R),t.update(w,s,R)}this.setMode=u,this.setIndex=p,this.render=_,this.renderInstances=E}function Yg(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,u,c){switch(t.calls++,u){case 4:t.triangles+=c*(s/3);break;case 1:t.lines+=c*(s/2);break;case 3:t.lines+=c*(s-1);break;case 2:t.lines+=c*s;break;case 0:t.points+=c*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function Xg(r,e){return r[0]-e[0]}function Kg(r,e){return Math.abs(e[1])-Math.abs(r[1])}function $g(r,e,t){const n={},i=new Float32Array(8),s=new WeakMap,u=new di,c=[];for(let p=0;p<8;p++)c[p]=[p,0];function d(p,_,E,x){const w=p.morphTargetInfluences;if(e.isWebGL2===!0){const R=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,C=R!==void 0?R.length:0;let O=s.get(_);if(O===void 0||O.count!==C){let rt=function(){We.dispose(),s.delete(_),_.removeEventListener("dispose",rt)};O!==void 0&&O.texture.dispose();const G=_.morphAttributes.position!==void 0,H=_.morphAttributes.normal!==void 0,ae=_.morphAttributes.color!==void 0,me=_.morphAttributes.position||[],we=_.morphAttributes.normal||[],V=_.morphAttributes.color||[];let pe=0;G===!0&&(pe=1),H===!0&&(pe=2),ae===!0&&(pe=3);let ve=_.attributes.position.count*pe,Ge=1;ve>e.maxTextureSize&&(Ge=Math.ceil(ve/e.maxTextureSize),ve=e.maxTextureSize);const ot=new Float32Array(ve*Ge*4*C),We=new ze(ot,ve,Ge,C);We.type=Ti,We.needsUpdate=!0;const Ne=pe*4;for(let ut=0;ut<C;ut++){const It=me[ut],Et=we[ut],tt=V[ut],Qe=ve*Ge*4*ut;for(let qe=0;qe<It.count;qe++){const et=qe*Ne;G===!0&&(u.fromBufferAttribute(It,qe),ot[Qe+et+0]=u.x,ot[Qe+et+1]=u.y,ot[Qe+et+2]=u.z,ot[Qe+et+3]=0),H===!0&&(u.fromBufferAttribute(Et,qe),ot[Qe+et+4]=u.x,ot[Qe+et+5]=u.y,ot[Qe+et+6]=u.z,ot[Qe+et+7]=0),ae===!0&&(u.fromBufferAttribute(tt,qe),ot[Qe+et+8]=u.x,ot[Qe+et+9]=u.y,ot[Qe+et+10]=u.z,ot[Qe+et+11]=tt.itemSize===4?u.w:1)}}O={count:C,texture:We,size:new vt(ve,Ge)},s.set(_,O),_.addEventListener("dispose",rt)}let k=0;for(let G=0;G<w.length;G++)k+=w[G];const J=_.morphTargetsRelative?1:1-k;x.getUniforms().setValue(r,"morphTargetBaseInfluence",J),x.getUniforms().setValue(r,"morphTargetInfluences",w),x.getUniforms().setValue(r,"morphTargetsTexture",O.texture,t),x.getUniforms().setValue(r,"morphTargetsTextureSize",O.size)}else{const R=w===void 0?0:w.length;let C=n[_.id];if(C===void 0||C.length!==R){C=[];for(let H=0;H<R;H++)C[H]=[H,0];n[_.id]=C}for(let H=0;H<R;H++){const ae=C[H];ae[0]=H,ae[1]=w[H]}C.sort(Kg);for(let H=0;H<8;H++)H<R&&C[H][1]?(c[H][0]=C[H][0],c[H][1]=C[H][1]):(c[H][0]=Number.MAX_SAFE_INTEGER,c[H][1]=0);c.sort(Xg);const O=_.morphAttributes.position,k=_.morphAttributes.normal;let J=0;for(let H=0;H<8;H++){const ae=c[H],me=ae[0],we=ae[1];me!==Number.MAX_SAFE_INTEGER&&we?(O&&_.getAttribute("morphTarget"+H)!==O[me]&&_.setAttribute("morphTarget"+H,O[me]),k&&_.getAttribute("morphNormal"+H)!==k[me]&&_.setAttribute("morphNormal"+H,k[me]),i[H]=we,J+=we):(O&&_.hasAttribute("morphTarget"+H)===!0&&_.deleteAttribute("morphTarget"+H),k&&_.hasAttribute("morphNormal"+H)===!0&&_.deleteAttribute("morphNormal"+H),i[H]=0)}const G=_.morphTargetsRelative?1:1-J;x.getUniforms().setValue(r,"morphTargetBaseInfluence",G),x.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:d}}function Zg(r,e,t,n){let i=new WeakMap;function s(d){const p=n.render.frame,_=d.geometry,E=e.get(d,_);return i.get(E)!==p&&(e.update(E),i.set(E,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",c)===!1&&d.addEventListener("dispose",c),t.update(d.instanceMatrix,34962),d.instanceColor!==null&&t.update(d.instanceColor,34962)),E}function u(){i=new WeakMap}function c(d){const p=d.target;p.removeEventListener("dispose",c),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:s,dispose:u}}const bp=new cr,Ms=new ze,xp=new Je,Ep=new wu,Sp=[],ph=[],Ap=new Float32Array(16),Tp=new Float32Array(9),wp=new Float32Array(4);function Iu(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=Sp[i];if(s===void 0&&(s=new Float32Array(i),Sp[i]=s),e!==0){n.toArray(s,0);for(let u=1,c=0;u!==e;++u)c+=t,r[u].toArray(s,c)}return s}function sr(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function br(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function Al(r,e){let t=ph[e];t===void 0&&(t=new Int32Array(e),ph[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function Qg(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function Jg(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(sr(t,e))return;r.uniform2fv(this.addr,e),br(t,e)}}function qg(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(sr(t,e))return;r.uniform3fv(this.addr,e),br(t,e)}}function e0(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(sr(t,e))return;r.uniform4fv(this.addr,e),br(t,e)}}function t0(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(sr(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),br(t,e)}else{if(sr(t,n))return;wp.set(n),r.uniformMatrix2fv(this.addr,!1,wp),br(t,n)}}function n0(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(sr(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),br(t,e)}else{if(sr(t,n))return;Tp.set(n),r.uniformMatrix3fv(this.addr,!1,Tp),br(t,n)}}function i0(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(sr(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),br(t,e)}else{if(sr(t,n))return;Ap.set(n),r.uniformMatrix4fv(this.addr,!1,Ap),br(t,n)}}function r0(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function s0(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(sr(t,e))return;r.uniform2iv(this.addr,e),br(t,e)}}function a0(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(sr(t,e))return;r.uniform3iv(this.addr,e),br(t,e)}}function o0(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(sr(t,e))return;r.uniform4iv(this.addr,e),br(t,e)}}function u0(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function c0(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(sr(t,e))return;r.uniform2uiv(this.addr,e),br(t,e)}}function l0(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(sr(t,e))return;r.uniform3uiv(this.addr,e),br(t,e)}}function f0(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(sr(t,e))return;r.uniform4uiv(this.addr,e),br(t,e)}}function h0(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2D(e||bp,i)}function d0(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||xp,i)}function p0(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||Ep,i)}function mh(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||Ms,i)}function Mp(r){switch(r){case 5126:return Qg;case 35664:return Jg;case 35665:return qg;case 35666:return e0;case 35674:return t0;case 35675:return n0;case 35676:return i0;case 5124:case 35670:return r0;case 35667:case 35671:return s0;case 35668:case 35672:return a0;case 35669:case 35673:return o0;case 5125:return u0;case 36294:return c0;case 36295:return l0;case 36296:return f0;case 35678:case 36198:case 36298:case 36306:case 35682:return h0;case 35679:case 36299:case 36307:return d0;case 35680:case 36300:case 36308:case 36293:return p0;case 36289:case 36303:case 36311:case 36292:return mh}}function m0(r,e){r.uniform1fv(this.addr,e)}function g0(r,e){const t=Iu(e,this.size,2);r.uniform2fv(this.addr,t)}function v0(r,e){const t=Iu(e,this.size,3);r.uniform3fv(this.addr,t)}function _0(r,e){const t=Iu(e,this.size,4);r.uniform4fv(this.addr,t)}function y0(r,e){const t=Iu(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function b0(r,e){const t=Iu(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function x0(r,e){const t=Iu(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function E0(r,e){r.uniform1iv(this.addr,e)}function Cp(r,e){r.uniform2iv(this.addr,e)}function S0(r,e){r.uniform3iv(this.addr,e)}function Tl(r,e){r.uniform4iv(this.addr,e)}function A0(r,e){r.uniform1uiv(this.addr,e)}function T0(r,e){r.uniform2uiv(this.addr,e)}function w0(r,e){r.uniform3uiv(this.addr,e)}function M0(r,e){r.uniform4uiv(this.addr,e)}function C0(r,e,t){const n=this.cache,i=e.length,s=Al(t,i);sr(n,s)||(r.uniform1iv(this.addr,s),br(n,s));for(let u=0;u!==i;++u)t.setTexture2D(e[u]||bp,s[u])}function O0(r,e,t){const n=this.cache,i=e.length,s=Al(t,i);sr(n,s)||(r.uniform1iv(this.addr,s),br(n,s));for(let u=0;u!==i;++u)t.setTexture3D(e[u]||xp,s[u])}function P0(r,e,t){const n=this.cache,i=e.length,s=Al(t,i);sr(n,s)||(r.uniform1iv(this.addr,s),br(n,s));for(let u=0;u!==i;++u)t.setTextureCube(e[u]||Ep,s[u])}function I0(r,e,t){const n=this.cache,i=e.length,s=Al(t,i);sr(n,s)||(r.uniform1iv(this.addr,s),br(n,s));for(let u=0;u!==i;++u)t.setTexture2DArray(e[u]||Ms,s[u])}function R0(r){switch(r){case 5126:return m0;case 35664:return g0;case 35665:return v0;case 35666:return _0;case 35674:return y0;case 35675:return b0;case 35676:return x0;case 5124:case 35670:return E0;case 35667:case 35671:return Cp;case 35668:case 35672:return S0;case 35669:case 35673:return Tl;case 5125:return A0;case 36294:return T0;case 36295:return w0;case 36296:return M0;case 35678:case 36198:case 36298:case 36306:case 35682:return C0;case 35679:case 36299:case 36307:return O0;case 35680:case 36300:case 36308:case 36293:return P0;case 36289:case 36303:case 36311:case 36292:return I0}}class L0{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Mp(t.type)}}class D0{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=R0(t.type)}}class F0{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,u=i.length;s!==u;++s){const c=i[s];c.setValue(e,t[c.id],n)}}}const gh=/(\w+)(\])?(\[|\.)?/g;function Op(r,e){r.seq.push(e),r.map[e.id]=e}function U0(r,e,t){const n=r.name,i=n.length;for(gh.lastIndex=0;;){const s=gh.exec(n),u=gh.lastIndex;let c=s[1];const d=s[2]==="]",p=s[3];if(d&&(c=c|0),p===void 0||p==="["&&u+2===i){Op(t,p===void 0?new L0(c,r,e):new D0(c,r,e));break}else{let E=t.map[c];E===void 0&&(E=new F0(c),Op(t,E)),t=E}}}class wl{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),u=e.getUniformLocation(t,s.name);U0(s,u,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,u=t.length;s!==u;++s){const c=t[s],d=n[c.id];d.needsUpdate!==!1&&c.setValue(e,d.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const u=e[i];u.id in t&&n.push(u)}return n}}function vh(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}let Pp=0;function N0(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let u=i;u<s;u++){const c=u+1;n.push(`${c===e?">":" "} ${c}: ${t[u]}`)}return n.join(`
`)}function B0(r){switch(r){case Es:return["Linear","( value )"];case Ii:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function Ip(r,e,t){const n=r.getShaderParameter(e,35713),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const u=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+N0(r.getShaderSource(e),u)}else return i}function z0(r,e){const t=B0(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Ml(r,e){let t;switch(e){case Oe:t="Linear";break;case re:t="Reinhard";break;case ie:t="OptimizedCineon";break;case De:t="ACESFilmic";break;case je:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function G0(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(hc).join(`
`)}function k0(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function V0(r,e){const t={},n=r.getProgramParameter(e,35721);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),u=s.name;let c=1;s.type===35674&&(c=2),s.type===35675&&(c=3),s.type===35676&&(c=4),t[u]={type:s.type,location:r.getAttribLocation(e,u),locationSize:c}}return t}function hc(r){return r!==""}function Rp(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Lp(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const j0=/^[ \t]*#include +<([\w\d./]+)>/gm;function _h(r){return r.replace(j0,W0)}function W0(r,e){const t=On[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return _h(t)}const H0=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Dp(r){return r.replace(H0,Cl)}function Cl(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Fp(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Up(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===ne?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===ce?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===ee&&(e="SHADOWMAP_TYPE_VSM"),e}function Np(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Pt:case Lt:e="ENVMAP_TYPE_CUBE";break;case Xn:e="ENVMAP_TYPE_CUBE_UV";break}return e}function yh(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Lt:e="ENVMAP_MODE_REFRACTION";break}return e}function Bp(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case q:e="ENVMAP_BLENDING_MULTIPLY";break;case F:e="ENVMAP_BLENDING_MIX";break;case N:e="ENVMAP_BLENDING_ADD";break}return e}function zp(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function Gp(r,e,t,n){const i=r.getContext(),s=t.defines;let u=t.vertexShader,c=t.fragmentShader;const d=Up(t),p=Np(t),_=yh(t),E=Bp(t),x=zp(t),w=t.isWebGL2?"":G0(t),R=k0(s),C=i.createProgram();let O,k,J=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(O=[R].filter(hc).join(`
`),O.length>0&&(O+=`
`),k=[w,R].filter(hc).join(`
`),k.length>0&&(k+=`
`)):(O=[Fp(t),"#define SHADER_NAME "+t.shaderName,R,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+_:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(hc).join(`
`),k=[w,Fp(t),"#define SHADER_NAME "+t.shaderName,R,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+_:"",t.envMap?"#define "+E:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==le?"#define TONE_MAPPING":"",t.toneMapping!==le?On.tonemapping_pars_fragment:"",t.toneMapping!==le?Ml("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",On.encodings_pars_fragment,z0("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(hc).join(`
`)),u=_h(u),u=Rp(u,t),u=Lp(u,t),c=_h(c),c=Rp(c,t),c=Lp(c,t),u=Dp(u),c=Dp(c),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(J=`#version 300 es
`,O=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+O,k=["#define varying in",t.glslVersion===se?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===se?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+k);const G=J+O+u,H=J+k+c,ae=vh(i,35633,G),me=vh(i,35632,H);if(i.attachShader(C,ae),i.attachShader(C,me),t.index0AttributeName!==void 0?i.bindAttribLocation(C,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(C,0,"position"),i.linkProgram(C),r.debug.checkShaderErrors){const pe=i.getProgramInfoLog(C).trim(),ve=i.getShaderInfoLog(ae).trim(),Ge=i.getShaderInfoLog(me).trim();let ot=!0,We=!0;if(i.getProgramParameter(C,35714)===!1){ot=!1;const Ne=Ip(i,ae,"vertex"),rt=Ip(i,me,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(C,35715)+`

Program Info Log: `+pe+`
`+Ne+`
`+rt)}else pe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",pe):(ve===""||Ge==="")&&(We=!1);We&&(this.diagnostics={runnable:ot,programLog:pe,vertexShader:{log:ve,prefix:O},fragmentShader:{log:Ge,prefix:k}})}i.deleteShader(ae),i.deleteShader(me);let we;this.getUniforms=function(){return we===void 0&&(we=new wl(i,C)),we};let V;return this.getAttributes=function(){return V===void 0&&(V=V0(i,C)),V},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(C),this.program=void 0},this.name=t.shaderName,this.id=Pp++,this.cacheKey=e,this.usedTimes=1,this.program=C,this.vertexShader=ae,this.fragmentShader=me,this}let kp=0;class Y0{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),u=this._getShaderCacheForMaterial(e);return u.has(i)===!1&&(u.add(i),i.usedTimes++),u.has(s)===!1&&(u.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new X0(e),t.set(e,n)),n}}class X0{constructor(e){this.id=kp++,this.code=e,this.usedTimes=0}}function K0(r,e,t,n,i,s,u){const c=new zf,d=new Y0,p=[],_=i.isWebGL2,E=i.logarithmicDepthBuffer,x=i.vertexTextures;let w=i.precision;const R={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(V,pe,ve,Ge,ot){const We=Ge.fog,Ne=ot.geometry,rt=V.isMeshStandardMaterial?Ge.environment:null,ut=(V.isMeshStandardMaterial?t:e).get(V.envMap||rt),It=ut&&ut.mapping===Xn?ut.image.height:null,Et=R[V.type];V.precision!==null&&(w=i.getMaxPrecision(V.precision),w!==V.precision&&console.warn("THREE.WebGLProgram.getParameters:",V.precision,"not supported, using",w,"instead."));const tt=Ne.morphAttributes.position||Ne.morphAttributes.normal||Ne.morphAttributes.color,Qe=tt!==void 0?tt.length:0;let qe=0;Ne.morphAttributes.position!==void 0&&(qe=1),Ne.morphAttributes.normal!==void 0&&(qe=2),Ne.morphAttributes.color!==void 0&&(qe=3);let et,Ut,Dt,Yt;if(Et){const Pn=Vr[Et];et=Pn.vertexShader,Ut=Pn.fragmentShader}else et=V.vertexShader,Ut=V.fragmentShader,d.update(V),Dt=d.getVertexShaderID(V),Yt=d.getFragmentShaderID(V);const ft=r.getRenderTarget(),Ln=V.alphaTest>0,rn=V.clearcoat>0,sn=V.iridescence>0;return{isWebGL2:_,shaderID:Et,shaderName:V.type,vertexShader:et,fragmentShader:Ut,defines:V.defines,customVertexShaderID:Dt,customFragmentShaderID:Yt,isRawShaderMaterial:V.isRawShaderMaterial===!0,glslVersion:V.glslVersion,precision:w,instancing:ot.isInstancedMesh===!0,instancingColor:ot.isInstancedMesh===!0&&ot.instanceColor!==null,supportsVertexTextures:x,outputEncoding:ft===null?r.outputEncoding:ft.isXRRenderTarget===!0?ft.texture.encoding:Es,map:!!V.map,matcap:!!V.matcap,envMap:!!ut,envMapMode:ut&&ut.mapping,envMapCubeUVHeight:It,lightMap:!!V.lightMap,aoMap:!!V.aoMap,emissiveMap:!!V.emissiveMap,bumpMap:!!V.bumpMap,normalMap:!!V.normalMap,objectSpaceNormalMap:V.normalMapType===Xu,tangentSpaceNormalMap:V.normalMapType===la,decodeVideoTexture:!!V.map&&V.map.isVideoTexture===!0&&V.map.encoding===Ii,clearcoat:rn,clearcoatMap:rn&&!!V.clearcoatMap,clearcoatRoughnessMap:rn&&!!V.clearcoatRoughnessMap,clearcoatNormalMap:rn&&!!V.clearcoatNormalMap,iridescence:sn,iridescenceMap:sn&&!!V.iridescenceMap,iridescenceThicknessMap:sn&&!!V.iridescenceThicknessMap,displacementMap:!!V.displacementMap,roughnessMap:!!V.roughnessMap,metalnessMap:!!V.metalnessMap,specularMap:!!V.specularMap,specularIntensityMap:!!V.specularIntensityMap,specularColorMap:!!V.specularColorMap,opaque:V.transparent===!1&&V.blending===ct,alphaMap:!!V.alphaMap,alphaTest:Ln,gradientMap:!!V.gradientMap,sheen:V.sheen>0,sheenColorMap:!!V.sheenColorMap,sheenRoughnessMap:!!V.sheenRoughnessMap,transmission:V.transmission>0,transmissionMap:!!V.transmissionMap,thicknessMap:!!V.thicknessMap,combine:V.combine,vertexTangents:!!V.normalMap&&!!Ne.attributes.tangent,vertexColors:V.vertexColors,vertexAlphas:V.vertexColors===!0&&!!Ne.attributes.color&&Ne.attributes.color.itemSize===4,vertexUvs:!!V.map||!!V.bumpMap||!!V.normalMap||!!V.specularMap||!!V.alphaMap||!!V.emissiveMap||!!V.roughnessMap||!!V.metalnessMap||!!V.clearcoatMap||!!V.clearcoatRoughnessMap||!!V.clearcoatNormalMap||!!V.iridescenceMap||!!V.iridescenceThicknessMap||!!V.displacementMap||!!V.transmissionMap||!!V.thicknessMap||!!V.specularIntensityMap||!!V.specularColorMap||!!V.sheenColorMap||!!V.sheenRoughnessMap,uvsVertexOnly:!(V.map||V.bumpMap||V.normalMap||V.specularMap||V.alphaMap||V.emissiveMap||V.roughnessMap||V.metalnessMap||V.clearcoatNormalMap||V.iridescenceMap||V.iridescenceThicknessMap||V.transmission>0||V.transmissionMap||V.thicknessMap||V.specularIntensityMap||V.specularColorMap||V.sheen>0||V.sheenColorMap||V.sheenRoughnessMap)&&!!V.displacementMap,fog:!!We,useFog:V.fog===!0,fogExp2:We&&We.isFogExp2,flatShading:!!V.flatShading,sizeAttenuation:V.sizeAttenuation,logarithmicDepthBuffer:E,skinning:ot.isSkinnedMesh===!0,morphTargets:Ne.morphAttributes.position!==void 0,morphNormals:Ne.morphAttributes.normal!==void 0,morphColors:Ne.morphAttributes.color!==void 0,morphTargetsCount:Qe,morphTextureStride:qe,numDirLights:pe.directional.length,numPointLights:pe.point.length,numSpotLights:pe.spot.length,numSpotLightMaps:pe.spotLightMap.length,numRectAreaLights:pe.rectArea.length,numHemiLights:pe.hemi.length,numDirLightShadows:pe.directionalShadowMap.length,numPointLightShadows:pe.pointShadowMap.length,numSpotLightShadows:pe.spotShadowMap.length,numSpotLightShadowsWithMaps:pe.numSpotLightShadowsWithMaps,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:V.dithering,shadowMapEnabled:r.shadowMap.enabled&&ve.length>0,shadowMapType:r.shadowMap.type,toneMapping:V.toneMapped?r.toneMapping:le,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:V.premultipliedAlpha,doubleSided:V.side===oe,flipSided:V.side===$,useDepthPacking:!!V.depthPacking,depthPacking:V.depthPacking||0,index0AttributeName:V.index0AttributeName,extensionDerivatives:V.extensions&&V.extensions.derivatives,extensionFragDepth:V.extensions&&V.extensions.fragDepth,extensionDrawBuffers:V.extensions&&V.extensions.drawBuffers,extensionShaderTextureLOD:V.extensions&&V.extensions.shaderTextureLOD,rendererExtensionFragDepth:_||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:_||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:_||n.has("EXT_shader_texture_lod"),customProgramCacheKey:V.customProgramCacheKey()}}function O(V){const pe=[];if(V.shaderID?pe.push(V.shaderID):(pe.push(V.customVertexShaderID),pe.push(V.customFragmentShaderID)),V.defines!==void 0)for(const ve in V.defines)pe.push(ve),pe.push(V.defines[ve]);return V.isRawShaderMaterial===!1&&(k(pe,V),J(pe,V),pe.push(r.outputEncoding)),pe.push(V.customProgramCacheKey),pe.join()}function k(V,pe){V.push(pe.precision),V.push(pe.outputEncoding),V.push(pe.envMapMode),V.push(pe.envMapCubeUVHeight),V.push(pe.combine),V.push(pe.vertexUvs),V.push(pe.fogExp2),V.push(pe.sizeAttenuation),V.push(pe.morphTargetsCount),V.push(pe.morphAttributeCount),V.push(pe.numDirLights),V.push(pe.numPointLights),V.push(pe.numSpotLights),V.push(pe.numSpotLightMaps),V.push(pe.numHemiLights),V.push(pe.numRectAreaLights),V.push(pe.numDirLightShadows),V.push(pe.numPointLightShadows),V.push(pe.numSpotLightShadows),V.push(pe.numSpotLightShadowsWithMaps),V.push(pe.shadowMapType),V.push(pe.toneMapping),V.push(pe.numClippingPlanes),V.push(pe.numClipIntersection),V.push(pe.depthPacking)}function J(V,pe){c.disableAll(),pe.isWebGL2&&c.enable(0),pe.supportsVertexTextures&&c.enable(1),pe.instancing&&c.enable(2),pe.instancingColor&&c.enable(3),pe.map&&c.enable(4),pe.matcap&&c.enable(5),pe.envMap&&c.enable(6),pe.lightMap&&c.enable(7),pe.aoMap&&c.enable(8),pe.emissiveMap&&c.enable(9),pe.bumpMap&&c.enable(10),pe.normalMap&&c.enable(11),pe.objectSpaceNormalMap&&c.enable(12),pe.tangentSpaceNormalMap&&c.enable(13),pe.clearcoat&&c.enable(14),pe.clearcoatMap&&c.enable(15),pe.clearcoatRoughnessMap&&c.enable(16),pe.clearcoatNormalMap&&c.enable(17),pe.iridescence&&c.enable(18),pe.iridescenceMap&&c.enable(19),pe.iridescenceThicknessMap&&c.enable(20),pe.displacementMap&&c.enable(21),pe.specularMap&&c.enable(22),pe.roughnessMap&&c.enable(23),pe.metalnessMap&&c.enable(24),pe.gradientMap&&c.enable(25),pe.alphaMap&&c.enable(26),pe.alphaTest&&c.enable(27),pe.vertexColors&&c.enable(28),pe.vertexAlphas&&c.enable(29),pe.vertexUvs&&c.enable(30),pe.vertexTangents&&c.enable(31),pe.uvsVertexOnly&&c.enable(32),V.push(c.mask),c.disableAll(),pe.fog&&c.enable(0),pe.useFog&&c.enable(1),pe.flatShading&&c.enable(2),pe.logarithmicDepthBuffer&&c.enable(3),pe.skinning&&c.enable(4),pe.morphTargets&&c.enable(5),pe.morphNormals&&c.enable(6),pe.morphColors&&c.enable(7),pe.premultipliedAlpha&&c.enable(8),pe.shadowMapEnabled&&c.enable(9),pe.physicallyCorrectLights&&c.enable(10),pe.doubleSided&&c.enable(11),pe.flipSided&&c.enable(12),pe.useDepthPacking&&c.enable(13),pe.dithering&&c.enable(14),pe.specularIntensityMap&&c.enable(15),pe.specularColorMap&&c.enable(16),pe.transmission&&c.enable(17),pe.transmissionMap&&c.enable(18),pe.thicknessMap&&c.enable(19),pe.sheen&&c.enable(20),pe.sheenColorMap&&c.enable(21),pe.sheenRoughnessMap&&c.enable(22),pe.decodeVideoTexture&&c.enable(23),pe.opaque&&c.enable(24),V.push(c.mask)}function G(V){const pe=R[V.type];let ve;if(pe){const Ge=Vr[pe];ve=Ia.clone(Ge.uniforms)}else ve=V.uniforms;return ve}function H(V,pe){let ve;for(let Ge=0,ot=p.length;Ge<ot;Ge++){const We=p[Ge];if(We.cacheKey===pe){ve=We,++ve.usedTimes;break}}return ve===void 0&&(ve=new Gp(r,pe,V,s),p.push(ve)),ve}function ae(V){if(--V.usedTimes===0){const pe=p.indexOf(V);p[pe]=p[p.length-1],p.pop(),V.destroy()}}function me(V){d.remove(V)}function we(){d.dispose()}return{getParameters:C,getProgramCacheKey:O,getUniforms:G,acquireProgram:H,releaseProgram:ae,releaseShaderCache:me,programs:p,dispose:we}}function Ol(){let r=new WeakMap;function e(s){let u=r.get(s);return u===void 0&&(u={},r.set(s,u)),u}function t(s){r.delete(s)}function n(s,u,c){r.get(s)[u]=c}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function Pl(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function Vp(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function jp(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function u(E,x,w,R,C,O){let k=r[e];return k===void 0?(k={id:E.id,object:E,geometry:x,material:w,groupOrder:R,renderOrder:E.renderOrder,z:C,group:O},r[e]=k):(k.id=E.id,k.object=E,k.geometry=x,k.material=w,k.groupOrder=R,k.renderOrder=E.renderOrder,k.z=C,k.group=O),e++,k}function c(E,x,w,R,C,O){const k=u(E,x,w,R,C,O);w.transmission>0?n.push(k):w.transparent===!0?i.push(k):t.push(k)}function d(E,x,w,R,C,O){const k=u(E,x,w,R,C,O);w.transmission>0?n.unshift(k):w.transparent===!0?i.unshift(k):t.unshift(k)}function p(E,x){t.length>1&&t.sort(E||Pl),n.length>1&&n.sort(x||Vp),i.length>1&&i.sort(x||Vp)}function _(){for(let E=e,x=r.length;E<x;E++){const w=r[E];if(w.id===null)break;w.id=null,w.object=null,w.geometry=null,w.material=null,w.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:c,unshift:d,finish:_,sort:p}}function bh(){let r=new WeakMap;function e(n,i){const s=r.get(n);let u;return s===void 0?(u=new jp,r.set(n,[u])):i>=s.length?(u=new jp,s.push(u)):u=s[i],u}function t(){r=new WeakMap}return{get:e,dispose:t}}function Wp(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new he,color:new Zt};break;case"SpotLight":t={position:new he,direction:new he,color:new Zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new he,color:new Zt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new he,skyColor:new Zt,groundColor:new Zt};break;case"RectAreaLight":t={color:new Zt,position:new he,halfWidth:new he,halfHeight:new he};break}return r[e.id]=t,t}}}function $0(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vt,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let Z0=0;function Q0(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function J0(r,e){const t=new Wp,n=$0(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let _=0;_<9;_++)i.probe.push(new he);const s=new he,u=new kn,c=new kn;function d(_,E){let x=0,w=0,R=0;for(let Ge=0;Ge<9;Ge++)i.probe[Ge].set(0,0,0);let C=0,O=0,k=0,J=0,G=0,H=0,ae=0,me=0,we=0,V=0;_.sort(Q0);const pe=E!==!0?Math.PI:1;for(let Ge=0,ot=_.length;Ge<ot;Ge++){const We=_[Ge],Ne=We.color,rt=We.intensity,ut=We.distance,It=We.shadow&&We.shadow.map?We.shadow.map.texture:null;if(We.isAmbientLight)x+=Ne.r*rt*pe,w+=Ne.g*rt*pe,R+=Ne.b*rt*pe;else if(We.isLightProbe)for(let Et=0;Et<9;Et++)i.probe[Et].addScaledVector(We.sh.coefficients[Et],rt);else if(We.isDirectionalLight){const Et=t.get(We);if(Et.color.copy(We.color).multiplyScalar(We.intensity*pe),We.castShadow){const tt=We.shadow,Qe=n.get(We);Qe.shadowBias=tt.bias,Qe.shadowNormalBias=tt.normalBias,Qe.shadowRadius=tt.radius,Qe.shadowMapSize=tt.mapSize,i.directionalShadow[C]=Qe,i.directionalShadowMap[C]=It,i.directionalShadowMatrix[C]=We.shadow.matrix,H++}i.directional[C]=Et,C++}else if(We.isSpotLight){const Et=t.get(We);Et.position.setFromMatrixPosition(We.matrixWorld),Et.color.copy(Ne).multiplyScalar(rt*pe),Et.distance=ut,Et.coneCos=Math.cos(We.angle),Et.penumbraCos=Math.cos(We.angle*(1-We.penumbra)),Et.decay=We.decay,i.spot[k]=Et;const tt=We.shadow;if(We.map&&(i.spotLightMap[we]=We.map,we++,tt.updateMatrices(We),We.castShadow&&V++),i.spotLightMatrix[k]=tt.matrix,We.castShadow){const Qe=n.get(We);Qe.shadowBias=tt.bias,Qe.shadowNormalBias=tt.normalBias,Qe.shadowRadius=tt.radius,Qe.shadowMapSize=tt.mapSize,i.spotShadow[k]=Qe,i.spotShadowMap[k]=It,me++}k++}else if(We.isRectAreaLight){const Et=t.get(We);Et.color.copy(Ne).multiplyScalar(rt),Et.halfWidth.set(We.width*.5,0,0),Et.halfHeight.set(0,We.height*.5,0),i.rectArea[J]=Et,J++}else if(We.isPointLight){const Et=t.get(We);if(Et.color.copy(We.color).multiplyScalar(We.intensity*pe),Et.distance=We.distance,Et.decay=We.decay,We.castShadow){const tt=We.shadow,Qe=n.get(We);Qe.shadowBias=tt.bias,Qe.shadowNormalBias=tt.normalBias,Qe.shadowRadius=tt.radius,Qe.shadowMapSize=tt.mapSize,Qe.shadowCameraNear=tt.camera.near,Qe.shadowCameraFar=tt.camera.far,i.pointShadow[O]=Qe,i.pointShadowMap[O]=It,i.pointShadowMatrix[O]=We.shadow.matrix,ae++}i.point[O]=Et,O++}else if(We.isHemisphereLight){const Et=t.get(We);Et.skyColor.copy(We.color).multiplyScalar(rt*pe),Et.groundColor.copy(We.groundColor).multiplyScalar(rt*pe),i.hemi[G]=Et,G++}}J>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Gt.LTC_FLOAT_1,i.rectAreaLTC2=Gt.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Gt.LTC_HALF_1,i.rectAreaLTC2=Gt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=x,i.ambient[1]=w,i.ambient[2]=R;const ve=i.hash;(ve.directionalLength!==C||ve.pointLength!==O||ve.spotLength!==k||ve.rectAreaLength!==J||ve.hemiLength!==G||ve.numDirectionalShadows!==H||ve.numPointShadows!==ae||ve.numSpotShadows!==me||ve.numSpotMaps!==we)&&(i.directional.length=C,i.spot.length=k,i.rectArea.length=J,i.point.length=O,i.hemi.length=G,i.directionalShadow.length=H,i.directionalShadowMap.length=H,i.pointShadow.length=ae,i.pointShadowMap.length=ae,i.spotShadow.length=me,i.spotShadowMap.length=me,i.directionalShadowMatrix.length=H,i.pointShadowMatrix.length=ae,i.spotLightMatrix.length=me+we-V,i.spotLightMap.length=we,i.numSpotLightShadowsWithMaps=V,ve.directionalLength=C,ve.pointLength=O,ve.spotLength=k,ve.rectAreaLength=J,ve.hemiLength=G,ve.numDirectionalShadows=H,ve.numPointShadows=ae,ve.numSpotShadows=me,ve.numSpotMaps=we,i.version=Z0++)}function p(_,E){let x=0,w=0,R=0,C=0,O=0;const k=E.matrixWorldInverse;for(let J=0,G=_.length;J<G;J++){const H=_[J];if(H.isDirectionalLight){const ae=i.directional[x];ae.direction.setFromMatrixPosition(H.matrixWorld),s.setFromMatrixPosition(H.target.matrixWorld),ae.direction.sub(s),ae.direction.transformDirection(k),x++}else if(H.isSpotLight){const ae=i.spot[R];ae.position.setFromMatrixPosition(H.matrixWorld),ae.position.applyMatrix4(k),ae.direction.setFromMatrixPosition(H.matrixWorld),s.setFromMatrixPosition(H.target.matrixWorld),ae.direction.sub(s),ae.direction.transformDirection(k),R++}else if(H.isRectAreaLight){const ae=i.rectArea[C];ae.position.setFromMatrixPosition(H.matrixWorld),ae.position.applyMatrix4(k),c.identity(),u.copy(H.matrixWorld),u.premultiply(k),c.extractRotation(u),ae.halfWidth.set(H.width*.5,0,0),ae.halfHeight.set(0,H.height*.5,0),ae.halfWidth.applyMatrix4(c),ae.halfHeight.applyMatrix4(c),C++}else if(H.isPointLight){const ae=i.point[w];ae.position.setFromMatrixPosition(H.matrixWorld),ae.position.applyMatrix4(k),w++}else if(H.isHemisphereLight){const ae=i.hemi[O];ae.direction.setFromMatrixPosition(H.matrixWorld),ae.direction.transformDirection(k),O++}}}return{setup:d,setupView:p,state:i}}function Hp(r,e){const t=new J0(r,e),n=[],i=[];function s(){n.length=0,i.length=0}function u(E){n.push(E)}function c(E){i.push(E)}function d(E){t.setup(n,E)}function p(E){t.setupView(n,E)}return{init:s,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:d,setupLightsView:p,pushLight:u,pushShadow:c}}function q0(r,e){let t=new WeakMap;function n(s,u=0){const c=t.get(s);let d;return c===void 0?(d=new Hp(r,e),t.set(s,[d])):u>=c.length?(d=new Hp(r,e),c.push(d)):d=c[u],d}function i(){t=new WeakMap}return{get:n,dispose:i}}class dc extends Qr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ef,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Il extends Qr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new he,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const ev=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,tv=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function nv(r,e,t){let n=new rc;const i=new vt,s=new vt,u=new di,c=new dc({depthPacking:Wc}),d=new Il,p={},_=t.maxTextureSize,E={0:$,1:B,2:oe},x=new Zi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new vt},radius:{value:4}},vertexShader:ev,fragmentShader:tv}),w=x.clone();w.defines.HORIZONTAL_PASS=1;const R=new An;R.setAttribute("position",new Ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new dr(R,x),O=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ne,this.render=function(H,ae,me){if(O.enabled===!1||O.autoUpdate===!1&&O.needsUpdate===!1||H.length===0)return;const we=r.getRenderTarget(),V=r.getActiveCubeFace(),pe=r.getActiveMipmapLevel(),ve=r.state;ve.setBlending(Fe),ve.buffers.color.setClear(1,1,1,1),ve.buffers.depth.setTest(!0),ve.setScissorTest(!1);for(let Ge=0,ot=H.length;Ge<ot;Ge++){const We=H[Ge],Ne=We.shadow;if(Ne===void 0){console.warn("THREE.WebGLShadowMap:",We,"has no shadow.");continue}if(Ne.autoUpdate===!1&&Ne.needsUpdate===!1)continue;i.copy(Ne.mapSize);const rt=Ne.getFrameExtents();if(i.multiply(rt),s.copy(Ne.mapSize),(i.x>_||i.y>_)&&(i.x>_&&(s.x=Math.floor(_/rt.x),i.x=s.x*rt.x,Ne.mapSize.x=s.x),i.y>_&&(s.y=Math.floor(_/rt.y),i.y=s.y*rt.y,Ne.mapSize.y=s.y)),Ne.map===null){const It=this.type!==ee?{minFilter:Qn,magFilter:Qn}:{};Ne.map=new Xi(i.x,i.y,It),Ne.map.texture.name=We.name+".shadowMap",Ne.camera.updateProjectionMatrix()}r.setRenderTarget(Ne.map),r.clear();const ut=Ne.getViewportCount();for(let It=0;It<ut;It++){const Et=Ne.getViewport(It);u.set(s.x*Et.x,s.y*Et.y,s.x*Et.z,s.y*Et.w),ve.viewport(u),Ne.updateMatrices(We,It),n=Ne.getFrustum(),G(ae,me,Ne.camera,We,this.type)}Ne.isPointLightShadow!==!0&&this.type===ee&&k(Ne,me),Ne.needsUpdate=!1}O.needsUpdate=!1,r.setRenderTarget(we,V,pe)};function k(H,ae){const me=e.update(C);x.defines.VSM_SAMPLES!==H.blurSamples&&(x.defines.VSM_SAMPLES=H.blurSamples,w.defines.VSM_SAMPLES=H.blurSamples,x.needsUpdate=!0,w.needsUpdate=!0),H.mapPass===null&&(H.mapPass=new Xi(i.x,i.y)),x.uniforms.shadow_pass.value=H.map.texture,x.uniforms.resolution.value=H.mapSize,x.uniforms.radius.value=H.radius,r.setRenderTarget(H.mapPass),r.clear(),r.renderBufferDirect(ae,null,me,x,C,null),w.uniforms.shadow_pass.value=H.mapPass.texture,w.uniforms.resolution.value=H.mapSize,w.uniforms.radius.value=H.radius,r.setRenderTarget(H.map),r.clear(),r.renderBufferDirect(ae,null,me,w,C,null)}function J(H,ae,me,we,V,pe){let ve=null;const Ge=me.isPointLight===!0?H.customDistanceMaterial:H.customDepthMaterial;if(Ge!==void 0)ve=Ge;else if(ve=me.isPointLight===!0?d:c,r.localClippingEnabled&&ae.clipShadows===!0&&Array.isArray(ae.clippingPlanes)&&ae.clippingPlanes.length!==0||ae.displacementMap&&ae.displacementScale!==0||ae.alphaMap&&ae.alphaTest>0||ae.map&&ae.alphaTest>0){const ot=ve.uuid,We=ae.uuid;let Ne=p[ot];Ne===void 0&&(Ne={},p[ot]=Ne);let rt=Ne[We];rt===void 0&&(rt=ve.clone(),Ne[We]=rt),ve=rt}return ve.visible=ae.visible,ve.wireframe=ae.wireframe,pe===ee?ve.side=ae.shadowSide!==null?ae.shadowSide:ae.side:ve.side=ae.shadowSide!==null?ae.shadowSide:E[ae.side],ve.alphaMap=ae.alphaMap,ve.alphaTest=ae.alphaTest,ve.map=ae.map,ve.clipShadows=ae.clipShadows,ve.clippingPlanes=ae.clippingPlanes,ve.clipIntersection=ae.clipIntersection,ve.displacementMap=ae.displacementMap,ve.displacementScale=ae.displacementScale,ve.displacementBias=ae.displacementBias,ve.wireframeLinewidth=ae.wireframeLinewidth,ve.linewidth=ae.linewidth,me.isPointLight===!0&&ve.isMeshDistanceMaterial===!0&&(ve.referencePosition.setFromMatrixPosition(me.matrixWorld),ve.nearDistance=we,ve.farDistance=V),ve}function G(H,ae,me,we,V){if(H.visible===!1)return;if(H.layers.test(ae.layers)&&(H.isMesh||H.isLine||H.isPoints)&&(H.castShadow||H.receiveShadow&&V===ee)&&(!H.frustumCulled||n.intersectsObject(H))){H.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,H.matrixWorld);const Ge=e.update(H),ot=H.material;if(Array.isArray(ot)){const We=Ge.groups;for(let Ne=0,rt=We.length;Ne<rt;Ne++){const ut=We[Ne],It=ot[ut.materialIndex];if(It&&It.visible){const Et=J(H,It,we,me.near,me.far,V);r.renderBufferDirect(me,null,Ge,Et,H,ut)}}}else if(ot.visible){const We=J(H,ot,we,me.near,me.far,V);r.renderBufferDirect(me,null,Ge,We,H,null)}}const ve=H.children;for(let Ge=0,ot=ve.length;Ge<ot;Ge++)G(ve[Ge],ae,me,we,V)}}function iv(r,e,t){const n=t.isWebGL2;function i(){let ke=!1;const gt=new di;let Nt=null;const an=new di(0,0,0,0);return{setMask:function(dn){Nt!==dn&&!ke&&(r.colorMask(dn,dn,dn,dn),Nt=dn)},setLocked:function(dn){ke=dn},setClear:function(dn,Pi,Xr,ys,zc){zc===!0&&(dn*=ys,Pi*=ys,Xr*=ys),gt.set(dn,Pi,Xr,ys),an.equals(gt)===!1&&(r.clearColor(dn,Pi,Xr,ys),an.copy(gt))},reset:function(){ke=!1,Nt=null,an.set(-1,0,0,0)}}}function s(){let ke=!1,gt=null,Nt=null,an=null;return{setTest:function(dn){dn?Ln(2929):rn(2929)},setMask:function(dn){gt!==dn&&!ke&&(r.depthMask(dn),gt=dn)},setFunc:function(dn){if(Nt!==dn){switch(dn){case Rn:r.depthFunc(512);break;case Fn:r.depthFunc(519);break;case ai:r.depthFunc(513);break;case hi:r.depthFunc(515);break;case Zn:r.depthFunc(514);break;case Yn:r.depthFunc(518);break;case ei:r.depthFunc(516);break;case ki:r.depthFunc(517);break;default:r.depthFunc(515)}Nt=dn}},setLocked:function(dn){ke=dn},setClear:function(dn){an!==dn&&(r.clearDepth(dn),an=dn)},reset:function(){ke=!1,gt=null,Nt=null,an=null}}}function u(){let ke=!1,gt=null,Nt=null,an=null,dn=null,Pi=null,Xr=null,ys=null,zc=null;return{setTest:function(nr){ke||(nr?Ln(2960):rn(2960))},setMask:function(nr){gt!==nr&&!ke&&(r.stencilMask(nr),gt=nr)},setFunc:function(nr,qo,ya){(Nt!==nr||an!==qo||dn!==ya)&&(r.stencilFunc(nr,qo,ya),Nt=nr,an=qo,dn=ya)},setOp:function(nr,qo,ya){(Pi!==nr||Xr!==qo||ys!==ya)&&(r.stencilOp(nr,qo,ya),Pi=nr,Xr=qo,ys=ya)},setLocked:function(nr){ke=nr},setClear:function(nr){zc!==nr&&(r.clearStencil(nr),zc=nr)},reset:function(){ke=!1,gt=null,Nt=null,an=null,dn=null,Pi=null,Xr=null,ys=null,zc=null}}}const c=new i,d=new s,p=new u,_=new WeakMap,E=new WeakMap;let x={},w={},R=new WeakMap,C=[],O=null,k=!1,J=null,G=null,H=null,ae=null,me=null,we=null,V=null,pe=!1,ve=null,Ge=null,ot=null,We=null,Ne=null;const rt=r.getParameter(35661);let ut=!1,It=0;const Et=r.getParameter(7938);Et.indexOf("WebGL")!==-1?(It=parseFloat(/^WebGL (\d)/.exec(Et)[1]),ut=It>=1):Et.indexOf("OpenGL ES")!==-1&&(It=parseFloat(/^OpenGL ES (\d)/.exec(Et)[1]),ut=It>=2);let tt=null,Qe={};const qe=r.getParameter(3088),et=r.getParameter(2978),Ut=new di().fromArray(qe),Dt=new di().fromArray(et);function Yt(ke,gt,Nt){const an=new Uint8Array(4),dn=r.createTexture();r.bindTexture(ke,dn),r.texParameteri(ke,10241,9728),r.texParameteri(ke,10240,9728);for(let Pi=0;Pi<Nt;Pi++)r.texImage2D(gt+Pi,0,6408,1,1,0,6408,5121,an);return dn}const ft={};ft[3553]=Yt(3553,3553,1),ft[34067]=Yt(34067,34069,6),c.setClear(0,0,0,1),d.setClear(1),p.setClear(0),Ln(2929),d.setFunc(hi),Xt(!1),Dn(X),Ln(2884),Vt(Fe);function Ln(ke){x[ke]!==!0&&(r.enable(ke),x[ke]=!0)}function rn(ke){x[ke]!==!1&&(r.disable(ke),x[ke]=!1)}function sn(ke,gt){return w[ke]!==gt?(r.bindFramebuffer(ke,gt),w[ke]=gt,n&&(ke===36009&&(w[36160]=gt),ke===36160&&(w[36009]=gt)),!0):!1}function Wt(ke,gt){let Nt=C,an=!1;if(ke)if(Nt=R.get(gt),Nt===void 0&&(Nt=[],R.set(gt,Nt)),ke.isWebGLMultipleRenderTargets){const dn=ke.texture;if(Nt.length!==dn.length||Nt[0]!==36064){for(let Pi=0,Xr=dn.length;Pi<Xr;Pi++)Nt[Pi]=36064+Pi;Nt.length=dn.length,an=!0}}else Nt[0]!==36064&&(Nt[0]=36064,an=!0);else Nt[0]!==1029&&(Nt[0]=1029,an=!0);an&&(t.isWebGL2?r.drawBuffers(Nt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Nt))}function Pn(ke){return O!==ke?(r.useProgram(ke),O=ke,!0):!1}const wt={[Ye]:32774,[st]:32778,[de]:32779};if(n)wt[Ie]=32775,wt[be]=32776;else{const ke=e.get("EXT_blend_minmax");ke!==null&&(wt[Ie]=ke.MIN_EXT,wt[be]=ke.MAX_EXT)}const bt={[Ce]:0,[Ue]:1,[Te]:768,[yt]:770,[qn]:776,[un]:774,[$t]:772,[Le]:769,[Mt]:771,[Bn]:775,[on]:773};function Vt(ke,gt,Nt,an,dn,Pi,Xr,ys){if(ke===Fe){k===!0&&(rn(3042),k=!1);return}if(k===!1&&(Ln(3042),k=!0),ke!==Ve){if(ke!==J||ys!==pe){if((G!==Ye||me!==Ye)&&(r.blendEquation(32774),G=Ye,me=Ye),ys)switch(ke){case ct:r.blendFuncSeparate(1,771,1,771);break;case He:r.blendFunc(1,1);break;case nt:r.blendFuncSeparate(0,769,0,1);break;case Ae:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ke);break}else switch(ke){case ct:r.blendFuncSeparate(770,771,1,771);break;case He:r.blendFunc(770,1);break;case nt:r.blendFuncSeparate(0,769,0,1);break;case Ae:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ke);break}H=null,ae=null,we=null,V=null,J=ke,pe=ys}return}dn=dn||gt,Pi=Pi||Nt,Xr=Xr||an,(gt!==G||dn!==me)&&(r.blendEquationSeparate(wt[gt],wt[dn]),G=gt,me=dn),(Nt!==H||an!==ae||Pi!==we||Xr!==V)&&(r.blendFuncSeparate(bt[Nt],bt[an],bt[Pi],bt[Xr]),H=Nt,ae=an,we=Pi,V=Xr),J=ke,pe=!1}function en(ke,gt){ke.side===oe?rn(2884):Ln(2884);let Nt=ke.side===$;gt&&(Nt=!Nt),Xt(Nt),ke.blending===ct&&ke.transparent===!1?Vt(Fe):Vt(ke.blending,ke.blendEquation,ke.blendSrc,ke.blendDst,ke.blendEquationAlpha,ke.blendSrcAlpha,ke.blendDstAlpha,ke.premultipliedAlpha),d.setFunc(ke.depthFunc),d.setTest(ke.depthTest),d.setMask(ke.depthWrite),c.setMask(ke.colorWrite);const an=ke.stencilWrite;p.setTest(an),an&&(p.setMask(ke.stencilWriteMask),p.setFunc(ke.stencilFunc,ke.stencilRef,ke.stencilFuncMask),p.setOp(ke.stencilFail,ke.stencilZFail,ke.stencilZPass)),gn(ke.polygonOffset,ke.polygonOffsetFactor,ke.polygonOffsetUnits),ke.alphaToCoverage===!0?Ln(32926):rn(32926)}function Xt(ke){ve!==ke&&(ke?r.frontFace(2304):r.frontFace(2305),ve=ke)}function Dn(ke){ke!==K?(Ln(2884),ke!==Ge&&(ke===X?r.cullFace(1029):ke===W?r.cullFace(1028):r.cullFace(1032))):rn(2884),Ge=ke}function xn(ke){ke!==ot&&(ut&&r.lineWidth(ke),ot=ke)}function gn(ke,gt,Nt){ke?(Ln(32823),(We!==gt||Ne!==Nt)&&(r.polygonOffset(gt,Nt),We=gt,Ne=Nt)):rn(32823)}function Gi(ke){ke?Ln(3089):rn(3089)}function xi(ke){ke===void 0&&(ke=33984+rt-1),tt!==ke&&(r.activeTexture(ke),tt=ke)}function ye(ke,gt,Nt){Nt===void 0&&(tt===null?Nt=33984+rt-1:Nt=tt);let an=Qe[Nt];an===void 0&&(an={type:void 0,texture:void 0},Qe[Nt]=an),(an.type!==ke||an.texture!==gt)&&(tt!==Nt&&(r.activeTexture(Nt),tt=Nt),r.bindTexture(ke,gt||ft[ke]),an.type=ke,an.texture=gt)}function fe(){const ke=Qe[tt];ke!==void 0&&ke.type!==void 0&&(r.bindTexture(ke.type,null),ke.type=void 0,ke.texture=void 0)}function _e(){try{r.compressedTexImage2D.apply(r,arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function St(){try{r.compressedTexImage3D.apply(r,arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Ot(){try{r.texSubImage2D.apply(r,arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function kt(){try{r.texSubImage3D.apply(r,arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function vn(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function qt(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function xt(){try{r.texStorage2D.apply(r,arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function pn(){try{r.texStorage3D.apply(r,arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function Cn(){try{r.texImage2D.apply(r,arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function fn(){try{r.texImage3D.apply(r,arguments)}catch(ke){console.error("THREE.WebGLState:",ke)}}function In(ke){Ut.equals(ke)===!1&&(r.scissor(ke.x,ke.y,ke.z,ke.w),Ut.copy(ke))}function En(ke){Dt.equals(ke)===!1&&(r.viewport(ke.x,ke.y,ke.z,ke.w),Dt.copy(ke))}function Ei(ke,gt){let Nt=E.get(gt);Nt===void 0&&(Nt=new WeakMap,E.set(gt,Nt));let an=Nt.get(ke);an===void 0&&(an=r.getUniformBlockIndex(gt,ke.name),Nt.set(ke,an))}function tr(ke,gt){const an=E.get(gt).get(ke);_.get(gt)!==an&&(r.uniformBlockBinding(gt,an,ke.__bindingPointIndex),_.set(gt,an))}function Yr(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),n===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),x={},tt=null,Qe={},w={},R=new WeakMap,C=[],O=null,k=!1,J=null,G=null,H=null,ae=null,me=null,we=null,V=null,pe=!1,ve=null,Ge=null,ot=null,We=null,Ne=null,Ut.set(0,0,r.canvas.width,r.canvas.height),Dt.set(0,0,r.canvas.width,r.canvas.height),c.reset(),d.reset(),p.reset()}return{buffers:{color:c,depth:d,stencil:p},enable:Ln,disable:rn,bindFramebuffer:sn,drawBuffers:Wt,useProgram:Pn,setBlending:Vt,setMaterial:en,setFlipSided:Xt,setCullFace:Dn,setLineWidth:xn,setPolygonOffset:gn,setScissorTest:Gi,activeTexture:xi,bindTexture:ye,unbindTexture:fe,compressedTexImage2D:_e,compressedTexImage3D:St,texImage2D:Cn,texImage3D:fn,updateUBOMapping:Ei,uniformBlockBinding:tr,texStorage2D:xt,texStorage3D:pn,texSubImage2D:Ot,texSubImage3D:kt,compressedTexSubImage2D:vn,compressedTexSubImage3D:qt,scissor:In,viewport:En,reset:Yr}}function ta(r,e,t,n,i,s,u){const c=i.isWebGL2,d=i.maxTextures,p=i.maxCubemapSize,_=i.maxTextureSize,E=i.maxSamples,x=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,w=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),R=new WeakMap;let C;const O=new WeakMap;let k=!1;try{k=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function J(ye,fe){return k?new OffscreenCanvas(ye,fe):Qu("canvas")}function G(ye,fe,_e,St){let Ot=1;if((ye.width>St||ye.height>St)&&(Ot=St/Math.max(ye.width,ye.height)),Ot<1||fe===!0)if(typeof HTMLImageElement<"u"&&ye instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ye instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ye instanceof ImageBitmap){const kt=fe?Mr:Math.floor,vn=kt(Ot*ye.width),qt=kt(Ot*ye.height);C===void 0&&(C=J(vn,qt));const xt=_e?J(vn,qt):C;return xt.width=vn,xt.height=qt,xt.getContext("2d").drawImage(ye,0,0,vn,qt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ye.width+"x"+ye.height+") to ("+vn+"x"+qt+")."),xt}else return"data"in ye&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ye.width+"x"+ye.height+")."),ye;return ye}function H(ye){return wa(ye.width)&&wa(ye.height)}function ae(ye){return c?!1:ye.wrapS!==zn||ye.wrapT!==zn||ye.minFilter!==Qn&&ye.minFilter!==oi}function me(ye,fe){return ye.generateMipmaps&&fe&&ye.minFilter!==Qn&&ye.minFilter!==oi}function we(ye){r.generateMipmap(ye)}function V(ye,fe,_e,St,Ot=!1){if(c===!1)return fe;if(ye!==null){if(r[ye]!==void 0)return r[ye];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ye+"'")}let kt=fe;return fe===6403&&(_e===5126&&(kt=33326),_e===5131&&(kt=33325),_e===5121&&(kt=33321)),fe===33319&&(_e===5126&&(kt=33328),_e===5131&&(kt=33327),_e===5121&&(kt=33323)),fe===6408&&(_e===5126&&(kt=34836),_e===5131&&(kt=34842),_e===5121&&(kt=St===Ii&&Ot===!1?35907:32856),_e===32819&&(kt=32854),_e===32820&&(kt=32855)),(kt===33325||kt===33326||kt===33327||kt===33328||kt===34842||kt===34836)&&e.get("EXT_color_buffer_float"),kt}function pe(ye,fe,_e){return me(ye,_e)===!0||ye.isFramebufferTexture&&ye.minFilter!==Qn&&ye.minFilter!==oi?Math.log2(Math.max(fe.width,fe.height))+1:ye.mipmaps!==void 0&&ye.mipmaps.length>0?ye.mipmaps.length:ye.isCompressedTexture&&Array.isArray(ye.image)?fe.mipmaps.length:1}function ve(ye){return ye===Qn||ye===Rs||ye===xs?9728:9729}function Ge(ye){const fe=ye.target;fe.removeEventListener("dispose",Ge),We(fe),fe.isVideoTexture&&R.delete(fe)}function ot(ye){const fe=ye.target;fe.removeEventListener("dispose",ot),rt(fe)}function We(ye){const fe=n.get(ye);if(fe.__webglInit===void 0)return;const _e=ye.source,St=O.get(_e);if(St){const Ot=St[fe.__cacheKey];Ot.usedTimes--,Ot.usedTimes===0&&Ne(ye),Object.keys(St).length===0&&O.delete(_e)}n.remove(ye)}function Ne(ye){const fe=n.get(ye);r.deleteTexture(fe.__webglTexture);const _e=ye.source,St=O.get(_e);delete St[fe.__cacheKey],u.memory.textures--}function rt(ye){const fe=ye.texture,_e=n.get(ye),St=n.get(fe);if(St.__webglTexture!==void 0&&(r.deleteTexture(St.__webglTexture),u.memory.textures--),ye.depthTexture&&ye.depthTexture.dispose(),ye.isWebGLCubeRenderTarget)for(let Ot=0;Ot<6;Ot++)r.deleteFramebuffer(_e.__webglFramebuffer[Ot]),_e.__webglDepthbuffer&&r.deleteRenderbuffer(_e.__webglDepthbuffer[Ot]);else{if(r.deleteFramebuffer(_e.__webglFramebuffer),_e.__webglDepthbuffer&&r.deleteRenderbuffer(_e.__webglDepthbuffer),_e.__webglMultisampledFramebuffer&&r.deleteFramebuffer(_e.__webglMultisampledFramebuffer),_e.__webglColorRenderbuffer)for(let Ot=0;Ot<_e.__webglColorRenderbuffer.length;Ot++)_e.__webglColorRenderbuffer[Ot]&&r.deleteRenderbuffer(_e.__webglColorRenderbuffer[Ot]);_e.__webglDepthRenderbuffer&&r.deleteRenderbuffer(_e.__webglDepthRenderbuffer)}if(ye.isWebGLMultipleRenderTargets)for(let Ot=0,kt=fe.length;Ot<kt;Ot++){const vn=n.get(fe[Ot]);vn.__webglTexture&&(r.deleteTexture(vn.__webglTexture),u.memory.textures--),n.remove(fe[Ot])}n.remove(fe),n.remove(ye)}let ut=0;function It(){ut=0}function Et(){const ye=ut;return ye>=d&&console.warn("THREE.WebGLTextures: Trying to use "+ye+" texture units while this GPU supports only "+d),ut+=1,ye}function tt(ye){const fe=[];return fe.push(ye.wrapS),fe.push(ye.wrapT),fe.push(ye.wrapR||0),fe.push(ye.magFilter),fe.push(ye.minFilter),fe.push(ye.anisotropy),fe.push(ye.internalFormat),fe.push(ye.format),fe.push(ye.type),fe.push(ye.generateMipmaps),fe.push(ye.premultiplyAlpha),fe.push(ye.flipY),fe.push(ye.unpackAlignment),fe.push(ye.encoding),fe.join()}function Qe(ye,fe){const _e=n.get(ye);if(ye.isVideoTexture&&Gi(ye),ye.isRenderTargetTexture===!1&&ye.version>0&&_e.__version!==ye.version){const St=ye.image;if(St===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(St.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{rn(_e,ye,fe);return}}t.bindTexture(3553,_e.__webglTexture,33984+fe)}function qe(ye,fe){const _e=n.get(ye);if(ye.version>0&&_e.__version!==ye.version){rn(_e,ye,fe);return}t.bindTexture(35866,_e.__webglTexture,33984+fe)}function et(ye,fe){const _e=n.get(ye);if(ye.version>0&&_e.__version!==ye.version){rn(_e,ye,fe);return}t.bindTexture(32879,_e.__webglTexture,33984+fe)}function Ut(ye,fe){const _e=n.get(ye);if(ye.version>0&&_e.__version!==ye.version){sn(_e,ye,fe);return}t.bindTexture(34067,_e.__webglTexture,33984+fe)}const Dt={[Li]:10497,[zn]:33071,[Br]:33648},Yt={[Qn]:9728,[Rs]:9984,[xs]:9986,[oi]:9729,[Me]:9985,[$e]:9987};function ft(ye,fe,_e){if(_e?(r.texParameteri(ye,10242,Dt[fe.wrapS]),r.texParameteri(ye,10243,Dt[fe.wrapT]),(ye===32879||ye===35866)&&r.texParameteri(ye,32882,Dt[fe.wrapR]),r.texParameteri(ye,10240,Yt[fe.magFilter]),r.texParameteri(ye,10241,Yt[fe.minFilter])):(r.texParameteri(ye,10242,33071),r.texParameteri(ye,10243,33071),(ye===32879||ye===35866)&&r.texParameteri(ye,32882,33071),(fe.wrapS!==zn||fe.wrapT!==zn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(ye,10240,ve(fe.magFilter)),r.texParameteri(ye,10241,ve(fe.minFilter)),fe.minFilter!==Qn&&fe.minFilter!==oi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const St=e.get("EXT_texture_filter_anisotropic");if(fe.magFilter===Qn||fe.minFilter!==xs&&fe.minFilter!==$e||fe.type===Ti&&e.has("OES_texture_float_linear")===!1||c===!1&&fe.type===Ar&&e.has("OES_texture_half_float_linear")===!1)return;(fe.anisotropy>1||n.get(fe).__currentAnisotropy)&&(r.texParameterf(ye,St.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,i.getMaxAnisotropy())),n.get(fe).__currentAnisotropy=fe.anisotropy)}}function Ln(ye,fe){let _e=!1;ye.__webglInit===void 0&&(ye.__webglInit=!0,fe.addEventListener("dispose",Ge));const St=fe.source;let Ot=O.get(St);Ot===void 0&&(Ot={},O.set(St,Ot));const kt=tt(fe);if(kt!==ye.__cacheKey){Ot[kt]===void 0&&(Ot[kt]={texture:r.createTexture(),usedTimes:0},u.memory.textures++,_e=!0),Ot[kt].usedTimes++;const vn=Ot[ye.__cacheKey];vn!==void 0&&(Ot[ye.__cacheKey].usedTimes--,vn.usedTimes===0&&Ne(fe)),ye.__cacheKey=kt,ye.__webglTexture=Ot[kt].texture}return _e}function rn(ye,fe,_e){let St=3553;(fe.isDataArrayTexture||fe.isCompressedArrayTexture)&&(St=35866),fe.isData3DTexture&&(St=32879);const Ot=Ln(ye,fe),kt=fe.source;t.bindTexture(St,ye.__webglTexture,33984+_e);const vn=n.get(kt);if(kt.version!==vn.__version||Ot===!0){t.activeTexture(33984+_e),r.pixelStorei(37440,fe.flipY),r.pixelStorei(37441,fe.premultiplyAlpha),r.pixelStorei(3317,fe.unpackAlignment),r.pixelStorei(37443,0);const qt=ae(fe)&&H(fe.image)===!1;let xt=G(fe.image,qt,!1,_);xt=xi(fe,xt);const pn=H(xt)||c,Cn=s.convert(fe.format,fe.encoding);let fn=s.convert(fe.type),In=V(fe.internalFormat,Cn,fn,fe.encoding,fe.isVideoTexture);ft(St,fe,pn);let En;const Ei=fe.mipmaps,tr=c&&fe.isVideoTexture!==!0,Yr=vn.__version===void 0||Ot===!0,ke=pe(fe,xt,pn);if(fe.isDepthTexture)In=6402,c?fe.type===Ti?In=36012:fe.type===Di?In=33190:fe.type===$r?In=35056:In=33189:fe.type===Ti&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),fe.format===Qt&&In===6402&&fe.type!==Ai&&fe.type!==Di&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),fe.type=Di,fn=s.convert(fe.type)),fe.format===Ft&&In===6402&&(In=34041,fe.type!==$r&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),fe.type=$r,fn=s.convert(fe.type))),Yr&&(tr?t.texStorage2D(3553,1,In,xt.width,xt.height):t.texImage2D(3553,0,In,xt.width,xt.height,0,Cn,fn,null));else if(fe.isDataTexture)if(Ei.length>0&&pn){tr&&Yr&&t.texStorage2D(3553,ke,In,Ei[0].width,Ei[0].height);for(let gt=0,Nt=Ei.length;gt<Nt;gt++)En=Ei[gt],tr?t.texSubImage2D(3553,gt,0,0,En.width,En.height,Cn,fn,En.data):t.texImage2D(3553,gt,In,En.width,En.height,0,Cn,fn,En.data);fe.generateMipmaps=!1}else tr?(Yr&&t.texStorage2D(3553,ke,In,xt.width,xt.height),t.texSubImage2D(3553,0,0,0,xt.width,xt.height,Cn,fn,xt.data)):t.texImage2D(3553,0,In,xt.width,xt.height,0,Cn,fn,xt.data);else if(fe.isCompressedTexture)if(fe.isCompressedArrayTexture){tr&&Yr&&t.texStorage3D(35866,ke,In,Ei[0].width,Ei[0].height,xt.depth);for(let gt=0,Nt=Ei.length;gt<Nt;gt++)En=Ei[gt],fe.format!==ir?Cn!==null?tr?t.compressedTexSubImage3D(35866,gt,0,0,0,En.width,En.height,xt.depth,Cn,En.data,0,0):t.compressedTexImage3D(35866,gt,In,En.width,En.height,xt.depth,0,En.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tr?t.texSubImage3D(35866,gt,0,0,0,En.width,En.height,xt.depth,Cn,fn,En.data):t.texImage3D(35866,gt,In,En.width,En.height,xt.depth,0,Cn,fn,En.data)}else{tr&&Yr&&t.texStorage2D(3553,ke,In,Ei[0].width,Ei[0].height);for(let gt=0,Nt=Ei.length;gt<Nt;gt++)En=Ei[gt],fe.format!==ir?Cn!==null?tr?t.compressedTexSubImage2D(3553,gt,0,0,En.width,En.height,Cn,En.data):t.compressedTexImage2D(3553,gt,In,En.width,En.height,0,En.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tr?t.texSubImage2D(3553,gt,0,0,En.width,En.height,Cn,fn,En.data):t.texImage2D(3553,gt,In,En.width,En.height,0,Cn,fn,En.data)}else if(fe.isDataArrayTexture)tr?(Yr&&t.texStorage3D(35866,ke,In,xt.width,xt.height,xt.depth),t.texSubImage3D(35866,0,0,0,0,xt.width,xt.height,xt.depth,Cn,fn,xt.data)):t.texImage3D(35866,0,In,xt.width,xt.height,xt.depth,0,Cn,fn,xt.data);else if(fe.isData3DTexture)tr?(Yr&&t.texStorage3D(32879,ke,In,xt.width,xt.height,xt.depth),t.texSubImage3D(32879,0,0,0,0,xt.width,xt.height,xt.depth,Cn,fn,xt.data)):t.texImage3D(32879,0,In,xt.width,xt.height,xt.depth,0,Cn,fn,xt.data);else if(fe.isFramebufferTexture){if(Yr)if(tr)t.texStorage2D(3553,ke,In,xt.width,xt.height);else{let gt=xt.width,Nt=xt.height;for(let an=0;an<ke;an++)t.texImage2D(3553,an,In,gt,Nt,0,Cn,fn,null),gt>>=1,Nt>>=1}}else if(Ei.length>0&&pn){tr&&Yr&&t.texStorage2D(3553,ke,In,Ei[0].width,Ei[0].height);for(let gt=0,Nt=Ei.length;gt<Nt;gt++)En=Ei[gt],tr?t.texSubImage2D(3553,gt,0,0,Cn,fn,En):t.texImage2D(3553,gt,In,Cn,fn,En);fe.generateMipmaps=!1}else tr?(Yr&&t.texStorage2D(3553,ke,In,xt.width,xt.height),t.texSubImage2D(3553,0,0,0,Cn,fn,xt)):t.texImage2D(3553,0,In,Cn,fn,xt);me(fe,pn)&&we(St),vn.__version=kt.version,fe.onUpdate&&fe.onUpdate(fe)}ye.__version=fe.version}function sn(ye,fe,_e){if(fe.image.length!==6)return;const St=Ln(ye,fe),Ot=fe.source;t.bindTexture(34067,ye.__webglTexture,33984+_e);const kt=n.get(Ot);if(Ot.version!==kt.__version||St===!0){t.activeTexture(33984+_e),r.pixelStorei(37440,fe.flipY),r.pixelStorei(37441,fe.premultiplyAlpha),r.pixelStorei(3317,fe.unpackAlignment),r.pixelStorei(37443,0);const vn=fe.isCompressedTexture||fe.image[0].isCompressedTexture,qt=fe.image[0]&&fe.image[0].isDataTexture,xt=[];for(let gt=0;gt<6;gt++)!vn&&!qt?xt[gt]=G(fe.image[gt],!1,!0,p):xt[gt]=qt?fe.image[gt].image:fe.image[gt],xt[gt]=xi(fe,xt[gt]);const pn=xt[0],Cn=H(pn)||c,fn=s.convert(fe.format,fe.encoding),In=s.convert(fe.type),En=V(fe.internalFormat,fn,In,fe.encoding),Ei=c&&fe.isVideoTexture!==!0,tr=kt.__version===void 0||St===!0;let Yr=pe(fe,pn,Cn);ft(34067,fe,Cn);let ke;if(vn){Ei&&tr&&t.texStorage2D(34067,Yr,En,pn.width,pn.height);for(let gt=0;gt<6;gt++){ke=xt[gt].mipmaps;for(let Nt=0;Nt<ke.length;Nt++){const an=ke[Nt];fe.format!==ir?fn!==null?Ei?t.compressedTexSubImage2D(34069+gt,Nt,0,0,an.width,an.height,fn,an.data):t.compressedTexImage2D(34069+gt,Nt,En,an.width,an.height,0,an.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ei?t.texSubImage2D(34069+gt,Nt,0,0,an.width,an.height,fn,In,an.data):t.texImage2D(34069+gt,Nt,En,an.width,an.height,0,fn,In,an.data)}}}else{ke=fe.mipmaps,Ei&&tr&&(ke.length>0&&Yr++,t.texStorage2D(34067,Yr,En,xt[0].width,xt[0].height));for(let gt=0;gt<6;gt++)if(qt){Ei?t.texSubImage2D(34069+gt,0,0,0,xt[gt].width,xt[gt].height,fn,In,xt[gt].data):t.texImage2D(34069+gt,0,En,xt[gt].width,xt[gt].height,0,fn,In,xt[gt].data);for(let Nt=0;Nt<ke.length;Nt++){const dn=ke[Nt].image[gt].image;Ei?t.texSubImage2D(34069+gt,Nt+1,0,0,dn.width,dn.height,fn,In,dn.data):t.texImage2D(34069+gt,Nt+1,En,dn.width,dn.height,0,fn,In,dn.data)}}else{Ei?t.texSubImage2D(34069+gt,0,0,0,fn,In,xt[gt]):t.texImage2D(34069+gt,0,En,fn,In,xt[gt]);for(let Nt=0;Nt<ke.length;Nt++){const an=ke[Nt];Ei?t.texSubImage2D(34069+gt,Nt+1,0,0,fn,In,an.image[gt]):t.texImage2D(34069+gt,Nt+1,En,fn,In,an.image[gt])}}}me(fe,Cn)&&we(34067),kt.__version=Ot.version,fe.onUpdate&&fe.onUpdate(fe)}ye.__version=fe.version}function Wt(ye,fe,_e,St,Ot){const kt=s.convert(_e.format,_e.encoding),vn=s.convert(_e.type),qt=V(_e.internalFormat,kt,vn,_e.encoding);n.get(fe).__hasExternalTextures||(Ot===32879||Ot===35866?t.texImage3D(Ot,0,qt,fe.width,fe.height,fe.depth,0,kt,vn,null):t.texImage2D(Ot,0,qt,fe.width,fe.height,0,kt,vn,null)),t.bindFramebuffer(36160,ye),gn(fe)?x.framebufferTexture2DMultisampleEXT(36160,St,Ot,n.get(_e).__webglTexture,0,xn(fe)):(Ot===3553||Ot>=34069&&Ot<=34074)&&r.framebufferTexture2D(36160,St,Ot,n.get(_e).__webglTexture,0),t.bindFramebuffer(36160,null)}function Pn(ye,fe,_e){if(r.bindRenderbuffer(36161,ye),fe.depthBuffer&&!fe.stencilBuffer){let St=33189;if(_e||gn(fe)){const Ot=fe.depthTexture;Ot&&Ot.isDepthTexture&&(Ot.type===Ti?St=36012:Ot.type===Di&&(St=33190));const kt=xn(fe);gn(fe)?x.renderbufferStorageMultisampleEXT(36161,kt,St,fe.width,fe.height):r.renderbufferStorageMultisample(36161,kt,St,fe.width,fe.height)}else r.renderbufferStorage(36161,St,fe.width,fe.height);r.framebufferRenderbuffer(36160,36096,36161,ye)}else if(fe.depthBuffer&&fe.stencilBuffer){const St=xn(fe);_e&&gn(fe)===!1?r.renderbufferStorageMultisample(36161,St,35056,fe.width,fe.height):gn(fe)?x.renderbufferStorageMultisampleEXT(36161,St,35056,fe.width,fe.height):r.renderbufferStorage(36161,34041,fe.width,fe.height),r.framebufferRenderbuffer(36160,33306,36161,ye)}else{const St=fe.isWebGLMultipleRenderTargets===!0?fe.texture:[fe.texture];for(let Ot=0;Ot<St.length;Ot++){const kt=St[Ot],vn=s.convert(kt.format,kt.encoding),qt=s.convert(kt.type),xt=V(kt.internalFormat,vn,qt,kt.encoding),pn=xn(fe);_e&&gn(fe)===!1?r.renderbufferStorageMultisample(36161,pn,xt,fe.width,fe.height):gn(fe)?x.renderbufferStorageMultisampleEXT(36161,pn,xt,fe.width,fe.height):r.renderbufferStorage(36161,xt,fe.width,fe.height)}}r.bindRenderbuffer(36161,null)}function wt(ye,fe){if(fe&&fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ye),!(fe.depthTexture&&fe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(fe.depthTexture).__webglTexture||fe.depthTexture.image.width!==fe.width||fe.depthTexture.image.height!==fe.height)&&(fe.depthTexture.image.width=fe.width,fe.depthTexture.image.height=fe.height,fe.depthTexture.needsUpdate=!0),Qe(fe.depthTexture,0);const St=n.get(fe.depthTexture).__webglTexture,Ot=xn(fe);if(fe.depthTexture.format===Qt)gn(fe)?x.framebufferTexture2DMultisampleEXT(36160,36096,3553,St,0,Ot):r.framebufferTexture2D(36160,36096,3553,St,0);else if(fe.depthTexture.format===Ft)gn(fe)?x.framebufferTexture2DMultisampleEXT(36160,33306,3553,St,0,Ot):r.framebufferTexture2D(36160,33306,3553,St,0);else throw new Error("Unknown depthTexture format")}function bt(ye){const fe=n.get(ye),_e=ye.isWebGLCubeRenderTarget===!0;if(ye.depthTexture&&!fe.__autoAllocateDepthBuffer){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");wt(fe.__webglFramebuffer,ye)}else if(_e){fe.__webglDepthbuffer=[];for(let St=0;St<6;St++)t.bindFramebuffer(36160,fe.__webglFramebuffer[St]),fe.__webglDepthbuffer[St]=r.createRenderbuffer(),Pn(fe.__webglDepthbuffer[St],ye,!1)}else t.bindFramebuffer(36160,fe.__webglFramebuffer),fe.__webglDepthbuffer=r.createRenderbuffer(),Pn(fe.__webglDepthbuffer,ye,!1);t.bindFramebuffer(36160,null)}function Vt(ye,fe,_e){const St=n.get(ye);fe!==void 0&&Wt(St.__webglFramebuffer,ye,ye.texture,36064,3553),_e!==void 0&&bt(ye)}function en(ye){const fe=ye.texture,_e=n.get(ye),St=n.get(fe);ye.addEventListener("dispose",ot),ye.isWebGLMultipleRenderTargets!==!0&&(St.__webglTexture===void 0&&(St.__webglTexture=r.createTexture()),St.__version=fe.version,u.memory.textures++);const Ot=ye.isWebGLCubeRenderTarget===!0,kt=ye.isWebGLMultipleRenderTargets===!0,vn=H(ye)||c;if(Ot){_e.__webglFramebuffer=[];for(let qt=0;qt<6;qt++)_e.__webglFramebuffer[qt]=r.createFramebuffer()}else{if(_e.__webglFramebuffer=r.createFramebuffer(),kt)if(i.drawBuffers){const qt=ye.texture;for(let xt=0,pn=qt.length;xt<pn;xt++){const Cn=n.get(qt[xt]);Cn.__webglTexture===void 0&&(Cn.__webglTexture=r.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&ye.samples>0&&gn(ye)===!1){const qt=kt?fe:[fe];_e.__webglMultisampledFramebuffer=r.createFramebuffer(),_e.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,_e.__webglMultisampledFramebuffer);for(let xt=0;xt<qt.length;xt++){const pn=qt[xt];_e.__webglColorRenderbuffer[xt]=r.createRenderbuffer(),r.bindRenderbuffer(36161,_e.__webglColorRenderbuffer[xt]);const Cn=s.convert(pn.format,pn.encoding),fn=s.convert(pn.type),In=V(pn.internalFormat,Cn,fn,pn.encoding,ye.isXRRenderTarget===!0),En=xn(ye);r.renderbufferStorageMultisample(36161,En,In,ye.width,ye.height),r.framebufferRenderbuffer(36160,36064+xt,36161,_e.__webglColorRenderbuffer[xt])}r.bindRenderbuffer(36161,null),ye.depthBuffer&&(_e.__webglDepthRenderbuffer=r.createRenderbuffer(),Pn(_e.__webglDepthRenderbuffer,ye,!0)),t.bindFramebuffer(36160,null)}}if(Ot){t.bindTexture(34067,St.__webglTexture),ft(34067,fe,vn);for(let qt=0;qt<6;qt++)Wt(_e.__webglFramebuffer[qt],ye,fe,36064,34069+qt);me(fe,vn)&&we(34067),t.unbindTexture()}else if(kt){const qt=ye.texture;for(let xt=0,pn=qt.length;xt<pn;xt++){const Cn=qt[xt],fn=n.get(Cn);t.bindTexture(3553,fn.__webglTexture),ft(3553,Cn,vn),Wt(_e.__webglFramebuffer,ye,Cn,36064+xt,3553),me(Cn,vn)&&we(3553)}t.unbindTexture()}else{let qt=3553;(ye.isWebGL3DRenderTarget||ye.isWebGLArrayRenderTarget)&&(c?qt=ye.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(qt,St.__webglTexture),ft(qt,fe,vn),Wt(_e.__webglFramebuffer,ye,fe,36064,qt),me(fe,vn)&&we(qt),t.unbindTexture()}ye.depthBuffer&&bt(ye)}function Xt(ye){const fe=H(ye)||c,_e=ye.isWebGLMultipleRenderTargets===!0?ye.texture:[ye.texture];for(let St=0,Ot=_e.length;St<Ot;St++){const kt=_e[St];if(me(kt,fe)){const vn=ye.isWebGLCubeRenderTarget?34067:3553,qt=n.get(kt).__webglTexture;t.bindTexture(vn,qt),we(vn),t.unbindTexture()}}}function Dn(ye){if(c&&ye.samples>0&&gn(ye)===!1){const fe=ye.isWebGLMultipleRenderTargets?ye.texture:[ye.texture],_e=ye.width,St=ye.height;let Ot=16384;const kt=[],vn=ye.stencilBuffer?33306:36096,qt=n.get(ye),xt=ye.isWebGLMultipleRenderTargets===!0;if(xt)for(let pn=0;pn<fe.length;pn++)t.bindFramebuffer(36160,qt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+pn,36161,null),t.bindFramebuffer(36160,qt.__webglFramebuffer),r.framebufferTexture2D(36009,36064+pn,3553,null,0);t.bindFramebuffer(36008,qt.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,qt.__webglFramebuffer);for(let pn=0;pn<fe.length;pn++){kt.push(36064+pn),ye.depthBuffer&&kt.push(vn);const Cn=qt.__ignoreDepthValues!==void 0?qt.__ignoreDepthValues:!1;if(Cn===!1&&(ye.depthBuffer&&(Ot|=256),ye.stencilBuffer&&(Ot|=1024)),xt&&r.framebufferRenderbuffer(36008,36064,36161,qt.__webglColorRenderbuffer[pn]),Cn===!0&&(r.invalidateFramebuffer(36008,[vn]),r.invalidateFramebuffer(36009,[vn])),xt){const fn=n.get(fe[pn]).__webglTexture;r.framebufferTexture2D(36009,36064,3553,fn,0)}r.blitFramebuffer(0,0,_e,St,0,0,_e,St,Ot,9728),w&&r.invalidateFramebuffer(36008,kt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),xt)for(let pn=0;pn<fe.length;pn++){t.bindFramebuffer(36160,qt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+pn,36161,qt.__webglColorRenderbuffer[pn]);const Cn=n.get(fe[pn]).__webglTexture;t.bindFramebuffer(36160,qt.__webglFramebuffer),r.framebufferTexture2D(36009,36064+pn,3553,Cn,0)}t.bindFramebuffer(36009,qt.__webglMultisampledFramebuffer)}}function xn(ye){return Math.min(E,ye.samples)}function gn(ye){const fe=n.get(ye);return c&&ye.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&fe.__useRenderToTexture!==!1}function Gi(ye){const fe=u.render.frame;R.get(ye)!==fe&&(R.set(ye,fe),ye.update())}function xi(ye,fe){const _e=ye.encoding,St=ye.format,Ot=ye.type;return ye.isCompressedTexture===!0||ye.isVideoTexture===!0||ye.format===xe||_e!==Es&&(_e===Ii?c===!1?e.has("EXT_sRGB")===!0&&St===ir?(ye.format=xe,ye.minFilter=oi,ye.generateMipmaps=!1):fe=Fs.sRGBToLinear(fe):(St!==ir||Ot!==Rt)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",_e)),fe}this.allocateTextureUnit=Et,this.resetTextureUnits=It,this.setTexture2D=Qe,this.setTexture2DArray=qe,this.setTexture3D=et,this.setTextureCube=Ut,this.rebindTextures=Vt,this.setupRenderTarget=en,this.updateRenderTargetMipmap=Xt,this.updateMultisampleRenderTarget=Dn,this.setupDepthRenderbuffer=bt,this.setupFrameBufferTexture=Wt,this.useMultisampledRTT=gn}function rv(r,e,t){const n=t.isWebGL2;function i(s,u=null){let c;if(s===Rt)return 5121;if(s===or)return 32819;if(s===oa)return 32820;if(s===Bt)return 5120;if(s===Un)return 5122;if(s===Ai)return 5123;if(s===Ji)return 5124;if(s===Di)return 5125;if(s===Ti)return 5126;if(s===Ar)return n?5131:(c=e.get("OES_texture_half_float"),c!==null?c.HALF_FLOAT_OES:null);if(s===ba)return 6406;if(s===ir)return 6408;if(s===Ks)return 6409;if(s===as)return 6410;if(s===Qt)return 6402;if(s===Ft)return 34041;if(s===xa)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===xe)return c=e.get("EXT_sRGB"),c!==null?c.SRGB_ALPHA_EXT:null;if(s===mn)return 6403;if(s===Gn)return 36244;if(s===Kn)return 33319;if(s===Tr)return 33320;if(s===Wi)return 36249;if(s===hn||s===gr||s===Zr||s===$s)if(u===Ii)if(c=e.get("WEBGL_compressed_texture_s3tc_srgb"),c!==null){if(s===hn)return c.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===gr)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Zr)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===$s)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(c=e.get("WEBGL_compressed_texture_s3tc"),c!==null){if(s===hn)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===gr)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Zr)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===$s)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===ua||s===Hi||s===mo||s===go)if(c=e.get("WEBGL_compressed_texture_pvrtc"),c!==null){if(s===ua)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Hi)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===mo)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===go)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===tu)return c=e.get("WEBGL_compressed_texture_etc1"),c!==null?c.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Ea||s===za)if(c=e.get("WEBGL_compressed_texture_etc"),c!==null){if(s===Ea)return u===Ii?c.COMPRESSED_SRGB8_ETC2:c.COMPRESSED_RGB8_ETC2;if(s===za)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:c.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===vo||s===Vi||s===li||s===Ki||s===os||s===Ls||s===Sa||s===ca||s===Rr||s===us||s===_o||s===Aa||s===nu||s===yo)if(c=e.get("WEBGL_compressed_texture_astc"),c!==null){if(s===vo)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:c.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Vi)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:c.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===li)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:c.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Ki)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:c.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===os)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:c.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Ls)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:c.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Sa)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:c.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===ca)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:c.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Rr)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:c.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===us)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:c.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===_o)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:c.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Aa)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:c.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===nu)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:c.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===yo)return u===Ii?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:c.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===iu)if(c=e.get("EXT_texture_compression_bptc"),c!==null){if(s===iu)return u===Ii?c.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:c.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===$r?n?34042:(c=e.get("WEBGL_depth_texture"),c!==null?c.UNSIGNED_INT_24_8_WEBGL:null):r[s]!==void 0?r[s]:null}return{convert:i}}class sv extends pr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ws extends ui{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jn={type:"move"};class xh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ws,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ws,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new he,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new he),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ws,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new he,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new he),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,u=null;const c=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){u=!0;for(const C of e.hand.values()){const O=t.getJointPose(C,n),k=this._getHandJoint(p,C);O!==null&&(k.matrix.fromArray(O.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.jointRadius=O.radius),k.visible=O!==null}const _=p.joints["index-finger-tip"],E=p.joints["thumb-tip"],x=_.position.distanceTo(E.position),w=.02,R=.005;p.inputState.pinching&&x>w+R?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&x<=w-R&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(d.matrix.fromArray(s.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),s.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(s.linearVelocity)):d.hasLinearVelocity=!1,s.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(s.angularVelocity)):d.hasAngularVelocity=!1));c!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(c.matrix.fromArray(i.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),i.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(i.linearVelocity)):c.hasLinearVelocity=!1,i.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(i.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(jn)))}return c!==null&&(c.visible=i!==null),d!==null&&(d.visible=s!==null),p!==null&&(p.visible=u!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Ws;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class ps extends cr{constructor(e,t,n,i,s,u,c,d,p,_){if(_=_!==void 0?_:Qt,_!==Qt&&_!==Ft)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&_===Qt&&(n=Di),n===void 0&&_===Ft&&(n=$r),super(null,i,s,u,c,d,_,n,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=c!==void 0?c:Qn,this.minFilter=d!==void 0?d:Qn,this.flipY=!1,this.generateMipmaps=!1}}class ar extends Re{constructor(e,t){super();const n=this;let i=null,s=1,u=null,c="local-floor",d=null,p=null,_=null,E=null,x=null,w=null;const R=t.getContextAttributes();let C=null,O=null;const k=[],J=[],G=new Set,H=new Map,ae=new pr;ae.layers.enable(1),ae.viewport=new di;const me=new pr;me.layers.enable(2),me.viewport=new di;const we=[ae,me],V=new sv;V.layers.enable(1),V.layers.enable(2);let pe=null,ve=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(qe){let et=k[qe];return et===void 0&&(et=new xh,k[qe]=et),et.getTargetRaySpace()},this.getControllerGrip=function(qe){let et=k[qe];return et===void 0&&(et=new xh,k[qe]=et),et.getGripSpace()},this.getHand=function(qe){let et=k[qe];return et===void 0&&(et=new xh,k[qe]=et),et.getHandSpace()};function Ge(qe){const et=J.indexOf(qe.inputSource);if(et===-1)return;const Ut=k[et];Ut!==void 0&&Ut.dispatchEvent({type:qe.type,data:qe.inputSource})}function ot(){i.removeEventListener("select",Ge),i.removeEventListener("selectstart",Ge),i.removeEventListener("selectend",Ge),i.removeEventListener("squeeze",Ge),i.removeEventListener("squeezestart",Ge),i.removeEventListener("squeezeend",Ge),i.removeEventListener("end",ot),i.removeEventListener("inputsourceschange",We);for(let qe=0;qe<k.length;qe++){const et=J[qe];et!==null&&(J[qe]=null,k[qe].disconnect(et))}pe=null,ve=null,e.setRenderTarget(C),x=null,E=null,_=null,i=null,O=null,Qe.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(qe){s=qe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(qe){c=qe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||u},this.setReferenceSpace=function(qe){d=qe},this.getBaseLayer=function(){return E!==null?E:x},this.getBinding=function(){return _},this.getFrame=function(){return w},this.getSession=function(){return i},this.setSession=async function(qe){if(i=qe,i!==null){if(C=e.getRenderTarget(),i.addEventListener("select",Ge),i.addEventListener("selectstart",Ge),i.addEventListener("selectend",Ge),i.addEventListener("squeeze",Ge),i.addEventListener("squeezestart",Ge),i.addEventListener("squeezeend",Ge),i.addEventListener("end",ot),i.addEventListener("inputsourceschange",We),R.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const et={antialias:i.renderState.layers===void 0?R.antialias:!0,alpha:R.alpha,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:s};x=new XRWebGLLayer(i,t,et),i.updateRenderState({baseLayer:x}),O=new Xi(x.framebufferWidth,x.framebufferHeight,{format:ir,type:Rt,encoding:e.outputEncoding,stencilBuffer:R.stencil})}else{let et=null,Ut=null,Dt=null;R.depth&&(Dt=R.stencil?35056:33190,et=R.stencil?Ft:Qt,Ut=R.stencil?$r:Di);const Yt={colorFormat:32856,depthFormat:Dt,scaleFactor:s};_=new XRWebGLBinding(i,t),E=_.createProjectionLayer(Yt),i.updateRenderState({layers:[E]}),O=new Xi(E.textureWidth,E.textureHeight,{format:ir,type:Rt,depthTexture:new ps(E.textureWidth,E.textureHeight,Ut,void 0,void 0,void 0,void 0,void 0,void 0,et),stencilBuffer:R.stencil,encoding:e.outputEncoding,samples:R.antialias?4:0});const ft=e.properties.get(O);ft.__ignoreDepthValues=E.ignoreDepthValues}O.isXRRenderTarget=!0,this.setFoveation(1),d=null,u=await i.requestReferenceSpace(c),Qe.setContext(i),Qe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function We(qe){for(let et=0;et<qe.removed.length;et++){const Ut=qe.removed[et],Dt=J.indexOf(Ut);Dt>=0&&(J[Dt]=null,k[Dt].disconnect(Ut))}for(let et=0;et<qe.added.length;et++){const Ut=qe.added[et];let Dt=J.indexOf(Ut);if(Dt===-1){for(let ft=0;ft<k.length;ft++)if(ft>=J.length){J.push(Ut),Dt=ft;break}else if(J[ft]===null){J[ft]=Ut,Dt=ft;break}if(Dt===-1)break}const Yt=k[Dt];Yt&&Yt.connect(Ut)}}const Ne=new he,rt=new he;function ut(qe,et,Ut){Ne.setFromMatrixPosition(et.matrixWorld),rt.setFromMatrixPosition(Ut.matrixWorld);const Dt=Ne.distanceTo(rt),Yt=et.projectionMatrix.elements,ft=Ut.projectionMatrix.elements,Ln=Yt[14]/(Yt[10]-1),rn=Yt[14]/(Yt[10]+1),sn=(Yt[9]+1)/Yt[5],Wt=(Yt[9]-1)/Yt[5],Pn=(Yt[8]-1)/Yt[0],wt=(ft[8]+1)/ft[0],bt=Ln*Pn,Vt=Ln*wt,en=Dt/(-Pn+wt),Xt=en*-Pn;et.matrixWorld.decompose(qe.position,qe.quaternion,qe.scale),qe.translateX(Xt),qe.translateZ(en),qe.matrixWorld.compose(qe.position,qe.quaternion,qe.scale),qe.matrixWorldInverse.copy(qe.matrixWorld).invert();const Dn=Ln+en,xn=rn+en,gn=bt-Xt,Gi=Vt+(Dt-Xt),xi=sn*rn/xn*Dn,ye=Wt*rn/xn*Dn;qe.projectionMatrix.makePerspective(gn,Gi,xi,ye,Dn,xn)}function It(qe,et){et===null?qe.matrixWorld.copy(qe.matrix):qe.matrixWorld.multiplyMatrices(et.matrixWorld,qe.matrix),qe.matrixWorldInverse.copy(qe.matrixWorld).invert()}this.updateCamera=function(qe){if(i===null)return;V.near=me.near=ae.near=qe.near,V.far=me.far=ae.far=qe.far,(pe!==V.near||ve!==V.far)&&(i.updateRenderState({depthNear:V.near,depthFar:V.far}),pe=V.near,ve=V.far);const et=qe.parent,Ut=V.cameras;It(V,et);for(let Yt=0;Yt<Ut.length;Yt++)It(Ut[Yt],et);V.matrixWorld.decompose(V.position,V.quaternion,V.scale),qe.matrix.copy(V.matrix),qe.matrix.decompose(qe.position,qe.quaternion,qe.scale);const Dt=qe.children;for(let Yt=0,ft=Dt.length;Yt<ft;Yt++)Dt[Yt].updateMatrixWorld(!0);Ut.length===2?ut(V,ae,me):V.projectionMatrix.copy(ae.projectionMatrix)},this.getCamera=function(){return V},this.getFoveation=function(){if(E!==null)return E.fixedFoveation;if(x!==null)return x.fixedFoveation},this.setFoveation=function(qe){E!==null&&(E.fixedFoveation=qe),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=qe)},this.getPlanes=function(){return G};let Et=null;function tt(qe,et){if(p=et.getViewerPose(d||u),w=et,p!==null){const Ut=p.views;x!==null&&(e.setRenderTargetFramebuffer(O,x.framebuffer),e.setRenderTarget(O));let Dt=!1;Ut.length!==V.cameras.length&&(V.cameras.length=0,Dt=!0);for(let Yt=0;Yt<Ut.length;Yt++){const ft=Ut[Yt];let Ln=null;if(x!==null)Ln=x.getViewport(ft);else{const sn=_.getViewSubImage(E,ft);Ln=sn.viewport,Yt===0&&(e.setRenderTargetTextures(O,sn.colorTexture,E.ignoreDepthValues?void 0:sn.depthStencilTexture),e.setRenderTarget(O))}let rn=we[Yt];rn===void 0&&(rn=new pr,rn.layers.enable(Yt),rn.viewport=new di,we[Yt]=rn),rn.matrix.fromArray(ft.transform.matrix),rn.projectionMatrix.fromArray(ft.projectionMatrix),rn.viewport.set(Ln.x,Ln.y,Ln.width,Ln.height),Yt===0&&V.matrix.copy(rn.matrix),Dt===!0&&V.cameras.push(rn)}}for(let Ut=0;Ut<k.length;Ut++){const Dt=J[Ut],Yt=k[Ut];Dt!==null&&Yt!==void 0&&Yt.update(Dt,et,d||u)}if(Et&&Et(qe,et),et.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:et.detectedPlanes});let Ut=null;for(const Dt of G)et.detectedPlanes.has(Dt)||(Ut===null&&(Ut=[]),Ut.push(Dt));if(Ut!==null)for(const Dt of Ut)G.delete(Dt),H.delete(Dt),n.dispatchEvent({type:"planeremoved",data:Dt});for(const Dt of et.detectedPlanes)if(!G.has(Dt))G.add(Dt),H.set(Dt,et.lastChangedTime),n.dispatchEvent({type:"planeadded",data:Dt});else{const Yt=H.get(Dt);Dt.lastChangedTime>Yt&&(H.set(Dt,Dt.lastChangedTime),n.dispatchEvent({type:"planechanged",data:Dt}))}}w=null}const Qe=new Td;Qe.setAnimationLoop(tt),this.setAnimationLoop=function(qe){Et=qe},this.dispose=function(){}}}function av(r,e){function t(C,O){O.color.getRGB(C.fogColor.value,jf(r)),O.isFog?(C.fogNear.value=O.near,C.fogFar.value=O.far):O.isFogExp2&&(C.fogDensity.value=O.density)}function n(C,O,k,J,G){O.isMeshBasicMaterial||O.isMeshLambertMaterial?i(C,O):O.isMeshToonMaterial?(i(C,O),_(C,O)):O.isMeshPhongMaterial?(i(C,O),p(C,O)):O.isMeshStandardMaterial?(i(C,O),E(C,O),O.isMeshPhysicalMaterial&&x(C,O,G)):O.isMeshMatcapMaterial?(i(C,O),w(C,O)):O.isMeshDepthMaterial?i(C,O):O.isMeshDistanceMaterial?(i(C,O),R(C,O)):O.isMeshNormalMaterial?i(C,O):O.isLineBasicMaterial?(s(C,O),O.isLineDashedMaterial&&u(C,O)):O.isPointsMaterial?c(C,O,k,J):O.isSpriteMaterial?d(C,O):O.isShadowMaterial?(C.color.value.copy(O.color),C.opacity.value=O.opacity):O.isShaderMaterial&&(O.uniformsNeedUpdate=!1)}function i(C,O){C.opacity.value=O.opacity,O.color&&C.diffuse.value.copy(O.color),O.emissive&&C.emissive.value.copy(O.emissive).multiplyScalar(O.emissiveIntensity),O.map&&(C.map.value=O.map),O.alphaMap&&(C.alphaMap.value=O.alphaMap),O.bumpMap&&(C.bumpMap.value=O.bumpMap,C.bumpScale.value=O.bumpScale,O.side===$&&(C.bumpScale.value*=-1)),O.displacementMap&&(C.displacementMap.value=O.displacementMap,C.displacementScale.value=O.displacementScale,C.displacementBias.value=O.displacementBias),O.emissiveMap&&(C.emissiveMap.value=O.emissiveMap),O.normalMap&&(C.normalMap.value=O.normalMap,C.normalScale.value.copy(O.normalScale),O.side===$&&C.normalScale.value.negate()),O.specularMap&&(C.specularMap.value=O.specularMap),O.alphaTest>0&&(C.alphaTest.value=O.alphaTest);const k=e.get(O).envMap;if(k&&(C.envMap.value=k,C.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,C.reflectivity.value=O.reflectivity,C.ior.value=O.ior,C.refractionRatio.value=O.refractionRatio),O.lightMap){C.lightMap.value=O.lightMap;const H=r.physicallyCorrectLights!==!0?Math.PI:1;C.lightMapIntensity.value=O.lightMapIntensity*H}O.aoMap&&(C.aoMap.value=O.aoMap,C.aoMapIntensity.value=O.aoMapIntensity);let J;O.map?J=O.map:O.specularMap?J=O.specularMap:O.displacementMap?J=O.displacementMap:O.normalMap?J=O.normalMap:O.bumpMap?J=O.bumpMap:O.roughnessMap?J=O.roughnessMap:O.metalnessMap?J=O.metalnessMap:O.alphaMap?J=O.alphaMap:O.emissiveMap?J=O.emissiveMap:O.clearcoatMap?J=O.clearcoatMap:O.clearcoatNormalMap?J=O.clearcoatNormalMap:O.clearcoatRoughnessMap?J=O.clearcoatRoughnessMap:O.iridescenceMap?J=O.iridescenceMap:O.iridescenceThicknessMap?J=O.iridescenceThicknessMap:O.specularIntensityMap?J=O.specularIntensityMap:O.specularColorMap?J=O.specularColorMap:O.transmissionMap?J=O.transmissionMap:O.thicknessMap?J=O.thicknessMap:O.sheenColorMap?J=O.sheenColorMap:O.sheenRoughnessMap&&(J=O.sheenRoughnessMap),J!==void 0&&(J.isWebGLRenderTarget&&(J=J.texture),J.matrixAutoUpdate===!0&&J.updateMatrix(),C.uvTransform.value.copy(J.matrix));let G;O.aoMap?G=O.aoMap:O.lightMap&&(G=O.lightMap),G!==void 0&&(G.isWebGLRenderTarget&&(G=G.texture),G.matrixAutoUpdate===!0&&G.updateMatrix(),C.uv2Transform.value.copy(G.matrix))}function s(C,O){C.diffuse.value.copy(O.color),C.opacity.value=O.opacity}function u(C,O){C.dashSize.value=O.dashSize,C.totalSize.value=O.dashSize+O.gapSize,C.scale.value=O.scale}function c(C,O,k,J){C.diffuse.value.copy(O.color),C.opacity.value=O.opacity,C.size.value=O.size*k,C.scale.value=J*.5,O.map&&(C.map.value=O.map),O.alphaMap&&(C.alphaMap.value=O.alphaMap),O.alphaTest>0&&(C.alphaTest.value=O.alphaTest);let G;O.map?G=O.map:O.alphaMap&&(G=O.alphaMap),G!==void 0&&(G.matrixAutoUpdate===!0&&G.updateMatrix(),C.uvTransform.value.copy(G.matrix))}function d(C,O){C.diffuse.value.copy(O.color),C.opacity.value=O.opacity,C.rotation.value=O.rotation,O.map&&(C.map.value=O.map),O.alphaMap&&(C.alphaMap.value=O.alphaMap),O.alphaTest>0&&(C.alphaTest.value=O.alphaTest);let k;O.map?k=O.map:O.alphaMap&&(k=O.alphaMap),k!==void 0&&(k.matrixAutoUpdate===!0&&k.updateMatrix(),C.uvTransform.value.copy(k.matrix))}function p(C,O){C.specular.value.copy(O.specular),C.shininess.value=Math.max(O.shininess,1e-4)}function _(C,O){O.gradientMap&&(C.gradientMap.value=O.gradientMap)}function E(C,O){C.roughness.value=O.roughness,C.metalness.value=O.metalness,O.roughnessMap&&(C.roughnessMap.value=O.roughnessMap),O.metalnessMap&&(C.metalnessMap.value=O.metalnessMap),e.get(O).envMap&&(C.envMapIntensity.value=O.envMapIntensity)}function x(C,O,k){C.ior.value=O.ior,O.sheen>0&&(C.sheenColor.value.copy(O.sheenColor).multiplyScalar(O.sheen),C.sheenRoughness.value=O.sheenRoughness,O.sheenColorMap&&(C.sheenColorMap.value=O.sheenColorMap),O.sheenRoughnessMap&&(C.sheenRoughnessMap.value=O.sheenRoughnessMap)),O.clearcoat>0&&(C.clearcoat.value=O.clearcoat,C.clearcoatRoughness.value=O.clearcoatRoughness,O.clearcoatMap&&(C.clearcoatMap.value=O.clearcoatMap),O.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=O.clearcoatRoughnessMap),O.clearcoatNormalMap&&(C.clearcoatNormalScale.value.copy(O.clearcoatNormalScale),C.clearcoatNormalMap.value=O.clearcoatNormalMap,O.side===$&&C.clearcoatNormalScale.value.negate())),O.iridescence>0&&(C.iridescence.value=O.iridescence,C.iridescenceIOR.value=O.iridescenceIOR,C.iridescenceThicknessMinimum.value=O.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=O.iridescenceThicknessRange[1],O.iridescenceMap&&(C.iridescenceMap.value=O.iridescenceMap),O.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=O.iridescenceThicknessMap)),O.transmission>0&&(C.transmission.value=O.transmission,C.transmissionSamplerMap.value=k.texture,C.transmissionSamplerSize.value.set(k.width,k.height),O.transmissionMap&&(C.transmissionMap.value=O.transmissionMap),C.thickness.value=O.thickness,O.thicknessMap&&(C.thicknessMap.value=O.thicknessMap),C.attenuationDistance.value=O.attenuationDistance,C.attenuationColor.value.copy(O.attenuationColor)),C.specularIntensity.value=O.specularIntensity,C.specularColor.value.copy(O.specularColor),O.specularIntensityMap&&(C.specularIntensityMap.value=O.specularIntensityMap),O.specularColorMap&&(C.specularColorMap.value=O.specularColorMap)}function w(C,O){O.matcap&&(C.matcap.value=O.matcap)}function R(C,O){C.referencePosition.value.copy(O.referencePosition),C.nearDistance.value=O.nearDistance,C.farDistance.value=O.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function so(r,e,t,n){let i={},s={},u=[];const c=t.isWebGL2?r.getParameter(35375):0;function d(J,G){const H=G.program;n.uniformBlockBinding(J,H)}function p(J,G){let H=i[J.id];H===void 0&&(R(J),H=_(J),i[J.id]=H,J.addEventListener("dispose",O));const ae=G.program;n.updateUBOMapping(J,ae);const me=e.render.frame;s[J.id]!==me&&(x(J),s[J.id]=me)}function _(J){const G=E();J.__bindingPointIndex=G;const H=r.createBuffer(),ae=J.__size,me=J.usage;return r.bindBuffer(35345,H),r.bufferData(35345,ae,me),r.bindBuffer(35345,null),r.bindBufferBase(35345,G,H),H}function E(){for(let J=0;J<c;J++)if(u.indexOf(J)===-1)return u.push(J),J;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(J){const G=i[J.id],H=J.uniforms,ae=J.__cache;r.bindBuffer(35345,G);for(let me=0,we=H.length;me<we;me++){const V=H[me];if(w(V,me,ae)===!0){const pe=V.__offset,ve=Array.isArray(V.value)?V.value:[V.value];let Ge=0;for(let ot=0;ot<ve.length;ot++){const We=ve[ot],Ne=C(We);typeof We=="number"?(V.__data[0]=We,r.bufferSubData(35345,pe+Ge,V.__data)):We.isMatrix3?(V.__data[0]=We.elements[0],V.__data[1]=We.elements[1],V.__data[2]=We.elements[2],V.__data[3]=We.elements[0],V.__data[4]=We.elements[3],V.__data[5]=We.elements[4],V.__data[6]=We.elements[5],V.__data[7]=We.elements[0],V.__data[8]=We.elements[6],V.__data[9]=We.elements[7],V.__data[10]=We.elements[8],V.__data[11]=We.elements[0]):(We.toArray(V.__data,Ge),Ge+=Ne.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(35345,pe,V.__data)}}r.bindBuffer(35345,null)}function w(J,G,H){const ae=J.value;if(H[G]===void 0){if(typeof ae=="number")H[G]=ae;else{const me=Array.isArray(ae)?ae:[ae],we=[];for(let V=0;V<me.length;V++)we.push(me[V].clone());H[G]=we}return!0}else if(typeof ae=="number"){if(H[G]!==ae)return H[G]=ae,!0}else{const me=Array.isArray(H[G])?H[G]:[H[G]],we=Array.isArray(ae)?ae:[ae];for(let V=0;V<me.length;V++){const pe=me[V];if(pe.equals(we[V])===!1)return pe.copy(we[V]),!0}}return!1}function R(J){const G=J.uniforms;let H=0;const ae=16;let me=0;for(let we=0,V=G.length;we<V;we++){const pe=G[we],ve={boundary:0,storage:0},Ge=Array.isArray(pe.value)?pe.value:[pe.value];for(let ot=0,We=Ge.length;ot<We;ot++){const Ne=Ge[ot],rt=C(Ne);ve.boundary+=rt.boundary,ve.storage+=rt.storage}if(pe.__data=new Float32Array(ve.storage/Float32Array.BYTES_PER_ELEMENT),pe.__offset=H,we>0){me=H%ae;const ot=ae-me;me!==0&&ot-ve.boundary<0&&(H+=ae-me,pe.__offset=H)}H+=ve.storage}return me=H%ae,me>0&&(H+=ae-me),J.__size=H,J.__cache={},this}function C(J){const G={boundary:0,storage:0};return typeof J=="number"?(G.boundary=4,G.storage=4):J.isVector2?(G.boundary=8,G.storage=8):J.isVector3||J.isColor?(G.boundary=16,G.storage=12):J.isVector4?(G.boundary=16,G.storage=16):J.isMatrix3?(G.boundary=48,G.storage=48):J.isMatrix4?(G.boundary=64,G.storage=64):J.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",J),G}function O(J){const G=J.target;G.removeEventListener("dispose",O);const H=u.indexOf(G.__bindingPointIndex);u.splice(H,1),r.deleteBuffer(i[G.id]),delete i[G.id],delete s[G.id]}function k(){for(const J in i)r.deleteBuffer(i[J]);u=[],i={},s={}}return{bind:d,update:p,dispose:k}}function ov(){const r=Qu("canvas");return r.style.display="block",r}function Yp(r={}){this.isWebGLRenderer=!0;const e=r.canvas!==void 0?r.canvas:ov(),t=r.context!==void 0?r.context:null,n=r.depth!==void 0?r.depth:!0,i=r.stencil!==void 0?r.stencil:!0,s=r.antialias!==void 0?r.antialias:!1,u=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,c=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,d=r.powerPreference!==void 0?r.powerPreference:"default",p=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let _;t!==null?_=t.getContextAttributes().alpha:_=r.alpha!==void 0?r.alpha:!1;let E=null,x=null;const w=[],R=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Es,this.physicallyCorrectLights=!1,this.toneMapping=le,this.toneMappingExposure=1;const C=this;let O=!1,k=0,J=0,G=null,H=-1,ae=null;const me=new di,we=new di;let V=null,pe=e.width,ve=e.height,Ge=1,ot=null,We=null;const Ne=new di(0,0,pe,ve),rt=new di(0,0,pe,ve);let ut=!1;const It=new rc;let Et=!1,tt=!1,Qe=null;const qe=new kn,et=new vt,Ut=new he,Dt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Yt(){return G===null?Ge:1}let ft=t;function Ln(ge,Ze){for(let _t=0;_t<ge.length;_t++){const Ke=ge[_t],Tt=e.getContext(Ke,Ze);if(Tt!==null)return Tt}return null}try{const ge={alpha:!0,depth:n,stencil:i,antialias:s,premultipliedAlpha:u,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:p};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${D}`),e.addEventListener("webglcontextlost",In,!1),e.addEventListener("webglcontextrestored",En,!1),e.addEventListener("webglcontextcreationerror",Ei,!1),ft===null){const Ze=["webgl2","webgl","experimental-webgl"];if(C.isWebGL1Renderer===!0&&Ze.shift(),ft=Ln(Ze,ge),ft===null)throw Ln(Ze)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ft.getShaderPrecisionFormat===void 0&&(ft.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ge){throw console.error("THREE.WebGLRenderer: "+ge.message),ge}let rn,sn,Wt,Pn,wt,bt,Vt,en,Xt,Dn,xn,gn,Gi,xi,ye,fe,_e,St,Ot,kt,vn,qt,xt,pn;function Cn(){rn=new Wg(ft),sn=new hp(ft,rn,r),rn.init(sn),qt=new rv(ft,rn,sn),Wt=new iv(ft,rn,sn),Pn=new Yg,wt=new Ol,bt=new ta(ft,rn,Wt,wt,sn,qt,Pn),Vt=new dp(C),en=new jg(C),Xt=new ng(ft,sn),xt=new ch(ft,rn,Xt,sn),Dn=new Hg(ft,Xt,Pn,xt),xn=new Zg(ft,Dn,Xt,Pn),Ot=new $g(ft,sn,bt),fe=new xl(wt),gn=new K0(C,Vt,en,rn,sn,xt,fe),Gi=new av(C,wt),xi=new bh,ye=new q0(rn,sn),St=new fc(C,Vt,en,Wt,xn,_,u),_e=new nv(C,xn,sn),pn=new so(ft,Pn,sn,Wt),kt=new fp(ft,rn,Pn,sn),vn=new yp(ft,rn,Pn,sn),Pn.programs=gn.programs,C.capabilities=sn,C.extensions=rn,C.properties=wt,C.renderLists=xi,C.shadowMap=_e,C.state=Wt,C.info=Pn}Cn();const fn=new ar(C,ft);this.xr=fn,this.getContext=function(){return ft},this.getContextAttributes=function(){return ft.getContextAttributes()},this.forceContextLoss=function(){const ge=rn.get("WEBGL_lose_context");ge&&ge.loseContext()},this.forceContextRestore=function(){const ge=rn.get("WEBGL_lose_context");ge&&ge.restoreContext()},this.getPixelRatio=function(){return Ge},this.setPixelRatio=function(ge){ge!==void 0&&(Ge=ge,this.setSize(pe,ve,!1))},this.getSize=function(ge){return ge.set(pe,ve)},this.setSize=function(ge,Ze,_t){if(fn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}pe=ge,ve=Ze,e.width=Math.floor(ge*Ge),e.height=Math.floor(Ze*Ge),_t!==!1&&(e.style.width=ge+"px",e.style.height=Ze+"px"),this.setViewport(0,0,ge,Ze)},this.getDrawingBufferSize=function(ge){return ge.set(pe*Ge,ve*Ge).floor()},this.setDrawingBufferSize=function(ge,Ze,_t){pe=ge,ve=Ze,Ge=_t,e.width=Math.floor(ge*_t),e.height=Math.floor(Ze*_t),this.setViewport(0,0,ge,Ze)},this.getCurrentViewport=function(ge){return ge.copy(me)},this.getViewport=function(ge){return ge.copy(Ne)},this.setViewport=function(ge,Ze,_t,Ke){ge.isVector4?Ne.set(ge.x,ge.y,ge.z,ge.w):Ne.set(ge,Ze,_t,Ke),Wt.viewport(me.copy(Ne).multiplyScalar(Ge).floor())},this.getScissor=function(ge){return ge.copy(rt)},this.setScissor=function(ge,Ze,_t,Ke){ge.isVector4?rt.set(ge.x,ge.y,ge.z,ge.w):rt.set(ge,Ze,_t,Ke),Wt.scissor(we.copy(rt).multiplyScalar(Ge).floor())},this.getScissorTest=function(){return ut},this.setScissorTest=function(ge){Wt.setScissorTest(ut=ge)},this.setOpaqueSort=function(ge){ot=ge},this.setTransparentSort=function(ge){We=ge},this.getClearColor=function(ge){return ge.copy(St.getClearColor())},this.setClearColor=function(){St.setClearColor.apply(St,arguments)},this.getClearAlpha=function(){return St.getClearAlpha()},this.setClearAlpha=function(){St.setClearAlpha.apply(St,arguments)},this.clear=function(ge=!0,Ze=!0,_t=!0){let Ke=0;ge&&(Ke|=16384),Ze&&(Ke|=256),_t&&(Ke|=1024),ft.clear(Ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",In,!1),e.removeEventListener("webglcontextrestored",En,!1),e.removeEventListener("webglcontextcreationerror",Ei,!1),xi.dispose(),ye.dispose(),wt.dispose(),Vt.dispose(),en.dispose(),xn.dispose(),xt.dispose(),pn.dispose(),gn.dispose(),fn.dispose(),fn.removeEventListener("sessionstart",an),fn.removeEventListener("sessionend",dn),Qe&&(Qe.dispose(),Qe=null),Pi.stop()};function In(ge){ge.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function En(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1;const ge=Pn.autoReset,Ze=_e.enabled,_t=_e.autoUpdate,Ke=_e.needsUpdate,Tt=_e.type;Cn(),Pn.autoReset=ge,_e.enabled=Ze,_e.autoUpdate=_t,_e.needsUpdate=Ke,_e.type=Tt}function Ei(ge){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ge.statusMessage)}function tr(ge){const Ze=ge.target;Ze.removeEventListener("dispose",tr),Yr(Ze)}function Yr(ge){ke(ge),wt.remove(ge)}function ke(ge){const Ze=wt.get(ge).programs;Ze!==void 0&&(Ze.forEach(function(_t){gn.releaseProgram(_t)}),ge.isShaderMaterial&&gn.releaseShaderCache(ge))}this.renderBufferDirect=function(ge,Ze,_t,Ke,Tt,wn){Ze===null&&(Ze=Dt);const Hn=Tt.isMesh&&Tt.matrixWorld.determinant()<0,si=uA(ge,Ze,_t,Ke,Tt);Wt.setMaterial(Ke,Hn);let ci=_t.index,Si=1;Ke.wireframe===!0&&(ci=Dn.getWireframeAttribute(_t),Si=2);const gi=_t.drawRange,vi=_t.attributes.position;let Pr=gi.start*Si,sa=(gi.start+gi.count)*Si;wn!==null&&(Pr=Math.max(Pr,wn.start*Si),sa=Math.min(sa,(wn.start+wn.count)*Si)),ci!==null?(Pr=Math.max(Pr,0),sa=Math.min(sa,ci.count)):vi!=null&&(Pr=Math.max(Pr,0),sa=Math.min(sa,vi.count));const eu=sa-Pr;if(eu<0||eu===1/0)return;xt.setup(Tt,Ke,si,_t,ci);let Gc,Ir=kt;if(ci!==null&&(Gc=Xt.get(ci),Ir=vn,Ir.setIndex(Gc)),Tt.isMesh)Ke.wireframe===!0?(Wt.setLineWidth(Ke.wireframeLinewidth*Yt()),Ir.setMode(1)):Ir.setMode(4);else if(Tt.isLine){let _i=Ke.linewidth;_i===void 0&&(_i=1),Wt.setLineWidth(_i*Yt()),Tt.isLineSegments?Ir.setMode(1):Tt.isLineLoop?Ir.setMode(2):Ir.setMode(3)}else Tt.isPoints?Ir.setMode(0):Tt.isSprite&&Ir.setMode(4);if(Tt.isInstancedMesh)Ir.renderInstances(Pr,eu,Tt.count);else if(_t.isInstancedBufferGeometry){const _i=_t._maxInstanceCount!==void 0?_t._maxInstanceCount:1/0,C_=Math.min(_t.instanceCount,_i);Ir.renderInstances(Pr,eu,C_)}else Ir.render(Pr,eu)},this.compile=function(ge,Ze){function _t(Ke,Tt,wn){Ke.transparent===!0&&Ke.side===Se?(Ke.side=$,Ke.needsUpdate=!0,ya(Ke,Tt,wn),Ke.side=B,Ke.needsUpdate=!0,ya(Ke,Tt,wn),Ke.side=Se):ya(Ke,Tt,wn)}x=ye.get(ge),x.init(),R.push(x),ge.traverseVisible(function(Ke){Ke.isLight&&Ke.layers.test(Ze.layers)&&(x.pushLight(Ke),Ke.castShadow&&x.pushShadow(Ke))}),x.setupLights(C.physicallyCorrectLights),ge.traverse(function(Ke){const Tt=Ke.material;if(Tt)if(Array.isArray(Tt))for(let wn=0;wn<Tt.length;wn++){const Hn=Tt[wn];_t(Hn,ge,Ke)}else _t(Tt,ge,Ke)}),R.pop(),x=null};let gt=null;function Nt(ge){gt&&gt(ge)}function an(){Pi.stop()}function dn(){Pi.start()}const Pi=new Td;Pi.setAnimationLoop(Nt),typeof self<"u"&&Pi.setContext(self),this.setAnimationLoop=function(ge){gt=ge,fn.setAnimationLoop(ge),ge===null?Pi.stop():Pi.start()},fn.addEventListener("sessionstart",an),fn.addEventListener("sessionend",dn),this.render=function(ge,Ze){if(Ze!==void 0&&Ze.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(O===!0)return;ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),Ze.parent===null&&Ze.matrixWorldAutoUpdate===!0&&Ze.updateMatrixWorld(),fn.enabled===!0&&fn.isPresenting===!0&&(fn.cameraAutoUpdate===!0&&fn.updateCamera(Ze),Ze=fn.getCamera()),ge.isScene===!0&&ge.onBeforeRender(C,ge,Ze,G),x=ye.get(ge,R.length),x.init(),R.push(x),qe.multiplyMatrices(Ze.projectionMatrix,Ze.matrixWorldInverse),It.setFromProjectionMatrix(qe),tt=this.localClippingEnabled,Et=fe.init(this.clippingPlanes,tt,Ze),E=xi.get(ge,w.length),E.init(),w.push(E),Xr(ge,Ze,0,C.sortObjects),E.finish(),C.sortObjects===!0&&E.sort(ot,We),Et===!0&&fe.beginShadows();const _t=x.state.shadowsArray;if(_e.render(_t,ge,Ze),Et===!0&&fe.endShadows(),this.info.autoReset===!0&&this.info.reset(),St.render(E,ge),x.setupLights(C.physicallyCorrectLights),Ze.isArrayCamera){const Ke=Ze.cameras;for(let Tt=0,wn=Ke.length;Tt<wn;Tt++){const Hn=Ke[Tt];ys(E,ge,Hn,Hn.viewport)}}else ys(E,ge,Ze);G!==null&&(bt.updateMultisampleRenderTarget(G),bt.updateRenderTargetMipmap(G)),ge.isScene===!0&&ge.onAfterRender(C,ge,Ze),xt.resetDefaultState(),H=-1,ae=null,R.pop(),R.length>0?x=R[R.length-1]:x=null,w.pop(),w.length>0?E=w[w.length-1]:E=null};function Xr(ge,Ze,_t,Ke){if(ge.visible===!1)return;if(ge.layers.test(Ze.layers)){if(ge.isGroup)_t=ge.renderOrder;else if(ge.isLOD)ge.autoUpdate===!0&&ge.update(Ze);else if(ge.isLight)x.pushLight(ge),ge.castShadow&&x.pushShadow(ge);else if(ge.isSprite){if(!ge.frustumCulled||It.intersectsSprite(ge)){Ke&&Ut.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(qe);const Hn=xn.update(ge),si=ge.material;si.visible&&E.push(ge,Hn,si,_t,Ut.z,null)}}else if((ge.isMesh||ge.isLine||ge.isPoints)&&(ge.isSkinnedMesh&&ge.skeleton.frame!==Pn.render.frame&&(ge.skeleton.update(),ge.skeleton.frame=Pn.render.frame),!ge.frustumCulled||It.intersectsObject(ge))){Ke&&Ut.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(qe);const Hn=xn.update(ge),si=ge.material;if(Array.isArray(si)){const ci=Hn.groups;for(let Si=0,gi=ci.length;Si<gi;Si++){const vi=ci[Si],Pr=si[vi.materialIndex];Pr&&Pr.visible&&E.push(ge,Hn,Pr,_t,Ut.z,vi)}}else si.visible&&E.push(ge,Hn,si,_t,Ut.z,null)}}const wn=ge.children;for(let Hn=0,si=wn.length;Hn<si;Hn++)Xr(wn[Hn],Ze,_t,Ke)}function ys(ge,Ze,_t,Ke){const Tt=ge.opaque,wn=ge.transmissive,Hn=ge.transparent;x.setupLightsView(_t),wn.length>0&&zc(Tt,Ze,_t),Ke&&Wt.viewport(me.copy(Ke)),Tt.length>0&&nr(Tt,Ze,_t),wn.length>0&&nr(wn,Ze,_t),Hn.length>0&&nr(Hn,Ze,_t),Wt.buffers.depth.setTest(!0),Wt.buffers.depth.setMask(!0),Wt.buffers.color.setMask(!0),Wt.setPolygonOffset(!1)}function zc(ge,Ze,_t){const Ke=sn.isWebGL2;Qe===null&&(Qe=new Xi(1,1,{generateMipmaps:!0,type:rn.has("EXT_color_buffer_half_float")?Ar:Rt,minFilter:$e,samples:Ke&&s===!0?4:0})),C.getDrawingBufferSize(et),Ke?Qe.setSize(et.x,et.y):Qe.setSize(Mr(et.x),Mr(et.y));const Tt=C.getRenderTarget();C.setRenderTarget(Qe),C.clear();const wn=C.toneMapping;C.toneMapping=le,nr(ge,Ze,_t),C.toneMapping=wn,bt.updateMultisampleRenderTarget(Qe),bt.updateRenderTargetMipmap(Qe),C.setRenderTarget(Tt)}function nr(ge,Ze,_t){const Ke=Ze.isScene===!0?Ze.overrideMaterial:null;for(let Tt=0,wn=ge.length;Tt<wn;Tt++){const Hn=ge[Tt],si=Hn.object,ci=Hn.geometry,Si=Ke===null?Hn.material:Ke,gi=Hn.group;si.layers.test(_t.layers)&&qo(si,Ze,_t,ci,Si,gi)}}function qo(ge,Ze,_t,Ke,Tt,wn){ge.onBeforeRender(C,Ze,_t,Ke,Tt,wn),ge.modelViewMatrix.multiplyMatrices(_t.matrixWorldInverse,ge.matrixWorld),ge.normalMatrix.getNormalMatrix(ge.modelViewMatrix),Tt.onBeforeRender(C,Ze,_t,Ke,ge,wn),Tt.transparent===!0&&Tt.side===Se?(Tt.side=$,Tt.needsUpdate=!0,C.renderBufferDirect(_t,Ze,Ke,Tt,ge,wn),Tt.side=B,Tt.needsUpdate=!0,C.renderBufferDirect(_t,Ze,Ke,Tt,ge,wn),Tt.side=Se):C.renderBufferDirect(_t,Ze,Ke,Tt,ge,wn),ge.onAfterRender(C,Ze,_t,Ke,Tt,wn)}function ya(ge,Ze,_t){Ze.isScene!==!0&&(Ze=Dt);const Ke=wt.get(ge),Tt=x.state.lights,wn=x.state.shadowsArray,Hn=Tt.state.version,si=gn.getParameters(ge,Tt.state,wn,Ze,_t),ci=gn.getProgramCacheKey(si);let Si=Ke.programs;Ke.environment=ge.isMeshStandardMaterial?Ze.environment:null,Ke.fog=Ze.fog,Ke.envMap=(ge.isMeshStandardMaterial?en:Vt).get(ge.envMap||Ke.environment),Si===void 0&&(ge.addEventListener("dispose",tr),Si=new Map,Ke.programs=Si);let gi=Si.get(ci);if(gi!==void 0){if(Ke.currentProgram===gi&&Ke.lightsStateVersion===Hn)return Xb(ge,si),gi}else si.uniforms=gn.getUniforms(ge),ge.onBuild(_t,si,C),ge.onBeforeCompile(si,C),gi=gn.acquireProgram(si,ci),Si.set(ci,gi),Ke.uniforms=si.uniforms;const vi=Ke.uniforms;(!ge.isShaderMaterial&&!ge.isRawShaderMaterial||ge.clipping===!0)&&(vi.clippingPlanes=fe.uniform),Xb(ge,si),Ke.needsLights=lA(ge),Ke.lightsStateVersion=Hn,Ke.needsLights&&(vi.ambientLightColor.value=Tt.state.ambient,vi.lightProbe.value=Tt.state.probe,vi.directionalLights.value=Tt.state.directional,vi.directionalLightShadows.value=Tt.state.directionalShadow,vi.spotLights.value=Tt.state.spot,vi.spotLightShadows.value=Tt.state.spotShadow,vi.rectAreaLights.value=Tt.state.rectArea,vi.ltc_1.value=Tt.state.rectAreaLTC1,vi.ltc_2.value=Tt.state.rectAreaLTC2,vi.pointLights.value=Tt.state.point,vi.pointLightShadows.value=Tt.state.pointShadow,vi.hemisphereLights.value=Tt.state.hemi,vi.directionalShadowMap.value=Tt.state.directionalShadowMap,vi.directionalShadowMatrix.value=Tt.state.directionalShadowMatrix,vi.spotShadowMap.value=Tt.state.spotShadowMap,vi.spotLightMatrix.value=Tt.state.spotLightMatrix,vi.spotLightMap.value=Tt.state.spotLightMap,vi.pointShadowMap.value=Tt.state.pointShadowMap,vi.pointShadowMatrix.value=Tt.state.pointShadowMatrix);const Pr=gi.getUniforms(),sa=wl.seqWithValue(Pr.seq,vi);return Ke.currentProgram=gi,Ke.uniformsList=sa,gi}function Xb(ge,Ze){const _t=wt.get(ge);_t.outputEncoding=Ze.outputEncoding,_t.instancing=Ze.instancing,_t.skinning=Ze.skinning,_t.morphTargets=Ze.morphTargets,_t.morphNormals=Ze.morphNormals,_t.morphColors=Ze.morphColors,_t.morphTargetsCount=Ze.morphTargetsCount,_t.numClippingPlanes=Ze.numClippingPlanes,_t.numIntersection=Ze.numClipIntersection,_t.vertexAlphas=Ze.vertexAlphas,_t.vertexTangents=Ze.vertexTangents,_t.toneMapping=Ze.toneMapping}function uA(ge,Ze,_t,Ke,Tt){Ze.isScene!==!0&&(Ze=Dt),bt.resetTextureUnits();const wn=Ze.fog,Hn=Ke.isMeshStandardMaterial?Ze.environment:null,si=G===null?C.outputEncoding:G.isXRRenderTarget===!0?G.texture.encoding:Es,ci=(Ke.isMeshStandardMaterial?en:Vt).get(Ke.envMap||Hn),Si=Ke.vertexColors===!0&&!!_t.attributes.color&&_t.attributes.color.itemSize===4,gi=!!Ke.normalMap&&!!_t.attributes.tangent,vi=!!_t.morphAttributes.position,Pr=!!_t.morphAttributes.normal,sa=!!_t.morphAttributes.color,eu=Ke.toneMapped?C.toneMapping:le,Gc=_t.morphAttributes.position||_t.morphAttributes.normal||_t.morphAttributes.color,Ir=Gc!==void 0?Gc.length:0,_i=wt.get(Ke),C_=x.state.lights;if(Et===!0&&(tt===!0||ge!==ae)){const aa=ge===ae&&Ke.id===H;fe.setState(Ke,ge,aa)}let Kr=!1;Ke.version===_i.__version?(_i.needsLights&&_i.lightsStateVersion!==C_.state.version||_i.outputEncoding!==si||Tt.isInstancedMesh&&_i.instancing===!1||!Tt.isInstancedMesh&&_i.instancing===!0||Tt.isSkinnedMesh&&_i.skinning===!1||!Tt.isSkinnedMesh&&_i.skinning===!0||_i.envMap!==ci||Ke.fog===!0&&_i.fog!==wn||_i.numClippingPlanes!==void 0&&(_i.numClippingPlanes!==fe.numPlanes||_i.numIntersection!==fe.numIntersection)||_i.vertexAlphas!==Si||_i.vertexTangents!==gi||_i.morphTargets!==vi||_i.morphNormals!==Pr||_i.morphColors!==sa||_i.toneMapping!==eu||sn.isWebGL2===!0&&_i.morphTargetsCount!==Ir)&&(Kr=!0):(Kr=!0,_i.__version=Ke.version);let kc=_i.currentProgram;Kr===!0&&(kc=ya(Ke,Ze,Tt));let Kb=!1,cd=!1,O_=!1;const Is=kc.getUniforms(),Vc=_i.uniforms;if(Wt.useProgram(kc.program)&&(Kb=!0,cd=!0,O_=!0),Ke.id!==H&&(H=Ke.id,cd=!0),Kb||ae!==ge){if(Is.setValue(ft,"projectionMatrix",ge.projectionMatrix),sn.logarithmicDepthBuffer&&Is.setValue(ft,"logDepthBufFC",2/(Math.log(ge.far+1)/Math.LN2)),ae!==ge&&(ae=ge,cd=!0,O_=!0),Ke.isShaderMaterial||Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshStandardMaterial||Ke.envMap){const aa=Is.map.cameraPosition;aa!==void 0&&aa.setValue(ft,Ut.setFromMatrixPosition(ge.matrixWorld))}(Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshLambertMaterial||Ke.isMeshBasicMaterial||Ke.isMeshStandardMaterial||Ke.isShaderMaterial)&&Is.setValue(ft,"isOrthographic",ge.isOrthographicCamera===!0),(Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshLambertMaterial||Ke.isMeshBasicMaterial||Ke.isMeshStandardMaterial||Ke.isShaderMaterial||Ke.isShadowMaterial||Tt.isSkinnedMesh)&&Is.setValue(ft,"viewMatrix",ge.matrixWorldInverse)}if(Tt.isSkinnedMesh){Is.setOptional(ft,Tt,"bindMatrix"),Is.setOptional(ft,Tt,"bindMatrixInverse");const aa=Tt.skeleton;aa&&(sn.floatVertexTextures?(aa.boneTexture===null&&aa.computeBoneTexture(),Is.setValue(ft,"boneTexture",aa.boneTexture,bt),Is.setValue(ft,"boneTextureSize",aa.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const P_=_t.morphAttributes;if((P_.position!==void 0||P_.normal!==void 0||P_.color!==void 0&&sn.isWebGL2===!0)&&Ot.update(Tt,_t,Ke,kc),(cd||_i.receiveShadow!==Tt.receiveShadow)&&(_i.receiveShadow=Tt.receiveShadow,Is.setValue(ft,"receiveShadow",Tt.receiveShadow)),Ke.isMeshGouraudMaterial&&Ke.envMap!==null&&(Vc.envMap.value=ci,Vc.flipEnvMap.value=ci.isCubeTexture&&ci.isRenderTargetTexture===!1?-1:1),cd&&(Is.setValue(ft,"toneMappingExposure",C.toneMappingExposure),_i.needsLights&&cA(Vc,O_),wn&&Ke.fog===!0&&Gi.refreshFogUniforms(Vc,wn),Gi.refreshMaterialUniforms(Vc,Ke,Ge,ve,Qe),wl.upload(ft,_i.uniformsList,Vc,bt)),Ke.isShaderMaterial&&Ke.uniformsNeedUpdate===!0&&(wl.upload(ft,_i.uniformsList,Vc,bt),Ke.uniformsNeedUpdate=!1),Ke.isSpriteMaterial&&Is.setValue(ft,"center",Tt.center),Is.setValue(ft,"modelViewMatrix",Tt.modelViewMatrix),Is.setValue(ft,"normalMatrix",Tt.normalMatrix),Is.setValue(ft,"modelMatrix",Tt.matrixWorld),Ke.isShaderMaterial||Ke.isRawShaderMaterial){const aa=Ke.uniformsGroups;for(let I_=0,fA=aa.length;I_<fA;I_++)if(sn.isWebGL2){const $b=aa[I_];pn.update($b,kc),pn.bind($b,kc)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return kc}function cA(ge,Ze){ge.ambientLightColor.needsUpdate=Ze,ge.lightProbe.needsUpdate=Ze,ge.directionalLights.needsUpdate=Ze,ge.directionalLightShadows.needsUpdate=Ze,ge.pointLights.needsUpdate=Ze,ge.pointLightShadows.needsUpdate=Ze,ge.spotLights.needsUpdate=Ze,ge.spotLightShadows.needsUpdate=Ze,ge.rectAreaLights.needsUpdate=Ze,ge.hemisphereLights.needsUpdate=Ze}function lA(ge){return ge.isMeshLambertMaterial||ge.isMeshToonMaterial||ge.isMeshPhongMaterial||ge.isMeshStandardMaterial||ge.isShadowMaterial||ge.isShaderMaterial&&ge.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return J},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function(ge,Ze,_t){wt.get(ge.texture).__webglTexture=Ze,wt.get(ge.depthTexture).__webglTexture=_t;const Ke=wt.get(ge);Ke.__hasExternalTextures=!0,Ke.__hasExternalTextures&&(Ke.__autoAllocateDepthBuffer=_t===void 0,Ke.__autoAllocateDepthBuffer||rn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ke.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ge,Ze){const _t=wt.get(ge);_t.__webglFramebuffer=Ze,_t.__useDefaultFramebuffer=Ze===void 0},this.setRenderTarget=function(ge,Ze=0,_t=0){G=ge,k=Ze,J=_t;let Ke=!0,Tt=null,wn=!1,Hn=!1;if(ge){const ci=wt.get(ge);ci.__useDefaultFramebuffer!==void 0?(Wt.bindFramebuffer(36160,null),Ke=!1):ci.__webglFramebuffer===void 0?bt.setupRenderTarget(ge):ci.__hasExternalTextures&&bt.rebindTextures(ge,wt.get(ge.texture).__webglTexture,wt.get(ge.depthTexture).__webglTexture);const Si=ge.texture;(Si.isData3DTexture||Si.isDataArrayTexture||Si.isCompressedArrayTexture)&&(Hn=!0);const gi=wt.get(ge).__webglFramebuffer;ge.isWebGLCubeRenderTarget?(Tt=gi[Ze],wn=!0):sn.isWebGL2&&ge.samples>0&&bt.useMultisampledRTT(ge)===!1?Tt=wt.get(ge).__webglMultisampledFramebuffer:Tt=gi,me.copy(ge.viewport),we.copy(ge.scissor),V=ge.scissorTest}else me.copy(Ne).multiplyScalar(Ge).floor(),we.copy(rt).multiplyScalar(Ge).floor(),V=ut;if(Wt.bindFramebuffer(36160,Tt)&&sn.drawBuffers&&Ke&&Wt.drawBuffers(ge,Tt),Wt.viewport(me),Wt.scissor(we),Wt.setScissorTest(V),wn){const ci=wt.get(ge.texture);ft.framebufferTexture2D(36160,36064,34069+Ze,ci.__webglTexture,_t)}else if(Hn){const ci=wt.get(ge.texture),Si=Ze||0;ft.framebufferTextureLayer(36160,36064,ci.__webglTexture,_t||0,Si)}H=-1},this.readRenderTargetPixels=function(ge,Ze,_t,Ke,Tt,wn,Hn){if(!(ge&&ge.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let si=wt.get(ge).__webglFramebuffer;if(ge.isWebGLCubeRenderTarget&&Hn!==void 0&&(si=si[Hn]),si){Wt.bindFramebuffer(36160,si);try{const ci=ge.texture,Si=ci.format,gi=ci.type;if(Si!==ir&&qt.convert(Si)!==ft.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const vi=gi===Ar&&(rn.has("EXT_color_buffer_half_float")||sn.isWebGL2&&rn.has("EXT_color_buffer_float"));if(gi!==Rt&&qt.convert(gi)!==ft.getParameter(35738)&&!(gi===Ti&&(sn.isWebGL2||rn.has("OES_texture_float")||rn.has("WEBGL_color_buffer_float")))&&!vi){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ze>=0&&Ze<=ge.width-Ke&&_t>=0&&_t<=ge.height-Tt&&ft.readPixels(Ze,_t,Ke,Tt,qt.convert(Si),qt.convert(gi),wn)}finally{const ci=G!==null?wt.get(G).__webglFramebuffer:null;Wt.bindFramebuffer(36160,ci)}}},this.copyFramebufferToTexture=function(ge,Ze,_t=0){const Ke=Math.pow(2,-_t),Tt=Math.floor(Ze.image.width*Ke),wn=Math.floor(Ze.image.height*Ke);bt.setTexture2D(Ze,0),ft.copyTexSubImage2D(3553,_t,0,0,ge.x,ge.y,Tt,wn),Wt.unbindTexture()},this.copyTextureToTexture=function(ge,Ze,_t,Ke=0){const Tt=Ze.image.width,wn=Ze.image.height,Hn=qt.convert(_t.format),si=qt.convert(_t.type);bt.setTexture2D(_t,0),ft.pixelStorei(37440,_t.flipY),ft.pixelStorei(37441,_t.premultiplyAlpha),ft.pixelStorei(3317,_t.unpackAlignment),Ze.isDataTexture?ft.texSubImage2D(3553,Ke,ge.x,ge.y,Tt,wn,Hn,si,Ze.image.data):Ze.isCompressedTexture?ft.compressedTexSubImage2D(3553,Ke,ge.x,ge.y,Ze.mipmaps[0].width,Ze.mipmaps[0].height,Hn,Ze.mipmaps[0].data):ft.texSubImage2D(3553,Ke,ge.x,ge.y,Hn,si,Ze.image),Ke===0&&_t.generateMipmaps&&ft.generateMipmap(3553),Wt.unbindTexture()},this.copyTextureToTexture3D=function(ge,Ze,_t,Ke,Tt=0){if(C.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const wn=ge.max.x-ge.min.x+1,Hn=ge.max.y-ge.min.y+1,si=ge.max.z-ge.min.z+1,ci=qt.convert(Ke.format),Si=qt.convert(Ke.type);let gi;if(Ke.isData3DTexture)bt.setTexture3D(Ke,0),gi=32879;else if(Ke.isDataArrayTexture)bt.setTexture2DArray(Ke,0),gi=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ft.pixelStorei(37440,Ke.flipY),ft.pixelStorei(37441,Ke.premultiplyAlpha),ft.pixelStorei(3317,Ke.unpackAlignment);const vi=ft.getParameter(3314),Pr=ft.getParameter(32878),sa=ft.getParameter(3316),eu=ft.getParameter(3315),Gc=ft.getParameter(32877),Ir=_t.isCompressedTexture?_t.mipmaps[0]:_t.image;ft.pixelStorei(3314,Ir.width),ft.pixelStorei(32878,Ir.height),ft.pixelStorei(3316,ge.min.x),ft.pixelStorei(3315,ge.min.y),ft.pixelStorei(32877,ge.min.z),_t.isDataTexture||_t.isData3DTexture?ft.texSubImage3D(gi,Tt,Ze.x,Ze.y,Ze.z,wn,Hn,si,ci,Si,Ir.data):_t.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ft.compressedTexSubImage3D(gi,Tt,Ze.x,Ze.y,Ze.z,wn,Hn,si,ci,Ir.data)):ft.texSubImage3D(gi,Tt,Ze.x,Ze.y,Ze.z,wn,Hn,si,ci,Si,Ir),ft.pixelStorei(3314,vi),ft.pixelStorei(32878,Pr),ft.pixelStorei(3316,sa),ft.pixelStorei(3315,eu),ft.pixelStorei(32877,Gc),Tt===0&&Ke.generateMipmaps&&ft.generateMipmap(gi),Wt.unbindTexture()},this.initTexture=function(ge){ge.isCubeTexture?bt.setTextureCube(ge,0):ge.isData3DTexture?bt.setTexture3D(ge,0):ge.isDataArrayTexture||ge.isCompressedArrayTexture?bt.setTexture2DArray(ge,0):bt.setTexture2D(ge,0),Wt.unbindTexture()},this.resetState=function(){k=0,J=0,G=null,Wt.reset(),xt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class uv extends Yp{}uv.prototype.isWebGL1Renderer=!0;class Eh{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Zt(e),this.density=t}clone(){return new Eh(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Sh{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Zt(e),this.near=t,this.far=n}clone(){return new Sh(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Rl extends ui{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Ah{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ka,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ln()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ln()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ln()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Qi=new he;class Cs{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Qi.fromBufferAttribute(this,t),Qi.applyMatrix4(e),this.setXYZ(t,Qi.x,Qi.y,Qi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Qi.fromBufferAttribute(this,t),Qi.applyNormalMatrix(e),this.setXYZ(t,Qi.x,Qi.y,Qi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Qi.fromBufferAttribute(this,t),Qi.transformDirection(e),this.setXYZ(t,Qi.x,Qi.y,Qi.z);return this}setX(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=$i(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=$i(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=$i(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=$i(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array),i=wi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=wi(t,this.array),n=wi(n,this.array),i=wi(i,this.array),s=wi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Ui(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Cs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ao extends Qr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Oi;const Bi=new he,Uo=new he,Ru=new he,Lu=new vt,pc=new vt,Xp=new kn,Ll=new he,mc=new he,gc=new he,Du=new vt,vc=new vt,Kp=new vt;class Th extends ui{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Oi===void 0){Oi=new An;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ah(t,5);Oi.setIndex([0,1,2,0,2,3]),Oi.setAttribute("position",new Cs(n,3,0,!1)),Oi.setAttribute("uv",new Cs(n,2,3,!1))}this.geometry=Oi,this.material=e!==void 0?e:new ao,this.center=new vt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Uo.setFromMatrixScale(this.matrixWorld),Xp.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ru.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Uo.multiplyScalar(-Ru.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const u=this.center;No(Ll.set(-.5,-.5,0),Ru,u,Uo,i,s),No(mc.set(.5,-.5,0),Ru,u,Uo,i,s),No(gc.set(.5,.5,0),Ru,u,Uo,i,s),Du.set(0,0),vc.set(1,0),Kp.set(1,1);let c=e.ray.intersectTriangle(Ll,mc,gc,!1,Bi);if(c===null&&(No(mc.set(-.5,.5,0),Ru,u,Uo,i,s),vc.set(0,1),c=e.ray.intersectTriangle(Ll,gc,mc,!1,Bi),c===null))return;const d=e.ray.origin.distanceTo(Bi);d<e.near||d>e.far||t.push({distance:d,point:Bi.clone(),uv:ea.getUV(Bi,Ll,mc,gc,Du,vc,Kp,new vt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function No(r,e,t,n,i,s){Lu.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(pc.x=s*Lu.x-i*Lu.y,pc.y=i*Lu.x+s*Lu.y):pc.copy(Lu),r.copy(e),r.x+=pc.x,r.y+=pc.y,r.applyMatrix4(Xp)}const jr=new he,Bo=new he;class cv extends ui{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){jr.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(jr);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){jr.setFromMatrixPosition(e.matrixWorld),Bo.setFromMatrixPosition(this.matrixWorld);const n=jr.distanceTo(Bo)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let u=t[i].distance;if(t[i].object.visible&&(u-=u*t[i].hysteresis),n>=u)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const u=n[i];t.object.levels.push({object:u.object.uuid,distance:u.distance,hysteresis:u.hysteresis})}return t}}const $p=new he,Zp=new di,Qp=new di,lv=new he,wh=new kn;class Da extends dr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new kn,this.bindMatrixInverse=new kn}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new di,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,i=this.geometry;Zp.fromBufferAttribute(i.attributes.skinIndex,e),Qp.fromBufferAttribute(i.attributes.skinWeight,e),$p.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const u=Qp.getComponent(s);if(u!==0){const c=Zp.getComponent(s);wh.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(lv.copy($p).applyMatrix4(wh),u)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Wn extends ui{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fu extends cr{constructor(e=null,t=1,n=1,i,s,u,c,d,p=Qn,_=Qn,E,x){super(null,u,c,d,p,_,i,s,E,x),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Os=new kn,Jp=new kn;class Mh{constructor(e=[],t=[]){this.uuid=ln(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new kn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new kn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,u=e.length;s<u;s++){const c=e[s]?e[s].matrixWorld:Jp;Os.multiplyMatrices(c,t[s]),Os.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Mh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Yi(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Fu(t,e,e,ir,Ti);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let u=t[s];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),u=new Wn),this.bones.push(u),this.boneInverses.push(new kn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const u=t[i];e.bones.push(u.uuid);const c=n[i];e.boneInverses.push(c.toArray())}return e}}class fi extends Ui{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const qp=new kn,Ch=new kn,zo=[],fv=new kn,_c=new dr;class hv extends dr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new fi(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let i=0;i<n;i++)this.setMatrixAt(i,fv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(_c.geometry=this.geometry,_c.material=this.material,_c.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,qp),Ch.multiplyMatrices(n,qp),_c.matrixWorld=Ch,_c.raycast(e,zo);for(let u=0,c=zo.length;u<c;u++){const d=zo[u];d.instanceId=s,d.object=this,t.push(d)}zo.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new fi(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ms extends Qr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Zt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const em=new he,tm=new he,nm=new kn,Oh=new nl,Dl=new Us;class Go extends ui{constructor(e=new An,t=new ms){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)em.fromBufferAttribute(t,i-1),tm.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=em.distanceTo(tm);e.setAttribute("lineDistance",new Jt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Dl.copy(n.boundingSphere),Dl.applyMatrix4(i),Dl.radius+=s,e.ray.intersectsSphere(Dl)===!1)return;nm.copy(i).invert(),Oh.copy(e.ray).applyMatrix4(nm);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,p=new he,_=new he,E=new he,x=new he,w=this.isLineSegments?2:1,R=n.index,O=n.attributes.position;if(R!==null){const k=Math.max(0,u.start),J=Math.min(R.count,u.start+u.count);for(let G=k,H=J-1;G<H;G+=w){const ae=R.getX(G),me=R.getX(G+1);if(p.fromBufferAttribute(O,ae),_.fromBufferAttribute(O,me),Oh.distanceSqToSegment(p,_,x,E)>d)continue;x.applyMatrix4(this.matrixWorld);const V=e.ray.origin.distanceTo(x);V<e.near||V>e.far||t.push({distance:V,point:E.clone().applyMatrix4(this.matrixWorld),index:G,face:null,faceIndex:null,object:this})}}else{const k=Math.max(0,u.start),J=Math.min(O.count,u.start+u.count);for(let G=k,H=J-1;G<H;G+=w){if(p.fromBufferAttribute(O,G),_.fromBufferAttribute(O,G+1),Oh.distanceSqToSegment(p,_,x,E)>d)continue;x.applyMatrix4(this.matrixWorld);const me=e.ray.origin.distanceTo(x);me<e.near||me>e.far||t.push({distance:me,point:E.clone().applyMatrix4(this.matrixWorld),index:G,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,u=i.length;s<u;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}const im=new he,rm=new he;class Fa extends Go{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)im.fromBufferAttribute(t,i),rm.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+im.distanceTo(rm);e.setAttribute("lineDistance",new Jt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Ph extends Go{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Fl extends Qr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Ul=new kn,Ih=new nl,Nl=new Us,Bl=new he;class xr extends ui{constructor(e=new An,t=new Fl){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Nl.copy(n.boundingSphere),Nl.applyMatrix4(i),Nl.radius+=s,e.ray.intersectsSphere(Nl)===!1)return;Ul.copy(i).invert(),Ih.copy(e.ray).applyMatrix4(Ul);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,p=n.index,E=n.attributes.position;if(p!==null){const x=Math.max(0,u.start),w=Math.min(p.count,u.start+u.count);for(let R=x,C=w;R<C;R++){const O=p.getX(R);Bl.fromBufferAttribute(E,O),es(Bl,O,d,i,e,t,this)}}else{const x=Math.max(0,u.start),w=Math.min(E.count,u.start+u.count);for(let R=x,C=w;R<C;R++)Bl.fromBufferAttribute(E,R),es(Bl,R,d,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,u=i.length;s<u;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function es(r,e,t,n,i,s,u){const c=Ih.distanceSqToPoint(r);if(c<t){const d=new he;Ih.closestPointToPoint(r,d),d.applyMatrix4(n);const p=i.ray.origin.distanceTo(d);if(p<i.near||p>i.far)return;s.push({distance:p,distanceToRay:Math.sqrt(c),point:d,index:e,face:null,object:u})}}class dv extends cr{constructor(e,t,n,i,s,u,c,d,p){super(e,t,n,i,s,u,c,d,p),this.isVideoTexture=!0,this.minFilter=u!==void 0?u:oi,this.magFilter=s!==void 0?s:oi,this.generateMipmaps=!1;const _=this;function E(){_.needsUpdate=!0,e.requestVideoFrameCallback(E)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(E)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class J_ extends cr{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=Qn,this.minFilter=Qn,this.generateMipmaps=!1,this.needsUpdate=!0}}class sm extends cr{constructor(e,t,n,i,s,u,c,d,p,_,E,x){super(null,u,c,d,p,_,i,s,E,x),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class pv extends sm{constructor(e,t,n,i,s,u){super(e,t,n,s,u),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=zn}}class Rh extends cr{constructor(e,t,n,i,s,u,c,d,p){super(e,t,n,i,s,u,c,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class va{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let u=1;u<=e;u++)n=this.getPoint(u/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let u;t?u=t:u=e*n[s-1];let c=0,d=s-1,p;for(;c<=d;)if(i=Math.floor(c+(d-c)/2),p=n[i]-u,p<0)c=i+1;else if(p>0)d=i-1;else{d=i;break}if(i=d,n[i]===u)return i/(s-1);const _=n[i],x=n[i+1]-_,w=(u-_)/x;return(i+w)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const u=this.getPoint(i),c=this.getPoint(s),d=t||(u.isVector2?new vt:new he);return d.copy(c).sub(u).normalize(),d}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new he,i=[],s=[],u=[],c=new he,d=new kn;for(let w=0;w<=e;w++){const R=w/e;i[w]=this.getTangentAt(R,new he)}s[0]=new he,u[0]=new he;let p=Number.MAX_VALUE;const _=Math.abs(i[0].x),E=Math.abs(i[0].y),x=Math.abs(i[0].z);_<=p&&(p=_,n.set(1,0,0)),E<=p&&(p=E,n.set(0,1,0)),x<=p&&n.set(0,0,1),c.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],c),u[0].crossVectors(i[0],s[0]);for(let w=1;w<=e;w++){if(s[w]=s[w-1].clone(),u[w]=u[w-1].clone(),c.crossVectors(i[w-1],i[w]),c.length()>Number.EPSILON){c.normalize();const R=Math.acos(Kt(i[w-1].dot(i[w]),-1,1));s[w].applyMatrix4(d.makeRotationAxis(c,R))}u[w].crossVectors(i[w],s[w])}if(t===!0){let w=Math.acos(Kt(s[0].dot(s[e]),-1,1));w/=e,i[0].dot(c.crossVectors(s[0],s[e]))>0&&(w=-w);for(let R=1;R<=e;R++)s[R].applyMatrix4(d.makeRotationAxis(i[R],w*R)),u[R].crossVectors(i[R],s[R])}return{tangents:i,normals:s,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Lh extends va{constructor(e=0,t=0,n=1,i=1,s=0,u=Math.PI*2,c=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=u,this.aClockwise=c,this.aRotation=d}getPoint(e,t){const n=t||new vt,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const u=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(u?s=0:s=i),this.aClockwise===!0&&!u&&(s===i?s=-i:s=s-i);const c=this.aStartAngle+e*s;let d=this.aX+this.xRadius*Math.cos(c),p=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const _=Math.cos(this.aRotation),E=Math.sin(this.aRotation),x=d-this.aX,w=p-this.aY;d=x*_-w*E+this.aX,p=x*E+w*_+this.aY}return n.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class am extends Lh{constructor(e,t,n,i,s,u){super(e,t,n,n,i,s,u),this.isArcCurve=!0,this.type="ArcCurve"}}function Dh(){let r=0,e=0,t=0,n=0;function i(s,u,c,d){r=s,e=c,t=-3*s+3*u-2*c-d,n=2*s-2*u+c+d}return{initCatmullRom:function(s,u,c,d,p){i(u,c,p*(c-s),p*(d-u))},initNonuniformCatmullRom:function(s,u,c,d,p,_,E){let x=(u-s)/p-(c-s)/(p+_)+(c-u)/_,w=(c-u)/_-(d-u)/(_+E)+(d-c)/E;x*=_,w*=_,i(u,c,x,w)},calc:function(s){const u=s*s,c=u*s;return r+e*s+t*u+n*c}}}const zl=new he,Fh=new Dh,Gl=new Dh,kl=new Dh;class mv extends va{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new he){const n=t,i=this.points,s=i.length,u=(s-(this.closed?0:1))*e;let c=Math.floor(u),d=u-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s)+1)*s:d===0&&c===s-1&&(c=s-2,d=1);let p,_;this.closed||c>0?p=i[(c-1)%s]:(zl.subVectors(i[0],i[1]).add(i[0]),p=zl);const E=i[c%s],x=i[(c+1)%s];if(this.closed||c+2<s?_=i[(c+2)%s]:(zl.subVectors(i[s-1],i[s-2]).add(i[s-1]),_=zl),this.curveType==="centripetal"||this.curveType==="chordal"){const w=this.curveType==="chordal"?.5:.25;let R=Math.pow(p.distanceToSquared(E),w),C=Math.pow(E.distanceToSquared(x),w),O=Math.pow(x.distanceToSquared(_),w);C<1e-4&&(C=1),R<1e-4&&(R=C),O<1e-4&&(O=C),Fh.initNonuniformCatmullRom(p.x,E.x,x.x,_.x,R,C,O),Gl.initNonuniformCatmullRom(p.y,E.y,x.y,_.y,R,C,O),kl.initNonuniformCatmullRom(p.z,E.z,x.z,_.z,R,C,O)}else this.curveType==="catmullrom"&&(Fh.initCatmullRom(p.x,E.x,x.x,_.x,this.tension),Gl.initCatmullRom(p.y,E.y,x.y,_.y,this.tension),kl.initCatmullRom(p.z,E.z,x.z,_.z,this.tension));return n.set(Fh.calc(d),Gl.calc(d),kl.calc(d)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new he().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function om(r,e,t,n,i){const s=(n-e)*.5,u=(i-t)*.5,c=r*r,d=r*c;return(2*t-2*n+s+u)*d+(-3*t+3*n-2*s-u)*c+s*r+t}function gv(r,e){const t=1-r;return t*t*e}function vv(r,e){return 2*(1-r)*r*e}function Uu(r,e){return r*r*e}function yc(r,e,t,n){return gv(r,e)+vv(r,t)+Uu(r,n)}function _v(r,e){const t=1-r;return t*t*t*e}function yv(r,e){const t=1-r;return 3*t*t*r*e}function bv(r,e){return 3*(1-r)*r*r*e}function xv(r,e){return r*r*r*e}function Nu(r,e,t,n,i){return _v(r,e)+yv(r,t)+bv(r,n)+xv(r,i)}class Uh extends va{constructor(e=new vt,t=new vt,n=new vt,i=new vt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new vt){const n=t,i=this.v0,s=this.v1,u=this.v2,c=this.v3;return n.set(Nu(e,i.x,s.x,u.x,c.x),Nu(e,i.y,s.y,u.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ev extends va{constructor(e=new he,t=new he,n=new he,i=new he){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new he){const n=t,i=this.v0,s=this.v1,u=this.v2,c=this.v3;return n.set(Nu(e,i.x,s.x,u.x,c.x),Nu(e,i.y,s.y,u.y,c.y),Nu(e,i.z,s.z,u.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Nh extends va{constructor(e=new vt,t=new vt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new vt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new vt;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Sv extends va{constructor(e=new he,t=new he){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new he){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class um extends va{constructor(e=new vt,t=new vt,n=new vt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new vt){const n=t,i=this.v0,s=this.v1,u=this.v2;return n.set(yc(e,i.x,s.x,u.x),yc(e,i.y,s.y,u.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cm extends va{constructor(e=new he,t=new he,n=new he){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new he){const n=t,i=this.v0,s=this.v1,u=this.v2;return n.set(yc(e,i.x,s.x,u.x),yc(e,i.y,s.y,u.y),yc(e,i.z,s.z,u.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lm extends va{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new vt){const n=t,i=this.points,s=(i.length-1)*e,u=Math.floor(s),c=s-u,d=i[u===0?u:u-1],p=i[u],_=i[u>i.length-2?i.length-1:u+1],E=i[u>i.length-3?i.length-1:u+2];return n.set(om(c,d.x,p.x,_.x,E.x),om(c,d.y,p.y,_.y,E.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new vt().fromArray(i))}return this}}var Bh=Object.freeze({__proto__:null,ArcCurve:am,CatmullRomCurve3:mv,CubicBezierCurve:Uh,CubicBezierCurve3:Ev,EllipseCurve:Lh,LineCurve:Nh,LineCurve3:Sv,QuadraticBezierCurve:um,QuadraticBezierCurve3:cm,SplineCurve:lm});class Av extends va{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Nh(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const u=i[s]-n,c=this.curves[s],d=c.getLength(),p=d===0?0:1-u/d;return c.getPointAt(p,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const u=s[i],c=u.isEllipseCurve?e*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?e*u.points.length:e,d=u.getPoints(c);for(let p=0;p<d.length;p++){const _=d[p];n&&n.equals(_)||(t.push(_),n=_)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new Bh[i.type]().fromJSON(i))}return this}}class bc extends Av{constructor(e){super(),this.type="Path",this.currentPoint=new vt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Nh(this.currentPoint.clone(),new vt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new um(this.currentPoint.clone(),new vt(e,t),new vt(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,u){const c=new Uh(this.currentPoint.clone(),new vt(e,t),new vt(n,i),new vt(s,u));return this.curves.push(c),this.currentPoint.set(s,u),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new lm(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,u){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+c,t+d,n,i,s,u),this}absarc(e,t,n,i,s,u){return this.absellipse(e,t,n,n,i,s,u),this}ellipse(e,t,n,i,s,u,c,d){const p=this.currentPoint.x,_=this.currentPoint.y;return this.absellipse(e+p,t+_,n,i,s,u,c,d),this}absellipse(e,t,n,i,s,u,c,d){const p=new Lh(e,t,n,i,s,u,c,d);if(this.curves.length>0){const E=p.getPoint(0);E.equals(this.currentPoint)||this.lineTo(E.x,E.y)}this.curves.push(p);const _=p.getPoint(1);return this.currentPoint.copy(_),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class xc extends An{constructor(e=[new vt(0,-.5),new vt(.5,0),new vt(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Kt(i,0,Math.PI*2);const s=[],u=[],c=[],d=[],p=[],_=1/t,E=new he,x=new vt,w=new he,R=new he,C=new he;let O=0,k=0;for(let J=0;J<=e.length-1;J++)switch(J){case 0:O=e[J+1].x-e[J].x,k=e[J+1].y-e[J].y,w.x=k*1,w.y=-O,w.z=k*0,C.copy(w),w.normalize(),d.push(w.x,w.y,w.z);break;case e.length-1:d.push(C.x,C.y,C.z);break;default:O=e[J+1].x-e[J].x,k=e[J+1].y-e[J].y,w.x=k*1,w.y=-O,w.z=k*0,R.copy(w),w.x+=C.x,w.y+=C.y,w.z+=C.z,w.normalize(),d.push(w.x,w.y,w.z),C.copy(R)}for(let J=0;J<=t;J++){const G=n+J*_*i,H=Math.sin(G),ae=Math.cos(G);for(let me=0;me<=e.length-1;me++){E.x=e[me].x*H,E.y=e[me].y,E.z=e[me].x*ae,u.push(E.x,E.y,E.z),x.x=J/t,x.y=me/(e.length-1),c.push(x.x,x.y);const we=d[3*me+0]*H,V=d[3*me+1],pe=d[3*me+0]*ae;p.push(we,V,pe)}}for(let J=0;J<t;J++)for(let G=0;G<e.length-1;G++){const H=G+J*e.length,ae=H,me=H+e.length,we=H+e.length+1,V=H+1;s.push(ae,me,V),s.push(we,V,me)}this.setIndex(s),this.setAttribute("position",new Jt(u,3)),this.setAttribute("uv",new Jt(c,2)),this.setAttribute("normal",new Jt(p,3))}static fromJSON(e){return new xc(e.points,e.segments,e.phiStart,e.phiLength)}}class Vl extends xc{constructor(e=1,t=1,n=4,i=8){const s=new bc;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Vl(e.radius,e.length,e.capSegments,e.radialSegments)}}class oo extends An{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],u=[],c=[],d=[],p=new he,_=new vt;u.push(0,0,0),c.push(0,0,1),d.push(.5,.5);for(let E=0,x=3;E<=t;E++,x+=3){const w=n+E/t*i;p.x=e*Math.cos(w),p.y=e*Math.sin(w),u.push(p.x,p.y,p.z),c.push(0,0,1),_.x=(u[x]/e+1)/2,_.y=(u[x+1]/e+1)/2,d.push(_.x,_.y)}for(let E=1;E<=t;E++)s.push(E,E+1,0);this.setIndex(s),this.setAttribute("position",new Jt(u,3)),this.setAttribute("normal",new Jt(c,3)),this.setAttribute("uv",new Jt(d,2))}static fromJSON(e){return new oo(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Bu extends An{constructor(e=1,t=1,n=1,i=32,s=1,u=!1,c=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:u,thetaStart:c,thetaLength:d};const p=this;i=Math.floor(i),s=Math.floor(s);const _=[],E=[],x=[],w=[];let R=0;const C=[],O=n/2;let k=0;J(),u===!1&&(e>0&&G(!0),t>0&&G(!1)),this.setIndex(_),this.setAttribute("position",new Jt(E,3)),this.setAttribute("normal",new Jt(x,3)),this.setAttribute("uv",new Jt(w,2));function J(){const H=new he,ae=new he;let me=0;const we=(t-e)/n;for(let V=0;V<=s;V++){const pe=[],ve=V/s,Ge=ve*(t-e)+e;for(let ot=0;ot<=i;ot++){const We=ot/i,Ne=We*d+c,rt=Math.sin(Ne),ut=Math.cos(Ne);ae.x=Ge*rt,ae.y=-ve*n+O,ae.z=Ge*ut,E.push(ae.x,ae.y,ae.z),H.set(rt,we,ut).normalize(),x.push(H.x,H.y,H.z),w.push(We,1-ve),pe.push(R++)}C.push(pe)}for(let V=0;V<i;V++)for(let pe=0;pe<s;pe++){const ve=C[pe][V],Ge=C[pe+1][V],ot=C[pe+1][V+1],We=C[pe][V+1];_.push(ve,Ge,We),_.push(Ge,ot,We),me+=6}p.addGroup(k,me,0),k+=me}function G(H){const ae=R,me=new vt,we=new he;let V=0;const pe=H===!0?e:t,ve=H===!0?1:-1;for(let ot=1;ot<=i;ot++)E.push(0,O*ve,0),x.push(0,ve,0),w.push(.5,.5),R++;const Ge=R;for(let ot=0;ot<=i;ot++){const Ne=ot/i*d+c,rt=Math.cos(Ne),ut=Math.sin(Ne);we.x=pe*ut,we.y=O*ve,we.z=pe*rt,E.push(we.x,we.y,we.z),x.push(0,ve,0),me.x=rt*.5+.5,me.y=ut*.5*ve+.5,w.push(me.x,me.y),R++}for(let ot=0;ot<i;ot++){const We=ae+ot,Ne=Ge+ot;H===!0?_.push(Ne,Ne+1,We):_.push(Ne+1,Ne,We),V+=3}p.addGroup(k,V,H===!0?1:2),k+=V}}static fromJSON(e){return new Bu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jl extends Bu{constructor(e=1,t=1,n=32,i=1,s=!1,u=0,c=Math.PI*2){super(0,e,t,n,i,s,u,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:u,thetaLength:c}}static fromJSON(e){return new jl(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class uo extends An{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],u=[];c(i),p(n),_(),this.setAttribute("position",new Jt(s,3)),this.setAttribute("normal",new Jt(s.slice(),3)),this.setAttribute("uv",new Jt(u,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function c(J){const G=new he,H=new he,ae=new he;for(let me=0;me<t.length;me+=3)w(t[me+0],G),w(t[me+1],H),w(t[me+2],ae),d(G,H,ae,J)}function d(J,G,H,ae){const me=ae+1,we=[];for(let V=0;V<=me;V++){we[V]=[];const pe=J.clone().lerp(H,V/me),ve=G.clone().lerp(H,V/me),Ge=me-V;for(let ot=0;ot<=Ge;ot++)ot===0&&V===me?we[V][ot]=pe:we[V][ot]=pe.clone().lerp(ve,ot/Ge)}for(let V=0;V<me;V++)for(let pe=0;pe<2*(me-V)-1;pe++){const ve=Math.floor(pe/2);pe%2===0?(x(we[V][ve+1]),x(we[V+1][ve]),x(we[V][ve])):(x(we[V][ve+1]),x(we[V+1][ve+1]),x(we[V+1][ve]))}}function p(J){const G=new he;for(let H=0;H<s.length;H+=3)G.x=s[H+0],G.y=s[H+1],G.z=s[H+2],G.normalize().multiplyScalar(J),s[H+0]=G.x,s[H+1]=G.y,s[H+2]=G.z}function _(){const J=new he;for(let G=0;G<s.length;G+=3){J.x=s[G+0],J.y=s[G+1],J.z=s[G+2];const H=O(J)/2/Math.PI+.5,ae=k(J)/Math.PI+.5;u.push(H,1-ae)}R(),E()}function E(){for(let J=0;J<u.length;J+=6){const G=u[J+0],H=u[J+2],ae=u[J+4],me=Math.max(G,H,ae),we=Math.min(G,H,ae);me>.9&&we<.1&&(G<.2&&(u[J+0]+=1),H<.2&&(u[J+2]+=1),ae<.2&&(u[J+4]+=1))}}function x(J){s.push(J.x,J.y,J.z)}function w(J,G){const H=J*3;G.x=e[H+0],G.y=e[H+1],G.z=e[H+2]}function R(){const J=new he,G=new he,H=new he,ae=new he,me=new vt,we=new vt,V=new vt;for(let pe=0,ve=0;pe<s.length;pe+=9,ve+=6){J.set(s[pe+0],s[pe+1],s[pe+2]),G.set(s[pe+3],s[pe+4],s[pe+5]),H.set(s[pe+6],s[pe+7],s[pe+8]),me.set(u[ve+0],u[ve+1]),we.set(u[ve+2],u[ve+3]),V.set(u[ve+4],u[ve+5]),ae.copy(J).add(G).add(H).divideScalar(3);const Ge=O(ae);C(me,ve+0,J,Ge),C(we,ve+2,G,Ge),C(V,ve+4,H,Ge)}}function C(J,G,H,ae){ae<0&&J.x===1&&(u[G]=J.x-1),H.x===0&&H.z===0&&(u[G]=ae/2/Math.PI+.5)}function O(J){return Math.atan2(J.z,-J.x)}function k(J){return Math.atan2(-J.y,Math.sqrt(J.x*J.x+J.z*J.z))}}static fromJSON(e){return new uo(e.vertices,e.indices,e.radius,e.details)}}class Wl extends uo{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,u,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wl(e.radius,e.detail)}}const Hl=new he,Yl=new he,zh=new he,Xl=new ea;class Tv extends An{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(At*t),u=e.getIndex(),c=e.getAttribute("position"),d=u?u.count:c.count,p=[0,0,0],_=["a","b","c"],E=new Array(3),x={},w=[];for(let R=0;R<d;R+=3){u?(p[0]=u.getX(R),p[1]=u.getX(R+1),p[2]=u.getX(R+2)):(p[0]=R,p[1]=R+1,p[2]=R+2);const{a:C,b:O,c:k}=Xl;if(C.fromBufferAttribute(c,p[0]),O.fromBufferAttribute(c,p[1]),k.fromBufferAttribute(c,p[2]),Xl.getNormal(zh),E[0]=`${Math.round(C.x*i)},${Math.round(C.y*i)},${Math.round(C.z*i)}`,E[1]=`${Math.round(O.x*i)},${Math.round(O.y*i)},${Math.round(O.z*i)}`,E[2]=`${Math.round(k.x*i)},${Math.round(k.y*i)},${Math.round(k.z*i)}`,!(E[0]===E[1]||E[1]===E[2]||E[2]===E[0]))for(let J=0;J<3;J++){const G=(J+1)%3,H=E[J],ae=E[G],me=Xl[_[J]],we=Xl[_[G]],V=`${H}_${ae}`,pe=`${ae}_${H}`;pe in x&&x[pe]?(zh.dot(x[pe].normal)<=s&&(w.push(me.x,me.y,me.z),w.push(we.x,we.y,we.z)),x[pe]=null):V in x||(x[V]={index0:p[J],index1:p[G],normal:zh.clone()})}}for(const R in x)if(x[R]){const{index0:C,index1:O}=x[R];Hl.fromBufferAttribute(c,C),Yl.fromBufferAttribute(c,O),w.push(Hl.x,Hl.y,Hl.z),w.push(Yl.x,Yl.y,Yl.z)}this.setAttribute("position",new Jt(w,3))}}}class ko extends bc{constructor(e){super(e),this.uuid=ln(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new bc().fromJSON(i))}return this}}const wv={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=fm(r,0,i,t,!0);const u=[];if(!s||s.next===s.prev)return u;let c,d,p,_,E,x,w;if(n&&(s=Ov(r,e,s,t)),r.length>80*t){c=p=r[0],d=_=r[1];for(let R=t;R<i;R+=t)E=r[R],x=r[R+1],E<c&&(c=E),x<d&&(d=x),E>p&&(p=E),x>_&&(_=x);w=Math.max(p-c,_-d),w=w!==0?32767/w:0}return jo(s,u,t,c,d,w,0),u}};function fm(r,e,t,n,i){let s,u;if(i===jh(r,e,t,n)>0)for(s=e;s<t;s+=n)u=gm(s,r[s],r[s+1],u);else for(s=t-n;s>=e;s-=n)u=gm(s,r[s],r[s+1],u);return u&&Kl(u,u.next)&&(Sc(u),u=u.next),u}function Vo(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Kl(t,t.next)||ji(t.prev,t,t.next)===0)){if(Sc(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function jo(r,e,t,n,i,s,u){if(!r)return;!u&&s&&gs(r,n,i,s);let c=r,d,p;for(;r.prev!==r.next;){if(d=r.prev,p=r.next,s?dm(r,n,i,s):hm(r)){e.push(d.i/t|0),e.push(r.i/t|0),e.push(p.i/t|0),Sc(r),r=p.next,c=p.next;continue}if(r=p,r===c){u?u===1?(r=Mv(Vo(r),e,t),jo(r,e,t,n,i,s,2)):u===2&&Cv(r,e,t,n,i,s):jo(Vo(r),e,t,n,i,s,1);break}}}function hm(r){const e=r.prev,t=r,n=r.next;if(ji(e,t,n)>=0)return!1;const i=e.x,s=t.x,u=n.x,c=e.y,d=t.y,p=n.y,_=i<s?i<u?i:u:s<u?s:u,E=c<d?c<p?c:p:d<p?d:p,x=i>s?i>u?i:u:s>u?s:u,w=c>d?c>p?c:p:d>p?d:p;let R=n.next;for(;R!==e;){if(R.x>=_&&R.x<=x&&R.y>=E&&R.y<=w&&zu(i,c,s,d,u,p,R.x,R.y)&&ji(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function dm(r,e,t,n){const i=r.prev,s=r,u=r.next;if(ji(i,s,u)>=0)return!1;const c=i.x,d=s.x,p=u.x,_=i.y,E=s.y,x=u.y,w=c<d?c<p?c:p:d<p?d:p,R=_<E?_<x?_:x:E<x?E:x,C=c>d?c>p?c:p:d>p?d:p,O=_>E?_>x?_:x:E>x?E:x,k=Vh(w,R,e,t,n),J=Vh(C,O,e,t,n);let G=r.prevZ,H=r.nextZ;for(;G&&G.z>=k&&H&&H.z<=J;){if(G.x>=w&&G.x<=C&&G.y>=R&&G.y<=O&&G!==i&&G!==u&&zu(c,_,d,E,p,x,G.x,G.y)&&ji(G.prev,G,G.next)>=0||(G=G.prevZ,H.x>=w&&H.x<=C&&H.y>=R&&H.y<=O&&H!==i&&H!==u&&zu(c,_,d,E,p,x,H.x,H.y)&&ji(H.prev,H,H.next)>=0))return!1;H=H.nextZ}for(;G&&G.z>=k;){if(G.x>=w&&G.x<=C&&G.y>=R&&G.y<=O&&G!==i&&G!==u&&zu(c,_,d,E,p,x,G.x,G.y)&&ji(G.prev,G,G.next)>=0)return!1;G=G.prevZ}for(;H&&H.z<=J;){if(H.x>=w&&H.x<=C&&H.y>=R&&H.y<=O&&H!==i&&H!==u&&zu(c,_,d,E,p,x,H.x,H.y)&&ji(H.prev,H,H.next)>=0)return!1;H=H.nextZ}return!0}function Mv(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!Kl(i,s)&&$l(i,n,n.next,s)&&Ec(i,s)&&Ec(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Sc(n),Sc(n.next),n=r=s),n=n.next}while(n!==r);return Vo(n)}function Cv(r,e,t,n,i,s){let u=r;do{let c=u.next.next;for(;c!==u.prev;){if(u.i!==c.i&&Dv(u,c)){let d=mm(u,c);u=Vo(u,u.next),d=Vo(d,d.next),jo(u,e,t,n,i,s,0),jo(d,e,t,n,i,s,0);return}c=c.next}u=u.next}while(u!==r)}function Ov(r,e,t,n){const i=[];let s,u,c,d,p;for(s=0,u=e.length;s<u;s++)c=e[s]*n,d=s<u-1?e[s+1]*n:r.length,p=fm(r,c,d,n,!1),p===p.next&&(p.steiner=!0),i.push(Lv(p));for(i.sort(Gh),s=0;s<i.length;s++)t=Pv(i[s],t);return t}function Gh(r,e){return r.x-e.x}function Pv(r,e){const t=Iv(r,e);if(!t)return e;const n=mm(t,r);return Vo(n,n.next),Vo(t,t.next)}function Iv(r,e){let t=e,n=-1/0,i;const s=r.x,u=r.y;do{if(u<=t.y&&u>=t.next.y&&t.next.y!==t.y){const x=t.x+(u-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(x<=s&&x>n&&(n=x,i=t.x<t.next.x?t:t.next,x===s))return i}t=t.next}while(t!==e);if(!i)return null;const c=i,d=i.x,p=i.y;let _=1/0,E;t=i;do s>=t.x&&t.x>=d&&s!==t.x&&zu(u<p?s:n,u,d,p,u<p?n:s,u,t.x,t.y)&&(E=Math.abs(u-t.y)/(s-t.x),Ec(t,r)&&(E<_||E===_&&(t.x>i.x||t.x===i.x&&Rv(i,t)))&&(i=t,_=E)),t=t.next;while(t!==c);return i}function Rv(r,e){return ji(r.prev,r,e.prev)<0&&ji(e.next,r,r.next)<0}function gs(r,e,t,n){let i=r;do i.z===0&&(i.z=Vh(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,kh(i)}function kh(r){let e,t,n,i,s,u,c,d,p=1;do{for(t=r,r=null,s=null,u=0;t;){for(u++,n=t,c=0,e=0;e<p&&(c++,n=n.nextZ,!!n);e++);for(d=p;c>0||d>0&&n;)c!==0&&(d===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,c--):(i=n,n=n.nextZ,d--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,p*=2}while(u>1);return r}function Vh(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function Lv(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function zu(r,e,t,n,i,s,u,c){return(i-u)*(e-c)>=(r-u)*(s-c)&&(r-u)*(n-c)>=(t-u)*(e-c)&&(t-u)*(s-c)>=(i-u)*(n-c)}function Dv(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!Fv(r,e)&&(Ec(r,e)&&Ec(e,r)&&pm(r,e)&&(ji(r.prev,r,e.prev)||ji(r,e.prev,e))||Kl(r,e)&&ji(r.prev,r,r.next)>0&&ji(e.prev,e,e.next)>0)}function ji(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Kl(r,e){return r.x===e.x&&r.y===e.y}function $l(r,e,t,n){const i=Ql(ji(r,e,t)),s=Ql(ji(r,e,n)),u=Ql(ji(t,n,r)),c=Ql(ji(t,n,e));return!!(i!==s&&u!==c||i===0&&Zl(r,t,e)||s===0&&Zl(r,n,e)||u===0&&Zl(t,r,n)||c===0&&Zl(t,e,n))}function Zl(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Ql(r){return r>0?1:r<0?-1:0}function Fv(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&$l(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Ec(r,e){return ji(r.prev,r,r.next)<0?ji(r,e,r.next)>=0&&ji(r,r.prev,e)>=0:ji(r,e,r.prev)<0||ji(r,r.next,e)<0}function pm(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function mm(r,e){const t=new Ac(r.i,r.x,r.y),n=new Ac(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function gm(r,e,t,n){const i=new Ac(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Sc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Ac(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jh(r,e,t,n){let i=0;for(let s=e,u=t-n;s<t;s+=n)i+=(r[u]-r[s])*(r[s+1]+r[u+1]),u=s;return i}class Ua{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return Ua.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];vm(e),_m(n,e);let u=e.length;t.forEach(vm);for(let d=0;d<t.length;d++)i.push(u),u+=t[d].length,_m(n,t[d]);const c=wv.triangulate(n,i);for(let d=0;d<c.length;d+=3)s.push(c.slice(d,d+3));return s}}function vm(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function _m(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Jl extends An{constructor(e=new ko([new vt(.5,.5),new vt(-.5,.5),new vt(-.5,-.5),new vt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let c=0,d=e.length;c<d;c++){const p=e[c];u(p)}this.setAttribute("position",new Jt(i,3)),this.setAttribute("uv",new Jt(s,2)),this.computeVertexNormals();function u(c){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,_=t.steps!==void 0?t.steps:1,E=t.depth!==void 0?t.depth:1;let x=t.bevelEnabled!==void 0?t.bevelEnabled:!0,w=t.bevelThickness!==void 0?t.bevelThickness:.2,R=t.bevelSize!==void 0?t.bevelSize:w-.1,C=t.bevelOffset!==void 0?t.bevelOffset:0,O=t.bevelSegments!==void 0?t.bevelSegments:3;const k=t.extrudePath,J=t.UVGenerator!==void 0?t.UVGenerator:Uv;let G,H=!1,ae,me,we,V;k&&(G=k.getSpacedPoints(_),H=!0,x=!1,ae=k.computeFrenetFrames(_,!1),me=new he,we=new he,V=new he),x||(O=0,w=0,R=0,C=0);const pe=c.extractPoints(p);let ve=pe.shape;const Ge=pe.holes;if(!Ua.isClockWise(ve)){ve=ve.reverse();for(let wt=0,bt=Ge.length;wt<bt;wt++){const Vt=Ge[wt];Ua.isClockWise(Vt)&&(Ge[wt]=Vt.reverse())}}const We=Ua.triangulateShape(ve,Ge),Ne=ve;for(let wt=0,bt=Ge.length;wt<bt;wt++){const Vt=Ge[wt];ve=ve.concat(Vt)}function rt(wt,bt,Vt){return bt||console.error("THREE.ExtrudeGeometry: vec does not exist"),bt.clone().multiplyScalar(Vt).add(wt)}const ut=ve.length,It=We.length;function Et(wt,bt,Vt){let en,Xt,Dn;const xn=wt.x-bt.x,gn=wt.y-bt.y,Gi=Vt.x-wt.x,xi=Vt.y-wt.y,ye=xn*xn+gn*gn,fe=xn*xi-gn*Gi;if(Math.abs(fe)>Number.EPSILON){const _e=Math.sqrt(ye),St=Math.sqrt(Gi*Gi+xi*xi),Ot=bt.x-gn/_e,kt=bt.y+xn/_e,vn=Vt.x-xi/St,qt=Vt.y+Gi/St,xt=((vn-Ot)*xi-(qt-kt)*Gi)/(xn*xi-gn*Gi);en=Ot+xn*xt-wt.x,Xt=kt+gn*xt-wt.y;const pn=en*en+Xt*Xt;if(pn<=2)return new vt(en,Xt);Dn=Math.sqrt(pn/2)}else{let _e=!1;xn>Number.EPSILON?Gi>Number.EPSILON&&(_e=!0):xn<-Number.EPSILON?Gi<-Number.EPSILON&&(_e=!0):Math.sign(gn)===Math.sign(xi)&&(_e=!0),_e?(en=-gn,Xt=xn,Dn=Math.sqrt(ye)):(en=xn,Xt=gn,Dn=Math.sqrt(ye/2))}return new vt(en/Dn,Xt/Dn)}const tt=[];for(let wt=0,bt=Ne.length,Vt=bt-1,en=wt+1;wt<bt;wt++,Vt++,en++)Vt===bt&&(Vt=0),en===bt&&(en=0),tt[wt]=Et(Ne[wt],Ne[Vt],Ne[en]);const Qe=[];let qe,et=tt.concat();for(let wt=0,bt=Ge.length;wt<bt;wt++){const Vt=Ge[wt];qe=[];for(let en=0,Xt=Vt.length,Dn=Xt-1,xn=en+1;en<Xt;en++,Dn++,xn++)Dn===Xt&&(Dn=0),xn===Xt&&(xn=0),qe[en]=Et(Vt[en],Vt[Dn],Vt[xn]);Qe.push(qe),et=et.concat(qe)}for(let wt=0;wt<O;wt++){const bt=wt/O,Vt=w*Math.cos(bt*Math.PI/2),en=R*Math.sin(bt*Math.PI/2)+C;for(let Xt=0,Dn=Ne.length;Xt<Dn;Xt++){const xn=rt(Ne[Xt],tt[Xt],en);Ln(xn.x,xn.y,-Vt)}for(let Xt=0,Dn=Ge.length;Xt<Dn;Xt++){const xn=Ge[Xt];qe=Qe[Xt];for(let gn=0,Gi=xn.length;gn<Gi;gn++){const xi=rt(xn[gn],qe[gn],en);Ln(xi.x,xi.y,-Vt)}}}const Ut=R+C;for(let wt=0;wt<ut;wt++){const bt=x?rt(ve[wt],et[wt],Ut):ve[wt];H?(we.copy(ae.normals[0]).multiplyScalar(bt.x),me.copy(ae.binormals[0]).multiplyScalar(bt.y),V.copy(G[0]).add(we).add(me),Ln(V.x,V.y,V.z)):Ln(bt.x,bt.y,0)}for(let wt=1;wt<=_;wt++)for(let bt=0;bt<ut;bt++){const Vt=x?rt(ve[bt],et[bt],Ut):ve[bt];H?(we.copy(ae.normals[wt]).multiplyScalar(Vt.x),me.copy(ae.binormals[wt]).multiplyScalar(Vt.y),V.copy(G[wt]).add(we).add(me),Ln(V.x,V.y,V.z)):Ln(Vt.x,Vt.y,E/_*wt)}for(let wt=O-1;wt>=0;wt--){const bt=wt/O,Vt=w*Math.cos(bt*Math.PI/2),en=R*Math.sin(bt*Math.PI/2)+C;for(let Xt=0,Dn=Ne.length;Xt<Dn;Xt++){const xn=rt(Ne[Xt],tt[Xt],en);Ln(xn.x,xn.y,E+Vt)}for(let Xt=0,Dn=Ge.length;Xt<Dn;Xt++){const xn=Ge[Xt];qe=Qe[Xt];for(let gn=0,Gi=xn.length;gn<Gi;gn++){const xi=rt(xn[gn],qe[gn],en);H?Ln(xi.x,xi.y+G[_-1].y,G[_-1].x+Vt):Ln(xi.x,xi.y,E+Vt)}}}Dt(),Yt();function Dt(){const wt=i.length/3;if(x){let bt=0,Vt=ut*bt;for(let en=0;en<It;en++){const Xt=We[en];rn(Xt[2]+Vt,Xt[1]+Vt,Xt[0]+Vt)}bt=_+O*2,Vt=ut*bt;for(let en=0;en<It;en++){const Xt=We[en];rn(Xt[0]+Vt,Xt[1]+Vt,Xt[2]+Vt)}}else{for(let bt=0;bt<It;bt++){const Vt=We[bt];rn(Vt[2],Vt[1],Vt[0])}for(let bt=0;bt<It;bt++){const Vt=We[bt];rn(Vt[0]+ut*_,Vt[1]+ut*_,Vt[2]+ut*_)}}n.addGroup(wt,i.length/3-wt,0)}function Yt(){const wt=i.length/3;let bt=0;ft(Ne,bt),bt+=Ne.length;for(let Vt=0,en=Ge.length;Vt<en;Vt++){const Xt=Ge[Vt];ft(Xt,bt),bt+=Xt.length}n.addGroup(wt,i.length/3-wt,1)}function ft(wt,bt){let Vt=wt.length;for(;--Vt>=0;){const en=Vt;let Xt=Vt-1;Xt<0&&(Xt=wt.length-1);for(let Dn=0,xn=_+O*2;Dn<xn;Dn++){const gn=ut*Dn,Gi=ut*(Dn+1),xi=bt+en+gn,ye=bt+Xt+gn,fe=bt+Xt+Gi,_e=bt+en+Gi;sn(xi,ye,fe,_e)}}}function Ln(wt,bt,Vt){d.push(wt),d.push(bt),d.push(Vt)}function rn(wt,bt,Vt){Wt(wt),Wt(bt),Wt(Vt);const en=i.length/3,Xt=J.generateTopUV(n,i,en-3,en-2,en-1);Pn(Xt[0]),Pn(Xt[1]),Pn(Xt[2])}function sn(wt,bt,Vt,en){Wt(wt),Wt(bt),Wt(en),Wt(bt),Wt(Vt),Wt(en);const Xt=i.length/3,Dn=J.generateSideWallUV(n,i,Xt-6,Xt-3,Xt-2,Xt-1);Pn(Dn[0]),Pn(Dn[1]),Pn(Dn[3]),Pn(Dn[1]),Pn(Dn[2]),Pn(Dn[3])}function Wt(wt){i.push(d[wt*3+0]),i.push(d[wt*3+1]),i.push(d[wt*3+2])}function Pn(wt){s.push(wt.x),s.push(wt.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return Nv(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,u=e.shapes.length;s<u;s++){const c=t[e.shapes[s]];n.push(c)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Bh[i.type]().fromJSON(i)),new Jl(n,e.options)}}const Uv={generateTopUV:function(r,e,t,n,i){const s=e[t*3],u=e[t*3+1],c=e[n*3],d=e[n*3+1],p=e[i*3],_=e[i*3+1];return[new vt(s,u),new vt(c,d),new vt(p,_)]},generateSideWallUV:function(r,e,t,n,i,s){const u=e[t*3],c=e[t*3+1],d=e[t*3+2],p=e[n*3],_=e[n*3+1],E=e[n*3+2],x=e[i*3],w=e[i*3+1],R=e[i*3+2],C=e[s*3],O=e[s*3+1],k=e[s*3+2];return Math.abs(c-_)<Math.abs(u-p)?[new vt(u,1-d),new vt(p,1-E),new vt(x,1-R),new vt(C,1-k)]:[new vt(c,1-d),new vt(_,1-E),new vt(w,1-R),new vt(O,1-k)]}};function Nv(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class ql extends uo{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ql(e.radius,e.detail)}}class Tc extends uo{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Tc(e.radius,e.detail)}}class ef extends An{constructor(e=.5,t=1,n=32,i=1,s=0,u=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:u},n=Math.max(3,n),i=Math.max(1,i);const c=[],d=[],p=[],_=[];let E=e;const x=(t-e)/i,w=new he,R=new vt;for(let C=0;C<=i;C++){for(let O=0;O<=n;O++){const k=s+O/n*u;w.x=E*Math.cos(k),w.y=E*Math.sin(k),d.push(w.x,w.y,w.z),p.push(0,0,1),R.x=(w.x/t+1)/2,R.y=(w.y/t+1)/2,_.push(R.x,R.y)}E+=x}for(let C=0;C<i;C++){const O=C*(n+1);for(let k=0;k<n;k++){const J=k+O,G=J,H=J+n+1,ae=J+n+2,me=J+1;c.push(G,H,me),c.push(H,ae,me)}}this.setIndex(c),this.setAttribute("position",new Jt(d,3)),this.setAttribute("normal",new Jt(p,3)),this.setAttribute("uv",new Jt(_,2))}static fromJSON(e){return new ef(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class wc extends An{constructor(e=new ko([new vt(0,.5),new vt(-.5,-.5),new vt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],u=[];let c=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let _=0;_<e.length;_++)p(e[_]),this.addGroup(c,d,_),c+=d,d=0;this.setIndex(n),this.setAttribute("position",new Jt(i,3)),this.setAttribute("normal",new Jt(s,3)),this.setAttribute("uv",new Jt(u,2));function p(_){const E=i.length/3,x=_.extractPoints(t);let w=x.shape;const R=x.holes;Ua.isClockWise(w)===!1&&(w=w.reverse());for(let O=0,k=R.length;O<k;O++){const J=R[O];Ua.isClockWise(J)===!0&&(R[O]=J.reverse())}const C=Ua.triangulateShape(w,R);for(let O=0,k=R.length;O<k;O++){const J=R[O];w=w.concat(J)}for(let O=0,k=w.length;O<k;O++){const J=w[O];i.push(J.x,J.y,0),s.push(0,0,1),u.push(J.x,J.y)}for(let O=0,k=C.length;O<k;O++){const J=C[O],G=J[0]+E,H=J[1]+E,ae=J[2]+E;n.push(G,H,ae),d+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Bv(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const u=t[e.shapes[i]];n.push(u)}return new wc(n,e.curveSegments)}}function Bv(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class Mc extends An{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,u=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:u,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const d=Math.min(u+c,Math.PI);let p=0;const _=[],E=new he,x=new he,w=[],R=[],C=[],O=[];for(let k=0;k<=n;k++){const J=[],G=k/n;let H=0;k==0&&u==0?H=.5/t:k==n&&d==Math.PI&&(H=-.5/t);for(let ae=0;ae<=t;ae++){const me=ae/t;E.x=-e*Math.cos(i+me*s)*Math.sin(u+G*c),E.y=e*Math.cos(u+G*c),E.z=e*Math.sin(i+me*s)*Math.sin(u+G*c),R.push(E.x,E.y,E.z),x.copy(E).normalize(),C.push(x.x,x.y,x.z),O.push(me+H,1-G),J.push(p++)}_.push(J)}for(let k=0;k<n;k++)for(let J=0;J<t;J++){const G=_[k][J+1],H=_[k][J],ae=_[k+1][J],me=_[k+1][J+1];(k!==0||u>0)&&w.push(G,H,me),(k!==n-1||d<Math.PI)&&w.push(H,ae,me)}this.setIndex(w),this.setAttribute("position",new Jt(R,3)),this.setAttribute("normal",new Jt(C,3)),this.setAttribute("uv",new Jt(O,2))}static fromJSON(e){return new Mc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class tf extends uo{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tf(e.radius,e.detail)}}class nf extends An{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const u=[],c=[],d=[],p=[],_=new he,E=new he,x=new he;for(let w=0;w<=n;w++)for(let R=0;R<=i;R++){const C=R/i*s,O=w/n*Math.PI*2;E.x=(e+t*Math.cos(O))*Math.cos(C),E.y=(e+t*Math.cos(O))*Math.sin(C),E.z=t*Math.sin(O),c.push(E.x,E.y,E.z),_.x=e*Math.cos(C),_.y=e*Math.sin(C),x.subVectors(E,_).normalize(),d.push(x.x,x.y,x.z),p.push(R/i),p.push(w/n)}for(let w=1;w<=n;w++)for(let R=1;R<=i;R++){const C=(i+1)*w+R-1,O=(i+1)*(w-1)+R-1,k=(i+1)*(w-1)+R,J=(i+1)*w+R;u.push(C,O,J),u.push(O,k,J)}this.setIndex(u),this.setAttribute("position",new Jt(c,3)),this.setAttribute("normal",new Jt(d,3)),this.setAttribute("uv",new Jt(p,2))}static fromJSON(e){return new nf(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class rf extends An{constructor(e=1,t=.4,n=64,i=8,s=2,u=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:u},n=Math.floor(n),i=Math.floor(i);const c=[],d=[],p=[],_=[],E=new he,x=new he,w=new he,R=new he,C=new he,O=new he,k=new he;for(let G=0;G<=n;++G){const H=G/n*s*Math.PI*2;J(H,s,u,e,w),J(H+.01,s,u,e,R),O.subVectors(R,w),k.addVectors(R,w),C.crossVectors(O,k),k.crossVectors(C,O),C.normalize(),k.normalize();for(let ae=0;ae<=i;++ae){const me=ae/i*Math.PI*2,we=-t*Math.cos(me),V=t*Math.sin(me);E.x=w.x+(we*k.x+V*C.x),E.y=w.y+(we*k.y+V*C.y),E.z=w.z+(we*k.z+V*C.z),d.push(E.x,E.y,E.z),x.subVectors(E,w).normalize(),p.push(x.x,x.y,x.z),_.push(G/n),_.push(ae/i)}}for(let G=1;G<=n;G++)for(let H=1;H<=i;H++){const ae=(i+1)*(G-1)+(H-1),me=(i+1)*G+(H-1),we=(i+1)*G+H,V=(i+1)*(G-1)+H;c.push(ae,me,V),c.push(me,we,V)}this.setIndex(c),this.setAttribute("position",new Jt(d,3)),this.setAttribute("normal",new Jt(p,3)),this.setAttribute("uv",new Jt(_,2));function J(G,H,ae,me,we){const V=Math.cos(G),pe=Math.sin(G),ve=ae/H*G,Ge=Math.cos(ve);we.x=me*(2+Ge)*.5*V,we.y=me*(2+Ge)*pe*.5,we.z=me*Math.sin(ve)*.5}}static fromJSON(e){return new rf(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class sf extends An{constructor(e=new cm(new he(-1,-1,0),new he(-1,1,0),new he(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const u=e.computeFrenetFrames(t,s);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const c=new he,d=new he,p=new vt;let _=new he;const E=[],x=[],w=[],R=[];C(),this.setIndex(R),this.setAttribute("position",new Jt(E,3)),this.setAttribute("normal",new Jt(x,3)),this.setAttribute("uv",new Jt(w,2));function C(){for(let G=0;G<t;G++)O(G);O(s===!1?t:0),J(),k()}function O(G){_=e.getPointAt(G/t,_);const H=u.normals[G],ae=u.binormals[G];for(let me=0;me<=i;me++){const we=me/i*Math.PI*2,V=Math.sin(we),pe=-Math.cos(we);d.x=pe*H.x+V*ae.x,d.y=pe*H.y+V*ae.y,d.z=pe*H.z+V*ae.z,d.normalize(),x.push(d.x,d.y,d.z),c.x=_.x+n*d.x,c.y=_.y+n*d.y,c.z=_.z+n*d.z,E.push(c.x,c.y,c.z)}}function k(){for(let G=1;G<=t;G++)for(let H=1;H<=i;H++){const ae=(i+1)*(G-1)+(H-1),me=(i+1)*G+(H-1),we=(i+1)*G+H,V=(i+1)*(G-1)+H;R.push(ae,me,V),R.push(me,we,V)}}function J(){for(let G=0;G<=t;G++)for(let H=0;H<=i;H++)p.x=G/t,p.y=H/i,w.push(p.x,p.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new sf(new Bh[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ym extends An{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new he,s=new he;if(e.index!==null){const u=e.attributes.position,c=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:c.count,materialIndex:0}]);for(let p=0,_=d.length;p<_;++p){const E=d[p],x=E.start,w=E.count;for(let R=x,C=x+w;R<C;R+=3)for(let O=0;O<3;O++){const k=c.getX(R+O),J=c.getX(R+(O+1)%3);i.fromBufferAttribute(u,k),s.fromBufferAttribute(u,J),bm(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const u=e.attributes.position;for(let c=0,d=u.count/3;c<d;c++)for(let p=0;p<3;p++){const _=3*c+p,E=3*c+(p+1)%3;i.fromBufferAttribute(u,_),s.fromBufferAttribute(u,E),bm(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Jt(t,3))}}}function bm(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var xm=Object.freeze({__proto__:null,BoxGeometry:ma,CapsuleGeometry:Vl,CircleGeometry:oo,ConeGeometry:jl,CylinderGeometry:Bu,DodecahedronGeometry:Wl,EdgesGeometry:Tv,ExtrudeGeometry:Jl,IcosahedronGeometry:ql,LatheGeometry:xc,OctahedronGeometry:Tc,PlaneGeometry:qa,PolyhedronGeometry:uo,RingGeometry:ef,ShapeGeometry:wc,SphereGeometry:Mc,TetrahedronGeometry:tf,TorusGeometry:nf,TorusKnotGeometry:rf,TubeGeometry:sf,WireframeGeometry:ym});class zv extends Qr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Zt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Gv extends Zi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class a extends Qr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class f extends a{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new vt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Kt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Zt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Zt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class y extends Qr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Zt(16777215),this.specular=new Zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class L extends Qr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Z extends Qr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class ue extends Qr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ee extends Qr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=la,this.normalScale=new vt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Pe extends ms{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Be(r,e,t){return mt(r)?new r.constructor(r.subarray(e,t!==void 0?t:r.length)):r.slice(e,t)}function ht(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function mt(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Ct(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function Ht(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,u=0;u!==n;++s){const c=t[s]*e;for(let d=0;d!==e;++d)i[u++]=r[c+d]}return i}function nn(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let u=s[n];if(u!==void 0)if(Array.isArray(u))do u=s[n],u!==void 0&&(e.push(s.time),t.push.apply(t,u)),s=r[i++];while(s!==void 0);else if(u.toArray!==void 0)do u=s[n],u!==void 0&&(e.push(s.time),u.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do u=s[n],u!==void 0&&(e.push(s.time),t.push(u)),s=r[i++];while(s!==void 0)}function Tn(r,e,t,n,i=30){const s=r.clone();s.name=e;const u=[];for(let d=0;d<s.tracks.length;++d){const p=s.tracks[d],_=p.getValueSize(),E=[],x=[];for(let w=0;w<p.times.length;++w){const R=p.times[w]*i;if(!(R<t||R>=n)){E.push(p.times[w]);for(let C=0;C<_;++C)x.push(p.values[w*_+C])}}E.length!==0&&(p.times=ht(E,p.times.constructor),p.values=ht(x,p.values.constructor),u.push(p))}s.tracks=u;let c=1/0;for(let d=0;d<s.tracks.length;++d)c>s.tracks[d].times[0]&&(c=s.tracks[d].times[0]);for(let d=0;d<s.tracks.length;++d)s.tracks[d].shift(-1*c);return s.resetDuration(),s}function ri(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let u=0;u<i;++u){const c=t.tracks[u],d=c.ValueTypeName;if(d==="bool"||d==="string")continue;const p=r.tracks.find(function(k){return k.name===c.name&&k.ValueTypeName===d});if(p===void 0)continue;let _=0;const E=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=E/3);let x=0;const w=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=w/3);const R=c.times.length-1;let C;if(s<=c.times[0]){const k=_,J=E-_;C=Be(c.values,k,J)}else if(s>=c.times[R]){const k=R*E+_,J=k+E-_;C=Be(c.values,k,J)}else{const k=c.createInterpolant(),J=_,G=E-_;k.evaluate(s),C=Be(k.resultBuffer,J,G)}d==="quaternion"&&new Nn().fromArray(C).normalize().conjugate().toArray(C);const O=p.times.length;for(let k=0;k<O;++k){const J=k*w+x;if(d==="quaternion")Nn.multiplyQuaternionsFlat(p.values,J,C,0,p.values,J);else{const G=w-x*2;for(let H=0;H<G;++H)p.values[J+H]-=C[H]}}}return r.blendMode=ru,r}var bn=Object.freeze({__proto__:null,arraySlice:Be,convertArray:ht,isTypedArray:mt,getKeyframeOrder:Ct,sortedArray:Ht,flattenJSON:nn,subclip:Tn,makeClipAdditive:ri});class $n{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let u;n:{i:if(!(e<i)){for(let c=n+2;;){if(i===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(s=i,i=t[++n],e<i)break t}u=t.length;break n}if(!(e>=s)){const c=t[1];e<c&&(n=2,s=c);for(let d=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(i=s,s=t[--n-1],e>=s)break t}u=n,n=0;break n}break e}for(;n<u;){const c=n+u>>>1;e<t[c]?u=c:n=c+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let u=0;u!==i;++u)t[u]=n[s+u];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class yi extends $n{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ga,endingEnd:Ga}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,u=e+1,c=i[s],d=i[u];if(c===void 0)switch(this.getSettings_().endingStart){case Ta:s=e,c=2*t-n;break;case Eo:s=i.length-2,c=t+i[s]-i[s+1];break;default:s=e,c=n}if(d===void 0)switch(this.getSettings_().endingEnd){case Ta:u=e,d=2*n-t;break;case Eo:u=1,d=n+i[1]-i[0];break;default:u=e-1,d=t}const p=(n-t)*.5,_=this.valueSize;this._weightPrev=p/(t-c),this._weightNext=p/(d-n),this._offsetPrev=s*_,this._offsetNext=u*_}interpolate_(e,t,n,i){const s=this.resultBuffer,u=this.sampleValues,c=this.valueSize,d=e*c,p=d-c,_=this._offsetPrev,E=this._offsetNext,x=this._weightPrev,w=this._weightNext,R=(n-t)/(i-t),C=R*R,O=C*R,k=-x*O+2*x*C-x*R,J=(1+x)*O+(-1.5-2*x)*C+(-.5+x)*R+1,G=(-1-w)*O+(1.5+w)*C+.5*R,H=w*O-w*C;for(let ae=0;ae!==c;++ae)s[ae]=k*u[_+ae]+J*u[p+ae]+G*u[d+ae]+H*u[E+ae];return s}}class Wr extends $n{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,u=this.sampleValues,c=this.valueSize,d=e*c,p=d-c,_=(n-t)/(i-t),E=1-_;for(let x=0;x!==c;++x)s[x]=u[p+x]*E+u[d+x]*_;return s}}class ts extends $n{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ur{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ht(t,this.TimeBufferType),this.values=ht(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:ht(e.times,Array),values:ht(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new ts(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Wr(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new yi(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case zr:t=this.InterpolantFactoryMethodDiscrete;break;case bo:t=this.InterpolantFactoryMethodLinear;break;case xo:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return zr;case this.InterpolantFactoryMethodLinear:return bo;case this.InterpolantFactoryMethodSmooth:return xo}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,u=i-1;for(;s!==i&&n[s]<e;)++s;for(;u!==-1&&n[u]>t;)--u;if(++u,s!==0||u!==i){s>=u&&(u=Math.max(u,1),s=u-1);const c=this.getValueSize();this.times=Be(n,s,u),this.values=Be(this.values,s*c,u*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let c=0;c!==s;c++){const d=n[c];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,d),e=!1;break}if(u!==null&&u>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,d,u),e=!1;break}u=d}if(i!==void 0&&mt(i))for(let c=0,d=i.length;c!==d;++c){const p=i[c];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,p),e=!1;break}}return e}optimize(){const e=Be(this.times),t=Be(this.values),n=this.getValueSize(),i=this.getInterpolation()===xo,s=e.length-1;let u=1;for(let c=1;c<s;++c){let d=!1;const p=e[c],_=e[c+1];if(p!==_&&(c!==1||p!==e[0]))if(i)d=!0;else{const E=c*n,x=E-n,w=E+n;for(let R=0;R!==n;++R){const C=t[E+R];if(C!==t[x+R]||C!==t[w+R]){d=!0;break}}}if(d){if(c!==u){e[u]=e[c];const E=c*n,x=u*n;for(let w=0;w!==n;++w)t[x+w]=t[E+w]}++u}}if(s>0){e[u]=e[s];for(let c=s*n,d=u*n,p=0;p!==n;++p)t[d+p]=t[c+p];++u}return u!==e.length?(this.times=Be(e,0,u),this.values=Be(t,0,u*n)):(this.times=e,this.values=t),this}clone(){const e=Be(this.times,0),t=Be(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ur.prototype.TimeBufferType=Float32Array,Ur.prototype.ValueBufferType=Float32Array,Ur.prototype.DefaultInterpolation=bo;class zi extends Ur{}zi.prototype.ValueTypeName="bool",zi.prototype.ValueBufferType=Array,zi.prototype.DefaultInterpolation=zr,zi.prototype.InterpolantFactoryMethodLinear=void 0,zi.prototype.InterpolantFactoryMethodSmooth=void 0;class Hs extends Ur{}Hs.prototype.ValueTypeName="color";class Ys extends Ur{}Ys.prototype.ValueTypeName="number";class Em extends $n{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,u=this.sampleValues,c=this.valueSize,d=(n-t)/(i-t);let p=e*c;for(let _=p+c;p!==_;p+=4)Nn.slerpFlat(s,0,u,p-c,u,p,d);return s}}class Wh extends Ur{InterpolantFactoryMethodLinear(e){return new Em(this.times,this.values,this.getValueSize(),e)}}Wh.prototype.ValueTypeName="quaternion",Wh.prototype.DefaultInterpolation=bo,Wh.prototype.InterpolantFactoryMethodSmooth=void 0;class af extends Ur{}af.prototype.ValueTypeName="string",af.prototype.ValueBufferType=Array,af.prototype.DefaultInterpolation=zr,af.prototype.InterpolantFactoryMethodLinear=void 0,af.prototype.InterpolantFactoryMethodSmooth=void 0;class Sm extends Ur{}Sm.prototype.ValueTypeName="vector";class Am{constructor(e,t=-1,n,i=So){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=ln(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let u=0,c=n.length;u!==c;++u)t.push(Qb(n[u]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,u=n.length;s!==u;++s)t.push(Ur.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,u=[];for(let c=0;c<s;c++){let d=[],p=[];d.push((c+s-1)%s,c,(c+1)%s),p.push(0,1,0);const _=Ct(d);d=Ht(d,1,_),p=Ht(p,1,_),!i&&d[0]===0&&(d.push(s),p.push(p[0])),u.push(new Ys(".morphTargetInfluences["+t[c].name+"]",d,p).scale(1/n))}return new this(e,-1,u)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let c=0,d=e.length;c<d;c++){const p=e[c],_=p.name.match(s);if(_&&_.length>1){const E=_[1];let x=i[E];x||(i[E]=x=[]),x.push(p)}}const u=[];for(const c in i)u.push(this.CreateFromMorphTargetSequence(c,i[c],t,n));return u}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(E,x,w,R,C){if(w.length!==0){const O=[],k=[];nn(w,O,k,R),O.length!==0&&C.push(new E(x,O,k))}},i=[],s=e.name||"default",u=e.fps||30,c=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let E=0;E<p.length;E++){const x=p[E].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const w={};let R;for(R=0;R<x.length;R++)if(x[R].morphTargets)for(let C=0;C<x[R].morphTargets.length;C++)w[x[R].morphTargets[C]]=-1;for(const C in w){const O=[],k=[];for(let J=0;J!==x[R].morphTargets.length;++J){const G=x[R];O.push(G.time),k.push(G.morphTarget===C?1:0)}i.push(new Ys(".morphTargetInfluence["+C+"]",O,k))}d=w.length*u}else{const w=".bones["+t[E].name+"]";n(Sm,w+".position",x,"pos",i),n(Wh,w+".quaternion",x,"rot",i),n(Sm,w+".scale",x,"scl",i)}}return i.length===0?null:new this(s,d,i,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Zb(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ys;case"vector":case"vector2":case"vector3":case"vector4":return Sm;case"color":return Hs;case"quaternion":return Wh;case"bool":case"boolean":return zi;case"string":return af}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function Qb(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Zb(r.type);if(r.times===void 0){const t=[],n=[];nn(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const of={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class q_{constructor(e,t,n){const i=this;let s=!1,u=0,c=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(_){c++,s===!1&&i.onStart!==void 0&&i.onStart(_,u,c),s=!0},this.itemEnd=function(_){u++,i.onProgress!==void 0&&i.onProgress(_,u,c),u===c&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(_){i.onError!==void 0&&i.onError(_)},this.resolveURL=function(_){return d?d(_):_},this.setURLModifier=function(_){return d=_,this},this.addHandler=function(_,E){return p.push(_,E),this},this.removeHandler=function(_){const E=p.indexOf(_);return E!==-1&&p.splice(E,2),this},this.getHandler=function(_){for(let E=0,x=p.length;E<x;E+=2){const w=p[E],R=p[E+1];if(w.global&&(w.lastIndex=0),w.test(_))return R}return null}}}const Jb=new q_;class _a{constructor(e){this.manager=e!==void 0?e:Jb,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Wo={};class qb extends Error{constructor(e,t){super(e),this.response=t}}class Gu extends _a{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=of.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Wo[e]!==void 0){Wo[e].push({onLoad:t,onProgress:n,onError:i});return}Wo[e]=[],Wo[e].push({onLoad:t,onProgress:n,onError:i});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,d=this.responseType;fetch(u).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const _=Wo[e],E=p.body.getReader(),x=p.headers.get("Content-Length")||p.headers.get("X-File-Size"),w=x?parseInt(x):0,R=w!==0;let C=0;const O=new ReadableStream({start(k){J();function J(){E.read().then(({done:G,value:H})=>{if(G)k.close();else{C+=H.byteLength;const ae=new ProgressEvent("progress",{lengthComputable:R,loaded:C,total:w});for(let me=0,we=_.length;me<we;me++){const V=_[me];V.onProgress&&V.onProgress(ae)}k.enqueue(H),J()}})}}});return new Response(O)}else throw new qb(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(_=>new DOMParser().parseFromString(_,c));case"json":return p.json();default:if(c===void 0)return p.text();{const E=/charset="?([^;"\s]*)"?/i.exec(c),x=E&&E[1]?E[1].toLowerCase():void 0,w=new TextDecoder(x);return p.arrayBuffer().then(R=>w.decode(R))}}}).then(p=>{of.add(e,p);const _=Wo[e];delete Wo[e];for(let E=0,x=_.length;E<x;E++){const w=_[E];w.onLoad&&w.onLoad(p)}}).catch(p=>{const _=Wo[e];if(_===void 0)throw this.manager.itemError(e),p;delete Wo[e];for(let E=0,x=_.length;E<x;E++){const w=_[E];w.onError&&w.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class hA extends _a{constructor(e){super(e)}load(e,t,n,i){const s=this,u=new Gu(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(d){i?i(d):console.error(d),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Am.parse(e[n]);t.push(i)}return t}}class dA extends _a{constructor(e){super(e)}load(e,t,n,i){const s=this,u=[],c=new sm,d=new Gu(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(s.withCredentials);let p=0;function _(E){d.load(e[E],function(x){const w=s.parse(x,!0);u[E]={width:w.width,height:w.height,format:w.format,mipmaps:w.mipmaps},p+=1,p===6&&(w.mipmapCount===1&&(c.minFilter=oi),c.image=u,c.format=w.format,c.needsUpdate=!0,t&&t(c))},n,i)}if(Array.isArray(e))for(let E=0,x=e.length;E<x;++E)_(E);else d.load(e,function(E){const x=s.parse(E,!0);if(x.isCubemap){const w=x.mipmaps.length/x.mipmapCount;for(let R=0;R<w;R++){u[R]={mipmaps:[]};for(let C=0;C<x.mipmapCount;C++)u[R].mipmaps.push(x.mipmaps[R*x.mipmapCount+C]),u[R].format=x.format,u[R].width=x.width,u[R].height=x.height}c.image=u}else c.image.width=x.width,c.image.height=x.height,c.mipmaps=x.mipmaps;x.mipmapCount===1&&(c.minFilter=oi),c.format=x.format,c.needsUpdate=!0,t&&t(c)},n,i);return c}}class Tm extends _a{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,u=of.get(e);if(u!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(u),s.manager.itemEnd(e)},0),u;const c=Qu("img");function d(){_(),of.add(e,this),t&&t(this),s.manager.itemEnd(e)}function p(E){_(),i&&i(E),s.manager.itemError(e),s.manager.itemEnd(e)}function _(){c.removeEventListener("load",d,!1),c.removeEventListener("error",p,!1)}return c.addEventListener("load",d,!1),c.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),s.manager.itemStart(e),c.src=e,c}}class pA extends _a{constructor(e){super(e)}load(e,t,n,i){const s=new wu,u=new Tm(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let c=0;function d(p){u.load(e[p],function(_){s.images[p]=_,c++,c===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let p=0;p<e.length;++p)d(p);return s}}class mA extends _a{constructor(e){super(e)}load(e,t,n,i){const s=this,u=new Fu,c=new Gu(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(s.withCredentials),c.load(e,function(d){const p=s.parse(d);p&&(p.image!==void 0?u.image=p.image:p.data!==void 0&&(u.image.width=p.width,u.image.height=p.height,u.image.data=p.data),u.wrapS=p.wrapS!==void 0?p.wrapS:zn,u.wrapT=p.wrapT!==void 0?p.wrapT:zn,u.magFilter=p.magFilter!==void 0?p.magFilter:oi,u.minFilter=p.minFilter!==void 0?p.minFilter:oi,u.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.encoding!==void 0&&(u.encoding=p.encoding),p.flipY!==void 0&&(u.flipY=p.flipY),p.format!==void 0&&(u.format=p.format),p.type!==void 0&&(u.type=p.type),p.mipmaps!==void 0&&(u.mipmaps=p.mipmaps,u.minFilter=$e),p.mipmapCount===1&&(u.minFilter=oi),p.generateMipmaps!==void 0&&(u.generateMipmaps=p.generateMipmaps),u.needsUpdate=!0,t&&t(u,p))},n,i),u}}class gA extends _a{constructor(e){super(e)}load(e,t,n,i){const s=new cr,u=new Tm(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(c){s.image=c,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class Cc extends ui{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Zt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class e1 extends Cc{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ui.DefaultUp),this.updateMatrix(),this.groundColor=new Zt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const kv=new kn,ey=new he,ty=new he;class Vv{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new vt(512,512),this.map=null,this.mapPass=null,this.matrix=new kn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new rc,this._frameExtents=new vt(1,1),this._viewportCount=1,this._viewports=[new di(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;ey.setFromMatrixPosition(e.matrixWorld),t.position.copy(ey),ty.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ty),t.updateMatrixWorld(),kv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kv),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(kv)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class t1 extends Vv{constructor(){super(new pr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=at*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class n1 extends Cc{constructor(e,t,n=0,i=Math.PI/3,s=0,u=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ui.DefaultUp),this.updateMatrix(),this.target=new ui,this.distance=n,this.angle=i,this.penumbra=s,this.decay=u,this.map=null,this.shadow=new t1}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const ny=new kn,Hh=new he,jv=new he;class i1 extends Vv{constructor(){super(new pr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new vt(4,2),this._viewportCount=6,this._viewports=[new di(2,1,1,1),new di(0,1,1,1),new di(3,1,1,1),new di(1,1,1,1),new di(3,0,1,1),new di(1,0,1,1)],this._cubeDirections=[new he(1,0,0),new he(-1,0,0),new he(0,0,1),new he(0,0,-1),new he(0,1,0),new he(0,-1,0)],this._cubeUps=[new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,0,1),new he(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Hh.setFromMatrixPosition(e.matrixWorld),n.position.copy(Hh),jv.copy(n.position),jv.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(jv),n.updateMatrixWorld(),i.makeTranslation(-Hh.x,-Hh.y,-Hh.z),ny.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ny)}}class r1 extends Cc{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new i1}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class s1 extends Vv{constructor(){super(new qr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class a1 extends Cc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ui.DefaultUp),this.updateMatrix(),this.target=new ui,this.shadow=new s1}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class o1 extends Cc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class u1 extends Cc{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class c1{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new he)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.282095),t.addScaledVector(u[1],.488603*i),t.addScaledVector(u[2],.488603*s),t.addScaledVector(u[3],.488603*n),t.addScaledVector(u[4],1.092548*(n*i)),t.addScaledVector(u[5],1.092548*(i*s)),t.addScaledVector(u[6],.315392*(3*s*s-1)),t.addScaledVector(u[7],1.092548*(n*s)),t.addScaledVector(u[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.886227),t.addScaledVector(u[1],2*.511664*i),t.addScaledVector(u[2],2*.511664*s),t.addScaledVector(u[3],2*.511664*n),t.addScaledVector(u[4],2*.429043*n*i),t.addScaledVector(u[5],2*.429043*i*s),t.addScaledVector(u[6],.743125*s*s-.247708),t.addScaledVector(u[7],2*.429043*n*s),t.addScaledVector(u[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class Wv extends Cc{constructor(e=new c1,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Hv extends _a{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,u=new Gu(s.manager);u.setPath(s.path),u.setRequestHeader(s.requestHeader),u.setWithCredentials(s.withCredentials),u.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(d){i?i(d):console.error(d),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=Hv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Zt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const u=e.uniforms[s];switch(i.uniforms[s]={},u.type){case"t":i.uniforms[s].value=n(u.value);break;case"c":i.uniforms[s].value=new Zt().setHex(u.value);break;case"v2":i.uniforms[s].value=new vt().fromArray(u.value);break;case"v3":i.uniforms[s].value=new he().fromArray(u.value);break;case"v4":i.uniforms[s].value=new di().fromArray(u.value);break;case"m3":i.uniforms[s].value=new kr().fromArray(u.value);break;case"m4":i.uniforms[s].value=new kn().fromArray(u.value);break;default:i.uniforms[s].value=u.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new vt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new vt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:zv,SpriteMaterial:ao,RawShaderMaterial:Gv,ShaderMaterial:Zi,PointsMaterial:Fl,MeshPhysicalMaterial:f,MeshStandardMaterial:a,MeshPhongMaterial:y,MeshToonMaterial:L,MeshNormalMaterial:Z,MeshLambertMaterial:ue,MeshDepthMaterial:dc,MeshDistanceMaterial:Il,MeshBasicMaterial:er,MeshMatcapMaterial:Ee,LineDashedMaterial:Pe,LineBasicMaterial:ms,Material:Qr};return new t[e]}}class iy{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ry extends An{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class l1 extends _a{constructor(e){super(e)}load(e,t,n,i){const s=this,u=new Gu(s.manager);u.setPath(s.path),u.setRequestHeader(s.requestHeader),u.setWithCredentials(s.withCredentials),u.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(d){i?i(d):console.error(d),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(w,R){if(t[R]!==void 0)return t[R];const O=w.interleavedBuffers[R],k=s(w,O.buffer),J=cu(O.type,k),G=new Ah(J,O.stride);return G.uuid=O.uuid,t[R]=G,G}function s(w,R){if(n[R]!==void 0)return n[R];const O=w.arrayBuffers[R],k=new Uint32Array(O).buffer;return n[R]=k,k}const u=e.isInstancedBufferGeometry?new ry:new An,c=e.data.index;if(c!==void 0){const w=cu(c.type,c.array);u.setIndex(new Ui(w,1))}const d=e.data.attributes;for(const w in d){const R=d[w];let C;if(R.isInterleavedBufferAttribute){const O=i(e.data,R.data);C=new Cs(O,R.itemSize,R.offset,R.normalized)}else{const O=cu(R.type,R.array),k=R.isInstancedBufferAttribute?fi:Ui;C=new k(O,R.itemSize,R.normalized)}R.name!==void 0&&(C.name=R.name),R.usage!==void 0&&C.setUsage(R.usage),R.updateRange!==void 0&&(C.updateRange.offset=R.updateRange.offset,C.updateRange.count=R.updateRange.count),u.setAttribute(w,C)}const p=e.data.morphAttributes;if(p)for(const w in p){const R=p[w],C=[];for(let O=0,k=R.length;O<k;O++){const J=R[O];let G;if(J.isInterleavedBufferAttribute){const H=i(e.data,J.data);G=new Cs(H,J.itemSize,J.offset,J.normalized)}else{const H=cu(J.type,J.array);G=new Ui(H,J.itemSize,J.normalized)}J.name!==void 0&&(G.name=J.name),C.push(G)}u.morphAttributes[w]=C}e.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const E=e.data.groups||e.data.drawcalls||e.data.offsets;if(E!==void 0)for(let w=0,R=E.length;w!==R;++w){const C=E[w];u.addGroup(C.start,C.count,C.materialIndex)}const x=e.data.boundingSphere;if(x!==void 0){const w=new he;x.center!==void 0&&w.fromArray(x.center),u.boundingSphere=new Us(w,x.radius)}return e.name&&(u.name=e.name),e.userData&&(u.userData=e.userData),u}}class vA extends _a{constructor(e){super(e)}load(e,t,n,i){const s=this,u=this.path===""?iy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||u;const c=new Gu(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(E){i!==void 0&&i(E),console.error("THREE:ObjectLoader: Can't parse "+e+".",E.message);return}const _=p.metadata;if(_===void 0||_.type===void 0||_.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(p,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?iy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Gu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const u=await s.loadAsync(e,t),c=JSON.parse(u),d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),u=this.parseImages(e.images,function(){t!==void 0&&t(p)}),c=this.parseTextures(e.textures,u),d=this.parseMaterials(e.materials,c),p=this.parseObject(e.object,s,d,c,n),_=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,_),t!==void 0){let E=!1;for(const x in u)if(u[x].data instanceof HTMLImageElement){E=!0;break}E===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),u=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,u),d=this.parseObject(e.object,i,c,u,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),d}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new ko().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,u=e.length;s<u;s++){const c=new Mh().fromJSON(e[s],i);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new l1;for(let s=0,u=e.length;s<u;s++){let c;const d=e[s];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":c=i.parse(d);break;default:d.type in xm?c=xm[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}c.uuid=d.uuid,d.name!==void 0&&(c.name=d.name),c.isBufferGeometry===!0&&d.userData!==void 0&&(c.userData=d.userData),n[d.uuid]=c}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new Hv;s.setTextures(t);for(let u=0,c=e.length;u<c;u++){const d=e[u];n[d.uuid]===void 0&&(n[d.uuid]=s.parse(d)),i[d.uuid]=n[d.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=Am.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function u(d){return n.manager.itemStart(d),s.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function c(d){if(typeof d=="string"){const p=d,_=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return u(_)}else return d.data?{data:cu(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new q_(t);s=new Tm(d),s.setCrossOrigin(this.crossOrigin);for(let p=0,_=e.length;p<_;p++){const E=e[p],x=E.url;if(Array.isArray(x)){const w=[];for(let R=0,C=x.length;R<C;R++){const O=x[R],k=c(O);k!==null&&(k instanceof HTMLImageElement?w.push(k):w.push(new Fu(k.data,k.width,k.height)))}i[E.uuid]=new lu(w)}else{const w=c(E.url);i[E.uuid]=new lu(w)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(u){if(typeof u=="string"){const c=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await i.loadAsync(d)}else return u.data?{data:cu(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){i=new Tm(this.manager),i.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const _=[];for(let E=0,x=p.length;E<x;E++){const w=p[E],R=await s(w);R!==null&&(R instanceof HTMLImageElement?_.push(R):_.push(new Fu(R.data,R.width,R.height)))}n[d.uuid]=new lu(_)}else{const _=await s(d.url);n[d.uuid]=new lu(_)}}}return n}parseTextures(e,t){function n(s,u){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),u[s])}const i={};if(e!==void 0)for(let s=0,u=e.length;s<u;s++){const c=e[s];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const d=t[c.image],p=d.data;let _;Array.isArray(p)?(_=new wu,p.length===6&&(_.needsUpdate=!0)):(p&&p.data?_=new Fu:_=new cr,p&&(_.needsUpdate=!0)),_.source=d,_.uuid=c.uuid,c.name!==void 0&&(_.name=c.name),c.mapping!==void 0&&(_.mapping=n(c.mapping,f1)),c.offset!==void 0&&_.offset.fromArray(c.offset),c.repeat!==void 0&&_.repeat.fromArray(c.repeat),c.center!==void 0&&_.center.fromArray(c.center),c.rotation!==void 0&&(_.rotation=c.rotation),c.wrap!==void 0&&(_.wrapS=n(c.wrap[0],sy),_.wrapT=n(c.wrap[1],sy)),c.format!==void 0&&(_.format=c.format),c.type!==void 0&&(_.type=c.type),c.encoding!==void 0&&(_.encoding=c.encoding),c.minFilter!==void 0&&(_.minFilter=n(c.minFilter,ay)),c.magFilter!==void 0&&(_.magFilter=n(c.magFilter,ay)),c.anisotropy!==void 0&&(_.anisotropy=c.anisotropy),c.flipY!==void 0&&(_.flipY=c.flipY),c.generateMipmaps!==void 0&&(_.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(_.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(_.unpackAlignment=c.unpackAlignment),c.userData!==void 0&&(_.userData=c.userData),i[c.uuid]=_}return i}parseObject(e,t,n,i,s){let u;function c(x){return t[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",x),t[x]}function d(x){if(x!==void 0){if(Array.isArray(x)){const w=[];for(let R=0,C=x.length;R<C;R++){const O=x[R];n[O]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",O),w.push(n[O])}return w}return n[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),n[x]}}function p(x){return i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",x),i[x]}let _,E;switch(e.type){case"Scene":u=new Rl,e.background!==void 0&&(Number.isInteger(e.background)?u.background=new Zt(e.background):u.background=p(e.background)),e.environment!==void 0&&(u.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?u.fog=new Sh(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(u.fog=new Eh(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(u.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":u=new pr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(u.focus=e.focus),e.zoom!==void 0&&(u.zoom=e.zoom),e.filmGauge!==void 0&&(u.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(u.filmOffset=e.filmOffset),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"OrthographicCamera":u=new qr(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(u.zoom=e.zoom),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"AmbientLight":u=new o1(e.color,e.intensity);break;case"DirectionalLight":u=new a1(e.color,e.intensity);break;case"PointLight":u=new r1(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":u=new u1(e.color,e.intensity,e.width,e.height);break;case"SpotLight":u=new n1(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":u=new e1(e.color,e.groundColor,e.intensity);break;case"LightProbe":u=new Wv().fromJSON(e);break;case"SkinnedMesh":_=c(e.geometry),E=d(e.material),u=new Da(_,E),e.bindMode!==void 0&&(u.bindMode=e.bindMode),e.bindMatrix!==void 0&&u.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(u.skeleton=e.skeleton);break;case"Mesh":_=c(e.geometry),E=d(e.material),u=new dr(_,E);break;case"InstancedMesh":_=c(e.geometry),E=d(e.material);const x=e.count,w=e.instanceMatrix,R=e.instanceColor;u=new hv(_,E,x),u.instanceMatrix=new fi(new Float32Array(w.array),16),R!==void 0&&(u.instanceColor=new fi(new Float32Array(R.array),R.itemSize));break;case"LOD":u=new cv;break;case"Line":u=new Go(c(e.geometry),d(e.material));break;case"LineLoop":u=new Ph(c(e.geometry),d(e.material));break;case"LineSegments":u=new Fa(c(e.geometry),d(e.material));break;case"PointCloud":case"Points":u=new xr(c(e.geometry),d(e.material));break;case"Sprite":u=new Th(d(e.material));break;case"Group":u=new Ws;break;case"Bone":u=new Wn;break;default:u=new ui}if(u.uuid=e.uuid,e.name!==void 0&&(u.name=e.name),e.matrix!==void 0?(u.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=e.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(e.position!==void 0&&u.position.fromArray(e.position),e.rotation!==void 0&&u.rotation.fromArray(e.rotation),e.quaternion!==void 0&&u.quaternion.fromArray(e.quaternion),e.scale!==void 0&&u.scale.fromArray(e.scale)),e.castShadow!==void 0&&(u.castShadow=e.castShadow),e.receiveShadow!==void 0&&(u.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(u.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(u.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(u.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(u.visible=e.visible),e.frustumCulled!==void 0&&(u.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(u.renderOrder=e.renderOrder),e.userData!==void 0&&(u.userData=e.userData),e.layers!==void 0&&(u.layers.mask=e.layers),e.children!==void 0){const x=e.children;for(let w=0;w<x.length;w++)u.add(this.parseObject(x[w],t,n,i,s))}if(e.animations!==void 0){const x=e.animations;for(let w=0;w<x.length;w++){const R=x[w];u.animations.push(s[R])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(u.autoUpdate=e.autoUpdate);const x=e.levels;for(let w=0;w<x.length;w++){const R=x[w],C=u.getObjectByProperty("uuid",R.object);C!==void 0&&u.addLevel(C,R.distance,R.hysteresis)}}return u}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}}const f1={UVMapping:pt,CubeReflectionMapping:Pt,CubeRefractionMapping:Lt,EquirectangularReflectionMapping:jt,EquirectangularRefractionMapping:cn,CubeUVReflectionMapping:Xn},sy={RepeatWrapping:Li,ClampToEdgeWrapping:zn,MirroredRepeatWrapping:Br},ay={NearestFilter:Qn,NearestMipmapNearestFilter:Rs,NearestMipmapLinearFilter:xs,LinearFilter:oi,LinearMipmapNearestFilter:Me,LinearMipmapLinearFilter:$e};class _A extends _a{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,u=of.get(e);if(u!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(u),s.manager.itemEnd(e)},0),u;const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,fetch(e,c).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){of.add(e,d),t&&t(d),s.manager.itemEnd(e)}).catch(function(d){i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let wm;class oy{static getContext(){return wm===void 0&&(wm=new(window.AudioContext||window.webkitAudioContext)),wm}static setContext(e){wm=e}}class yA extends _a{constructor(e){super(e)}load(e,t,n,i){const s=this,u=new Gu(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(c){try{const d=c.slice(0);oy.getContext().decodeAudioData(d,function(_){t(_)})}catch(d){i?i(d):console.error(d),s.manager.itemError(e)}},n,i)}}class bA extends Wv{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const i=new Zt().set(e),s=new Zt().set(t),u=new he(i.r,i.g,i.b),c=new he(s.r,s.g,s.b),d=Math.sqrt(Math.PI),p=d*Math.sqrt(.75);this.sh.coefficients[0].copy(u).add(c).multiplyScalar(d),this.sh.coefficients[1].copy(u).sub(c).multiplyScalar(p)}}class xA extends Wv{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=new Zt().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const uy=new kn,cy=new kn,Oc=new kn;class EA{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new pr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new pr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Oc.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,u=t.near*Math.tan(At*t.fov*.5)/t.zoom;let c,d;cy.elements[12]=-i,uy.elements[12]=i,c=-u*t.aspect+s,d=u*t.aspect+s,Oc.elements[0]=2*t.near/(d-c),Oc.elements[8]=(d+c)/(d-c),this.cameraL.projectionMatrix.copy(Oc),c=-u*t.aspect-s,d=u*t.aspect-s,Oc.elements[0]=2*t.near/(d-c),Oc.elements[8]=(d+c)/(d-c),this.cameraR.projectionMatrix.copy(Oc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(cy),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(uy)}}class ly{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=fy(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=fy();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function fy(){return(typeof performance>"u"?Date:performance).now()}const Pc=new he,hy=new Nn,h1=new he,Ic=new he;class SA extends ui{constructor(){super(),this.type="AudioListener",this.context=oy.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ly}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Pc,hy,h1),Ic.set(0,0,-1).applyQuaternion(hy),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Pc.x,i),t.positionY.linearRampToValueAtTime(Pc.y,i),t.positionZ.linearRampToValueAtTime(Pc.z,i),t.forwardX.linearRampToValueAtTime(Ic.x,i),t.forwardY.linearRampToValueAtTime(Ic.y,i),t.forwardZ.linearRampToValueAtTime(Ic.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(Pc.x,Pc.y,Pc.z),t.setOrientation(Ic.x,Ic.y,Ic.z,n.x,n.y,n.z)}}class d1 extends ui{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Rc=new he,dy=new Nn,p1=new he,Lc=new he;class AA extends d1{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Rc,dy,p1),Lc.set(0,0,1).applyQuaternion(dy);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Rc.x,n),t.positionY.linearRampToValueAtTime(Rc.y,n),t.positionZ.linearRampToValueAtTime(Rc.z,n),t.orientationX.linearRampToValueAtTime(Lc.x,n),t.orientationY.linearRampToValueAtTime(Lc.y,n),t.orientationZ.linearRampToValueAtTime(Lc.z,n)}else t.setPosition(Rc.x,Rc.y,Rc.z),t.setOrientation(Lc.x,Lc.y,Lc.z)}}class TA{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class m1{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,u;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let u=this.cumulativeWeight;if(u===0){for(let c=0;c!==i;++c)n[s+c]=n[c];u=t}else{u+=t;const c=t/u;this._mixBufferRegion(n,s,0,c,i)}this.cumulativeWeight=u}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,u=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const d=t*this._origIndex;this._mixBufferRegion(n,i,d,1-s,t)}u>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(n[d]!==n[d+t]){c.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,u=i;s!==u;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let u=0;u!==s;++u)e[t+u]=e[n+u]}_slerp(e,t,n,i){Nn.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const u=this._workIndex*s;Nn.multiplyQuaternionsFlat(e,u,e,t,e,n),Nn.slerpFlat(e,t,e,t,e,u,i)}_lerp(e,t,n,i,s){const u=1-i;for(let c=0;c!==s;++c){const d=t+c;e[d]=e[d]*u+e[n+c]*i}}_lerpAdditive(e,t,n,i,s){for(let u=0;u!==s;++u){const c=t+u;e[c]=e[c]+e[n+u]*i}}}const Yv="\\[\\]\\.:\\/",g1=new RegExp("["+Yv+"]","g"),Xv="[^"+Yv+"]",v1="[^"+Yv.replace("\\.","")+"]",_1=/((?:WC+[\/:])*)/.source.replace("WC",Xv),y1=/(WCOD+)?/.source.replace("WCOD",v1),b1=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xv),x1=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xv),E1=new RegExp("^"+_1+y1+b1+x1+"$"),S1=["material","materials","bones","map"];class A1{constructor(e,t,n){const i=n||bi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class bi{constructor(e,t,n){this.path=t,this.parsedPath=n||bi.parseTrackName(t),this.node=bi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new bi.Composite(e,t,n):new bi(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(g1,"")}static parseTrackName(e){const t=E1.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);S1.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let u=0;u<s.length;u++){const c=s[u];if(c.name===t||c.uuid===t)return c;const d=n(c.children);if(d)return d}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=bi.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let p=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let _=0;_<e.length;_++)if(e[_].name===p){p=_;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const u=e[i];if(u===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+i+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=s}else u.fromArray!==void 0&&u.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(d=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}bi.Composite=A1,bi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},bi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},bi.prototype.GetterByBindingType=[bi.prototype._getValue_direct,bi.prototype._getValue_array,bi.prototype._getValue_arrayElement,bi.prototype._getValue_toArray],bi.prototype.SetterByBindingTypeAndVersioning=[[bi.prototype._setValue_direct,bi.prototype._setValue_direct_setNeedsUpdate,bi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bi.prototype._setValue_array,bi.prototype._setValue_array_setNeedsUpdate,bi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bi.prototype._setValue_arrayElement,bi.prototype._setValue_arrayElement_setNeedsUpdate,bi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bi.prototype._setValue_fromArray,bi.prototype._setValue_fromArray_setNeedsUpdate,bi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class wA{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ln(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,u=s.length;let c,d=e.length,p=this.nCachedObjects_;for(let _=0,E=arguments.length;_!==E;++_){const x=arguments[_],w=x.uuid;let R=t[w];if(R===void 0){R=d++,t[w]=R,e.push(x);for(let C=0,O=u;C!==O;++C)s[C].push(new bi(x,n[C],i[C]))}else if(R<p){c=e[R];const C=--p,O=e[C];t[O.uuid]=R,e[R]=O,t[w]=C,e[C]=x;for(let k=0,J=u;k!==J;++k){const G=s[k],H=G[C];let ae=G[R];G[R]=H,ae===void 0&&(ae=new bi(x,n[k],i[k])),G[C]=ae}}else e[R]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){const d=arguments[u],p=d.uuid,_=t[p];if(_!==void 0&&_>=s){const E=s++,x=e[E];t[x.uuid]=_,e[_]=x,t[p]=E,e[E]=d;for(let w=0,R=i;w!==R;++w){const C=n[w],O=C[E],k=C[_];C[_]=O,C[E]=k}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,u=e.length;for(let c=0,d=arguments.length;c!==d;++c){const p=arguments[c],_=p.uuid,E=t[_];if(E!==void 0)if(delete t[_],E<s){const x=--s,w=e[x],R=--u,C=e[R];t[w.uuid]=E,e[E]=w,t[C.uuid]=x,e[x]=C,e.pop();for(let O=0,k=i;O!==k;++O){const J=n[O],G=J[x],H=J[R];J[E]=G,J[x]=H,J.pop()}}else{const x=--u,w=e[x];x>0&&(t[w.uuid]=E),e[E]=w,e.pop();for(let R=0,C=i;R!==C;++R){const O=n[R];O[E]=O[x],O.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const u=this._paths,c=this._parsedPaths,d=this._objects,p=d.length,_=this.nCachedObjects_,E=new Array(p);i=s.length,n[e]=i,u.push(e),c.push(t),s.push(E);for(let x=_,w=d.length;x!==w;++x){const R=d[x];E[x]=new bi(R,e,t)}return E}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,u=this._bindings,c=u.length-1,d=u[c],p=e[c];t[p]=n,u[n]=d,u.pop(),s[n]=s[c],s.pop(),i[n]=i[c],i.pop()}}}class T1{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,u=s.length,c=new Array(u),d={endingStart:Ga,endingEnd:Ga};for(let p=0;p!==u;++p){const _=s[p].createInterpolant(null);c[p]=_,_.settings=d}this._interpolantSettings=d,this._interpolants=c,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Hu,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,u=s/i,c=i/s;e.warp(1,u,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,u=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=i._lendControlInterpolant(),this._timeScaleInterpolant=c);const d=c.parameterPositions,p=c.sampleValues;return d[0]=s,d[1]=s+n,p[0]=e/u,p[1]=t/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const d=(e-s)*n;d<0||n===0?t=0:(this._startTime=null,t=n*d)}t*=this._updateTimeScale(e);const u=this._updateTime(t),c=this._updateWeight(e);if(c>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case ru:for(let _=0,E=d.length;_!==E;++_)d[_].evaluate(u),p[_].accumulateAdditive(c);break;case So:default:for(let _=0,E=d.length;_!==E;++_)d[_].evaluate(u),p[_].accumulate(i,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const u=n===Yu;if(e===0)return s===-1?i:u&&(s&1)===1?t-i:i;if(n===jc){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),i>=t||i<0){const c=Math.floor(i/t);i-=t*c,s+=Math.abs(c);const d=this.repetitions-s;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,u)}else this._setEndings(!1,!1,u);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=i;if(u&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Ta,i.endingEnd=Ta):(e?i.endingStart=this.zeroSlopeAtStart?Ta:Ga:i.endingStart=Eo,t?i.endingEnd=this.zeroSlopeAtEnd?Ta:Ga:i.endingEnd=Eo)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let u=this._weightInterpolant;u===null&&(u=i._lendControlInterpolant(),this._weightInterpolant=u);const c=u.parameterPositions,d=u.sampleValues;return c[0]=s,d[0]=t,c[1]=s+e,d[1]=n,this}}const w1=new Float32Array(1);class MA extends Re{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,u=e._propertyBindings,c=e._interpolants,d=n.uuid,p=this._bindingsByRootAndName;let _=p[d];_===void 0&&(_={},p[d]=_);for(let E=0;E!==s;++E){const x=i[E],w=x.name;let R=_[w];if(R!==void 0)++R.referenceCount,u[E]=R;else{if(R=u[E],R!==void 0){R._cacheIndex===null&&(++R.referenceCount,this._addInactiveBinding(R,d,w));continue}const C=t&&t._propertyBindings[E].binding.parsedPath;R=new m1(bi.create(n,w,C),x.ValueTypeName,x.getValueSize()),++R.referenceCount,this._addInactiveBinding(R,d,w),u[E]=R}c[E].resultBuffer=R.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let u=s[t];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=u;else{const c=u.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=i.length,i.push(e),u.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,u=this._actionsByClip,c=u[s],d=c.knownActions,p=d[d.length-1],_=e._byClipCacheIndex;p._byClipCacheIndex=_,d[_]=p,d.pop(),e._byClipCacheIndex=null;const E=c.actionByRoot,x=(e._localRoot||this._root).uuid;delete E[x],d.length===0&&delete u[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let u=i[t];u===void 0&&(u={},i[t]=u),u[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,u=this._bindingsByRootAndName,c=u[i],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete c[s],Object.keys(c).length===0&&delete u[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Wr(new Float32Array(2),new Float32Array(2),1,w1),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let u=typeof e=="string"?Am.findByName(i,e):e;const c=u!==null?u.uuid:e,d=this._actionsByClip[c];let p=null;if(n===void 0&&(u!==null?n=u.blendMode:n=So),d!==void 0){const E=d.actionByRoot[s];if(E!==void 0&&E.blendMode===n)return E;p=d.knownActions[0],u===null&&(u=p._clip)}if(u===null)return null;const _=new T1(this,u,t,n);return this._bindAction(_,p),this._addInactiveAction(_,c,s),_}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?Am.findByName(n,e):e,u=s?s.uuid:e,c=this._actionsByClip[u];return c!==void 0&&c.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),u=this._accuIndex^=1;for(let p=0;p!==n;++p)t[p]._update(i,e,s,u);const c=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)c[p].apply(u);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const u=s.knownActions;for(let c=0,d=u.length;c!==d;++c){const p=u[c];this._deactivateAction(p);const _=p._cacheIndex,E=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,E._cacheIndex=_,t[_]=E,t.pop(),this._removeInactiveBindingsForAction(p)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const u in n){const c=n[u].actionByRoot,d=c[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const u in s){const c=s[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class py{constructor(e){this.value=e}clone(){return new py(this.value.clone===void 0?this.value:this.value.clone())}}let M1=0;class CA extends Re{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:M1++}),this.name="",this.usage=ka,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class Kv extends Ah{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class OA{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class PA{constructor(e,t,n=0,i=1/0){this.ray=new nl(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new zf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return $v(e,this,n,t),n.sort(my),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)$v(e[i],this,n,t);return n.sort(my),n}}function my(r,e){return r.distance-e.distance}function $v(r,e,t,n){if(r.layers.test(e.layers)&&r.raycast(e,t),n===!0){const i=r.children;for(let s=0,u=i.length;s<u;s++)$v(i[s],e,t,!0)}}class Zv{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Kt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class IA{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const gy=new vt;class C1{constructor(e=new vt(1/0,1/0),t=new vt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=gy.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return gy.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const vy=new he,Mm=new he;class O1{constructor(e=new he,t=new he){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){vy.subVectors(e,this.start),Mm.subVectors(this.end,this.start);const n=Mm.dot(Mm);let s=Mm.dot(vy)/n;return t&&(s=Kt(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _y=new he;class RA extends ui{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new An,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,c=1,d=32;u<d;u++,c++){const p=u/d*Math.PI*2,_=c/d*Math.PI*2;i.push(Math.cos(p),Math.sin(p),1,Math.cos(_),Math.sin(_),1)}n.setAttribute("position",new Jt(i,3));const s=new ms({fog:!1,toneMapped:!1});this.cone=new Fa(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_y.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_y),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ku=new he,Cm=new kn,Qv=new kn;class LA extends Fa{constructor(e){const t=yy(e),n=new An,i=[],s=[],u=new Zt(0,0,1),c=new Zt(0,1,0);for(let p=0;p<t.length;p++){const _=t[p];_.parent&&_.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(u.r,u.g,u.b),s.push(c.r,c.g,c.b))}n.setAttribute("position",new Jt(i,3)),n.setAttribute("color",new Jt(s,3));const d=new ms({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Qv.copy(this.root.matrixWorld).invert();for(let s=0,u=0;s<t.length;s++){const c=t[s];c.parent&&c.parent.isBone&&(Cm.multiplyMatrices(Qv,c.matrixWorld),ku.setFromMatrixPosition(Cm),i.setXYZ(u,ku.x,ku.y,ku.z),Cm.multiplyMatrices(Qv,c.parent.matrixWorld),ku.setFromMatrixPosition(Cm),i.setXYZ(u+1,ku.x,ku.y,ku.z),u+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function yy(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,yy(r.children[t]));return e}class DA extends dr{constructor(e,t,n){const i=new Mc(t,4,2),s=new er({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const P1=new he,by=new Zt,xy=new Zt;class FA extends ui{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Tc(t);i.rotateY(Math.PI*.5),this.material=new er({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),u=new Float32Array(s.count*3);i.setAttribute("color",new Ui(u,3)),this.add(new dr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");by.copy(this.light.color),xy.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?by:xy;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(P1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class UA extends Fa{constructor(e=10,t=10,n=4473924,i=8947848){n=new Zt(n),i=new Zt(i);const s=t/2,u=e/t,c=e/2,d=[],p=[];for(let x=0,w=0,R=-c;x<=t;x++,R+=u){d.push(-c,0,R,c,0,R),d.push(R,0,-c,R,0,c);const C=x===s?n:i;C.toArray(p,w),w+=3,C.toArray(p,w),w+=3,C.toArray(p,w),w+=3,C.toArray(p,w),w+=3}const _=new An;_.setAttribute("position",new Jt(d,3)),_.setAttribute("color",new Jt(p,3));const E=new ms({vertexColors:!0,toneMapped:!1});super(_,E),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class NA extends Fa{constructor(e=10,t=16,n=8,i=64,s=4473924,u=8947848){s=new Zt(s),u=new Zt(u);const c=[],d=[];if(t>1)for(let E=0;E<t;E++){const x=E/t*(Math.PI*2),w=Math.sin(x)*e,R=Math.cos(x)*e;c.push(0,0,0),c.push(w,0,R);const C=E&1?s:u;d.push(C.r,C.g,C.b),d.push(C.r,C.g,C.b)}for(let E=0;E<n;E++){const x=E&1?s:u,w=e-e/n*E;for(let R=0;R<i;R++){let C=R/i*(Math.PI*2),O=Math.sin(C)*w,k=Math.cos(C)*w;c.push(O,0,k),d.push(x.r,x.g,x.b),C=(R+1)/i*(Math.PI*2),O=Math.sin(C)*w,k=Math.cos(C)*w,c.push(O,0,k),d.push(x.r,x.g,x.b)}}const p=new An;p.setAttribute("position",new Jt(c,3)),p.setAttribute("color",new Jt(d,3));const _=new ms({vertexColors:!0,toneMapped:!1});super(p,_),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Ey=new he,Om=new he,Sy=new he;class BA extends ui{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new An;i.setAttribute("position",new Jt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ms({fog:!1,toneMapped:!1});this.lightPlane=new Go(i,s),this.add(this.lightPlane),i=new An,i.setAttribute("position",new Jt([0,0,0,0,0,1],3)),this.targetLine=new Go(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Ey.setFromMatrixPosition(this.light.matrixWorld),Om.setFromMatrixPosition(this.light.target.matrixWorld),Sy.subVectors(Om,Ey),this.lightPlane.lookAt(Om),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Om),this.targetLine.scale.z=Sy.length()}}const Pm=new he,mr=new ll;class zA extends Fa{constructor(e){const t=new An,n=new ms({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],u={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(R,C){d(R),d(C)}function d(R){i.push(0,0,0),s.push(0,0,0),u[R]===void 0&&(u[R]=[]),u[R].push(i.length/3-1)}t.setAttribute("position",new Jt(i,3)),t.setAttribute("color",new Jt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const p=new Zt(16755200),_=new Zt(16711680),E=new Zt(43775),x=new Zt(16777215),w=new Zt(3355443);this.setColors(p,_,E,x,w)}setColors(e,t,n,i,s){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,i.r,i.g,i.b),c.setXYZ(39,i.r,i.g,i.b),c.setXYZ(40,s.r,s.g,s.b),c.setXYZ(41,s.r,s.g,s.b),c.setXYZ(42,s.r,s.g,s.b),c.setXYZ(43,s.r,s.g,s.b),c.setXYZ(44,s.r,s.g,s.b),c.setXYZ(45,s.r,s.g,s.b),c.setXYZ(46,s.r,s.g,s.b),c.setXYZ(47,s.r,s.g,s.b),c.setXYZ(48,s.r,s.g,s.b),c.setXYZ(49,s.r,s.g,s.b),c.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;mr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Er("c",t,e,mr,0,0,-1),Er("t",t,e,mr,0,0,1),Er("n1",t,e,mr,-n,-i,-1),Er("n2",t,e,mr,n,-i,-1),Er("n3",t,e,mr,-n,i,-1),Er("n4",t,e,mr,n,i,-1),Er("f1",t,e,mr,-n,-i,1),Er("f2",t,e,mr,n,-i,1),Er("f3",t,e,mr,-n,i,1),Er("f4",t,e,mr,n,i,1),Er("u1",t,e,mr,n*.7,i*1.1,-1),Er("u2",t,e,mr,-n*.7,i*1.1,-1),Er("u3",t,e,mr,0,i*2,-1),Er("cf1",t,e,mr,-n,0,1),Er("cf2",t,e,mr,n,0,1),Er("cf3",t,e,mr,0,-i,1),Er("cf4",t,e,mr,0,i,1),Er("cn1",t,e,mr,-n,0,-1),Er("cn2",t,e,mr,n,0,-1),Er("cn3",t,e,mr,0,-i,-1),Er("cn4",t,e,mr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Er(r,e,t,n,i,s,u){Pm.set(i,s,u).unproject(n);const c=e[r];if(c!==void 0){const d=t.getAttribute("position");for(let p=0,_=c.length;p<_;p++)d.setXYZ(c[p],Pm.x,Pm.y,Pm.z)}}const Im=new fa;class GA extends Fa{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new An;s.setIndex(new Ui(n,1)),s.setAttribute("position",new Ui(i,3)),super(s,new ms({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Im.setFromObject(this.object),Im.isEmpty())return;const t=Im.min,n=Im.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class kA extends Fa{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new An;s.setIndex(new Ui(n,1)),s.setAttribute("position",new Jt(i,3)),super(s,new ms({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class VA extends Go{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new An;u.setAttribute("position",new Jt(s,3)),u.computeBoundingSphere(),super(u,new ms({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new An;d.setAttribute("position",new Jt(c,3)),d.computeBoundingSphere(),this.add(new dr(d,new er({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Ay=new he;let Rm,Jv;class jA extends ui{constructor(e=new he(0,0,1),t=new he(0,0,0),n=1,i=16776960,s=n*.2,u=s*.2){super(),this.type="ArrowHelper",Rm===void 0&&(Rm=new An,Rm.setAttribute("position",new Jt([0,0,0,0,1,0],3)),Jv=new Bu(0,.5,1,5,1),Jv.translate(0,-.5,0)),this.position.copy(t),this.line=new Go(Rm,new ms({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new dr(Jv,new er({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,u)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Ay.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Ay,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class WA extends Fa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new An;i.setAttribute("position",new Jt(t,3)),i.setAttribute("color",new Jt(n,3));const s=new ms({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new Zt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class HA{constructor(){this.type="ShapePath",this.color=new Zt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new bc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,u){return this.currentPath.bezierCurveTo(e,t,n,i,s,u),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(k){const J=[];for(let G=0,H=k.length;G<H;G++){const ae=k[G],me=new ko;me.curves=ae.curves,J.push(me)}return J}function n(k,J){const G=J.length;let H=!1;for(let ae=G-1,me=0;me<G;ae=me++){let we=J[ae],V=J[me],pe=V.x-we.x,ve=V.y-we.y;if(Math.abs(ve)>Number.EPSILON){if(ve<0&&(we=J[me],pe=-pe,V=J[ae],ve=-ve),k.y<we.y||k.y>V.y)continue;if(k.y===we.y){if(k.x===we.x)return!0}else{const Ge=ve*(k.x-we.x)-pe*(k.y-we.y);if(Ge===0)return!0;if(Ge<0)continue;H=!H}}else{if(k.y!==we.y)continue;if(V.x<=k.x&&k.x<=we.x||we.x<=k.x&&k.x<=V.x)return!0}}return H}const i=Ua.isClockWise,s=this.subPaths;if(s.length===0)return[];let u,c,d;const p=[];if(s.length===1)return c=s[0],d=new ko,d.curves=c.curves,p.push(d),p;let _=!i(s[0].getPoints());_=e?!_:_;const E=[],x=[];let w=[],R=0,C;x[R]=void 0,w[R]=[];for(let k=0,J=s.length;k<J;k++)c=s[k],C=c.getPoints(),u=i(C),u=e?!u:u,u?(!_&&x[R]&&R++,x[R]={s:new ko,p:C},x[R].s.curves=c.curves,_&&R++,w[R]=[]):w[R].push({h:c,p:C[0]});if(!x[0])return t(s);if(x.length>1){let k=!1,J=0;for(let G=0,H=x.length;G<H;G++)E[G]=[];for(let G=0,H=x.length;G<H;G++){const ae=w[G];for(let me=0;me<ae.length;me++){const we=ae[me];let V=!0;for(let pe=0;pe<x.length;pe++)n(we.p,x[pe].p)&&(G!==pe&&J++,V?(V=!1,E[pe].push(we)):k=!0);V&&E[G].push(we)}}J>0&&k===!1&&(w=E)}let O;for(let k=0,J=x.length;k<J;k++){d=x[k].s,p.push(d),O=w[k];for(let G=0,H=O.length;G<H;G++)d.holes.push(O[G].h)}return p}}const Ho=I1();function I1(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(n[d]=0,n[d|256]=32768,i[d]=24,i[d|256]=24):p<-14?(n[d]=1024>>-p-14,n[d|256]=1024>>-p-14|32768,i[d]=-p-1,i[d|256]=-p-1):p<=15?(n[d]=p+15<<10,n[d|256]=p+15<<10|32768,i[d]=13,i[d|256]=13):p<128?(n[d]=31744,n[d|256]=64512,i[d]=24,i[d|256]=24):(n[d]=31744,n[d|256]=64512,i[d]=13,i[d|256]=13)}const s=new Uint32Array(2048),u=new Uint32Array(64),c=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,_=0;for(;!(p&8388608);)p<<=1,_-=8388608;p&=-8388609,_+=947912704,s[d]=p|_}for(let d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)u[d]=d<<23;u[31]=1199570944,u[32]=2147483648;for(let d=33;d<63;++d)u[d]=2147483648+(d-32<<23);u[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(c[d]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:u,offsetTable:c}}function R1(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Kt(r,-65504,65504),Ho.floatView[0]=r;const e=Ho.uint32View[0],t=e>>23&511;return Ho.baseTable[t]+((e&8388607)>>Ho.shiftTable[t])}function L1(r){const e=r>>10;return Ho.uint32View[0]=Ho.mantissaTable[Ho.offsetTable[e]+(r&1023)]+Ho.exponentTable[e],Ho.floatView[0]}var YA=Object.freeze({__proto__:null,toHalfFloat:R1,fromHalfFloat:L1});function XA(){console.error("THREE.ImmediateRenderObject has been removed.")}class KA extends Xi{constructor(e,t,n){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,n),this.samples=4}}class $A extends ze{constructor(e,t,n,i){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,n,i)}}class ZA extends Je{constructor(e,t,n,i){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,n,i)}}class QA extends ma{constructor(e,t,n,i,s,u){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,i,s,u)}}class JA extends Vl{constructor(e,t,n,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,i)}}class qA extends oo{constructor(e,t,n,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,i)}}class eT extends jl{constructor(e,t,n,i,s,u,c){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,i,s,u,c)}}class tT extends Bu{constructor(e,t,n,i,s,u,c,d){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,i,s,u,c,d)}}class nT extends Wl{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class iT extends Jl{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class rT extends ql{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class sT extends xc{constructor(e,t,n,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,i)}}class aT extends Tc{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class oT extends qa{constructor(e,t,n,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,i)}}class uT extends uo{constructor(e,t,n,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,i)}}class cT extends ef{constructor(e,t,n,i,s,u){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,i,s,u)}}class lT extends wc{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class fT extends Mc{constructor(e,t,n,i,s,u,c){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,i,s,u,c)}}class hT extends tf{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class dT extends nf{constructor(e,t,n,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,i,s)}}class pT extends rf{constructor(e,t,n,i,s,u){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,i,s,u)}}class mT extends sf{constructor(e,t,n,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:D}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=D);class na extends vt{reset(){return this.set(0,0),this}equals(e,t){return t==null?e.x===this.x&&e.y===this.y:Math.abs(e.x-this.x)<t&&Math.abs(e.y-this.y)<t}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}isZero(){return this.x===0&&this.y===0}}class ni extends he{reset(){return this.set(0,0,0),this}equals(e,t){return t==null?e.x===this.x&&e.y===this.y&&e.z===this.z:Math.abs(e.x-this.x)<t&&Math.abs(e.y-this.y)<t&&Math.abs(e.z-this.z)<t}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}isZero(){return this.x===0&&this.y===0&&this.z===0}}class D1 extends di{reset(){return this.set(0,0,0,0),this}equals(e,t){return t==null?e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w:Math.abs(e.x-this.x)<t&&Math.abs(e.y-this.y)<t&&Math.abs(e.z-this.z)<t&&Math.abs(e.w-this.w)<t}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this.w=Math.abs(this.w),this}isZero(){return this.x===0&&this.y===0&&this.z===0&&this.w===0}}class qv extends Nn{reset(){return this.set(0,0,0,1),this}}class F1 extends rr{reset(){return this.set(0,0,0),this}}class U1 extends C1{reset(){return this.min.set(1/0,1/0),this.max.set(-1/0,-1/0),this}}class Ty extends fa{reset(){return this.min.set(1/0,1/0,1/0),this.max.set(-1/0,-1/0,-1/0),this}setFromObject(e,t){return this.makeEmpty(),this.expandByObject(e,t)}toPointsArray(){return[new ni(this.min.x,this.min.y,this.min.z),new ni(this.min.x,this.min.y,this.max.z),new ni(this.min.x,this.max.y,this.min.z),new ni(this.min.x,this.max.y,this.max.z),new ni(this.max.x,this.min.y,this.min.z),new ni(this.max.x,this.min.y,this.max.z),new ni(this.max.x,this.max.y,this.min.z),new ni(this.max.x,this.max.y,this.max.z)]}}Ty.prototype.expandByObject=function(){let e,t,n;const i=new ni;function s(u){const c=u.geometry;if(c!==void 0){if(c.isGeometry){const d=c.vertices;for(t=0,n=d.length;t<n;t++)i.copy(d[t]),i.applyMatrix4(u.matrixWorld),e.expandByPoint(i)}else if(c.isBufferGeometry){const d=c.attributes.position;if(d!=null)for(t=Number.isFinite(c.drawRange.start)&&!Number.isNaN(c.drawRange.start)?c.drawRange.start:0,n=Number.isFinite(c.drawRange.count)&&!Number.isNaN(c.drawRange.count)?c.drawRange.count:d.count;t<n;t++)i.fromBufferAttribute(d,t).applyMatrix4(u.matrixWorld),e.expandByPoint(i)}}}return function(c,d=!0){return e=this,c.updateMatrixWorld(!0),d?c.traverse(s):s(c),this}}();function gT(){}function vT(r,e){return e.reduce((t,n)=>(t[n]=r[n],t),{})}function _T(r,...e){return e.forEach(t=>{Object.getOwnPropertyNames(t).filter(n=>typeof t[n]!="function").forEach(n=>{Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}),r}const N1=["name","length","prototype"];function wy(r,e,t){return Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}function My(r,e,t){Object.getOwnPropertyNames(e).filter(n=>N1.includes(n)?!1:!t.props||!t.props.length?!0:typeof t.include<"u"?t.include?!!t.props.find(i=>i.key===n&&(typeof i.static>"u"||i.static)):!t.props.find(i=>i.key===n&&(typeof i.static>"u"||i.static)):!!t.props.find(i=>i.key===n&&i.include&&(typeof i.static>"u"||i.static))).forEach(n=>{wy(r,n,e)}),Object.getOwnPropertyNames(e.prototype).filter(n=>n==="constructor"?!1:!t.props||!t.props.length?!0:typeof t.include<"u"?t.include?!!t.props.find(i=>i.key===n&&(typeof i.static>"u"||!i.static)):!t.props.find(i=>i.key===n&&(typeof i.static>"u"||!i.static)):!!t.props.find(i=>i.key===n&&i.include&&(typeof i.static>"u"||!i.static))).forEach(n=>{wy(r.prototype,n,e.prototype)})}function Na(r,e){e.forEach(t=>{if(t.deep)for(let n=t.type;n.prototype!==Object.prototype;n=Object.getPrototypeOf(n.prototype).constructor)My(r,n,t);else My(r,t.type,t)})}function Yh(){}Object.assign(Yh.prototype,{constructor:Yh});class Cy extends Re{constructor(...e){super(...e),Yh.call(this,...e)}}Na(Cy,[{type:Yh,deep:!0}]);var e_=Cy,ia=o("01d16a391b82cbd5b98a");class t_{constructor(e=0,t=0,n=0,i=ia.e){this._x=e,this._y=t,this._z=n,this._onChangeCallback=i}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._onChangeCallback())}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._onChangeCallback())}get z(){return this._z}set z(e){this._z!==e&&(this._z=e,this._onChangeCallback())}_onChange(e=ia.e){return this._onChangeCallback=e,this}}Na(t_,[{type:ni,deep:!0}]);function vs(){this.destroyed=!1,this.matrixNeedsUpdate=!1,this.rotation._onChange(this._onRotationChange.bind(this)),this.quaternion._onChange(this._onQuaternionChange.bind(this));const r=this._setMatrixNeedsUpdate.bind(this);Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:new t_()._onChange(r)},scale:{configurable:!0,enumerable:!0,value:new t_(1,1,1)._onChange(r)}})}vs.prototype=Object.assign(Object.create(Yh.prototype),{constructor:vs,_setMatrixNeedsUpdate(){this.matrixNeedsUpdate=!0},_onQuaternionChange(){this.rotation.setFromQuaternion(this.quaternion,void 0,!1),this.matrixNeedsUpdate=!0},_onRotationChange(){this.quaternion.setFromEuler(this.rotation,!1),this.matrixNeedsUpdate=!0},updateMatrix(){this.matrixNeedsUpdate&&(this.matrixNeedsUpdate=!1,ui.prototype.updateMatrix.call(this))},add(...r){ui.prototype.add.call(this,...r),r.forEach(e=>{e.matrixWorldNeedsUpdate=!0})},remove(...r){ui.prototype.remove.call(this,...r),r.forEach(e=>{e.matrixWorldNeedsUpdate=!0})},getObjectBy(r){if(r(this))return this;for(let e=0;e<this.children.length;++e){const n=this.children[e].getObjectBy(r);if(n!==void 0)return n}},getObjectsBy(r,e=[]){r(this)&&e.push(this);for(let t=0;t<this.children.length;++t)this.children[t].getObjectsBy(r,e);return e},getRootObject(){let r=this;for(;r!=null;){if(r.parent==null)return r;r=r.parent}return r},traverseVertices:(()=>{let r,e;const t=new ni;return function(i){return this.traverse(s=>{const u=s.geometry;if(u!==void 0){if(u.isGeometry){const c=u.vertices;for(r=0,e=c.length;r<e;r++)i(t.copy(c[r]),s)}else if(u.isBufferGeometry){const c=u.attributes.position;if(c!==void 0)for(r=0,e=c.count;r<e;r++)i(t.fromBufferAttribute(c,r),s)}}}),this}})(),dispose(r){const e={recursive:!1,geometry:!0,material:!0,texture:!0};typeof r=="boolean"?Object.keys(e).forEach(_=>{e[_]=r}):r&&Object.assign(e,r);const{recursive:t,geometry:n,material:i,texture:s}=e,{children:u,geometry:c,material:d,userData:p}=this;if(t&&u)for(let _=0;_<u.length;++_)u[_].dispose(e);if(this.parent&&this.parent.remove(this),n&&c&&c.dispose&&c.dispose(),i&&d){const{map:_}=d;s&&_&&_.dispose&&_.dispose(),d.dispose&&d.dispose()}Object.keys(p).forEach(_=>{p[_]=null}),this.destroyed=!0},traverseIf(r,e=!1){const t=r(this);if(typeof t<"u"&&!t)return!1;const n=this.children;for(let i=0,s=n.length;i<s;++i){const u=n[i].traverseIf(r,e);if(e&&typeof u<"u"&&!u)return!1}return!0},traverseAncestorsIf(r){const e=this.parent;if(e!=null){const t=r(e);return typeof t<"u"&&!t?!1:e.traverseAncestorsIf(r)}return!0}});class Oy extends ui{constructor(...e){super(...e),vs.call(this,...e)}}Na(Oy,[{type:vs,deep:!0}]);var yT=Oy;class n_ extends Rl{constructor(...e){super(...e),vs.call(this,...e)}}Na(n_,[{type:vs,deep:!0}]);class _s extends Ws{constructor(...e){super(...e),vs.call(this,...e)}}Na(_s,[{type:vs,deep:!0}]);class Vu extends dr{constructor(...e){super(...e),vs.call(this,...e)}}Na(Vu,[{type:vs,deep:!0}]);class B1 extends xr{constructor(...e){super(...e),vs.call(this,...e)}}Na(B1,[{type:vs,deep:!0}]);class Py extends Th{constructor(...e){super(...e),vs.call(this,...e)}}Na(Py,[{type:vs,deep:!0}]);class bT extends dv{update(){var e;const{image:t}=this;if("requestVideoFrameCallback"in t){(!this._lastVideoFrameCbObj||this._lastVideoFrameCbObj.video!==t)&&(((e=this._lastVideoFrameCbObj)==null?void 0:e.cbId)!=null&&this._lastVideoFrameCbObj.video.cancelVideoFrameCallback(this._lastVideoFrameCbObj.cbId),this._lastVideoFrameCbObj={cbId:null,video:t,cb:()=>{this.needsUpdate=!0,this._lastVideoFrameCbObj.cbId=t.requestVideoFrameCallback(this._lastVideoFrameCbObj.cb)}},this.needsUpdate=!0,this._lastVideoFrameCbObj.cb());return}if(this._lastVideoFrameCbObj&&(this._lastVideoFrameCbObj=null),!(t.readyState==null||t.readyState<t.HAVE_CURRENT_DATA)){if(this.frameRate!=null)if(this.lastUpdate==null)this.lastUpdate=performance.now();else{const i=this.lastUpdate,s=performance.now(),u=1e3/this.frameRate;if(s-i<u)return;this.lastUpdate=s}this.needsUpdate=!0}}}function ju(...r){vs.call(this,...r)}ju.prototype=Object.assign(Object.create(vs.prototype),{constructor:ju});class Iy extends ll{constructor(...e){super(...e),ju.call(this,...e)}}Na(Iy,[{type:ju,deep:!0}]);var xT=Iy;class i_ extends qr{constructor(...e){super(...e),ju.call(this,...e)}}Na(i_,[{type:ju,deep:!0}]);class z1 extends pr{constructor(...e){super(...e),ju.call(this,...e)}}Na(z1,[{type:ju,deep:!0}]);const Ba={MeshLambertMaterial:{id:"meshlambert",name:"lambert"},MeshBasicMaterial:{id:"meshbasic",name:"basic"},MeshStandardMaterial:{id:"meshphysical",name:"physical"},MeshPhongMaterial:{id:"meshphong",name:"phong"},MeshMatcapMaterial:{id:"meshmatcap",name:"matcap"},PointsMaterial:{id:"points",name:"points"},LineDashedMaterial:{id:"dashed",name:"linedashed"},MeshDepthMaterial:{id:"depth",name:"depth"},MeshNormalMaterial:{id:"normal",name:"normal"},MeshDistanceMaterial:{id:"distanceRGBA",name:"distanceRGBA"},SpriteMaterial:{id:"sprite",name:"sprite"}},G1={alphaTest:{as:"ALPHATEST",not:0}},Ry={map:"USE_MAP",aoMap:"USE_AOMAP",envMap:"USE_ENVMAP",bumpMap:"USE_BUMPMAP",normalMap:"USE_NORMALMAP",lightMap:"USE_LIGHTMAP",emissiveMap:"USE_EMISSIVEMAP",specularMap:"USE_SPECULARMAP",roughnessMap:"USE_ROUGHNESSMAP",metalnessMap:"USE_METALNESSMAP",alphaMap:"USE_ALPHAMAP",displacementMap:"USE_DISPLACEMENTMAP"};function r_(r){return r===ue||r.prototype instanceof ue?Ba.MeshLambertMaterial:r===er||r.prototype instanceof er?Ba.MeshBasicMaterial:r===a||r.prototype instanceof a?Ba.MeshStandardMaterial:r===y||r.prototype instanceof y?Ba.MeshPhongMaterial:r===Ee||r.prototype instanceof Ee?Ba.MeshMatcapMaterial:r===Fl||r.prototype instanceof Fl?Ba.PointsMaterial:r===Pe||r.prototype instanceof Pe?Ba.LineDashedMaterial:r===dc||r.prototype instanceof dc?Ba.MeshDepthMaterial:r===Z||r.prototype instanceof Z?Ba.MeshNormalMaterial:r===Il||r.prototype instanceof Il?Ba.MeshDistanceMaterial:r===ao||r.prototype instanceof ao?Ba.SpriteMaterial:null}function Xh(r,e){let t=r;return Object.keys(e).forEach(n=>{const i=e[n];if(i instanceof Object){if(On[n]==null)throw new Error(`ShaderMaterial.extend: ShaderChunk "${n}" not found`);{const s=`#include <${n}>`;if(t.indexOf(s)===-1)throw new Error(`Couldn't patch the shader. String "${s}" not found`);t=t.replace(s,Xh(On[n],i))}}else if(n[0]==="@"){const s=n.substring(1);if(t.indexOf(s)===-1)throw new Error(`Couldn't patch the shader. String "${s}" not found`);t=t.replace(s,i)}else if(n[0]==="?"){const s=n.substring(1);if(t.indexOf(s)===-1)throw new Error(`Couldn't patch the shader. String "${s}" not found`);t=t.replace(s,`${i}
${s}`)}else{if(t.indexOf(n)===-1)throw new Error(`Couldn't patch the shader. String "${n}" not found`);t=t.replace(n,`${n}
${i}`)}}),t}function Ly(r,e,t){r.uniforms!=null&&Object.keys(r.uniforms).forEach(n=>{e.uniforms[n]||(e.uniforms[n]={}),e.uniforms[n].value=r.uniforms[n],t&&Ry[n]!=null&&(t[Ry[n]]=!0);const i=G1[n];t&&i!=null&&(i.not==null||i.not!==r.uniforms[n])&&(t[i.as]=r.uniforms[n])})}Zi.mapShader=function(e,t){const n=r_(e);return On[`${n.id}_${t==="vertex"?"vert":"frag"}`]},Zi.patchShader=function(e,t){const n=`${t.header||""}
`;let i=e.vertexShader,s=e.fragmentShader;return t.vertex!=null&&(i=Xh(i,t.vertex)),t.fragment!=null&&(s=Xh(s,t.fragment)),e.vertexShader=n+i,e.fragmentShader=n+s,Ly(t,e),e},Zi.extend=function(e,t={},n=new Zi,i={}){let s,u="",c="";const d=t.material||{},p=d.defines||{};if(e instanceof Function){const x=r_(e);if(x==null)throw new Error(`ShaderMaterial.extend: no mapping for material class "${e.name}" found`);s=Ia.clone(Vr[x.name].uniforms),u=On[`${x.id}_vert`],c=On[`${x.id}_frag`],d.lights=d.lights==null?!0:d.lights}else if(e.isShaderMaterial)s=Ia.clone(e.uniforms),u=e.vertexShader,c=e.fragmentShader,n.copy(e),e.defines&&Object.assign(p,e.defines);else{const x=r_(e);if(x==null)throw new Error(`ShaderMaterial.extend: no mapping for material class "${e.constructor.name}" found`);s=Ia.clone(Vr[x.name].uniforms),u=On[`${x.id}_vert`],c=On[`${x.id}_frag`],d.lights=d.lights==null?!0:d.lights,Object.keys(s).forEach(w=>{e[w]&&(s[w].value=e[w])})}const _=new e(i);n.propsToInherit&&Object.assign(n,Object(P.pick)(_,n.propsToInherit)),e.prototype.copy.call(n,_),t.defines&&Object.assign(p,t.defines);const E=`${t.header||""}
`;return t.vertex!=null&&(u=Xh(u,t.vertex)),t.fragment!=null&&(c=Xh(c,t.fragment)),d.defines=Object.assign(p,n.defines),d.uniforms=s,d.vertexShader=E+u,d.fragmentShader=E+c,Ly(t,d,p),n.setValues(d),n};var Dy=Zi;let Fy;g.isVue2&&(Fy=new g.Vue2().$data.__ob__.constructor);function k1(r){return!!r.__ob__}const Uy=g.isVue2?k1:g.isReactive;function V1(r){Object.defineProperty(r,"__ob__",{value:new Fy({}),enumerable:!1})}const j1=g.isVue2?V1:g.markRaw;function Ny(r){return Uy(r)||j1(r),r}function s_(r,e,t=new WeakSet){!r||typeof r!="object"||t.has(r)||(e(r),t.add(r),Array.isArray(r)?r.length&&r[0]&&typeof r[0]=="object"&&r.forEach(n=>s_(n,e,t)):Object.keys(r).forEach(n=>s_(r[n],e,t)))}function a_(r,e=!1,t=!1){return t&&Uy(r)?r:(e&&s_(r,i=>Ny(i),new WeakSet),Ny(r))}var o_=o("510c97a2832dee6670a2");function Kh(){let r=0;const e=document.createElement("div");e.addEventListener("click",_=>{_.preventDefault(),n(++r%e.children.length)},!1);function t(_){return e.appendChild(_.dom),_}function n(_){for(let E=0;E<e.children.length;E++)e.children[E].style.display=E===_?"block":"none";r=_}let i=(performance||Date).now(),s=i,u=0;const c=t(new Kh.Panel("FPS","#0ff","#002")),d=t(new Kh.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var p=t(new Kh.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:e,addPanel:t,showPanel:n,begin(){i=(performance||Date).now()},end(){u++;const _=(performance||Date).now();if(d.update(_-i,200),_>=s+1e3&&(c.update(u*1e3/(_-s),100),s=_,u=0,p)){const E=performance.memory;p.update(E.usedJSHeapSize/1048576,E.jsHeapSizeLimit/1048576)}return _},update(){i=this.end()},domElement:e,setMode:n}}Kh.Panel=function(r,e,t){let n=1/0,i=0;const s=Math.round,u=s(window.devicePixelRatio||1),c=80*u,d=48*u,p=3*u,_=2*u,E=3*u,x=15*u,w=74*u,R=30*u,C=document.createElement("canvas");C.width=c,C.height=d,C.style.cssText="width:80px;height:48px";const O=C.getContext("2d");return O.font=`bold ${9*u}px Helvetica,Arial,sans-serif`,O.textBaseline="top",O.fillStyle=t,O.fillRect(0,0,c,d),O.fillStyle=e,O.fillText(r,p,_),O.fillRect(E,x,w,R),O.fillStyle=t,O.globalAlpha=.9,O.fillRect(E,x,w,R),{dom:C,update(k,J){n=Math.min(n,k),i=Math.max(i,k),O.fillStyle=t,O.globalAlpha=1,O.fillRect(0,0,c,x),O.fillStyle=e,O.fillText(`${s(k)} ${r} (${s(n)}-${s(i)})`,p,_),O.drawImage(C,E+u,x,w-u,R,E,x,w-u,R),O.fillRect(E+w-u,x,u,R),O.fillStyle=t,O.globalAlpha=.9,O.fillRect(E+w-u,x,u,s((1-k/J)*R))}}};var Lm={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};function Xs(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(Xs.prototype,{setSize(){},render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),Xs.FullScreenQuad=function(){const r=new qr(-1,1,1,-1,0,1),e=new qa(2,2),t=function(n){this._mesh=new dr(e,n)};return Object.defineProperty(t.prototype,"material",{get(){return this._mesh.material},set(n){this._mesh.material=n}}),Object.assign(t.prototype,{dispose(){this._mesh.geometry.dispose()},render(n){n.render(this._mesh,r)}}),t}();const $h=function(r,e){Xs.call(this),this.textureID=e!==void 0?e:"tDiffuse",r instanceof Zi?(this.uniforms=r.uniforms,this.material=r):r&&(this.uniforms=Ia.clone(r.uniforms),this.material=new Zi({defines:Object.assign({},r.defines),uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader})),this.fsQuad=new Xs.FullScreenQuad(this.material)};$h.prototype=Object.assign(Object.create(Xs.prototype),{constructor:$h,render(r,e,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(r.setRenderTarget(null),this.fsQuad.render(r)):(r.setRenderTarget(e),this.clear&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),this.fsQuad.render(r))}});const Dm=function(r,e){Xs.call(this),this.scene=r,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1};Dm.prototype=Object.assign(Object.create(Xs.prototype),{constructor:Dm,render(r,e,t){const n=r.getContext(),i=r.state;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0);let s,u;this.inverse?(s=0,u=1):(s=1,u=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),i.buffers.stencil.setFunc(n.ALWAYS,s,4294967295),i.buffers.stencil.setClear(u),i.buffers.stencil.setLocked(!0),r.setRenderTarget(t),this.clear&&r.clear(),r.render(this.scene,this.camera),r.setRenderTarget(e),this.clear&&r.clear(),r.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(n.EQUAL,1,4294967295),i.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),i.buffers.stencil.setLocked(!0)}});const u_=function(){Xs.call(this),this.needsSwap=!1};u_.prototype=Object.create(Xs.prototype),Object.assign(u_.prototype,{render(r){r.state.buffers.stencil.setLocked(!1),r.state.buffers.stencil.setTest(!1)}});const By=function(r,e){if(this.renderer=r,e===void 0){const t={minFilter:oi,magFilter:oi,format:ir,stencilBuffer:!1},n=r.getSize(new vt);this._pixelRatio=r.getPixelRatio(),this._width=n.width,this._height=n.height,e=new Xi(this._width*this._pixelRatio,this._height*this._pixelRatio,t),e.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],Lm===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),$h===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new $h(Lm),this.clock=new ly};Object.assign(By.prototype,{swapBuffers(){const r=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=r},addPass(r){this.passes.push(r),r.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass(r,e){this.passes.splice(e,0,r)},isLastEnabledPass(r){for(let e=r+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render(r){r===void 0&&(r=this.clock.getDelta());const e=this.renderer.getRenderTarget();let t=!1,n,i;const s=this.passes.length;for(i=0;i<s;i++)if(n=this.passes[i],n.enabled!==!1){if(n.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),n.render(this.renderer,this.writeBuffer,this.readBuffer,r,t),n.needsSwap){if(t){const u=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(u.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,r),c.setFunc(u.EQUAL,1,4294967295)}this.swapBuffers()}Dm!==void 0&&(n instanceof Dm?t=!0:n instanceof u_&&(t=!1))}this.renderer.setRenderTarget(e)},reset(r){if(r===void 0){const e=this.renderer.getSize(new vt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,r=this.renderTarget1.clone(),r.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=r,this.renderTarget2=r.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize(r,e){this._width=r,this._height=e;const t=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(t,n),this.renderTarget2.setSize(t,n);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(t,n)},setPixelRatio(r){this._pixelRatio=r,this.setSize(this._width,this._height)}});const zy=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(zy.prototype,{setSize(){},render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),zy.FullScreenQuad=function(){const r=new qr(-1,1,1,-1,0,1),e=new qa(2,2),t=function(n){this._mesh=new dr(e,n)};return Object.defineProperty(t.prototype,"material",{get(){return this._mesh.material},set(n){this._mesh.material=n}}),Object.assign(t.prototype,{dispose(){this._mesh.geometry.dispose()},render(n){n.render(this._mesh,r)}}),t}();function Gy(r,e,t){if(t){const i=t.isPerspectiveCamera?"perspective":"orthographic",s=e.isPerspectiveCamera?"perspective":"orthographic";return i===s?r:r.replace(new RegExp(i+"DepthToViewZ","g"),s+"DepthToViewZ")}const n=e.isPerspectiveCamera?"perspective":"orthographic";return r.replace(/DEPTH_TO_VIEW_Z/g,n+"DepthToViewZ")}var Yo=function(r,e,t,n){this.renderScene=e,this.renderCamera=t,this.selectedObjects=n!==void 0?n:[],this.visibleEdgeColor=new Zt(1,1,1),this.hiddenEdgeColor=new Zt(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,Xs.call(this),this.resolution=r!==void 0?new vt(r.x,r.y):new vt(256,256);var i={minFilter:oi,magFilter:oi,format:ir},s=Math.round(this.resolution.x/this.downSampleRatio),u=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new er({color:16777215}),this.maskBufferMaterial.side=oe,this.renderTargetMaskBuffer=new Xi(this.resolution.x,this.resolution.y,i),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new dc,this.depthMaterial.side=oe,this.depthMaterial.depthPacking=Wc,this.depthMaterial.blending=Fe,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=oe,this.prepareMaskMaterial.fragmentShader=Gy(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Xi(this.resolution.x,this.resolution.y,i),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Xi(s,u,i),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Xi(s,u,i),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Xi(Math.round(s/2),Math.round(u/2),i),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Xi(s,u,i),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Xi(Math.round(s/2),Math.round(u/2),i),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;var c=4,d=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(c),this.separableBlurMaterial1.uniforms.texSize.value.set(s,u),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(d),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(s/2),Math.round(u/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=d,this.overlayMaterial=this.getOverlayMaterial(),Lm===void 0&&console.error("OutlinePass relies on CopyShader");var p=Lm;this.copyUniforms=Ia.clone(p.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Zi({uniforms:this.copyUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:Fe,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new Zt,this.oldClearAlpha=1,this.fsQuad=new Xs.FullScreenQuad(null),this.tempPulseColor1=new Zt,this.tempPulseColor2=new Zt,this.textureMatrix=new kn};Yo.prototype=Object.assign(Object.create(Xs.prototype),{constructor:Yo,setScene:function(r){this.renderScene=r},setCamera:function(r){this.prepareMaskMaterial.fragmentShader=Gy(this.prepareMaskMaterial.fragmentShader,r,this.renderCamera),this.renderCamera=r},dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(r,e){this.renderTargetMaskBuffer.setSize(r,e);var t=Math.round(r/this.downSampleRatio),n=Math.round(e/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(t,n),this.renderTargetBlurBuffer1.setSize(t,n),this.renderTargetEdgeBuffer1.setSize(t,n),this.separableBlurMaterial1.uniforms.texSize.value.set(t,n),t=Math.round(t/2),n=Math.round(n/2),this.renderTargetBlurBuffer2.setSize(t,n),this.renderTargetEdgeBuffer2.setSize(t,n),this.separableBlurMaterial2.uniforms.texSize.value.set(t,n)},updateTextureMatrix:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)},render:function(r,e,t,n,i){if(this.selectedObjects.length>0){r.getClearColor(this.oldClearColor),this.oldClearAlpha=r.getClearAlpha();var s=r.autoClear;r.autoClear=!1,i&&r.state.buffers.stencil.setTest(!1),r.setClearColor(16777215,1);const d=[],p=new Set,_=new Set;this.selectedObjects.forEach(x=>{if(x.visible===!1)return;const w=new Set;x.traverseAncestorsIf(C=>C.visible===!1?!1:(w.add(C.id),!0))&&(w.forEach(C=>{_.add(C)}),d.push(x),p.add(x.id),x.visible=!1)});var u=this.renderScene.background;this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,r.setRenderTarget(this.renderTargetDepthBuffer),r.clear(),r.render(this.renderScene,this.renderCamera),d.forEach(x=>{x.visible=!0}),this.updateTextureMatrix();const E=[];if(this.renderScene.traverseIf(x=>x.visible===!1||p.has(x.id)?!1:_.has(x.id)?!0:(x.visible=!1,E.push(x),!1)),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,r.setRenderTarget(this.renderTargetMaskBuffer),r.clear(),r.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,E.forEach(x=>{x.visible=!0}),this.renderScene.background=u,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,r.setRenderTarget(this.renderTargetMaskDownSampleBuffer),r.clear(),this.fsQuad.render(r),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var c=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(c),this.tempPulseColor2.multiplyScalar(c)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,r.setRenderTarget(this.renderTargetEdgeBuffer1),r.clear(),this.fsQuad.render(r),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Yo.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,r.setRenderTarget(this.renderTargetBlurBuffer1),r.clear(),this.fsQuad.render(r),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Yo.BlurDirectionY,r.setRenderTarget(this.renderTargetEdgeBuffer1),r.clear(),this.fsQuad.render(r),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Yo.BlurDirectionX,r.setRenderTarget(this.renderTargetBlurBuffer2),r.clear(),this.fsQuad.render(r),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Yo.BlurDirectionY,r.setRenderTarget(this.renderTargetEdgeBuffer2),r.clear(),this.fsQuad.render(r),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,i&&r.state.buffers.stencil.setTest(!0),r.setRenderTarget(t),this.fsQuad.render(r),r.setClearColor(this.oldClearColor,this.oldClearAlpha),r.autoClear=s}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=t.texture,r.setRenderTarget(null),this.fsQuad.render(r))},getPrepareMaskMaterial:function(){return new Zi({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new vt(.5,.5)},textureMatrix:{value:null}},vertexShader:["#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","varying vec4 projTexCoord;","varying vec4 vPosition;","uniform mat4 textureMatrix;","void main() {","	#include <skinbase_vertex>","	#include <begin_vertex>","	#include <morphtarget_vertex>","	#include <skinning_vertex>","	#include <project_vertex>","	vPosition = mvPosition;","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	projTexCoord = textureMatrix * worldPosition;","}"].join(`
`),fragmentShader:["#include <packing>","varying vec4 vPosition;","varying vec4 projTexCoord;","uniform sampler2D depthTexture;","uniform vec2 cameraNearFar;","void main() {","	float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));","	float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );","	float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;","	gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);","}"].join(`
`)})},getEdgeDetectionMaterial:function(){return new Zi({uniforms:{maskTexture:{value:null},texSize:{value:new vt(.5,.5)},visibleEdgeColor:{value:new he(1,1,1)},hiddenEdgeColor:{value:new he(1,1,1)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;				uniform sampler2D maskTexture;				uniform vec2 texSize;				uniform vec3 visibleEdgeColor;				uniform vec3 hiddenEdgeColor;								void main() {
					vec2 invSize = 1.0 / texSize;					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);					float diff1 = (c1.r - c2.r)*0.5;					float diff2 = (c3.r - c4.r)*0.5;					float d = length( vec2(diff1, diff2) );					float a1 = min(c1.g, c2.g);					float a2 = min(c3.g, c4.g);					float visibilityFactor = min(a1, a2);					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);				}`})},getSeperableBlurMaterial:function(r){return new Zi({defines:{MAX_RADIUS:r},uniforms:{colorTexture:{value:null},texSize:{value:new vt(.5,.5)},direction:{value:new vt(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:"#include <common>				varying vec2 vUv;				uniform sampler2D colorTexture;				uniform vec2 texSize;				uniform vec2 direction;				uniform float kernelRadius;								float gaussianPdf(in float x, in float sigma) {					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;				}				void main() {					vec2 invSize = 1.0 / texSize;					float weightSum = gaussianPdf(0.0, kernelRadius);					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);					vec2 uvOffset = delta;					for( int i = 1; i <= MAX_RADIUS; i ++ ) {						float w = gaussianPdf(uvOffset.x, kernelRadius);						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);						diffuseSum += ((sample1 + sample2) * w);						weightSum += (2.0 * w);						uvOffset += delta;					}					gl_FragColor = diffuseSum/weightSum;				}"})},getOverlayMaterial:function(){return new Zi({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:"varying vec2 vUv;				uniform sampler2D maskTexture;				uniform sampler2D edgeTexture1;				uniform sampler2D edgeTexture2;				uniform sampler2D patternTexture;				uniform float edgeStrength;				uniform float edgeGlow;				uniform bool usePatternTexture;								void main() {					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);					vec4 maskColor = texture2D(maskTexture, vUv);					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;					if(usePatternTexture)						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);					gl_FragColor = finalColor;				}",blending:He,depthTest:!1,depthWrite:!1,transparent:!0})}}),Yo.BlurDirectionX=new vt(1,0),Yo.BlurDirectionY=new vt(0,1);const c_=function(r,e,t,n,i){Xs.call(this),this.scene=r,this.camera=e,this.overrideMaterial=t,this.oldClearColor=new Zt,this.clearColor=n,this.clearAlpha=i!==void 0?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};c_.prototype=Object.assign(Object.create(Xs.prototype),{constructor:c_,render(r,e,t){const n=r.autoClear;r.autoClear=!1;let i,s,u;this.overrideMaterial!==void 0&&(u=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(r.getClearColor(this.oldClearColor),i=this.oldClearColor.getHex(),s=r.getClearAlpha(),r.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&r.clearDepth(),r.setRenderTarget(this.renderToScreen?null:t),this.clear&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),r.render(this.scene,this.camera),this.clearColor&&r.setClearColor(i,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=u),r.autoClear=n}});const W1={uniforms:{tDiffuse:{value:null},resolution:{value:new vt(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join(`
`)};var H1=Object(g.defineComponent)({props:{renderer:Object,view:Object,data:Object},setup(r,{emit:e}){var t,n,i,s;let u=null,c=null,d=null,p=null,_=null;const E={viewWidth:(n=Math.max((t=r.data)==null?void 0:t.width,1))!=null?n:1,viewHeight:(s=Math.max((i=r.data)==null?void 0:i.height,1))!=null?s:1};function x(ve){e("dom-mousemove",ve)}function w(){!r.data||!c||(c.setSize(E.viewWidth,E.viewHeight),_.uniforms.resolution.value.set(1/E.viewWidth,1/E.viewHeight))}function R(ve,Ge){var ot,We;if(!p||ve===Ge)return;const Ne=(We=(ot=r.view)==null?void 0:ot.highlightObjects)!=null?We:[];!Ne.length&&!p.selectedObjects.length||(p.selectedObjects=Ne)}function C(){!r.view||!r.renderer||!r.data||(c=new By(r.renderer),c.renderTarget1.stencilBuffer=!0,c.renderTarget2.stencilBuffer=!0,d=new c_(r.view.scene,r.view.camera),c.addPass(d),p=new Yo({x:E.viewWidth,y:E.viewHeight},r.view.scene,r.view.camera),p.edgeStrength=7,p.pulsePeriod=2,p.visibleEdgeColor.set("#ffffff"),p.hiddenEdgeColor.set("#ffffff"),c.addPass(p),_=new $h(W1),c.addPass(_),w(),R(),e("effectComposer",c))}function O(){u&&(u.disconnect(),u=null),c&&(c=null),d&&(d=null),p&&(p=null),_&&(_=null)}function k(ve,Ge){ve!==Ge&&(u&&(u.disconnect(),u=null),Ge&&Ge.removeEventListener("mousemove",x),ve&&(u=new ResizeObserver(()=>{requestAnimationFrame(()=>e("dom-resize"))}),u.observe(ve),ve.addEventListener("mousemove",x)))}function J(ve,Ge){ve===Ge||!ve||e("screenshot")}function G(ve,Ge){ve!==Ge&&w()}function H(ve,Ge){ve!==Ge&&w()}function ae(ve,Ge){ve&&Ge&&c||(r.data?C():O())}function me(ve,Ge){ve!==Ge&&(d&&(d.camera=ve),p&&p.setCamera(ve))}function we(ve,Ge){ve!==Ge&&(d&&(d.scene=ve),p&&p.setScene(ve))}function V(ve,Ge){ve&&Ge&&c||(r.view?C():O())}function pe(ve,Ge){ve&&Ge&&c||(r.renderer?C():O())}return Object(g.onMounted)(()=>{k(r.view.domElement,null)}),Object(g.onUnmounted)(()=>{O(),e("destroy")}),Object(g.watch)(()=>r.view,V),Object(g.watch)(()=>{var ve;return(ve=r.view)==null?void 0:ve.camera},me),Object(g.watch)(()=>{var ve;return(ve=r.view)==null?void 0:ve.scene},we),Object(g.watch)(()=>{var ve;return(ve=r.view)==null?void 0:ve.domElement},k,{immediate:!0}),Object(g.watch)(()=>{var ve;return(ve=r.view)==null?void 0:ve.takeScreenshot},J,{immediate:!0}),Object(g.watch)(()=>{var ve;return(ve=r.view)==null?void 0:ve.highlightObjects},R),Object(g.watch)(()=>r.data,ae),Object(g.watch)(()=>{var ve;return(ve=r.data)==null?void 0:ve.width},G),Object(g.watch)(()=>{var ve;return(ve=r.data)==null?void 0:ve.height},H),Object(g.watch)(()=>r.renderer,pe),C(),()=>null}}),Y1=Object(g.defineComponent)({props:{graphics:null,events:{type:[String,Array],default:()=>["pointerdown","pointermove","pointerup","pointerenter","pointerleave"]},disabled:{type:Boolean,default:!1},propagateDisabled:{type:Boolean,default:!0}},setup(r,{emit:e}){const t=Object(g.shallowRef)(new Map),n=Object(g.computed)(()=>r.events?typeof r.events=="string"?[r.events]:r.events:[]);function i(u=r.graphics){u&&n.value.forEach(c=>{if(t.value.has(c))return;const d=p=>{if(r.disabled){r.propagateDisabled?p.message.allowPropagation():p.message.stopPropagation();return}e(c,p.message)};t.value.set(c,d),u.addEventListener(c,d)})}function s(u=r.graphics){if(!u){t.value.clear();return}t.value.forEach((c,d)=>{u.removeEventListener(d,c)}),t.value.clear()}return Object(g.watch)(()=>r.graphics,(u,c)=>{u!==c&&(c&&s(c),u&&i(u))}),Object(g.watch)(n,()=>{s(),i()}),r.graphics&&i(),Object(g.onUnmounted)(()=>{s()}),()=>null}});const ky=Object(o_.c)(),Vy=!1,Xo=3,jy=Math.floor(Xo/2),Wy=new Uint8Array(Xo**2*4),Hy=new Xi(Xo,Xo),X1=Math.ceil(Xo**2/2)-1,Dc={NONE:1,ALL:2,GPU_PICKING:3};function Yy({r,g:e,b:t}){return r<<16|e<<8|t}function Xy(r,e){return{r:r[e],g:r[e+1],b:r[e+2]}}function K1(r,e){const t=Yy(Xy(r,e));if(t)return t;const n=new Map;let i=null;for(let s=0;s<r.length;s+=4){const u=Yy(Xy(r,s));if(u){let c=n.get(u);c==null&&(c=0),c+=1,(i==null||i<=c)&&(i=u),n.set(u,c)}}return i}function $1(r,e=window.devicePixelRatio){const t={};for(const n in r)n!=="toJSON"&&(t[n]=Math.round(r[n]*e));return t}function Z1(r,e,t=window.devicePixelRatio){r.style.width=`${e.width/t}px`,r.style.height=`${e.height/t}px`}function Q1(r,e){const t=r.parentNode.getBoundingClientRect(),n=$1(t,e);return Z1(r,n,e),n}function Ky(r){const e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return!(!(r.left<=e&&r.left+r.width>=0)||!(r.top<=t&&r.top+r.height>=0))}function J1(r){const{renderer:e,mouse:t,emit:n,viewId:i,scene:s,camera:u,viewRect:c,customRender:d,renderInfo:p}=r;if(Number.isNaN(t.x)||Number.isNaN(t.y))return;const _=t.x-c.left,E=t.y-c.top;if(_<0||_>c.width||E<0||E>c.height)return;const x=[],w=new Map;let R=1;if(s.traverse(G=>{G.userData.gpuPicking&&G.material&&((Array.isArray(G.material)?G.material:[G.material]).forEach(ae=>{const me={material:ae,data:{}};let we=!1;ae.beforeGpuPicking?(me.data=ae.beforeGpuPicking(R),we=!0):(ae.vertexColors&&(me.data.vertexColors=!0,ae.vertexColors=!1,we=!0),ae.color&&(me.data.color=ae.color.getHex(),ae.color.setHex(R),we=!0),we&&(ae.needsUpdate=!0)),we&&x.push(me)}),w.set(R,G),R+=1)}),!x.length)return;const C={background:s.background,fog:s.fog};Object.keys(C).forEach(G=>{s[G]=null});const O=e.getPixelRatio();u.setViewOffset(c.width,c.height,(_-jy)*O,(E-jy)*O,Xo,Xo),e.setRenderTarget(Hy),e.clear(),d?d(p):e.render(s,u),u.clearViewOffset(),e.readRenderTargetPixels(Hy,0,0,Xo,Xo,Wy),e.setRenderTarget(null);let k=null;const J=K1(Wy,X1);J!=null&&(k=w.get(J)),n("object-pick",{viewId:i,object:k}),Object.assign(s,C),x.forEach(({material:G,data:H})=>{G.afterGpuPicking?G.afterGpuPicking(H):(G.color.setHex(H.color),H.vertexColors&&(G.vertexColors=H.vertexColors),G.needsUpdate=!0)})}var q1=Object(g.defineComponent)({components:{ViewEffects:H1,GraphicsEvents:Y1},props:{views:[Array,Object],onDemand:{type:Boolean,default:!1},dpr:{type:null,default:null},showStats:{type:[Number,Object],default:null},viewportOptimization:{type:null,default:!1},options:{type:Object,default(){return{}}},canvasStyle:{type:String,default:""}},setup(r,{emit:e}){const t=Object(g.reactive)({}),n=Object(g.shallowRef)(window.devicePixelRatio),i=Object(g.shallowRef)(!1),s=Object(g.shallowRef)(null),u=Object(g.shallowRef)(null),c=Object(g.reactive)({graph:null,showRenderInfo:!1,renderInfo:{calls:0,geometries:0,textures:0,shaders:0,lines:0,points:0,triangles:0}});c.graph=new Kh,c.graph.dom.classList.add("metrics");const d=new OffscreenCanvas(1,1),p=d.getContext(ky.context,{alpha:!0,depth:!0,stencil:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,...Object(P.merge)({},r.options)});s.value=a_(new Yp({canvas:d,context:p}));const _={requested:!1,force:!1,clear:!1,reset(){this.requested=!1,this.force=!1,this.clear=!1}},E={x:Number.NaN,y:Number.NaN},x=Object(g.computed)(()=>r.views?(Array.isArray(r.views)?r.views:[r.views]).filter(Qe=>Qe.scene&&Qe.camera&&Qe.domElement):[]),w=Object(g.computed)(()=>r.dpr==null?n.value:r.dpr);function R(tt){e("render-error",tt)}function C(tt={}){if(!Vy)return!1;const Qe=s.value.getContext().getError();return Qe!==0?(R({...tt,code:Qe}),!0):!1}function O(tt,Qe){if(!tt)return null;let qe=w.value;Qe!=null&&(qe=Math.min(qe,Qe));const et=Q1(tt,qe),{width:Ut,height:Dt}=et;return tt.width===Ut&&tt.height===Dt||(tt.width=Ut,tt.height=Dt),et}function k(tt,Qe){if(tt.canvas.parentNode===Qe)return;window.getComputedStyle(Qe).position==="static"&&(Qe.style.position="relative"),Qe.appendChild(tt.canvas)}function J(tt){if(t[tt])return;const Qe=new n_,qe=new Xi,et=new Py(new ao({map:qe.texture}));et.frustumCulled=!1,Qe.add(et);const Ut=document.createElement("canvas");Ut.style=`position: absolute; top: 0; left: 0; width: 100%; height: 100%; ${r.canvasStyle}`,Object(g.set)(t,tt,{cache:{scene:Qe,renderTarget:qe,sprite:et,renderInfo:{mode:Dc.ALL,objects:new Set,camera:null,_hidden:!1,get hidden(){return this._hidden},set hidden(Dt){if(this._hidden===Dt)return;const Yt=Dt?"none":"block";Ut.style.display!==Yt&&(Ut.style.display=Yt),this._hidden=Dt}}},canvas:Ut,canvasCtx:Ut.getContext("bitmaprenderer"),effectComposer:null,width:0,height:0})}function G(){if(!s.value||i.value||!d){_.reset();return}e("beforeRender"),_.clear&&(_.clear=!1),x.value.forEach(tt=>{const{id:Qe,scene:qe,camera:et,domElement:Ut,gpuPicking:Dt,takeScreenshot:Yt,customRender:ft,highlightObjects:Ln,maxDpr:rn}=tt;J(Qe);const sn=t[Qe];k(sn,Ut);const Wt=Ut.getBoundingClientRect(),Pn=O(sn.canvas,rn);if(!Pn){sn.cache.renderInfo.hidden=!0;return}const wt=sn.cache.renderInfo.mode;if(sn.cache.renderInfo.hidden=!1,r.viewportOptimization&&!Ky(Wt)){sn.cache.renderInfo.hidden=!0;return}(d.width!==Pn.width||d.height!==Pn.height)&&(d.width=Pn.width,d.height=Pn.height,s.value.setSize(Pn.width,Pn.height,!1)),(sn.width!==Wt.width||sn.height!==Wt.height)&&(sn.width=Wt.width,sn.height=Wt.height,e("resizeView",{viewId:Qe}));const bt={viewId:Qe,scene:qe,camera:et,renderer:s.value,elementRect:Wt,deviceInfo:ky};if(!_.force&&wt===Dc.NONE||(Dt&&J1({renderer:s.value,mouse:E,emit:e,viewId:Qe,scene:qe,camera:et,viewRect:Wt,renderRect:Pn,customRender:ft,renderInfo:bt}),!_.force&&wt===Dc.GPU_PICKING)||(e("beforeRenderView",bt),s.value.clear(),ft?ft(bt):s.value.render(qe,et),C(bt)))return;Ln!=null&&Ln.length&&sn.effectComposer&&(ft?ft(bt,sn.effectComposer):sn.effectComposer.render());const Vt=d.transferToImageBitmap();if(sn.canvasCtx.transferFromImageBitmap(Vt),Yt)try{const en=document.createElement("canvas").getContext("2d");en.canvas.width=sn.canvas.width,en.canvas.height=sn.canvas.height,en.drawImage(sn.canvas,0,0),e("screenshot",{viewId:Qe,screenshot:en.canvas})}catch(en){e("screenshot",{viewId:Qe,screenshot:null,error:en})}e("afterRenderView",bt)}),x.value.forEach(tt=>{const{id:Qe}=tt,qe=t[Qe];qe.cache.renderInfo.mode=Dc.NONE}),e("afterRender"),c.renderInfo.geometries=s.value.info.memory.geometries,c.renderInfo.textures=s.value.info.memory.textures,c.renderInfo.shaders=s.value.info.programs.length,c.renderInfo.calls=s.value.info.render.calls,c.renderInfo.lines=s.value.info.render.lines,c.renderInfo.points=s.value.info.render.points,c.renderInfo.triangles=s.value.info.render.triangles,s.value.info.reset(),_.reset()}function H(){_.requested&&(c.graph&&c.graph.begin(),G(),c.graph&&c.graph.end())}function ae(tt,Qe=!1,qe){if(r.onDemand){if(tt){if(!_.force){const{view:et}=tt,Ut=t[et.id];if(Ut){const{renderInfo:Dt}=Ut.cache;Dt.mode!==Dc.ALL&&(qe!=null?Dt.mode=qe:Dt.mode=Dc.ALL)}}}else _.force=!0;_.requested||(_.requested=!0,Qe?H():window.requestAnimationFrame(()=>{H()}))}}function me(){s.value.setAnimationLoop(()=>{_.force=!0,c.graph&&c.graph.begin(),G(),c.graph&&c.graph.end()})}function we(tt){E.x=tt.clientX,E.y=tt.clientY}function V(tt){tt.setAnimationLoop(null),tt.dispose()}function pe(){!r.viewportOptimization||!r.onDemand||x.value.forEach(tt=>{const Qe=t[tt.id];if(Qe&&Qe.cache.renderInfo.hidden){const qe=tt.domElement.getBoundingClientRect();if(!Ky(qe))return;ae({view:tt})}})}function ve(){n.value=window.devicePixelRatio}function Ge(tt){tt.preventDefault(),i.value=!0}function ot(){i.value=!1,r.onDemand&&ae(null)}d.addEventListener("webglcontextlost",Ge,!1),d.addEventListener("webglcontextrestored",ot,!1);const We=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);We.addEventListener("change",ve);const Ne=Object(g.computed)(()=>({views:r.views,renderer:s,render:G}));function rt(tt,Qe){t[tt.id].effectComposer=Qe}function ut(){s.value&&(_.clear=!0,r.onDemand&&ae(null,!0))}function It(tt){s.value&&tt.gpuPicking&&r.onDemand&&ae({view:tt},!1,Dc.GPU_PICKING)}function Et(tt){const Qe=t[tt.id];Qe&&(Qe.cache.scene.dispose(!0),Qe.canvas.remove(),Qe.canvas=null,Object(g.del)(t,tt.id))}return Object(g.onMounted)(()=>{u.value.prepend(c.graph.dom),window.addEventListener("mousemove",we,{passive:!0}),window.addEventListener("scroll",pe,{passive:!0}),e("renderer",s.value)}),Object(g.onUnmounted)(()=>{V(s.value),window.removeEventListener("mousemove",we,{passive:!0}),window.removeEventListener("scroll",pe,{passive:!0}),window.removeEventListener("webglcontextlost",Ge,!1),window.removeEventListener("webglcontextrestored",ot,!1),We.removeEventListener("change",ve)}),Object(g.watch)(s,(tt,Qe)=>{Qe&&V(Qe),s.value&&(s.value.autoClear=!1,s.value.localClippingEnabled=!0,s.value.debug.checkShaderErrors=Vy,s.value.info.autoReset=!1,r.onDemand||me())}),Object(g.watch)(()=>r.onDemand,()=>{s.value&&(r.onDemand?(s.value.setAnimationLoop(null),ae()):me())}),Object(g.watch)(w,()=>{r.onDemand&&ae(null,!0)}),Object(g.watch)(()=>r.showStats,()=>{r.showStats!=null&&c.graph.showPanel(r.showStats)},{immediate:!0}),Object(g.watch)(i,()=>e("isContextLost",i.value),{immediate:!0}),{renderer:s,statsbar:u,viewsData:t,isContextLost:i,stats:c,normViews:x,rendererScope:Ne,initViewData:J,renderSceneOnDemand:ae,setEffectComposer:rt,onViewResize:ut,onViewMouseMove:It,onViewDestroy:Et}}}),ex=q1,ET=o("1bacb4cc0c5a30b0d9bc");function Zh(r,e,t,n,i,s,u,c){var d=typeof r=="function"?r.options:r;e&&(d.render=e,d.staticRenderFns=t,d._compiled=!0),n&&(d.functional=!0),s&&(d._scopeId="data-v-"+s);var p;if(u?(p=function(x){x=x||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!x&&typeof __VUE_SSR_CONTEXT__<"u"&&(x=__VUE_SSR_CONTEXT__),i&&i.call(this,x),x&&x._registeredComponents&&x._registeredComponents.add(u)},d._ssrRegister=p):i&&(p=c?function(){i.call(this,this.$root.$options.shadowRoot)}:i),p)if(d.functional){d._injectStyles=p;var _=d.render;d.render=function(w,R){return p.call(R),_(w,R)}}else{var E=d.beforeCreate;d.beforeCreate=E?[].concat(E,p):[p]}return{exports:r,options:d}}var $y=Zh(ex,I,T,!1,null,null,null);if(!1)var ST;$y.options.__file="lib/annotation-tools/components/Scene/Renderer/index.vue";var tx=$y.exports,nx=Object(g.defineComponent)({components:{Renderer:tx},props:{views:null,showStats:[Number,Object],onDemand:Boolean,viewportOptimization:null,dpr:null},setup(){const r=Object(g.shallowRef)(null),e=new m.EventEmitter;return{renderer:r,emitter:e}}}),ix=nx,AT=o("24f066b8f816cf2f62d5"),Zy=Zh(ix,b,S,!1,null,"4779d1a0",null);if(!1)var TT;Zy.options.__file="lib/annotation-tools/components/GraphicsRenderer/GraphicsRenderer.vue";var Qy=Zy.exports;function Jy(r,e,t){return e=rx(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rx(r){var e=sx(r,"string");return typeof e=="symbol"?e:String(e)}function sx(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ax(r,e={}){const{createVNode:t,render:n}=o("c2e34caf852f605007d8"),{props:i,children:s,element:u,app:c}=e;let d=u,p=t(r,i,s);return c&&c._context&&(p.appContext=c._context),d?n(p,d):typeof document<"u"&&n(p,d=document.createElement("div")),{vNode:p,destroy:()=>{d&&n(null,d),d=null,p=null},el:d}}const ox=["render-error","beforeRenderView","afterRenderView","beforeRender","afterRender","resizeView","screenshot","object-pick"];class ux extends m.EventEmitter{constructor(){if(super(),Jy(this,"views",new Map),Jy(this,"_rootComponent",null),this.reactiveState=Object(g.reactive)({views:[],onDemand:!0,viewportOptimization:!1,dpr:null,showStats:null}),g.isVue2){const e=g.Vue2.extend(Qy);this.rendererComponent=new e({propsData:this.reactiveState}),Object(g.nextTick)(()=>{this.rendererComponent.$mount()})}else this._rootComponent=ax(Qy,{props:this.reactiveState}),this.rendererComponent=this._rootComponent.vNode.component;this._initRendererEvents()}get renderer(){return g.isVue2?this.rendererComponent.renderer:this.rendererComponent.setupState.renderer}_initRendererEvents(){let e;g.isVue2?e=this.rendererComponent.emitter:e=this.rendererComponent.setupState.emitter,ox.forEach(t=>{e.on(t,(...n)=>{this.emit(t,...n)})})}_genRendererViews(){return Array.from(this.views.values())}addView(e){this.views.set(e.id,e),e.rendererInstance=this;const t=this._genRendererViews();return g.isVue2?this.rendererComponent.views=t:(this.rendererComponent.props.views=t,this.reactiveState.views=t),e}removeView(e){this.views.get(e.id).destroy(),this.views.delete(e.id);const n=this._genRendererViews();return g.isVue2?this.rendererComponent.views=n:this.rendererComponent.props.views=n,null}destroy(){this.rendererComponent&&(g.isVue2?this.rendererComponent.$destroy():(this._rootComponent.destroy(),this._rootComponent=null),this.rendererComponent=null)}setOnDemand(e){this.reactiveState.onDemand=e}setViewportOptimization(e){this.reactiveState.viewportOptimization=e}setDPR(e){this.reactiveState.dpr=e}setShowStats(e){this.reactiveState.showStats=e}}var Fm=new ux,cx=o("812baf65d2b8d0a42f86"),qy=o.n(cx);const uf="insert",cf="update",Um="delete",lx="reverse",fx="shuffle",mi=Symbol("observable-meta-key"),hx={path:1,pathsOf:1,pathsFrom:1},dx=function(e){const t={};if(e.path!==void 0){if(typeof e.path!="string")throw new Error('"path" option, if/when provided, MUST be a non-empty string');t.path=e.path}if(e.pathsOf!==void 0){if(e.path)throw new Error('"pathsOf" option MAY NOT be specified together with "path" option');if(typeof e.pathsOf!="string")throw new Error('"pathsOf" option, if/when provided, MUST be a non-empty string');t.pathsOf=e.pathsOf.split(".").filter(i=>i)}if(e.pathsFrom!==void 0){if(e.path||e.pathsOf)throw new Error('"pathsFrom" option MAY NOT be specified together with "path"/"pathsOf"  option/s');if(typeof e.pathsFrom!="string")throw new Error('"pathsFrom" option, if/when provided, MUST be a non-empty string');t.pathsFrom=e.pathsFrom}const n=Object.keys(e).filter(i=>!hx.hasOwnProperty(i));if(n.length)throw new Error(`'${n.join(", ")}' is/are not a valid option/s`);return t};function px(r,e){const n=this[mi].observers;if(n.some(i=>i[0]===r))throw new Error("observer may be bound to an observable only once");{let i;e?i=dx(e):i={},n.push([r,i])}return()=>{const i=n.findIndex(s=>s[0]===r);return i>-1?(n.splice(i,1),!0):!1}}function mx(){const e=this[mi].observers;let t=e.length;if(t){let n=arguments.length;if(n)for(;n--;){let i=t;for(;i--;)e[i][0]===arguments[n]&&(e.splice(i,1),t--)}else e.splice(0)}}const lf={[mi]:{value:null}},l_={observe:{value:px},unobserve:{value:mx}};function gx(r,e,t){if(e){if(e.paths){const n={...e,keysSet:new Set(e.paths.map(i=>{const s=i.indexOf(".");return s>-1?i.substring(0,s):i})),allKeys:!1,deepAllKeys:!1};return n.allKeys=n.keysSet.has("*"),n.deepAllKeys=n.keysSet.has("**"),n}return e}if(!t)return null;if(t.paths){const n={...t,paths:[...new Set(t.paths.filter(i=>{const s=i.indexOf("."),u=s>-1?i.substring(0,s):i;return u.includes("*")||u===r.ownKey}).map(i=>{const s=i.indexOf(".");return s>-1?i.substring(s+1):""}).filter(i=>i))],keysSet:null,allKeys:!1,deepAllKeys:!1};return n.keysSet=new Set(n.paths.map(i=>{const s=i.indexOf(".");return s>-1?i.substring(0,s):i})),n.allKeys=n.keysSet.has("*"),n.deepAllKeys=n.keysSet.has("**"),n}return t}function vx(r,e){if(r[mi])return r;lf[mi].value=e,Object.defineProperties(r,lf),r.observe||Object.defineProperties(r,l_);let t=Object.keys(r);e.options&&e.options.keysSet&&!e.options.allKeys&&!e.options.deepAllKeys&&(t=t.filter(s=>e.options.keysSet.has(s)));let n=t.length,i;for(;n--;){i=t[n];const s=r[i],u=Ko(r[i],i,e);if(s!==u){const c=Object.getOwnPropertyDescriptor(r,i);if(!c.configurable)continue;const d={...c};if("value"in d)d.value=u;else continue;Object.defineProperty(r,i,d)}}return r}function _x(r,e){if(r[mi])return r;lf[mi].value=e,Object.defineProperties(r,lf),r.observe||Object.defineProperties(r,l_);let t=r.length;for(;t--;)r[t]=Ko(r[t],t,e);return r}function yx(r,e){return r[mi]||(lf[mi].value=e,Object.defineProperties(r,lf),r.observe||Object.defineProperties(r,l_)),r}function ra(r,e){let t,n,i,s,u,c,d,p,_,E;const x=e.length;do{for(t=r.observers,p=t.length;p--;)n=t[p],i=n[0],s=n[1],u=e,s.path?(c=s.path,u=e.filter(R=>R.path.join(".")===c)):s.pathsOf?u=e.filter(R=>R.path.length===s.pathsOf.length+1):s.pathsFrom&&(d=s.pathsFrom,u=e.filter(R=>R.path.join(".").startsWith(d))),u.length&&i(u);let w;if(r.parent){w=new Array(x);for(let R=0;R<x;R++)E=e[R],_=[r.ownKey,...E.path],w[R]={type:E.type,path:_,value:E.value,oldValue:E.oldValue,object:E.object};e=w,r=r.parent}else break}while(!0)}function Ko(r,e,t){if(!r||typeof r!="object"||r[mi])return r;if(Array.isArray(r))return new sb({target:r,ownKey:e,parent:t}).proxy;if(ArrayBuffer.isView(r))return new ab({target:r,ownKey:e,parent:t}).proxy;if(r instanceof Date||r instanceof Blob||r instanceof Error)return r;const n=t==null?void 0:t.options;return n&&n.keysSet&&!n.deepAllKeys&&n.paths.every(i=>{const s=i.indexOf(".");if(s<0)return!0;const u=i.substring(0,s);return!u.includes("*")&&u!==e})?r:new rb({target:r,ownKey:e,parent:t}).proxy}function bx(){const r=this[mi],e=r.target,t=e.length-1;let n=e.pop();if(n&&typeof n=="object"){const s=n[mi];s&&(n=s.detach())}return ra(r,[{type:Um,path:[t],oldValue:n,object:this}]),n}function xx(){const r=this[mi],e=r.target,t=arguments.length,n=new Array(t),i=e.length;for(let c=0;c<t;c++)n[c]=Ko(arguments[c],i+c,r);const s=Reflect.apply(e.push,e,n),u=[];for(let c=i,d=e.length;c<d;c++)u[c-i]={type:uf,path:[c],value:e[c],object:this};return ra(r,u),s}function Ex(){const r=this[mi],e=r.target;let t,n,i,s,u;for(t=e.shift(),t&&typeof t=="object"&&(u=t[mi],u&&(t=u.detach())),n=0,i=e.length;n<i;n++)s=e[n],s&&typeof s=="object"&&(u=s[mi],u&&(u.ownKey=n));return ra(r,[{type:Um,path:[0],oldValue:t,object:this}]),t}function Sx(){const r=this[mi],e=r.target,t=arguments.length,n=new Array(t);for(let c=0;c<t;c++)n[c]=Ko(arguments[c],c,r);const i=Reflect.apply(e.unshift,e,n);for(let c=0,d=e.length,p;c<d;c++)if(p=e[c],p&&typeof p=="object"){const _=p[mi];_&&(_.ownKey=c)}const s=n.length,u=new Array(s);for(let c=0;c<s;c++)u[c]={type:uf,path:[c],value:e[c],object:this};return ra(r,u),i}function eb(){const r=this[mi],e=r.target;let t,n,i;for(e.reverse(),t=0,n=e.length;t<n;t++)if(i=e[t],i&&typeof i=="object"){const u=i[mi];u&&(u.ownKey=t)}return ra(r,[{type:lx,path:[],object:this}]),this}function tb(r){const e=this[mi],t=e.target;let n,i,s;for(t.sort(r),n=0,i=t.length;n<i;n++)if(s=t[n],s&&typeof s=="object"){const c=s[mi];c&&(c.ownKey=n)}return ra(e,[{type:fx,path:[],object:this}]),this}function nb(r,e,t){const n=this[mi],i=n.target,s=[],u=i.length,c=i.slice(0);if(e=e===void 0?0:e<0?Math.max(u+e,0):Math.min(e,u),t=t===void 0?u:t<0?Math.max(u+t,0):Math.min(t,u),e<u&&t>e){i.fill(r,e,t);let d;for(let p=e,_,E;p<t;p++)_=i[p],i[p]=Ko(_,p,n),c.hasOwnProperty(p)?(E=c[p],E&&typeof E=="object"&&(d=E[mi],d&&(E=d.detach())),s.push({type:cf,path:[p],value:i[p],oldValue:E,object:this})):s.push({type:uf,path:[p],value:i[p],object:this});ra(n,s)}return this}function ib(r,e,t){const n=this[mi],i=n.target,s=i.length;r=r<0?Math.max(s+r,0):r,e=e===void 0?0:e<0?Math.max(s+e,0):Math.min(e,s),t=t===void 0?s:t<0?Math.max(s+t,0):Math.min(t,s);const u=Math.min(t-e,s-r);if(r<s&&r!==e&&u>0){const c=i.slice(0),d=[];i.copyWithin(r,e,t);for(let p=r,_,E,x;p<r+u;p++)_=i[p],_&&typeof _=="object"&&(_=Ko(_,p,n),i[p]=_),E=c[p],E&&typeof E=="object"&&(x=E[mi],x&&(E=x.detach())),!(typeof _!="object"&&_===E)&&d.push({type:cf,path:[p],value:_,oldValue:E,object:this});ra(n,d)}return this}function Ax(){const r=this[mi],e=r.target,t=arguments.length,n=new Array(t),i=e.length;for(let O=0;O<t;O++)n[O]=Ko(arguments[O],O,r);const s=t===0?0:n[0]<0?i+n[0]:n[0],u=t<2?i-s:n[1],c=Math.max(t-2,0),d=Reflect.apply(e.splice,e,n),p=e.length;let _;for(let O=0,k;O<p;O++)k=e[O],k&&typeof k=="object"&&(_=k[mi],_&&(_.ownKey=O));let E,x,w;for(E=0,x=d.length;E<x;E++)w=d[E],w&&typeof w=="object"&&(_=w[mi],_&&(d[E]=_.detach()));const R=[];let C;for(C=0;C<u;C++)C<c?R.push({type:cf,path:[s+C],value:e[s+C],oldValue:d[C],object:this}):R.push({type:Um,path:[s+C],oldValue:d[C],object:this});for(;C<c;C++)R.push({type:uf,path:[s+C],value:e[s+C],object:this});return ra(r,R),d}function Tx(r,e){const t=this[mi],n=t.target,i=r.length,s=n.slice(0);e=e||0,n.set(r,e);const u=new Array(i);for(let c=e;c<i+e;c++)u[c-e]={type:cf,path:[c],value:n[c],oldValue:s[c],object:this};ra(t,u)}const wT={pop:bx,push:xx,shift:Ex,unshift:Sx,reverse:eb,sort:tb,fill:nb,copyWithin:ib,splice:Ax},MT={reverse:eb,sort:tb,fill:nb,copyWithin:ib,set:Tx};class f_{constructor(e,t,n){const i=e.target,s=e.parent,u=e.ownKey;s&&u!==void 0?(this.parent=s,this.ownKey=u):(this.parent=null,this.ownKey=null),n?this.options=n(this,e.options,s==null?void 0:s.options):this.options=e.options||(s==null?void 0:s.options);const c=t(i,this);this.cache=e.cache||(s==null?void 0:s.cache),this.observers=[],this.revokable=Proxy.revocable(c,this),this.proxy=this.revokable.proxy,this.target=c}detach(){return this.parent=null,this.target}set(e,t,n){let i=e[t];if(n!==i){if(this.options&&this.options.keysSet&&!this.options.allKeys&&!this.options.deepAllKeys&&!this.options.keysSet.has(t))return e[t]=n,!0;const s=Ko(n,t,this);if(e[t]=s,i&&typeof i=="object"){const c=i[mi];c&&(i=c.detach())}const u=i===void 0?[{type:uf,path:[t],value:s,object:this.proxy}]:[{type:cf,path:[t],value:s,oldValue:i,object:this.proxy}];ra(this,u)}return!0}deleteProperty(e,t){let n=e[t];if(delete e[t],n&&typeof n=="object"){const s=n[mi];s&&(n=s.detach())}const i=[{type:Um,path:[t],oldValue:n,object:this.proxy}];return ra(this,i),!0}}class rb extends f_{constructor(e){super(e,vx,gx)}}class sb extends f_{constructor(e){super(e,_x)}set(e,t,n){let i=e[t];if(n!==i){const s=Ko(n,t,this);if(e[t]=s,i&&typeof i=="object"){const c=i[mi];c&&(i=c.detach())}const u=i===void 0?[{type:uf,path:[t],value:s,object:this.proxy}]:[{type:cf,path:[t],value:s,oldValue:i,object:this.proxy}];ra(this,u)}return!0}}class ab extends f_{constructor(e){super(e,yx)}}class ob{constructor(){throw new Error('Observable MAY NOT be created via constructor, see "Observable.from" API')}static from(e,t){if(t.cache&&t.cache.has(e))return t.cache.get(e);let n;if(!e||typeof e!="object")throw new Error("observable MAY ONLY be created from a non-null object");if(e[mi])n=e;else if(Array.isArray(e))n=new sb({target:e,options:t,ownKey:null,parent:null}).proxy;else if(ArrayBuffer.isView(e))n=new ab({target:e,options:t,ownKey:null,parent:null}).proxy;else{if(e instanceof Date||e instanceof Blob||e instanceof Error)throw new Error(`${e} found to be one of non-observable types`);n=new rb({target:e,options:t,ownKey:null,parent:null}).proxy}return t.cache&&t.cache.set(e,n),n}static isObservable(e){return!!(e&&e[mi])}}Object.freeze(ob);function Wu(r,e,t){return e=wx(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function wx(r){var e=Mx(r,"string");return typeof e=="symbol"?e:String(e)}function Mx(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}const Cx={type:"changed"},Nm={ORTHOGRAPHIC:1,PERSPECTIVE:2};class ub extends m.EventEmitter{constructor(e,t=new i_(0,0,0,0,0,1e4)){super(),Wu(this,"rendererInstance",null),Wu(this,"_camera",Object(g.shallowRef)(null)),Wu(this,"_scene",Object(g.shallowRef)(null)),Wu(this,"_domElement",Object(g.shallowRef)(null)),Wu(this,"viewControls",null),Wu(this,"_cameraType",null),Wu(this,"_cameraUnsub",null),Wu(this,"_lastZoomValue",null),this.customRender=this.customRender.bind(this),this.id=qy()(),this.setScene(a_(new n_)),e&&this.setDomElement(e),t&&this.setCamera(t),this.domElement&&this._initResizeObserver()}get renderer(){return this.rendererInstance.renderer}get camera(){return this._camera.value}get domElement(){return this._domElement.value}get scene(){return this._scene.value}setCamera(e){if(this.camera===e)return;const t=ob.from(a_(e),{paths:["position.*","scale.*","quaternion.*","up.*","matrix.*","matrixWorld.*","matrixWorldInverse.*","modelViewMatrix.*","normalMatrix.*","projectionMatrix.*","projectionMatrixInverse.*"]});this._cameraUnsub=t.observe(()=>{var n;if(this.requestRender(this.camera),this.emit("camera-props-changed",this.camera),((n=this.camera)==null?void 0:n.zoom)!=null){if(this._lastZoomValue!=null&&Math.abs(this._lastZoomValue-this.camera.zoom)<1e-5)return;this._lastZoomValue=this.camera.zoom,this.emit("camera-zoom-changed",this.camera.zoom)}}),this._camera.value=t,this.camera.isOrthographicCamera?this.cameraType=Nm.ORTHOGRAPHIC:this.camera.isPerspectiveCamera&&(this.cameraType=Nm.PERSPECTIVE),this._updateCameraFOV()}setScene(e){this._scene.value=e}setDomElement(e){this.domElement!==e&&(this._domElement.value=e,this.emit("domelement-changed",this.domElement),this._destroyResizeObserver(),this._initResizeObserver())}setViewControls(e){this.viewControls=e}_initResizeObserver(){this.resizeObserver=new ResizeObserver(()=>{requestAnimationFrame(()=>{this._onDOMElementResize()})}),this.resizeObserver.observe(this.domElement)}_destroyResizeObserver(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}_onDOMElementResize(){this._updateCameraFOV()}_updateCameraFOV(){const{camera:e,domElement:t}=this;!e||!t||(this.cameraType===Nm.ORTHOGRAPHIC?(e.left=t.clientWidth/-2,e.right=t.clientWidth/2,e.top=t.clientHeight/2,e.bottom=t.clientHeight/-2):this.cameraType===Nm.PERSPECTIVE&&(e.aspect=t.clientWidth/t.clientHeight),e.updateProjectionMatrix())}customRender(e){this.render(e)}requestRender(e=this.scene){e.dispatchEvent(Cx)}render(e){const{renderer:t,scene:n,camera:i}=e;this.emit("beforeRender",e),t.render(n,i),this.emit("afterRender",e)}destroy(){this.rendererInstance=null,this.removeAllListeners(),this._cameraUnsub&&(this._cameraUnsub(),this._cameraUnsub=null)}}var cb=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{attrs:{hidden:""}},[t("orbit-controls",{attrs:{camera:r.camera,"dom-element":r.domElement,options:r.orbitControlsOptions},on:{control:function(n){r.orbitControls=n},change:function(n){return r.orbitControlsChanged(n)}}}),r._v(" "),t("editor-controls",{attrs:{camera:r.camera,"dom-element":r.domElement,options:r.editorControlsOptions},on:{control:function(n){r.editorControls=n},change:function(n){return r.editorControlsChanged(n)}}}),r._v(" "),t("first-person-controls",{attrs:{camera:r.camera,"dom-element":r.domElement,options:r.firstPersonControlsOptions},on:{control:function(n){r.firstPersonControls=n},change:function(n){return r.firstPersonControlsChanged(n)}}})],1)},Ox=[];cb._withStripped=!0;var $o={props:{scene:null,camera:null,domElement:null,options:{type:Object,default:()=>({})}},render(){return null},setup(r,{emit:e},t={}){const n=Object(g.shallowRef)(null),i=Object(g.shallowRef)(t.createControl||null),s=Object(g.shallowRef)(t.init||null);s.value||(s.value=()=>{n.value.addEventListener("change",p=>{e("change",p.message)})});function u(){n.value&&Object.assign(n.value,r.options)}function c(){n.value&&(r.scene&&r.scene.remove(n.value),n.value.dispose&&n.value.dispose(),n.value=null)}function d(){n.value&&c(),r.camera&&r.domElement&&(n.value=i.value(r.camera,r.domElement))}return Object(g.onBeforeUnmount)(()=>{c()}),Object(g.watch)(()=>r.scene,(p,_)=>{_&&n.value&&_.remove(n.value),r.scene&&(n.value?n.value.attachable?r.scene.attach(n.value):r.scene.add(n.value):d())},{immediate:!0}),Object(g.watch)(()=>r.camera,()=>d(),{immediate:!0}),Object(g.watch)(n,()=>{e("control",n.value),n.value&&(u(),n.value.update&&n.value.update(),s.value(n,r.camera,r.domElement),r.scene&&(r.scene.remove(n.value),n.value.attachable?r.scene.attach(n.value):r.scene.add(n.value)))},{immediate:!0}),Object(g.watch)(()=>r.options,()=>{n.value&&u()},{immediate:!0}),Object(g.watch)(()=>r.domElement,()=>d(),{immediate:!0}),{control:n}}};const ff=new ni,lb=new ni;function Px(r,e,t){const n=r.changedTouches?r.changedTouches[0]:r,i=e.getBoundingClientRect(),s=n.clientX-i.left,u=n.clientY-i.top;return t.x=s/i.width*2-1,t.y=-u/i.height*2+1,t}function Bm(r,e){this.object=r,this.domElement=e!==void 0?e:document,this.enabled=!0,this.target=new ni,this.objectDirection=new ni,this.minDistance=0,this.maxDistance=1/0,this.zoomMinDistance=10,this.zoomFollowCursor=!0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.panSpeed=1,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:_e=>_e.button===U.LEFT,ZOOM:_e=>_e.button===U.MIDDLE,PAN:_e=>_e.button===U.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return p.phi},this.getAzimuthalAngle=function(){return p.theta},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){pe(),t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),we(),t.update(),c=u.NONE},this.update=function(){const _e=new ni,St=new qv().setFromUnitVectors(r.up,new ni(0,1,0)),Ot=St.clone().invert(),kt=new ni,vn=new qv;return function(xt=!0,pn=!1){const Cn=t.object.position;return _e.copy(Cn).sub(t.target),_e.applyQuaternion(St),p.setFromVector3(_e),t.autoRotate&&c===u.NONE&&ot(ve()),p.theta+=_.theta,p.phi+=_.phi,p.theta=Math.max(t.minAzimuthAngle,Math.min(t.maxAzimuthAngle,p.theta)),p.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,p.phi)),p.makeSafe(),p.radius*=E,p.radius=Math.max(t.minDistance,Math.min(t.maxDistance,p.radius)),t.target.add(x),_e.setFromSpherical(p),_e.applyQuaternion(Ot),Cn.copy(t.target).add(_e),(pn||t.enableRotate)&&t.object.lookAt(t.target),t.enableDamping===!0?(_.theta*=1-t.dampingFactor,_.phi*=1-t.dampingFactor):_.set(0,0,0),E=1,x.set(0,0,0),xt&&(w||kt.distanceToSquared(t.object.position)>d||8*(1-vn.dot(t.object.quaternion))>d)?(we(),kt.copy(t.object.position),vn.copy(t.object.quaternion),w=!1,!0):!1}}(),this.dispose=function(){t.domElement.removeEventListener("contextmenu",fe,!1),t.domElement.removeEventListener("mousedown",en,!1),t.domElement.removeEventListener("wheel",xn,!1),t.domElement.removeEventListener("touchstart",Gi,!1),t.domElement.removeEventListener("touchend",ye,!1),t.domElement.removeEventListener("touchmove",xi,!1),document.removeEventListener("mousemove",Xt,!1),document.removeEventListener("mouseup",Dn,!1),window.removeEventListener("keydown",gn,!1)};var t=this;const n={type:"change"},i={type:"start"},s={type:"end"};var u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},c=u.NONE,d=1e-6,p=new Zv,_=new Zv;this.sphericalDelta=_;var E=1,x=new ni,w=!1;const R=new na,C=new na,O=new na,k=new na,J=new na,G=new na,H=new na,ae=new na,me=new na;function we(_e={}){const St={...n,..._e,message:{control:t,original:t.lastState,result:{target:t.target,position:t.object.position,zoom:t.object.zoom},diff:{target:t.target.clone().sub(t.lastState.target),position:t.object.position.clone().sub(t.lastState.position),zoom:t.object.zoom-t.lastState.zoom}}};t.dispatchEvent(St)}function V(_e,St){Px(_e,t.domElement,ff),t.object.updateWorldMatrix(!0,!1),lb.copy(ff).unproject(t.object),t.object.zoom=St,t.object.updateProjectionMatrix(),ff.unproject(t.object),ff.sub(lb),t.object.position.sub(ff),t.target.sub(ff)}function pe(){t.lastState={target:t.target.clone(),position:t.object.position.clone(),zoom:t.object.zoom}}function ve(){return 2*Math.PI/60/60*t.autoRotateSpeed}function Ge(){return Math.pow(.95,t.zoomSpeed)}function ot(_e){_.theta-=_e}function We(_e){_.phi-=_e}const Ne=function(){const _e=new ni;return function(Ot,kt){_e.setFromMatrixColumn(kt,0),_e.multiplyScalar(-Ot),x.add(_e)}}(),rt=function(){const _e=new ni;return function(Ot,kt){_e.setFromMatrixColumn(kt,1),_e.multiplyScalar(Ot),x.add(_e)}}(),ut=function(){const _e=new ni;return function(Ot,kt){const vn=t.domElement===document?t.domElement.body:t.domElement;if(t.object.isPerspectiveCamera){const qt=t.object.position;_e.copy(qt).sub(t.target);let xt=_e.length();xt*=Math.tan(t.object.fov/2*Math.PI/180),Ne(2*Ot*xt/vn.clientHeight,t.object.matrix),rt(2*kt*xt/vn.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(Ne(Ot*(t.object.right-t.object.left)/t.object.zoom/vn.clientWidth,t.object.matrix),rt(kt*(t.object.top-t.object.bottom)/t.object.zoom/vn.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}}();function It(_e,St){if(t.object.isPerspectiveCamera)E/=_e;else if(t.object.isOrthographicCamera){const Ot=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom*_e));t.zoomFollowCursor?V(St,Ot):(t.object.zoom=Ot,t.object.updateProjectionMatrix()),w=!0}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1}function Et(_e,St){if(t.object.isPerspectiveCamera)E*=_e;else if(t.object.isOrthographicCamera){const Ot=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/_e));t.zoomFollowCursor?V(St,Ot):(t.object.zoom=Ot,t.object.updateProjectionMatrix()),w=!0}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1}function tt(_e){R.set(_e.clientX,_e.clientY)}function Qe(_e){H.set(_e.clientX,_e.clientY)}function qe(_e){k.set(_e.clientX,_e.clientY)}function et(_e){pe(),C.set(_e.clientX,_e.clientY),O.subVectors(C,R);const St=t.domElement===document?t.domElement.body:t.domElement;ot(2*Math.PI*O.x/St.clientWidth*t.rotateSpeed),We(2*Math.PI*O.y/St.clientHeight*t.rotateSpeed),R.copy(C),t.update()}function Ut(_e){pe(),ae.set(_e.clientX,_e.clientY),me.subVectors(ae,H),me.y>0?It(Ge(),_e):me.y<0&&Et(Ge(),_e),H.copy(ae),t.update()}function Dt(_e){pe(),J.set(_e.clientX,_e.clientY),G.subVectors(J,k).multiplyScalar(t.panSpeed),ut(G.x,G.y),k.copy(J),t.update()}function Yt(_e){}function ft(_e){pe(),_e.deltaY<0?Et(Ge(),_e):_e.deltaY>0&&It(Ge(),_e),t.update()}function Ln(_e){switch(_e.keyCode){case t.keys.UP:pe(),ut(0,t.keyPanSpeed),t.update();break;case t.keys.BOTTOM:pe(),ut(0,-t.keyPanSpeed),t.update();break;case t.keys.LEFT:pe(),ut(t.keyPanSpeed,0),t.update();break;case t.keys.RIGHT:pe(),ut(-t.keyPanSpeed,0),t.update();break}}function rn(_e){R.set(_e.touches[0].pageX,_e.touches[0].pageY)}function sn(_e){const St=_e.touches[0].pageX-_e.touches[1].pageX,Ot=_e.touches[0].pageY-_e.touches[1].pageY,kt=Math.sqrt(St*St+Ot*Ot);H.set(0,kt)}function Wt(_e){k.set(_e.touches[0].pageX,_e.touches[0].pageY)}function Pn(_e){pe(),C.set(_e.touches[0].pageX,_e.touches[0].pageY),O.subVectors(C,R);const St=t.domElement===document?t.domElement.body:t.domElement;ot(2*Math.PI*O.x/St.clientWidth*t.rotateSpeed),We(2*Math.PI*O.y/St.clientHeight*t.rotateSpeed),R.copy(C),t.update()}function wt(_e){pe();const St=_e.touches[0].pageX-_e.touches[1].pageX,Ot=_e.touches[0].pageY-_e.touches[1].pageY,kt=Math.sqrt(St*St+Ot*Ot);ae.set(0,kt),me.subVectors(ae,H),me.y>0?Et(Ge(),_e):me.y<0&&It(Ge(),_e),H.copy(ae),t.update()}function bt(_e){pe(),J.set(_e.touches[0].pageX,_e.touches[0].pageY),G.subVectors(J,k).multiplyScalar(t.panSpeed),ut(G.x,G.y),k.copy(J),t.update()}function Vt(_e){}function en(_e){if(t.enabled!==!1){if(document.activeElement.blur(),_e.preventDefault(),t.update(!1),t.mouseButtons.ORBIT(_e)){if(t.enableRotate===!1)return;tt(_e),c=u.ROTATE}else if(t.mouseButtons.ZOOM(_e)){if(t.enableZoom===!1)return;Qe(_e),c=u.DOLLY}else if(t.mouseButtons.PAN(_e)){if(t.enablePan===!1)return;qe(_e),c=u.PAN}c!==u.NONE&&(document.addEventListener("mousemove",Xt,!1),document.addEventListener("mouseup",Dn,!1),t.dispatchEvent(i))}}function Xt(_e){if(t.enabled!==!1)switch(_e.preventDefault(),c){case u.ROTATE:if(t.enableRotate===!1)return;et(_e);break;case u.DOLLY:if(t.enableZoom===!1)return;Ut(_e);break;case u.PAN:if(t.enablePan===!1)return;Dt(_e);break}}function Dn(_e){t.enabled!==!1&&(document.removeEventListener("mousemove",Xt,!1),document.removeEventListener("mouseup",Dn,!1),t.dispatchEvent(s),c=u.NONE)}function xn(_e){if(t.enabled===!1||t.enableZoom===!1||c!==u.NONE&&c!==u.ROTATE)return;_e.preventDefault(),_e.stopPropagation(),ft(_e);const St=t.target.distanceTo(t.object.position);if(St<t.zoomMinDistance){t.object.getWorldDirection(t.objectDirection);const Ot=t.zoomMinDistance-St;t.target.add(t.objectDirection.clone().multiplyScalar(Ot))}t.dispatchEvent(i),t.dispatchEvent(s)}function gn(_e){t.enabled===!1||t.enableKeys===!1||t.enablePan===!1||Ln(_e)}function Gi(_e){if(t.enabled!==!1){switch(_e.touches.length){case 1:if(t.enableRotate===!1)return;rn(_e),c=u.TOUCH_ROTATE;break;case 2:if(t.enableZoom===!1)return;sn(_e),c=u.TOUCH_DOLLY;break;case 3:if(t.enablePan===!1)return;Wt(_e),c=u.TOUCH_PAN;break;default:c=u.NONE}c!==u.NONE&&t.dispatchEvent(i)}}function xi(_e){if(t.enabled!==!1)switch(_e.preventDefault(),_e.stopPropagation(),_e.touches.length){case 1:if(t.enableRotate===!1||c!==u.TOUCH_ROTATE)return;Pn(_e);break;case 2:if(t.enableZoom===!1||c!==u.TOUCH_DOLLY)return;wt(_e);break;case 3:if(t.enablePan===!1||c!==u.TOUCH_PAN)return;bt(_e);break;default:c=u.NONE}}function ye(_e){t.enabled!==!1&&(t.dispatchEvent(s),c=u.NONE)}function fe(_e){t.enabled!==!1&&_e.preventDefault()}t.domElement.addEventListener("contextmenu",fe,!1),t.domElement.addEventListener("mousedown",en,!1),t.domElement.addEventListener("wheel",xn,!1),t.domElement.addEventListener("touchstart",Gi,!1),t.domElement.addEventListener("touchend",ye,!1),t.domElement.addEventListener("touchmove",xi,!1),window.addEventListener("keydown",gn,!1),pe(),this.update()}Bm.prototype=Object.assign(Object.create(e_.prototype),{constructor:Bm}),Object.defineProperties(Bm.prototype,{center:{get(){return console.warn("OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get(){return console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set(r){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!r}},noRotate:{get(){return console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set(r){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!r}},noPan:{get(){return console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set(r){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!r}},noKeys:{get(){return console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set(r){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!r}},staticMoving:{get(){return console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set(r){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!r}},dynamicDampingFactor:{get(){return console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set(r){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=r}}});var Ix=Object(g.defineComponent)({render:$o.render,props:$o.props,setup(r,e){return $o.setup(r,e,{createControl:(t,n)=>new Bm(t,n)})}});const Qh=new i_,fb=new ni;function h_(r,e){e=e!==void 0?e:document,this.enabled=!0,this.center=new ni,this.panSpeed=.001,this.zoomSpeed=.1,this.rotationSpeed=.005;const t=this,n=new ni,i=new ni,s=new Ty,u={NONE:-1,ROTATE:0,ZOOM:1,PAN:2};let c=u.NONE;const d=this.center,p=new kr,_=new na,E=new na,x=new Zv,w={type:"change"};this.focus=function(V,pe=4,ve=1,Ge={}){const{ignoreZoom:ot=!1,deep:We=!0,box:Ne,domRect:rt}=Ge;let ut;if(Ne?s.copy(Ne):s.setFromObject(V,We),s.isEmpty()===!1)if(d.copy(s.getCenter(fb)),r.isPerspectiveCamera){const It=s.getSize(fb),tt=Math.max(It.x,It.y,It.z)/(2*Math.atan(Math.PI*r.fov/360)),Qe=tt/r.aspect;ut=Math.max(tt,Qe,.1)}else r.isOrthographicCamera&&(ut=s.getBoundingSphere(new Us).radius);else d.setFromMatrixPosition(V.matrixWorld),ut=.1;return ut*=pe,i.set(0,0,1),i.applyQuaternion(r.quaternion),i.multiplyScalar(ut),r.position.copy(d).add(i),ot||this.zoomToFit(s,ve,rt),t.dispatchEvent({...w,message:{center:d,delta:i,distance:ut}}),{center:d,delta:i,distance:ut}},this.zoomToFit=function(V,pe,ve){if(r.isOrthographicCamera){Qh.copy(r),Qh.updateMatrixWorld(),Qh.zoom=1,Qh.updateProjectionMatrix();const Ge=ve||e.getBoundingClientRect(),ot=Ge.width/2,We=Ge.height/2,Ne=new U1().setFromPoints(V.toPointsArray().map(It=>(It.project(Qh),new na(It.x*ot+ot,-(It.y*We)+We)))),{x:rt,y:ut}=Ne.getSize(new na);r.zoom=Math.min(Ge.width/rt,Ge.height/ut)*pe,r.updateProjectionMatrix()}},this.pan=function(V){const pe=r.position.distanceTo(d);V.multiplyScalar(pe*t.panSpeed),V.applyMatrix3(p.getNormalMatrix(r.matrix)),r.position.add(V),d.add(V),t.dispatchEvent(w)},this.zoom=function(V){const pe=r.position.distanceTo(d);V.multiplyScalar(pe*t.zoomSpeed),!(V.length()>pe)&&(V.applyMatrix3(p.getNormalMatrix(r.matrix)),r.position.add(V),t.dispatchEvent(w))},this.rotate=function(V){n.copy(r.position).sub(d),x.setFromVector3(n),x.theta+=V.x,x.phi+=V.y,x.makeSafe(),n.setFromSpherical(x),r.position.copy(d).add(n),r.lookAt(d),t.dispatchEvent(w)};function R(V){t.enabled!==!1&&(V.button===0?c=u.ROTATE:V.button===1?c=u.ZOOM:V.button===2&&(c=u.PAN),E.set(V.clientX,V.clientY),e.addEventListener("mousemove",C,!1),e.addEventListener("mouseup",O,!1),e.addEventListener("mouseout",O,!1),e.addEventListener("dblclick",O,!1))}function C(V){if(t.enabled===!1)return;_.set(V.clientX,V.clientY);const pe=_.x-E.x,ve=_.y-E.y;c===u.ROTATE?t.rotate(i.set(-pe*t.rotationSpeed,-ve*t.rotationSpeed,0)):c===u.ZOOM?t.zoom(i.set(0,0,ve)):c===u.PAN&&t.pan(i.set(-pe,ve,0)),E.set(V.clientX,V.clientY)}function O(){e.removeEventListener("mousemove",C,!1),e.removeEventListener("mouseup",O,!1),e.removeEventListener("mouseout",O,!1),e.removeEventListener("dblclick",O,!1),c=u.NONE}function k(V){t.enabled!==!1&&(V.preventDefault(),t.zoom(i.set(0,0,V.deltaY>0?1:-1)))}function J(V){V.preventDefault()}this.dispose=function(){e.removeEventListener("contextmenu",J,!1),e.removeEventListener("mousedown",R,!1),e.removeEventListener("wheel",k,!1),e.removeEventListener("mousemove",C,!1),e.removeEventListener("mouseup",O,!1),e.removeEventListener("mouseout",O,!1),e.removeEventListener("dblclick",O,!1),e.removeEventListener("touchstart",me,!1),e.removeEventListener("touchmove",we,!1)},e.addEventListener("contextmenu",J,!1),e.addEventListener("mousedown",R,!1),e.addEventListener("wheel",k,!1);const G=[new ni,new ni,new ni],H=[new ni,new ni,new ni];let ae=null;function me(V){if(t.enabled!==!1){switch(V.touches.length){case 1:G[0].set(V.touches[0].pageX,V.touches[0].pageY,0),G[1].set(V.touches[0].pageX,V.touches[0].pageY,0);break;case 2:G[0].set(V.touches[0].pageX,V.touches[0].pageY,0),G[1].set(V.touches[1].pageX,V.touches[1].pageY,0),ae=G[0].distanceTo(G[1]);break}H[0].copy(G[0]),H[1].copy(G[1])}}function we(V){if(t.enabled===!1)return;V.preventDefault(),V.stopPropagation();function pe(We,Ne){let rt=Ne[0];for(const ut in Ne)rt.distanceTo(We)>Ne[ut].distanceTo(We)&&(rt=Ne[ut]);return rt}switch(V.touches.length){case 1:G[0].set(V.touches[0].pageX,V.touches[0].pageY,0),G[1].set(V.touches[0].pageX,V.touches[0].pageY,0),t.rotate(G[0].sub(pe(G[0],H)).multiplyScalar(-t.rotationSpeed));break;case 2:G[0].set(V.touches[0].pageX,V.touches[0].pageY,0),G[1].set(V.touches[1].pageX,V.touches[1].pageY,0);var ve=G[0].distanceTo(G[1]);t.zoom(i.set(0,0,ae-ve)),ae=ve;var Ge=G[0].clone().sub(pe(G[0],H)),ot=G[1].clone().sub(pe(G[1],H));Ge.x=-Ge.x,ot.x=-ot.x,t.pan(Ge.add(ot).multiplyScalar(.5));break}H[0].copy(G[0]),H[1].copy(G[1])}e.addEventListener("touchstart",me,!1),e.addEventListener("touchmove",we,!1)}h_.prototype=Object.assign(Object.create(e_.prototype),{constructor:h_});var Rx=Object(g.defineComponent)({render:$o.render,props:$o.props,setup(r,e){return $o.setup(r,e,{createControl:(t,n)=>new h_(t,n)})}});function Hr(r,e,t){return e=Lx(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Lx(r){var e=Dx(r,"string");return typeof e=="symbol"?e:String(e)}function Dx(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class Fx extends e_{constructor(e,t){super(),Hr(this,"defaultMovementSpeedMultiplier",1),Hr(this,"movementSpeedMultiplier",1),Hr(this,"movementSpeedVector",{x:1,y:1,z:1}),Hr(this,"rollSpeed",.005),Hr(this,"_enabled",!0),Hr(this,"dragToLook",!1),Hr(this,"autoForward",!1),Hr(this,"enableRotate",!1),Hr(this,"tmpQuaternion",new qv),Hr(this,"tmpEuler",new F1(0,0,0,"ZYX")),Hr(this,"mouseStatus",0),Hr(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),Hr(this,"moveVector",new ni(0,0,0)),Hr(this,"rotationVector",new ni(0,0,0)),Hr(this,"_eventHandlers",[]),Hr(this,"_changed",!1),Hr(this,"_shouldUpdate",!1),Hr(this,"_lastUpdateLoopId",null),this.object=e,this.domElement=t,this._eventHandlers=[{element:this.domElement,event:"mousemove",handler:this.mousemove},{element:this.domElement,event:"mousedown",handler:this.mousedown},{element:this.domElement,event:"mouseup",handler:this.mouseup},{element:window,event:"keydown",handler:this.keydown},{element:window,event:"keyup",handler:this.keyup}].map(n=>({...n,handler:n.handler.bind(this)})),this._eventHandlers.forEach(({element:n,event:i,handler:s})=>{n.addEventListener(i,s,{passive:!0})}),this._updateLoop=()=>{this._shouldUpdate&&(this.update(),this._lastUpdateLoopId=requestAnimationFrame(this._updateLoop))}}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.enabled||this.stopUpdate())}startUpdate(){this._shouldUpdate=!0,this._lastUpdateLoopId!=null&&(cancelAnimationFrame(this._lastUpdateLoopId),this._lastUpdateLoopId=null),this._updateLoop()}stopUpdate(){this._shouldUpdate=!1}keydown(e){if(!(!this.enabled||e.repeat)&&document.activeElement.tagName!=="INPUT"){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=this.defaultMovementSpeedMultiplier*2;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyE":this.moveState.up=1;break;case"KeyQ":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyR":this.moveState.rollLeft=1;break;case"KeyF":this.moveState.rollRight=1;break;default:return}this._changed=!1,this.updateMovementVector(),this.updateRotationVector(),!this._shouldUpdate&&this._changed&&this.startUpdate()}}keyup(e){if(!(!this.enabled||e.repeat)){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=this.defaultMovementSpeedMultiplier;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyE":this.moveState.up=0;break;case"KeyQ":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyR":this.moveState.rollLeft=0;break;case"KeyF":this.moveState.rollRight=0;break;default:return}this._changed=!1,this.updateMovementVector(),this.updateRotationVector(),this._changed||this.stopUpdate()}}mousedown(e){if(this.enableRotate)if(this.dragToLook)this.mouseStatus+=1;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}mousemove(e){if(this.enableRotate&&(!this.dragToLook||this.mouseStatus>0)){const{size:t,offset:n}=this.getContainerDimensions(),i=t[0]/2,s=t[1]/2;this.moveState.yawLeft=-(e.pageX-n[0]-i)/i,this.moveState.pitchDown=(e.pageY-n[1]-s)/s,this.updateRotationVector()}}mouseup(e){if(this.enableRotate){if(this.dragToLook)this.mouseStatus-=1,this.moveState.yawLeft=0,this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}}update(){const e=this.movementSpeedMultiplier*this.rollSpeed,t={x:this.object.position.x,y:this.object.position.y,z:this.object.position.z},n={x:this.object.rotation.x,y:this.object.rotation.y,z:this.object.rotation.z};if(this.tmpEuler.setFromQuaternion(this.object.quaternion),this.moveVector.x!==0){const i=new ni(Math.cos(this.tmpEuler.z),Math.sin(this.tmpEuler.z),0);this.object.position.addScaledVector(i,this.moveVector.x*this.movementSpeedVector.y*this.movementSpeedMultiplier)}if(this.moveVector.y!==0&&(this.object.position.z+=this.moveVector.y*this.movementSpeedVector.z*this.movementSpeedMultiplier),this.moveVector.z!==0){const i=new ni(Math.sin(-this.tmpEuler.z),Math.cos(-this.tmpEuler.z),0);this.object.position.addScaledVector(i,this.moveVector.z*-(this.movementSpeedVector.x*this.movementSpeedMultiplier))}if(this.rotationVector.x!==0){const i=this.tmpEuler.x+this.rotationVector.x*e;this.tmpEuler.x=Math.max(1e-6,Math.min(Math.PI-1e-6,i))}this.rotationVector.y!==0&&(this.tmpEuler.y+=this.rotationVector.y*e),this.rotationVector.z!==0&&(this.tmpEuler.z+=this.rotationVector.z*e),this.object.quaternion.setFromEuler(this.tmpEuler),this.dispatchEvent({type:"change",message:{startPosition:t,startRotation:n}})}updateMovementVector(){const e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=this.moveState.right-this.moveState.left,this.moveVector.y=this.moveState.up-this.moveState.down,this.moveVector.z=this.moveState.back-e,this._changed||(this._changed=!this.moveVector.isZero())}updateRotationVector(){this.rotationVector.x=this.moveState.pitchUp-this.moveState.pitchDown,this.rotationVector.y=this.moveState.rollLeft-this.moveState.rollRight,this.rotationVector.z=this.moveState.yawLeft-this.moveState.yawRight,this._changed||(this._changed=!this.rotationVector.isZero())}getContainerDimensions(){return this.domElement!==document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}dispose(){this._eventHandlers.forEach(({element:e,event:t,handler:n})=>{e.removeEventListener(t,n,{passive:!0})}),this._eventHandlers=[]}}var Ux=Object(g.defineComponent)({render:$o.render,props:$o.props,setup(r,e){return $o.setup(r,e,{createControl:(t,n)=>new Fx(t,n)})}});const Jh={ORTHOGRAPHIC:1,PERSPECTIVE:2},d_=new ni;var Nx=Object(g.defineComponent)({components:{OrbitControls:Ix,EditorControls:Rx,FirstPersonControls:Ux},props:{camera:null,domElement:null,enableZoom:Boolean,enablePan:Boolean,zoomFactor:{type:Number,default:1}},setup(r,{emit:e}){const t=Object(g.shallowRef)({orbitControls:null,editorControls:null,firstPersonControls:null}),n=Object(g.shallowRef)(null),i=Object(g.shallowRef)(null),s=Object(g.shallowRef)(null),u=Object(g.computed)(()=>r.camera?r.camera.isOrthographicCamera?Jh.ORTHOGRAPHIC:r.camera.isPerspectiveCamera?Jh.PERSPECTIVE:null:null),c=Object(g.computed)(()=>{if(u.value===Jh.ORTHOGRAPHIC){const C=new Set([0,2]);return{enableRotate:!1,zoomSpeed:r.zoomFactor,enableZoom:r.enableZoom,enablePan:r.enablePan,mouseButtons:{ORBIT:()=>!1,ZOOM:O=>O.button===1,PAN:O=>C.has(O.button)}}}return u.value===Jh.PERSPECTIVE?{zoomSpeed:r.zoomFactor,enableRotate:!0}:null}),d=Object(g.computed)(()=>({enabled:!1,movementSpeed:.5,rollSpeed:.025,dragToLook:!0,enableRotate:!1})),p=Object(g.computed)(()=>({enabled:!1}));function _(){e("tool",t.value)}function E(){const C={};u.value===Jh.ORTHOGRAPHIC&&(C.zoom=r.camera.zoom),e("camera-updated",C)}Object(g.watch)(n,()=>{t.value.orbitControls=n.value,_(),E()}),Object(g.watch)(i,()=>{t.value.editorControls=i.value,_(),E()}),Object(g.watch)(s,()=>{t.value.firstPersonControls=s.value,_()});function x(){E()}function w(){E()}function R({startPosition:C}){const O=n.value.target.distanceTo(C);r.camera.getWorldDirection(d_),d_.multiplyScalar(O).add(r.camera.position),n.value.target.copy(d_),n.value.update()}return Object(g.onMounted)(()=>{_()}),Object(g.onBeforeUnmount)(()=>{e("tool",null),[n,i,s].forEach(C=>{C.value&&(C.value.dispose(),C.value=null)})}),{orbitControls:n,editorControls:i,firstPersonControls:s,cameraType:u,orbitControlsOptions:c,firstPersonControlsOptions:d,editorControlsOptions:p,sendCameraUpdate:E,orbitControlsChanged:x,editorControlsChanged:w,firstPersonControlsChanged:R}}}),Bx=Nx,hb=Zh(Bx,cb,Ox,!1,null,null,null);if(!1)var CT;hb.options.__file="lib/annotation-tools/components/Scene/MoveSceneTool.vue";var db=hb.exports;const zx=Object.freeze(["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","specularMap","alphaMap","envMap","combine","reflectivity","refractionRatio","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","morphTargets"]);class Gx extends Dy{constructor(e={}){super(e),Dy.extend(er,{material:{lights:!1,defines:{USE_MAP:""}},header:`
uniform float gamma;
uniform float contrast;
uniform float saturation;
uniform float brightness;
      `,fragment:{"#include <output_fragment>":`
        vec4 adjustedColor = vec4(gl_FragColor);

        if (adjustedColor.a > 0.0) {
          adjustedColor.rgb /= adjustedColor.a;

          vec3 rgb = pow(adjustedColor.rgb, vec3(1. / gamma));
          rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);

          adjustedColor.rgb = rgb * brightness;
          adjustedColor.rgb *= adjustedColor.a;
        }

        gl_FragColor = adjustedColor;
                `},uniforms:{gamma:1,saturation:1,brightness:1,contrast:1}},this,e)}get propsToInherit(){return zx}}const zm=new qa(1,1);zm.dispose=ia.e;const kx=new ma(1,1,1);kx.dispose=ia.e;const Vx=Object(o_.b)(1,1),Zo=new Rh(Vx);Zo.generateMipmaps=!1,Zo.dispose=ia.e,Zo.needsUpdate=!0;function hf(r,e,t){return e=jx(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function jx(r){var e=Wx(r,"string");return typeof e=="symbol"?e:String(e)}function Wx(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}const Gm={type:"changed"};class qh{constructor(){hf(this,"id",null),hf(this,"cache",null),hf(this,"visible",null),hf(this,"id",null),hf(this,"scene",null),hf(this,"graphics",null),this._emitter=new m.EventEmitter}get autoGC(){return!0}emit(...e){return this._emitter.emit(...e),this}on(...e){return this._emitter.on(...e),this}once(...e){return this._emitter.once(...e),this}off(...e){return this._emitter.off(...e),this}_onIdChanged(){}setId(e){const t=this.id;return t===e?this:(this.id=e,this._onIdChanged(e,t),this)}setScene(e){if(this.scene===e)return this;const t=this.scene;return t&&this._removeFromScene(t),this.scene=e,this.graphics?(e&&(this._addToScene(this.graphics),this._onSceneChanged(e,t)),this):this}setVisible(e){!this.graphics||this.graphics.visible===e||(this.graphics.visible=e,this.sendChanged())}_onSceneChanged(){}sendChanged(e=this.graphics){if(!e)return this;e.dispatchEvent(Gm);const t=e.getRootObject();return t&&t!==e&&t.dispatchEvent(Gm),this}attachEvents(){}detachEvents(){}_addToScene(e,t=this.scene){this.id!=null&&(e.userData.id=this.id),t.add(e),this.sendChanged(),this.emit("add-to-scene",{scene:t,graphics:e})}_removeFromScene(e=this.scene){const{graphics:t}=this;if(!t)return;const n=t.getRootObject();t.dispose&&t.dispose({geometry:!1,material:!1,texture:!1}),t.visible&&(t.dispatchEvent(Gm),n&&n.dispatchEvent(Gm)),this.emit("remove-from-scene",{scene:e,graphics:t})}_onGraphicsChanged(){}setGraphics(e){const t=e;if(t&&t.updateMatrixWorld(),this.graphics!==t)this.graphics&&this._removeFromScene(),t?(this.attachEvents(t),this.scene&&this._addToScene(t)):this.destroyGraphics();else return this;const n=this.graphics;return this.graphics=t,this._onGraphicsChanged(this.graphics,n),this.emit("graphics",t),this}onGraphicsDestroy(){}destroyGraphics(){var e;return this.graphics&&(this.graphics.visible&&this.sendChanged(),this.detachEvents(this.graphics)),this.onGraphicsDestroy(),this._removeFromScene(),this.autoGC&&((e=this.graphics)!=null&&e.dispose)&&this.graphics.dispose({geometry:!0,material:!0,texture:!0}),this}_onDestroy(){}destroy(){return this._onDestroy(),this.destroyGraphics(),this.autoGC&&this.graphics&&this.setGraphics(null),this._emitter.removeAllListeners(),null}}function df(r,e,t){return e=Hx(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Hx(r){var e=Yx(r,"string");return typeof e=="symbol"?e:String(e)}function Yx(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class pb extends qh{constructor(e={}){super(e),df(this,"id",null),df(this,"cache",null),df(this,"visible",null),df(this,"position",null),df(this,"rotation",null),df(this,"scale",null);const{visible:t,image:n,position:i,rotation:s,scale:u}=e;this.group=new _s,this.imgMesh=new Vu(zm,new Gx({side:oe})),this.group.add(this.imgMesh),this.setImage(n),i&&this.imgMesh.position.copy(i),s&&this.imgMesh.rotation.set(s.x,s.y,s.z),u&&this.imgMesh.scale.copy(u),this.setGraphics(this.group),this.setVisible(t)}_createTextureFromImage(e){if(!e)return Zo;const t=new Rh(e);return t.flipY=!1,t.generateMipmaps=!1,t.wrapS=zn,t.wrapT=zn,t.minFilter=Qn,t.magFilter=Qn,t.needsUpdate=!0,t}setImage(e){const t=this.imgMesh.material.map;if(!e)t!==Zo&&(t&&t.dispose(),this.imgMesh.visible=!1,this.imgMesh.material.map=Zo,this.imgMesh.material.needsUpdate=!0);else{this.imgMesh.visible=!0;let n=!1;if(!t)n=!0;else{const i=e.width,s=e.height,u=t.image.width,c=t.image.height;u!==i||c!==s?n=!0:(t.image=e,t.needsUpdate=!0)}if(n){const i=this._createTextureFromImage(e);this.imgMesh.material.map=i,this.imgMesh.material.uniforms.map.value=i,this.imgMesh.material.needsUpdate=!0}}this.sendChanged()}setWidth(e){this.width=e,this.group.position.x=this.width/2,this.imgMesh.scale.x=this.width,this.sendChanged()}setHeight(e){this.height=e,this.group.position.y=this.height/2,this.imgMesh.scale.y=this.height,this.sendChanged()}setSize(e,t){this.setWidth(e),this.setHeight(t)}setPosition(e){this.imgMesh.position.copy(e),this.sendChanged()}setRotation(e){this.imgMesh.rotation.set(e.x,e.y,e.z),this.sendChanged()}setScale(e){this.imgMesh.scale.copy(e),this.sendChanged()}onGraphicsDestroy(){[this.imgMesh].forEach(e=>{e!=null&&e.dispose&&e.dispose()})}}function mb(r,e,t){return e=Xx(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Xx(r){var e=Kx(r,"string");return typeof e=="symbol"?e:String(e)}function Kx(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class gb extends qh{constructor(e={}){super(e),mb(this,"width",null),mb(this,"height",null);const{width:t,height:n}=e,i=new _s;i.scale.set(1,-1,1),t!=null&&this.setWidth(t),n!=null&&this.setHeight(n),this.setGraphics(i)}setWidth(e){this.width=e,this.graphics.position.x=-this.width/2,this.sendChanged()}setHeight(e){this.height=e,this.graphics.position.y=this.height/2,this.sendChanged()}setSize(e,t){this.setWidth(e),this.setHeight(t)}}class vb{constructor(e){this.update(e)}update(e){this.classesMap=e!=null&&e.classes?Object(ia.d)(e.classes,"title"):new Map,this.tagsMap=e!=null&&e.tags?Object(ia.d)(e.tags,"title"):new Map}getClassByTitle(e){return this.classesMap.get(e)}getTagByTitle(e){return this.tagsMap.get(e)}}var Fc=o("9e0829ebb5f4d9754370"),$x=o("398dab085f4bd5e07c44"),Zx=o.n($x);const _b=Symbol("Comlink.proxy"),Qx=Symbol("Comlink.endpoint"),Jx=Symbol("Comlink.releaseProxy"),p_=Symbol("Comlink.thrown"),yb=r=>typeof r=="object"&&r!==null||typeof r=="function",qx={canHandle:r=>yb(r)&&r[_b],serialize(r){const{port1:e,port2:t}=new MessageChannel;return xb(r,e),[t,[t]]},deserialize(r){return r.start(),m_(r)}},eE={canHandle:r=>yb(r)&&p_ in r,serialize({value:r}){let e;return r instanceof Error?e={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:e={isError:!1,value:r},[e,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},bb=new Map([["proxy",qx],["throw",eE]]);function xb(r,e=self){e.addEventListener("message",function t(n){if(!n||!n.data)return;const{id:i,type:s,path:u}=Object.assign({path:[]},n.data),c=(n.data.argumentList||[]).map(Uc);let d;try{const p=u.slice(0,-1).reduce((E,x)=>E[x],r),_=u.reduce((E,x)=>E[x],r);switch(s){case 0:d=_;break;case 1:p[u.slice(-1)[0]]=Uc(n.data.value),d=!0;break;case 2:d=_.apply(p,c);break;case 3:{const E=new _(...c);d=Tb(E)}break;case 4:{const{port1:E,port2:x}=new MessageChannel;xb(r,x),d=iE(E,[E])}break;case 5:d=void 0;break}}catch(p){d={value:p,[p_]:0}}Promise.resolve(d).catch(p=>({value:p,[p_]:0})).then(p=>{const[_,E]=v_(p);e.postMessage(Object.assign(Object.assign({},_),{id:i}),E),s===5&&(e.removeEventListener("message",t),Eb(e))})}),e.start&&e.start()}function tE(r){return r.constructor.name==="MessagePort"}function Eb(r){tE(r)&&r.close()}function m_(r,e){return g_(r,[],e)}function km(r){if(r)throw new Error("Proxy has been released and is not useable")}function g_(r,e=[],t=function(){}){let n=!1;const i=new Proxy(t,{get(s,u){if(km(n),u===Jx)return()=>pf(r,{type:5,path:e.map(c=>c.toString())}).then(()=>{Eb(r),n=!0});if(u==="then"){if(e.length===0)return{then:()=>i};const c=pf(r,{type:0,path:e.map(d=>d.toString())}).then(Uc);return c.then.bind(c)}return g_(r,[...e,u])},set(s,u,c){km(n);const[d,p]=v_(c);return pf(r,{type:1,path:[...e,u].map(_=>_.toString()),value:d},p).then(Uc)},apply(s,u,c){km(n);const d=e[e.length-1];if(d===Qx)return pf(r,{type:4}).then(Uc);if(d==="bind")return g_(r,e.slice(0,-1));const[p,_]=Sb(c);return pf(r,{type:2,path:e.map(E=>E.toString()),argumentList:p},_).then(Uc)},construct(s,u){km(n);const[c,d]=Sb(u);return pf(r,{type:3,path:e.map(p=>p.toString()),argumentList:c},d).then(Uc)}});return i}function nE(r){return Array.prototype.concat.apply([],r)}function Sb(r){const e=r.map(v_);return[e.map(t=>t[0]),nE(e.map(t=>t[1]))]}const Ab=new WeakMap;function iE(r,e){return Ab.set(r,e),r}function Tb(r){return Object.assign(r,{[_b]:!0})}function OT(r,e=self,t="*"){return{postMessage:(n,i)=>r.postMessage(n,t,i),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function v_(r){for(const[e,t]of bb)if(t.canHandle(r)){const[n,i]=t.serialize(r);return[{type:3,name:e,value:n},i]}return[{type:0,value:r},Ab.get(r)||[]]}function Uc(r){switch(r.type){case 3:return bb.get(r.name).deserialize(r.value);case 0:return r.value}}function pf(r,e,t){return new Promise(n=>{const i=rE();r.addEventListener("message",function s(u){!u.data||!u.data.id||u.data.id!==i||(r.removeEventListener("message",s),n(u.data))}),r.start&&r.start(),r.postMessage(Object.assign({id:i},e),t)})}function rE(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var mf=o("41b11af1442716978a08");function sE(r=1,e=1){const t=Object(o_.b)(r,e,{willReadFrequently:!0});return t.getContext("2d").imageSmoothingEnabled=!1,t}function aE(r,e={}){return Object(mf.a)(r,{...e,canvas:sE()})}class oE{constructor(e){const{createWorker:t,runWorker:n,size:i=window.navigator.hardwareConcurrency}=e;this._createWorker=t,this._runWorker=n,this.size=i,this.workers=[],this.lastWorkerIndex=-1,this._updateWorkers()}_updateWorkers(){if(this.workers.length!==this.size)for(let e=0;e<this.size;++e)this.workers.push(this._createWorker())}_incIndex(){this.lastWorkerIndex=(this.lastWorkerIndex+1)%this.size}exec(e){return this._incIndex(),e(this.workers[this.lastWorkerIndex])}run(...e){return this._incIndex(),this._runWorker(this.workers[this.lastWorkerIndex],e)}}var uE=o("7929edb069e080c2f886"),cE=o.n(uE);const lE=new oE({createWorker:()=>m_(new cE.a),runWorker:(r,e)=>r(...e),size:Math.min(2,window.navigator.hardwareConcurrency)});var wb=async function(r){const e=await lE.run(r);return Zx.a.map(e,async t=>{if(t.geometryType===Fc.GEOMETRY_TYPES.BITMAP){const n=URL.createObjectURL(new Blob([t.geometry.bitmap]));t.geometry.bitmap=await aE(n)}return t},{concurrency:10})};function Mb(r,e,t){return e=fE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fE(r){var e=hE(r,"string");return typeof e=="symbol"?e:String(e)}function hE(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function dE(r){r.destroy()}class Cb{constructor(e={}){Mb(this,"free",[]),Mb(this,"used",new Set);const{min:t=1/0,onRelease:n=dE,onFree:i=ia.e,onAcquire:s=ia.e}=e;this.min=t,this._onRelease=n,this._onFree=i,this._onAcquire=s}acquire(){if(!this.free.length)return null;const e=this.free.pop();return this.used.add(e),this._onAcquire(e),e}add(e){this.used.add(e)}release(e){return this.used.has(e)?(this.used.delete(e),this.free.length<this.min?(this._onFree(e),this.free.push(e)):this._onRelease(e),!0):!1}destroy(){return this.free.forEach(e=>{this._onRelease(e)}),this.used.forEach(e=>{this._onRelease(e)}),this.free=null,this.used=null,null}}function pE(r,e,t){return e=mE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function mE(r){var e=gE(r,"string");return typeof e=="symbol"?e:String(e)}function gE(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class gf extends qh{constructor(...e){super(...e),pE(this,"_figure",null)}get figure(){return this._figure}set figure(e){const t=this.figure,n=e;this._figure=n,this.figureGraphics=n,this.figure?(this.id&&(this.figure.userData.id=this.id),this.figure.userData.type="figure",n!==t&&this._attachFigureEvents(this.figure)):t&&this._detachFigureEvents(t),this.graphics&&(this.graphics.userData.figure=this.figure),this.emit("figure",this.figure)}_attachFigureEvents(){}_detachFigureEvents(){}_figureChanged(){const{graphics:e}=this;if(!e)return;let t=null;this.figure&&(t=e.getObjectBy(n=>n.userData.type==="figure")),e.userData.figure=t,t&&this.id&&(t.userData.id=this.id)}_onIdChanged(){this._figureChanged()}_onSceneChanged(){this._figureChanged()}_onGraphicsChanged(e,t){super._onGraphicsChanged(),t&&(t.userData.figure=null),e&&(e.userData.figure=this.figure,this.id&&(this.figure.userData.id=this.id))}_onDestroy(){super._onDestroy(),this.figure&&(this.figure=null)}}function __(r,e,t){return e=vE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vE(r){var e=_E(r,"string");return typeof e=="symbol"?e:String(e)}function _E(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class yE extends gf{constructor(e={}){super(e),__(this,"opacity",null),__(this,"width",0),__(this,"height",0);const{visible:t,bitmap:n,position:i,rotation:s,scale:u}=e;this.leftTopGroup=new _s,this.figTransformGroup=new _s,this.leftTopGroup.add(this.figTransformGroup),this.figure=new Vu(zm,new er({side:oe,transparent:!0,alphaTest:1e-5})),this.figTransformGroup.add(this.figure),n&&this.setBitmap(n),i&&this.setPosition(i),s&&this.setRotation(s),u&&this.setScale(u),this.setGraphics(this.leftTopGroup),this.setVisible(t)}setColor(e){this.color=e,this.figure&&this.figure.material.color.set(this.color),this.sendChanged()}setOpacity(e){this.opacity=e,this.figure&&(this.figure.material.opacity=this.opacity,this.sendChanged())}setOffset(e,t){this.figure.position.x=e,this.figure.position.y=t,this.sendChanged()}setPosition(e){this.figTransformGroup.position.copy(e),this.sendChanged()}setRotation(e){this.figTransformGroup.rotation.set(e.x,e.y,e.z),this.sendChanged()}setScale(e){this.figure.scale.copy(e),this.sendChanged()}_createTextureFromImage(e){if(!e)return Zo;const t=new Rh(e);return t.flipY=!1,t.generateMipmaps=!1,t.wrapS=zn,t.wrapT=zn,t.minFilter=Qn,t.magFilter=Qn,t.needsUpdate=!0,t}setBitmap(e){const t=this.figure.material.map;if(!e)t!==Zo&&(t&&t.dispose(),this.figure.visible=!1,this.figure.material.map=Zo,this.figure.material.needsUpdate=!0),this.setSize(1,1);else{this.figure.visible=!0;let n=!1;if(!t)n=!0;else{const i=e.width,s=e.height,u=t.image.width,c=t.image.height;u!==i||c!==s?n=!0:(t.image=e,t.needsUpdate=!0)}if(n){const i=this._createTextureFromImage(e);this.figure.material.map=i,this.figure.material.needsUpdate=!0,this.setSize(e.width,e.height)}}this.sendChanged()}set bitmapNeedsUpdate(e){e&&(this.figure.material.map.needsUpdate=!0,this.figure.material.needsUpdate=!0,this.sendChanged())}setWidth(e){this.width=e,this.leftTopGroup.position.x=this.width/2,this.figure.scale.x=this.width,this.sendChanged()}setHeight(e){this.height=e,this.leftTopGroup.position.y=this.height/2,this.figure.scale.y=this.height,this.sendChanged()}setSize(e,t){this.setWidth(e),this.setHeight(t)}onGraphicsDestroy(){[this.figure].forEach(e=>{e!=null&&e.dispose&&e.dispose()})}}function vf(r,e,t){if(!r)return null;let n;if(r.objectId!=null){const i=e.getObjectById(r.objectId);n=i==null?void 0:i.classTitle}return n||(n=r.classTitle),t==null?void 0:t.getClassByTitle(n)}function _f(r){return r==null?void 0:r.color}function yf(r){return r==null?void 0:r.geometry}function ed(r,e,t){return e=bE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function bE(r){var e=xE(r,"string");return typeof e=="symbol"?e:String(e)}function xE(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class EE{set opacity(e){this.shapeObj.setOpacity(e)}set visible(e){this.shapeObj.setVisible(e)}constructor(){ed(this,"view",null),ed(this,"scene",null),ed(this,"figure",null),ed(this,"sceneCache",null),ed(this,"geomVersion",null),this.shapeObj=new yE}update(){if(this.shapeObj.setScene(this.scene),this.figure){const e=vf(this.figure,this.annObjects,this.projectMeta),t=_f(e),n=yf(this.figure);this.shapeObj.setId(this.figure.id),this.shapeObj.setColor(t),this.shapeObj.setBitmap(n.bitmap),this.shapeObj.setOffset(n.offset.x,n.offset.y),this.geomVersion!==n.version&&(this.shapeObj.bitmapNeedsUpdate=!0,this.geomVersion=n.version)}}destroy(){this.shapeObj&&(this.shapeObj.destroy(),this.shapeObj=null)}}function Qo(r,e,t){return e=SE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function SE(r){var e=AE(r,"string");return typeof e=="symbol"?e:String(e)}function AE(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}const y_=new ni,Vm=new ni,TE=1,Ob=2;class Pb extends qh{constructor(e={}){var t;super(e),Qo(this,"id",null),Qo(this,"scene",null),Qo(this,"cache",null),Qo(this,"visible",null),Qo(this,"position",null),Qo(this,"color",null),Qo(this,"radius",null),Qo(this,"borderColor",null),Qo(this,"borderRadius",null);const{visible:n,position:i,color:s,radius:u=5,borderRadius:c,borderColor:d}=e;u!=null&&this.setRadius(u),c!=null&&this.setBorderRadius(c),s!=null&&this.setColor(u),d!=null&&this.setBorderColor(d);const p=this.radius,_=(t=this.borderRadius)!=null?t:p+Ob,E=new Vu(new oo(p,32),new er({color:this.currentColor,side:oe,depthTest:!1,transparent:!0}));E.renderOrder=999999,E.visible=this.visible,this.border=new Vu(new oo(_,32),new er({color:this.borderColor,side:oe,depthTest:!1,transparent:!0})),this.border.renderOrder=999998,this.border.visible=!0,E.add(this.border);let x=null;this.border.onBeforeRender=(w,R,C)=>{if(C.isOrthographicCamera){if(x!=null&&Math.abs(x-C.zoom)<1e-5)return;x=C.zoom;const O=TE/C.zoom;Vm.set(O,O,1),this.graphics.parent&&(this.graphics.parent.getWorldScale(y_),Vm.x/=y_.x,Vm.y/=y_.y),this.graphics.scale.copy(Vm),this.graphics.updateWorldMatrix(!1,!0)}},this.setGraphics(E),n!=null&&this.setVisible(n),i&&this.setPosition(i),s!=null&&this.setColor(s),d!=null&&this.setColor(d)}get currentColor(){var e;return(e=this.color)!=null?e:30207}get currentBorderColor(){var e;return(e=this.borderColor)!=null?e:16777215}setPosition(e){var t;this.position=e,this.graphics&&this.graphics.position.set(e.x,e.y,(t=e.z)!=null?t:0)}setColor(e){this.color=e,this.graphics&&this.graphics.material.color.set(this.currentColor)}setBorderColor(e){this.borderColor=e,this.border&&this.border.material.color.set(this.currentBorderColor)}setRadius(e){this.radius=e,this.graphics&&(this.graphics.geometry&&this.graphics.geometry.dispose(),this.graphics.geometry=new oo(e,32),this.borderRadius==null&&this.setBorderRadius(e+Ob))}setBorderRadius(e){this.borderRadius=e,this.border&&(this.border.geometry&&this.border.geometry.dispose(),this.border.geometry=new oo(e,32))}onGraphicsDestroy(){var e;(e=this.border)!=null&&e.dispose&&this.border.dispose()}}const Ib=new fa,jm=new he;class Rb extends ry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new Jt(e,3)),this.setAttribute("uv",new Jt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new Kv(t,6,1);return this.setAttribute("instanceStart",new Cs(n,3,0)),this.setAttribute("instanceEnd",new Cs(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new Kv(t,6,1);return this.setAttribute("instanceColorStart",new Cs(n,3,0)),this.setAttribute("instanceColorEnd",new Cs(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new ym(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fa);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),Ib.setFromBufferAttribute(t),this.boundingBox.union(Ib))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Us),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let s=0,u=e.count;s<u;s++)jm.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(jm)),jm.fromBufferAttribute(t,s),i=Math.max(i,n.distanceToSquared(jm));if(this.boundingSphere.radius=Math.sqrt(i),Number.isNaN(this.boundingSphere.radius))throw new Error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}Gt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new vt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},Vr.line={uniforms:Ia.merge([Gt.common,Gt.fog,Gt.line]),vertexShader:`
    #include <common>
    #include <color_pars_vertex>
    #include <fog_pars_vertex>
    #include <logdepthbuf_pars_vertex>
    #include <clipping_planes_pars_vertex>

    uniform float linewidth;
    uniform vec2 resolution;

    attribute vec3 instanceStart;
    attribute vec3 instanceEnd;

    attribute vec3 instanceColorStart;
    attribute vec3 instanceColorEnd;

    #ifdef WORLD_UNITS

      varying vec4 worldPos;
      varying vec3 worldStart;
      varying vec3 worldEnd;

      #ifdef USE_DASH

        varying vec2 vUv;

      #endif

    #else

      varying vec2 vUv;

    #endif

    #ifdef USE_DASH

      uniform float dashScale;
      attribute float instanceDistanceStart;
      attribute float instanceDistanceEnd;
      varying float vLineDistance;

    #endif

    void trimSegment( const in vec4 start, inout vec4 end ) {

      // trim end segment so it terminates between the camera plane and the near plane

      // conservative estimate of the near plane
      float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
      float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
      float nearEstimate = - 0.5 * b / a;

      float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

      end.xyz = mix( start.xyz, end.xyz, alpha );

    }

    void main() {

      #ifdef USE_COLOR

        vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

      #endif

      #ifdef USE_DASH

        vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
        vUv = uv;

      #endif

      float aspect = resolution.x / resolution.y;

      // camera space
      vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
      vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

      #ifdef WORLD_UNITS

        worldStart = start.xyz;
        worldEnd = end.xyz;

      #else

        vUv = uv;

      #endif

      // special case for perspective projection, and segments that terminate either in, or behind, the camera plane
      // clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
      // but we need to perform ndc-space calculations in the shader, so we must address this issue directly
      // perhaps there is a more elegant solution -- WestLangley

      bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

      if ( perspective ) {

        if ( start.z < 0.0 && end.z >= 0.0 ) {

          trimSegment( start, end );

        } else if ( end.z < 0.0 && start.z >= 0.0 ) {

          trimSegment( end, start );

        }

      }

      // clip space
      vec4 clipStart = projectionMatrix * start;
      vec4 clipEnd = projectionMatrix * end;

      // ndc space
      vec3 ndcStart = clipStart.xyz / clipStart.w;
      vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

      // direction
      vec2 dir = ndcEnd.xy - ndcStart.xy;

      // account for clip-space aspect ratio
      dir.x *= aspect;
      dir = normalize( dir );

      #ifdef WORLD_UNITS

        // get the offset direction as perpendicular to the view vector
        vec3 worldDir = normalize( end.xyz - start.xyz );
        vec3 offset;
        if ( position.y < 0.5 ) {

          offset = normalize( cross( start.xyz, worldDir ) );

        } else {

          offset = normalize( cross( end.xyz, worldDir ) );

        }

        // sign flip
        if ( position.x < 0.0 ) offset *= - 1.0;

        float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

        // don't extend the line if we're rendering dashes because we
        // won't be rendering the endcaps
        #ifndef USE_DASH

          // extend the line bounds to encompass  endcaps
          start.xyz += - worldDir * linewidth * 0.5;
          end.xyz += worldDir * linewidth * 0.5;

          // shift the position of the quad so it hugs the forward edge of the line
          offset.xy -= dir * forwardOffset;
          offset.z += 0.5;

        #endif

        // endcaps
        if ( position.y > 1.0 || position.y < 0.0 ) {

          offset.xy += dir * 2.0 * forwardOffset;

        }

        // adjust for linewidth
        offset *= linewidth * 0.5;

        // set the world position
        worldPos = ( position.y < 0.5 ) ? start : end;
        worldPos.xyz += offset;

        // project the worldpos
        vec4 clip = projectionMatrix * worldPos;

        // shift the depth of the projected points so the line
        // segments overlap neatly
        vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
        clip.z = clipPose.z * clip.w;

      #else

        vec2 offset = vec2( dir.y, - dir.x );
        // undo aspect ratio adjustment
        dir.x /= aspect;
        offset.x /= aspect;

        // sign flip
        if ( position.x < 0.0 ) offset *= - 1.0;

        // endcaps
        if ( position.y < 0.0 ) {

          offset += - dir;

        } else if ( position.y > 1.0 ) {

          offset += dir;

        }

        // adjust for linewidth
        offset *= linewidth;

        // adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
        offset /= resolution.y;

        // select end
        vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

        // back to clip space
        offset *= clip.w;

        clip.xy += offset;

      #endif

      gl_Position = clip;

      vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

      #include <logdepthbuf_vertex>
      #include <clipping_planes_vertex>
      #include <fog_vertex>

    }
    `,fragmentShader:`
    uniform vec3 diffuse;
    uniform float opacity;
    uniform float linewidth;

    #ifdef USE_DASH

      uniform float dashOffset;
      uniform float dashSize;
      uniform float gapSize;

    #endif

    varying float vLineDistance;

    #ifdef WORLD_UNITS

      varying vec4 worldPos;
      varying vec3 worldStart;
      varying vec3 worldEnd;

      #ifdef USE_DASH

        varying vec2 vUv;

      #endif

    #else

      varying vec2 vUv;

    #endif

    #include <common>
    #include <color_pars_fragment>
    #include <fog_pars_fragment>
    #include <logdepthbuf_pars_fragment>
    #include <clipping_planes_pars_fragment>

    vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

      float mua;
      float mub;

      vec3 p13 = p1 - p3;
      vec3 p43 = p4 - p3;

      vec3 p21 = p2 - p1;

      float d1343 = dot( p13, p43 );
      float d4321 = dot( p43, p21 );
      float d1321 = dot( p13, p21 );
      float d4343 = dot( p43, p43 );
      float d2121 = dot( p21, p21 );

      float denom = d2121 * d4343 - d4321 * d4321;

      float numer = d1343 * d4321 - d1321 * d4343;

      mua = numer / denom;
      mua = clamp( mua, 0.0, 1.0 );
      mub = ( d1343 + d4321 * ( mua ) ) / d4343;
      mub = clamp( mub, 0.0, 1.0 );

      return vec2( mua, mub );

    }

    void main() {

      #include <clipping_planes_fragment>

      #ifdef USE_DASH

        if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

        if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

      #endif

      float alpha = opacity;

      #ifdef WORLD_UNITS

        // Find the closest points on the view ray and the line segment
        vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
        vec3 lineDir = worldEnd - worldStart;
        vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

        vec3 p1 = worldStart + lineDir * params.x;
        vec3 p2 = rayEnd * params.y;
        vec3 delta = p1 - p2;
        float len = length( delta );
        float norm = len / linewidth;

        #ifndef USE_DASH

          #ifdef USE_ALPHA_TO_COVERAGE

            float dnorm = fwidth( norm );
            alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

          #else

            if ( norm > 0.5 ) {

              discard;

            }

          #endif

        #endif

      #else

        #ifdef USE_ALPHA_TO_COVERAGE

          // artifacts appear on some hardware if a derivative is taken within a conditional
          float a = vUv.x;
          float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
          float len2 = a * a + b * b;
          float dlen = fwidth( len2 );

          if ( abs( vUv.y ) > 1.0 ) {

            alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

          }

        #else

          if ( abs( vUv.y ) > 1.0 ) {

            float a = vUv.x;
            float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
            float len2 = a * a + b * b;

            if ( len2 > 1.0 ) discard;

          }

        #endif

      #endif

      vec4 diffuseColor = vec4( diffuse, alpha );

      #include <logdepthbuf_fragment>
      #include <color_fragment>

      gl_FragColor = vec4( diffuseColor.rgb, alpha );

      #include <tonemapping_fragment>
      #include <encodings_fragment>
      #include <fog_fragment>
      #include <premultiplied_alpha_fragment>

    }
    `};class b_ extends Zi{constructor(e){super({type:"LineMaterial",uniforms:Ia.clone(Vr.line.uniforms),vertexShader:Vr.line.vertexShader,fragmentShader:Vr.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get(){return this.uniforms.diffuse.value},set(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get(){return"WORLD_UNITS"in this.defines},set(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get(){return this.uniforms.linewidth.value},set(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get(){return Boolean("USE_DASH"in this.defines)},set(t){Boolean(t)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get(){return this.uniforms.dashScale.value},set(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get(){return this.uniforms.dashSize.value},set(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get(){return this.uniforms.gapSize.value},set(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set(t){Boolean(t)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const Lb=new he,Db=new he,ns=new di,is=new di,co=new di,x_=new he,E_=new kn,rs=new O1,Fb=new he,Wm=new fa,Hm=new Us,lo=new di;let fo,Nc;function Ub(r,e,t){return lo.set(0,0,-e,1).applyMatrix4(r.projectionMatrix),lo.multiplyScalar(1/lo.w),lo.x=Nc/t.width,lo.y=Nc/t.height,lo.applyMatrix4(r.projectionMatrixInverse),lo.multiplyScalar(1/lo.w),Math.abs(Math.max(lo.x,lo.y))}function wE(r,e){const t=r.matrixWorld,n=r.geometry,i=n.attributes.instanceStart,s=n.attributes.instanceEnd,u=Math.min(n.instanceCount,i.count);for(let c=0,d=u;c<d;c++){rs.start.fromBufferAttribute(i,c),rs.end.fromBufferAttribute(s,c),rs.applyMatrix4(t);const p=new he,_=new he;fo.distanceSqToSegment(rs.start,rs.end,_,p),_.distanceTo(p)<Nc*.5&&e.push({point:_,pointOnLine:p,distance:fo.origin.distanceTo(_),object:r,face:null,faceIndex:c,uv:null,uv2:null})}}function ME(r,e,t){const n=e.projectionMatrix,s=r.material.resolution,u=r.matrixWorld,c=r.geometry,d=c.attributes.instanceStart,p=c.attributes.instanceEnd,_=Math.min(c.instanceCount,d.count),E=-e.near;fo.at(1,co),co.w=1,co.applyMatrix4(e.matrixWorldInverse),co.applyMatrix4(n),co.multiplyScalar(1/co.w),co.x*=s.x/2,co.y*=s.y/2,co.z=0,x_.copy(co),E_.multiplyMatrices(e.matrixWorldInverse,u);for(let x=0,w=_;x<w;x++){if(ns.fromBufferAttribute(d,x),is.fromBufferAttribute(p,x),ns.w=1,is.w=1,ns.applyMatrix4(E_),is.applyMatrix4(E_),ns.z>E&&is.z>E)continue;if(ns.z>E){const G=ns.z-is.z,H=(ns.z-E)/G;ns.lerp(is,H)}else if(is.z>E){const G=is.z-ns.z,H=(is.z-E)/G;is.lerp(ns,H)}ns.applyMatrix4(n),is.applyMatrix4(n),ns.multiplyScalar(1/ns.w),is.multiplyScalar(1/is.w),ns.x*=s.x/2,ns.y*=s.y/2,is.x*=s.x/2,is.y*=s.y/2,rs.start.copy(ns),rs.start.z=0,rs.end.copy(is),rs.end.z=0;const C=rs.closestPointToPointParameter(x_,!0);rs.at(C,Fb);const O=Zu.lerp(ns.z,is.z,C),k=O>=-1&&O<=1,J=x_.distanceTo(Fb)<Nc*.5;if(k&&J){rs.start.fromBufferAttribute(d,x),rs.end.fromBufferAttribute(p,x),rs.start.applyMatrix4(u),rs.end.applyMatrix4(u);const G=new he,H=new he;fo.distanceSqToSegment(rs.start,rs.end,H,G),t.push({point:H,pointOnLine:G,distance:fo.origin.distanceTo(H),object:r,face:null,faceIndex:x,uv:null,uv2:null})}}}class CE extends Vu{constructor(e=new Rb,t=new b_({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let u=0,c=0,d=t.count;u<d;u+=1,c+=2)Lb.fromBufferAttribute(t,u),Db.fromBufferAttribute(n,u),i[c]=c===0?0:i[c-1],i[c+1]=i[c]+Lb.distanceTo(Db);const s=new Kv(i,2,1);return e.setAttribute("instanceDistanceStart",new Cs(s,1,0)),e.setAttribute("instanceDistanceEnd",new Cs(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,i=e.camera;if(i===null&&!n)throw new Error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;fo=e.ray;const u=this.matrixWorld,c=this.geometry,d=this.material;Nc=d.linewidth+s,c.boundingSphere===null&&c.computeBoundingSphere(),Hm.copy(c.boundingSphere).applyMatrix4(u);let p;if(n)p=Nc*.5;else{const E=Math.max(i.near,Hm.distanceToPoint(fo.origin));p=Ub(i,E,d.resolution)}if(Hm.radius+=p,fo.intersectsSphere(Hm)===!1)return;c.boundingBox===null&&c.computeBoundingBox(),Wm.copy(c.boundingBox).applyMatrix4(u);let _;if(n)_=Nc*.5;else{const E=Math.max(i.near,Wm.distanceToPoint(fo.origin));_=Ub(i,E,d.resolution)}Wm.expandByScalar(_),fo.intersectsBox(Wm)!==!1&&(n?wE(this,t):ME(this,i,t))}}class S_ extends Rb{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setColors(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class OE extends CE{constructor(e=new S_,t=new b_({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}function Ps(r,e,t){return e=PE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function PE(r){var e=IE(r,"string");return typeof e=="symbol"?e:String(e)}function IE(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}const Ym=new ni,td=new D1;class nd extends gf{get currentLineWidth(){return Math.max(this.lineWidth,1)*window.devicePixelRatio}setColor(e){this.figure&&this.color!==e&&(this.color=e,this.figure.material.color.set(e),this.sendChanged())}setOpacity(e){this.figure&&this.opacity!==e&&(this.opacity=e,this.figure.material.opacity=e,this.sendChanged())}setDashed(e){this.dashed!==e&&(this.dashed=e,this.applyMatOpts())}setLineScale(e){this.lineScale!==e&&(this.lineScale=e,this.applyMatOpts())}setLineWidth(e){if(this.lineWidth===e)return;this.lineWidth=e;const t=this.currentLineWidth;this.figure.material.linewidth=t,this.sendChanged()}setDashSize(e){this.dashSize!==e&&(this.dashSize=e,this.applyMatOpts())}setGapSize(e){this.gapSize!==e&&(this.gapSize=e,this.applyMatOpts())}setClosed(e){this.closed!==e&&(this.closed=e,this.redraw())}setApplyZoom(e){this.applyZoom=e}setApplyZoomFactor(e){this.applyZoomFactor=e,this.applyZoom&&(this.lastZoomVal=null)}applyMatOpts(e=!1){if(!e){this._applyMatChanged=!0,this.sendChanged();return}const t=this.figure.material;this.color!=null&&t.color.set(this.color),this.opacity!=null&&(t.opacity=this.opacity),this.currentLineWidth!=null&&(t.linewidth=this.currentLineWidth),t.dashed=!!this.dashed,t.dashed&&(this.lineScale!=null&&(t.dashScale=this.lineScale),this.dashSize!=null&&(t.dashSize=this.dashSize),this.gapSize!=null&&(t.gapSize=this.gapSize)),t.dashed?t.defines.USE_DASH="":delete t.defines.USE_DASH,t.needsUpdate=!0,this._applyMatChanged=!1}setPoints(e){this.points=e,this.redraw()}redraw(){var e;if(!this.figure)return;if(this.figure.geometry&&this.figure.geometry.dispose(),!this.points||this.points.length<2){this.figure.visible=!1,this.sendChanged();return}this.figure.visible=!0;const t=this.points.reduce((i,s)=>{var u;return i.push(s.position.x,s.position.y,(u=s.position.z)!=null?u:0),i},[]);if(this.closed&&this.points.length){const[i]=this.points;t.push(i.position.x,i.position.y,(e=i.position.z)!=null?e:0)}const n=new S_;n.setPositions(t),this.figure.geometry=n,this.figure.computeLineDistances(),this.sendChanged()}constructor(e={}){super(e),Ps(this,"opacity",null),Ps(this,"color",null),Ps(this,"position",null),Ps(this,"rotation",null),Ps(this,"scale",null),Ps(this,"points",null),Ps(this,"dashed",null),Ps(this,"lineWidth",null),Ps(this,"dashSize",null),Ps(this,"gapSize",null),Ps(this,"closed",null),Ps(this,"lineScale",null),Ps(this,"applyZoom",!0),Ps(this,"applyZoomFactor",10),Ps(this,"_applyMatChanged",!1);const{visible:t,points:n,position:i,rotation:s,scale:u,color:c}=e;this.figure=new OE(new S_,new b_({linewidth:1,color:16777215,side:oe,visible:!0,opacity:1,transparent:!0,dashed:!1}));const d=new _s;d.add(this.figure),i&&this.setPosition(i),s&&this.setRotation(s),u&&this.setScale(u),c!=null&&this.setColor(c),n&&this.setPoints(n),this.lastZoomVal=null,this.figure.onBeforeRender=(p,_,E)=>{if(this._applyMatChanged&&this.applyMatOpts(!0),p.getCurrentViewport(td),(td.z!==this.figure.material.resolution.x||td.w!==this.figure.material.resolution.y)&&this.figure.material.resolution.set(td.z,td.w),E.isOrthographicCamera){if(!this.dashed||!this.applyZoom||this.lastZoomVal!=null&&Math.abs(this.lastZoomVal-E.zoom)<1e-5)return;this.lastZoomVal=E.zoom;const x=E.zoom/this.applyZoomFactor;Ym.set(x,x,1),this.figure.material.dashScale=(Ym.x*Ym.y*Ym.z)**(1/3)}},this.setGraphics(d),t!=null&&this.setVisible(t),this.applyMatOpts()}setPosition(e){this.graphics.position.copy(e),this.sendChanged()}setRotation(e){this.graphics.rotation.set(e.x,e.y,e.z),this.sendChanged()}setScale(e){this.figure.scale.copy(e),this.sendChanged()}onGraphicsDestroy(){[this.figure].forEach(e=>{e!=null&&e.dispose&&e.dispose()})}}const RE=Object.freeze({x:0,y:0,z:0}),LE=Object.freeze({x:0,y:0,z:1});class DE extends qh{constructor(e={}){super(e);const t=new _s;this.solidLineShape=new nd,this.dashedLineShape=new nd,this.solidLineShape.setScene(t),this.dashedLineShape.setScene(t),this.setGraphics(t),this.solidLineShape.setDashed(!1),this.solidLineShape.setPosition(RE),this.dashedLineShape.setDashed(!0),this.dashedLineShape.setPosition(LE),this.dashedLineShape.setApplyZoomFactor(1)}setSolidVisible(e){this.solidLineShape.setVisible(e),this.sendChanged()}setDashVisible(e){this.dashedLineShape.setVisible(e),this.sendChanged()}setPoints(e){this.solidLineShape.setPoints(e),this.dashedLineShape.setPoints(e),this.sendChanged()}setOpacity(e){this.solidLineShape.setOpacity(e),this.dashedLineShape.setOpacity(e),this.sendChanged()}setSolidColor(e=0){this.solidLineShape.setColor(e),this.sendChanged()}setDashColor(e=16777215){this.dashedLineShape.setColor(e),this.sendChanged()}setLineWidth(e){this.solidLineShape.setLineWidth(e),this.dashedLineShape.setLineWidth(e),this.sendChanged()}setClosed(e){this.solidLineShape.setClosed(e),this.dashedLineShape.setClosed(e),this.sendChanged()}setPosition(e){this.graphics.position.copy(e),this.sendChanged()}setRotation(e){this.graphics.rotation.set(e.x,e.y,e.z),this.sendChanged()}setScale(e){this.graphics.scale.copy(e),this.sendChanged()}setApplyZoom(e){this.solidLineShape.setApplyZoom(e),this.dashedLineShape.setApplyZoom(e),this.sendChanged()}setApplyZoomFactor(e){this.solidLineShape.setApplyZoomFactor(e),this.sendChanged()}setLineScale(e){this.solidLineShape.setLineScale(e),this.dashedLineShape.setLineScale(e),this.sendChanged()}setDashSize(e){this.dashedLineShape.setDashSize(e),this.sendChanged()}setGapSize(e){this.dashedLineShape.setGapSize(e),this.sendChanged()}onGraphicsDestroy(){[this.solidLineShape,this.dashedLineShape].forEach(e=>{e!=null&&e.destroy&&e.destroy()})}}function Sr(r,e,t){return e=FE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function FE(r){var e=UE(r,"string");return typeof e=="symbol"?e:String(e)}function UE(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}const Nb=24;class NE extends gf{constructor(e={}){super(e),Sr(this,"hideOccluded",null),Sr(this,"renderOrder",null),Sr(this,"frustumCulled",null),Sr(this,"gpuPicking",null),Sr(this,"position",null),Sr(this,"rotation",null),Sr(this,"scale",null),Sr(this,"visible",null),Sr(this,"color",null),Sr(this,"opacity",null),Sr(this,"points",null),Sr(this,"edges",null),Sr(this,"showSelection",null),Sr(this,"lineWidth",null),Sr(this,"lineApplyZoom",null),Sr(this,"lineApplyZoomFactor",null),Sr(this,"showDisabled",!0),Sr(this,"pointsColors",null),Sr(this,"pointsRadius",5),Sr(this,"currentEdges",[]),Sr(this,"currentVertices",[]);const{position:t,rotation:n,scale:i}=e;this.figure=new _s;const s=new _s;s.add(this.figure),s.visible=this.visible,this.setGraphics(s),t&&this.setPosition(t),n&&this.setRotation(n),i&&this.setScale(i)}get pointBorderRadius(){return this.showSelection?7:0}get lineDashColor(){return this.showSelection?16777215:this.color}get pointsToDraw(){var e;return((e=this.points)!=null?e:[]).filter(t=>this.showDisabled?!0:!t.disabled)}get edgesToDraw(){var e;if(!((e=this.edges)!=null&&e.length))return[];const t=Object(ia.d)(this.points,"nodeId");return this.edges.map(n=>{const i=t.get(n.src),s=t.get(n.dst);return!i||!s?null:{...n,id:qy()(),points:[i,s],disabled:i.disabled||s.disabled}}).filter(n=>!!n&&(this.showDisabled?!0:!n.disabled))}redraw(){var e,t;(e=this.currentEdges)!=null&&e.length&&this.currentEdges.forEach(({edgeShape:n})=>{n.destroy()}),(t=this.currentVertices)!=null&&t.length&&this.currentVertices.forEach(({pointShape:n})=>{n.destroy()}),this.currentEdges=this.edgesToDraw.map(n=>{const i=new DE;return i.setId(n.id),i.setSolidColor(n.disabled?"#969696":n.color||this.color),i.setOpacity(this.opacity),i.setPoints(n.points),i.setDashColor(this.lineDashColor),i.setDashVisible(!1),i.setClosed(!1),i.setLineWidth(this.lineWidth),i.setDashSize(Nb),i.setGapSize(Nb),i.setScene(this.figure),{edgeShape:i,edge:n}}),this.currentVertices=this.pointsToDraw.map(n=>{var i;const s=new Pb;return s.setId(n.id),s.setPosition(n.position),s.setRadius(this.pointsRadius),s.setColor(n.disabled?"#969696":((i=this.pointsColors)==null?void 0:i[n.nodeId])||this.color),s.setBorderRadius(this.pointBorderRadius),s.setScene(this.figure),{pointShape:s,point:n}})}setColor(e){this.color=e,this.currentEdges.forEach(({edgeShape:t,edge:n})=>{t.setSolidColor(n.disabled?"#969696":n.color||this.color)}),this.currentVertices.forEach(({pointShape:t,point:n})=>{var i;t.setColor(n.disabled?"#969696":((i=this.pointsColors)==null?void 0:i[n.nodeId])||this.color)}),this.sendChanged()}setOpacity(){this.sendChanged()}setLineWidth(e){this.lineWidth=e,this.currentEdges.forEach(({edgeShape:t})=>{t.setLineWidth(this.lineWidth)})}setLineApplyZoom(e){this.lineApplyZoom=e,this.currentEdges.forEach(({edgeShape:t})=>{t.setApplyZoom(this.lineApplyZoom)})}setLineApplyZoomFactor(e){this.lineApplyZoomFactor=e,this.currentEdges.forEach(({edgeShape:t})=>{t.setApplyZoomFactor(this.lineApplyZoomFactor)})}setPointsRadius(e){this.pointsRadius=e,this.currentVertices.forEach(({pointShape:t})=>{t.setLineWidth(this.pointsRadius)})}setGeometryData(e,t,n){this.edges=e,this.pointsColors=t,this.points=n,this.redraw()}setPosition(e){this.graphics.position.copy(e),this.sendChanged()}setRotation(e){this.graphics.rotation.set(e.x,e.y,e.z),this.sendChanged()}setScale(e){this.figure.scale.copy(e),this.sendChanged()}onGraphicsDestroy(){[this.figure].forEach(e=>{e!=null&&e.dispose&&e.dispose()})}}function bf(r,e,t){return e=BE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function BE(r){var e=zE(r,"string");return typeof e=="symbol"?e:String(e)}function zE(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class GE{set visible(e){this.shapeObj.setVisible(e)}set lineWidth(e){this.shapeObj.setLineWidth(e)}set lineApplyZoom(e){this.shapeObj.setLineApplyZoom(e)}set lineApplyZoomFactor(e){this.shapeObj.setLineApplyZoomFactor(e)}constructor(){bf(this,"view",null),bf(this,"scene",null),bf(this,"figure",null),bf(this,"sceneCache",null),bf(this,"geomVersion",null),bf(this,"opacity",null),this.shapeObj=new NE}update(){var e,t;if(this.shapeObj.setScene(this.scene),this.figure){const n=vf(this.figure,this.annObjects,this.projectMeta),i=_f(n),s=yf(this.figure);this.shapeObj.setId(this.figure.id),this.shapeObj.setColor(i);const u=((e=n.geometry_config)==null?void 0:e.edges)||[],c=Object.keys(((t=n.geometry_config)==null?void 0:t.nodes)||[]).reduce((d,p)=>{const _=n.geometry_config.nodes[p];return d[p]=_.color,d},{});this.shapeObj.setGeometryData(u,c,s.points),this.geomVersion!==s.version&&(this.geomVersion=s.version)}}destroy(){this.shapeObj&&(this.shapeObj.destroy(),this.shapeObj=null)}}function kE(r,e,t){return e=VE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function VE(r){var e=jE(r,"string");return typeof e=="symbol"?e:String(e)}function jE(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class WE extends gf{constructor(e={}){super(e),kE(this,"point",null);const{visible:t,point:n,color:i,opacity:s,position:u,rotation:c,scale:d,radius:p,borderRadius:_,borderColor:E}=e,x=new _s;this.pointShape=new Pb,this.pointShape.setScene(x),n!=null&&this.setPoint(n),i!=null&&this.setColor(i),s!=null&&this.setOpacity(s),p!=null&&this.setRadius(p),_!=null&&this.setBorderRadius(_),E!=null&&this.setBorderColor(E),this.setGraphics(x),u!=null&&this.setPosition(u),c!=null&&this.setRotation(c),d!=null&&this.setScale(d),t!=null&&this.setVisible(t)}setPoint(e){this.point=e,this.pointShape.setPosition(this.point.position),this.sendChanged()}setColor(e){this.pointShape.setColor(e),this.sendChanged()}setOpacity(e){this.pointShape.setOpacity(e),this.sendChanged()}setRadius(e){this.pointShape.setRadius(e),this.sendChanged()}setBorderRadius(e){this.pointShape.setBorderRadius(e),this.sendChanged()}setPosition(e){this.graphics.position.copy(e),this.sendChanged()}setRotation(e){this.graphics.rotation.set(e.x,e.y,e.z),this.sendChanged()}setScale(e){this.graphics.scale.copy(e),this.sendChanged()}onGraphicsDestroy(){this.pointShape&&this.pointShape.destroy()}}function Bc(r,e,t){return e=HE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function HE(r){var e=YE(r,"string");return typeof e=="symbol"?e:String(e)}function YE(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class XE{set visible(e){this.shapeObj.setVisible(e)}constructor(){Bc(this,"view",null),Bc(this,"scene",null),Bc(this,"figure",null),Bc(this,"sceneCache",null),Bc(this,"geomVersion",null),Bc(this,"lineWidth",null),Bc(this,"opacity",null),this.shapeObj=new WE}update(){if(this.shapeObj.setScene(this.scene),this.figure){const e=vf(this.figure,this.annObjects,this.projectMeta),t=_f(e),n=yf(this.figure);this.shapeObj.setId(this.figure.id),this.shapeObj.setColor(t),this.shapeObj.setPoint(n.points[0]),this.geomVersion!==n.version&&(this.geomVersion=n.version)}}destroy(){this.shapeObj&&(this.shapeObj.destroy(),this.shapeObj=null)}}function ho(r,e,t){return e=KE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function KE(r){var e=$E(r,"string");return typeof e=="symbol"?e:String(e)}function $E(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}const ZE=new An;class QE extends gf{setColor(e){this.figure&&this.color!==e&&(this.color=e,this.figure.material.color.set(e),this.edgesPolyline.setColor(e),this.sendChanged())}setOpacity(e){this.figure&&this.opacity!==e&&(this.opacity=e,this.figure.material.opacity=e,this.sendChanged())}setLineWidth(e){this.lineWidth!==e&&(this.lineWidth=e,this.lineWidth===0?this.edgesPolyline.setVisible(!1):this.edgesPolyline.setVisible(!0),this.edgesPolyline.setLineWidth(e),this.sendChanged())}setLineApplyZoom(e){this.lineApplyZoom=e,this.edgesPolyline.setApplyZoom(e)}setLineApplyZoomFactor(e){this.lineApplyZoomFactor=e,this.edgesPolyline.setApplyZoomFactor(e)}setPoints(e,t){this.points=e,this.holes=t,this.edgesPolyline.setPoints(e),this.redraw()}redraw(){var e;if(!this.figure)return;if(this.figure.geometry&&this.figure.geometry.dispose(),!this.points||this.points.length<2){this.figure.visible=!1,this.sendChanged();return}this.figure.visible=!0;const t=new ko;t.setFromPoints(this.points.map(n=>n.position)),(e=this.holes)!=null&&e.length&&(t.holes=this.holes.map(n=>new bc(n.map(i=>i.position)))),t.autoClose=!0,this.figure.geometry=new wc(t),this.sendChanged()}constructor(e={}){super(e),ho(this,"opacity",null),ho(this,"color",null),ho(this,"position",null),ho(this,"rotation",null),ho(this,"scale",null),ho(this,"points",null),ho(this,"holes",null),ho(this,"lineWidth",null),ho(this,"lineApplyZoom",null),ho(this,"lineApplyZoomFactor",null);const{visible:t,points:n,holes:i,position:s,rotation:u,scale:c,color:d,opacity:p}=e;this.figure=new Vu(ZE,new er({side:oe,visible:!0,transparent:!0})),this.edgesPolyline=new nd,this.edgesPolyline.setVisible(!1),this.edgesPolyline.setScene(this.figure),this.edgesPolyline.setClosed(!0),n&&this.setPoints(n,i);const _=new _s;_.add(this.figure),s&&this.setPosition(s),u&&this.setRotation(u),c&&this.setScale(c),d!=null&&this.setColor(d),p!=null&&this.setOpacity(d),this.setGraphics(_),t!=null&&this.setVisible(t)}setPosition(e){this.graphics.position.copy(e),this.sendChanged()}setRotation(e){this.graphics.rotation.set(e.x,e.y,e.z),this.sendChanged()}setScale(e){this.figure.scale.copy(e),this.sendChanged()}onGraphicsDestroy(){[this.figure].forEach(e=>{e!=null&&e.dispose&&e.dispose()}),this.edgesPolyline&&this.edgesPolyline.destroy()}}function id(r,e,t){return e=JE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function JE(r){var e=qE(r,"string");return typeof e=="symbol"?e:String(e)}function qE(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class eS{set visible(e){this.shapeObj.setVisible(e)}set opacity(e){this.shapeObj.setOpacity(e)}set lineWidth(e){this.shapeObj.setLineWidth(e)}set lineApplyZoom(e){this.shapeObj.setLineApplyZoom(e)}set lineApplyZoomFactor(e){this.shapeObj.setLineApplyZoomFactor(e)}constructor(){id(this,"view",null),id(this,"scene",null),id(this,"figure",null),id(this,"sceneCache",null),id(this,"geomVersion",null),this.shapeObj=new QE}update(){if(this.shapeObj.setScene(this.scene),this.figure){const e=vf(this.figure,this.annObjects,this.projectMeta),t=_f(e),n=yf(this.figure);this.shapeObj.setId(this.figure.id),this.shapeObj.setColor(t),this.shapeObj.setPoints(n.points),this.geomVersion!==n.version&&(this.geomVersion=n.version)}}destroy(){this.shapeObj&&(this.shapeObj.destroy(),this.shapeObj=null)}}function xf(r,e,t){return e=tS(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function tS(r){var e=nS(r,"string");return typeof e=="symbol"?e:String(e)}function nS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class iS{set visible(e){this.shapeObj.setVisible(e)}set lineWidth(e){this.shapeObj.setLineWidth(e)}set lineApplyZoom(e){this.shapeObj.setApplyZoom(e)}set lineApplyZoomFactor(e){this.shapeObj.setApplyZoomFactor(e)}constructor(){xf(this,"view",null),xf(this,"scene",null),xf(this,"figure",null),xf(this,"sceneCache",null),xf(this,"geomVersion",null),xf(this,"opacity",null),this.shapeObj=new nd,this.shapeObj.setOpacity(1)}update(){if(this.shapeObj.setScene(this.scene),this.figure){const e=vf(this.figure,this.annObjects,this.projectMeta),t=_f(e),n=yf(this.figure);this.shapeObj.setId(this.figure.id),this.shapeObj.setColor(t),this.shapeObj.setPoints(n.points),this.geomVersion!==n.version&&(this.geomVersion=n.version)}}destroy(){this.shapeObj&&(this.shapeObj.destroy(),this.shapeObj=null)}}function Nr(r,e,t){return e=rS(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rS(r){var e=sS(r,"string");return typeof e=="symbol"?e:String(e)}function sS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class aS extends gf{constructor(e={}){super(e),Nr(this,"id",null),Nr(this,"cache",null),Nr(this,"visible",null),Nr(this,"opacity",.5),Nr(this,"color",16711680),Nr(this,"position",null),Nr(this,"rotation",null),Nr(this,"scale",null),Nr(this,"borderVisible",null),Nr(this,"lineWidth",null),Nr(this,"lineApplyZoom",null),Nr(this,"lineApplyZoomFactor",null),Nr(this,"showSelection",null),Nr(this,"points",null),Nr(this,"holes",null),Nr(this,"hideOccluded",null),Nr(this,"frustumCulled",null),Nr(this,"gpuPicking",null),Nr(this,"localPoints",Array.from(new Array(4)).map((p,_)=>({id:_+1,position:{x:0,y:0}})));const{visible:t,color:n,opacity:i,position:s,rotation:u,scale:c,points:d}=e;this.mainGroup=new _s,this.leftTopGroup=new _s,this.figure=new Vu(zm,new er({side:oe,visible:!0,transparent:!0})),this.figure.frustumCulled=!1,this.figTransformGroup=new _s,this.mainGroup.add(this.leftTopGroup),this.leftTopGroup.add(this.figTransformGroup),this.figTransformGroup.add(this.figure),this.figTransformGroup.visible=t,this.edgesPolyline=new nd,this.edgesPolyline.setVisible(!1),this.edgesPolyline.setScene(this.mainGroup),this.edgesPolyline.setClosed(!0),s&&this.setPosition(s),u&&this.setRotation(u),c&&this.setScale(c),n!=null&&this.setColor(n),i!=null&&this.setOpacity(i),d&&this.setPoints(d),this.setGraphics(this.mainGroup)}get linePoints(){var e;return((e=this.points)==null?void 0:e.length)!==2?ia.a:this.localPoints}get lineVisible(){return this.borderVisible||this.showSelection}get lineDashColor(){return this.showSelection?16777215:this.color}setPoints(e){this.points=e,this.redraw(),this.updateLinePoints(),this.edgesPolyline.setPoints(this.linePoints),this.sendChanged()}setColor(e){this.color=e,this.figure&&this.figure.material.color.set(this.color),this.edgesPolyline.setColor(e),this.sendChanged()}setOpacity(e){this.opacity=e,this.figure&&(this.figure.material.opacity=this.opacity,this.sendChanged())}setLineWidth(e){this.lineWidth=e,this.lineWidth===0?this.edgesPolyline.setVisible(!1):this.edgesPolyline.setVisible(!0),this.edgesPolyline.setLineWidth(e),this.sendChanged()}setLineApplyZoom(e){this.lineApplyZoom=e,this.edgesPolyline.setApplyZoom(e)}setLineApplyZoomFactor(e){this.lineApplyZoomFactor=e,this.edgesPolyline.setApplyZoomFactor(e)}setPosition(e){this.figTransformGroup.position.copy(e),this.edgesPolyline.setPosition(e),this.sendChanged()}setRotation(e){this.figTransformGroup.rotation.set(e.x,e.y,e.z),this.edgesPolyline.setRotation(e),this.sendChanged()}setScale(e){this.figure.scale.copy(e),this.edgesPolyline.setScale(e),this.sendChanged()}redraw(){if(!this.figure)return;if(!this.points||this.points.length<2){this.figure.visible=!1;return}this.figure.visible=!0;const[e,t]=this.points,n=Math.min(e.position.x,t.position.x),i=Math.min(e.position.y,t.position.y),s=Math.max(e.position.x,t.position.x),u=Math.max(e.position.y,t.position.y),c=s-n,d=u-i;this.leftTopGroup.position.set(c/2+n,d/2+i,0),this.figTransformGroup.scale.set(c,d,1)}updateLinePoints(){var e;if(((e=this.points)==null?void 0:e.length)!==2)return;const[t,n]=this.points;this.localPoints[0].position.x=t.position.x,this.localPoints[0].position.y=t.position.y,this.localPoints[1].position.x=t.position.x,this.localPoints[1].position.y=n.position.y,this.localPoints[2].position.x=n.position.x,this.localPoints[2].position.y=n.position.y,this.localPoints[3].position.x=n.position.x,this.localPoints[3].position.y=t.position.y}onGraphicsDestroy(){[this.figure].forEach(e=>{e!=null&&e.dispose&&e.dispose()}),this.edgesPolyline&&this.edgesPolyline.destroy()}}function rd(r,e,t){return e=oS(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function oS(r){var e=uS(r,"string");return typeof e=="symbol"?e:String(e)}function uS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class cS{set opacity(e){this.shapeObj.setOpacity(e)}set visible(e){this.shapeObj.setVisible(e)}set lineWidth(e){this.shapeObj.setLineWidth(e)}set lineApplyZoom(e){this.shapeObj.setLineApplyZoom(e)}set lineApplyZoomFactor(e){this.shapeObj.setLineApplyZoomFactor(e)}constructor(){rd(this,"view",null),rd(this,"scene",null),rd(this,"figure",null),rd(this,"sceneCache",null),rd(this,"geomVersion",null),this.shapeObj=new aS}update(){if(this.shapeObj.setScene(this.scene),this.figure){const e=vf(this.figure,this.annObjects,this.projectMeta),t=_f(e),n=yf(this.figure);this.shapeObj.setId(this.figure.id),this.shapeObj.setColor(t),this.shapeObj.setPoints(n.points),this.geomVersion!==n.version&&(this.geomVersion=n.version)}}destroy(){this.shapeObj&&(this.shapeObj.destroy(),this.shapeObj=null)}}function sd(r,e,t){return e=lS(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lS(r){var e=fS(r,"string");return typeof e=="symbol"?e:String(e)}function fS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}const A_=new Map([[Fc.GEOMETRY_TYPES.BITMAP,EE],[Fc.GEOMETRY_TYPES.GRAPH,GE],[Fc.GEOMETRY_TYPES.POINT,XE],[Fc.GEOMETRY_TYPES.POLYGON,eS],[Fc.GEOMETRY_TYPES.POLYLINE,iS],[Fc.GEOMETRY_TYPES.RECTANGLE,cS]]),Bb={type:"changed"};class zb extends m.EventEmitter{constructor(e,t,n=new Map){super(),sd(this,"opacity",.5),sd(this,"lineWidth",0),sd(this,"lineApplyZoom",!0),sd(this,"lineApplyZoomFactor",10),sd(this,"figures",[]),this.group=new _s,this.projectMeta=e,this.annObjects=t,this.geomPoolMap=n}_onGeomPoolFree(e){e.scene=null}setScene(e){if(this.scene=e,this.scene){this.scene.add(this.group);const t=this.scene.getRootObject();t&&t.dispatchEvent(Bb)}else if(this.group.parent){const t=this.group.parent.getRootObject();t&&t.dispatchEvent(Bb),this.group.parent.remove(this.group)}}setOpacity(e){this.opacity=e,this.figures.forEach(t=>{t.graphics.opacity=this.opacity})}setLineWidth(e){this.lineWidth=e,this.figures.forEach(t=>{t.graphics.lineWidth=this.lineWidth})}setLineApplyZoom(e){this.lineApplyZoom=e,this.figures.forEach(t=>{t.graphics.lineApplyZoom=this.lineApplyZoom})}setLineApplyZoomFactor(e){this.lineApplyZoomFactor=e,this.figures.forEach(t=>{t.graphics.lineApplyZoomFactor=this.lineApplyZoomFactor})}setProjectMeta(e){this.projectMeta=e,this.figures.forEach(t=>{t.graphics.projectMeta=this.projectMeta})}setAnnotationObjects(e){this.annObjects=e,this.figures.forEach(t=>{t.graphics.annObjects=this.annObjects})}_updateGraphics(e,t){e.visible=this.visible,e.scene=this.group,e.opacity=this.opacity,e.lineWidth=this.lineWidth,e.lineApplyZoom=this.lineApplyZoom,e.lineApplyZoomFactor=this.lineApplyZoomFactor,e.projectMeta=this.projectMeta,e.annObjects=this.annObjects,e.figure=t,e.update()}async update(e){var t;this.emit("figures-update-start");try{if(this.figures.forEach(i=>{i.graphics&&(i.graphics.destroy(),i.graphics=null)}),!((t=e==null?void 0:e.annotation)!=null&&t.objects)||!e.annotation.objects.length){this.figures=[],this.emit("figures-update-end");return}const n=await wb(e.annotation.objects);this.figures=n.map(i=>{const s=A_.get(i.geometryType);if(!s)return null;const u=new s;return this._updateGraphics(u,i),{figure:i,graphics:u}}).filter(Boolean)}finally{this.emit("figures-update-end")}}updateFigures(e){this.emit("figures-update-start");try{this.figures.forEach(({figure:t,graphics:n})=>{const i=A_.get(t.geometryType);this.geomPoolMap.get(i).release(n)}),this.figures=[],e.forEach(t=>{const n=A_.get(t.geometryType);if(!n)return;let i=this.geomPoolMap.get(n);i||(i=new Cb({min:1/0,onFree:this._onGeomPoolFree.bind(this)}),this.geomPoolMap.set(n,i));let s=i.acquire();s||(s=new n,i.add(s)),this._updateGraphics(s,t),this.figures.push({figure:t,graphics:s})})}finally{this.emit("figures-update-end")}}getFigureByIndex(e){const t=this.figures[e];if(!t)throw new Error(`Figure with index ${e} not found`);return t}getFigureGraphicsByIndex(e){return this.getFigureByIndex(e).graphics.shapeObj.figure}_getFigureProxyByIndex(e){return this.getFigureByIndex(e).graphics}setFigureVisibility(e,t){const n=this._getFigureProxyByIndex(e);n.visible=t}highlightFigure(e){const t=this._getFigureProxyByIndex(e);t.opacity=1}unhighlightFigure(e){const t=this._getFigureProxyByIndex(e);t.opacity=this.opacity}destroy(){this.removeAllListeners(),this.figures.forEach(e=>{e.graphics&&(e.graphics.destroy(),e.graphics=null)}),this.figures=[],this.setScene(null)}}var hS=o("5caa81c6f36584a9fe4e"),T_=o.n(hS),dS=o("26113a95acaf36fd4c65"),pS=o.n(dS),mS=o("9d404a039029e9c320b2"),gS=o.n(mS);function vS(r,e,t){return e=_S(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _S(r){var e=yS(r,"string");return typeof e=="symbol"?e:String(e)}function yS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class bS{constructor(){vS(this,"_queue",[])}getByIndex(e){return this._queue[e]}findWithIndex(e){const t=this._queue.findIndex(n=>e(n));return t===-1?null:{index:t,value:this._queue[t]}}removeByIndex(e){this._queue.splice(e,1)}enqueue(e,t={}){const{priority:n=0,...i}=t,s={priority:n,meta:i,run:e};if(this.size&&this._queue[this.size-1].priority>=s.priority){this._queue.push(s);return}const u=gS()(this._queue,s,(c,d)=>d.priority-c.priority);this._queue.splice(u,0,s)}dequeue(){const e=this._queue.shift();return e&&e.run}dequeueTail(){const e=this._queue.pop();return e&&e.run}get size(){return this._queue.length}}function xS(r,e,t){return e=ES(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ES(r){var e=SS(r,"string");return typeof e=="symbol"?e:String(e)}function SS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class AS{constructor(e={}){xS(this,"_sizeLimit",1/0),this._queue=new pS.a({queueClass:bS,...e}),e.sizeLimit!=null&&(this._sizeLimit=e.sizeLimit);const{queueOpts:t={}}=e;this._queue._queue.init&&this._queue._queue.init(t)}get concurrency(){return this._queue.concurrency}set concurrency(e){this._queue.concurrency=e}get sizeLimit(){return this._sizeLimit}set sizeLimit(e){this._adjustSize(e),this._sizeLimit=e}get queue(){return this._queue._queue}_adjustSize(e){if(!Number.isInteger(e))return;const t=this._queue.size-e;for(let n=0;n<t;++n)this._queue._queue.dequeueTail()}add(...e){return this._adjustSize(this.sizeLimit-1),this._queue.add(...e)}}function w_(r,e,t){return e=TS(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function TS(r){var e=wS(r,"string");return typeof e=="symbol"?e:String(e)}function wS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class Gb extends Error{constructor(...e){super(...e),w_(this,"canceled",!0)}}class MS extends AS{constructor(e={}){super(e),w_(this,"emitter",new m.EventEmitter),w_(this,"pending",new Map),e.shouldReplace&&(this.shouldReplace=e.shouldReplace)}get queue(){return this._queue._queue}get(e){var t,n;return(n=(t=this.queue.findWithIndex(i=>i.meta.__key__===e))==null?void 0:t.value)!=null?n:null}shouldReplace(e,t){return e.priority!==t.priority}isRunning(e){return this.pending.has(e)}_adjustSize(e){if(!Number.isInteger(e))return;const t=this._queue.size-e;for(let n=0;n<t;++n){const i=this.queue.getByIndex(this._queue.size-1);this._queue._queue.dequeueTail();const s=i.meta.__key__;this.emitter.emit(`canceled-${s}`)}}add(e,t,n={}){const i={priority:0,...n},s=this.queue.findWithIndex(c=>c.meta.__key__===e);if(s)if(this.shouldReplace(s.value,i))this.queue.removeByIndex(s.index),this.emitter.emit(`canceled-${e}`),this.pending.delete(e);else return this.pending.get(e);if(this.pending.has(e))return this.pending.get(e);const u=new Promise(async(c,d)=>{const p=()=>{this.pending.delete(e),d(new Gb)};try{this.emitter.once(`canceled-${e}`,p);const _=await super.add(t,{__key__:e,...i});this.pending.delete(e),this.emitter.removeListener(`canceled-${e}`,p),c(_)}catch(_){this.pending.delete(e),this.emitter.removeListener(`canceled-${e}`,p),d(_)}});return this.pending.set(e,u),u}clear(...e){return this.pending.forEach((t,n)=>{this.emitter.emit(`canceled-${n}`)}),this._queue.clear(...e)}}class CS{constructor(e={}){const{onMain:t,onMainComplete:n,onMainCanceled:i,isKeyInUse:s,onDisposed:u,storeResult:c=!1}=e;t&&(this._main=t),n&&(this._onMainComplete=n),i&&(this._onMainCanceled=i),s&&(this._isKeyInUse=s),u&&(this._onDisposed=u),this._storeResult=c;const d=this;this.lru=new T_.a({noDisposeOnSet:!0,dispose(p,_){const E=d._parseKey(p);if(d._isKeyInUse(E,_)){Object(mf.b)().then(()=>{this.set(p,_)});return}d._onDisposed(E,_)}}),this.pendingQueue=new MS({autoStart:!0})}get cacheSize(){return this.lru.max}set cacheSize(e){this.lru.max=e,this.downloadQueueSizeLimit=e}get downloadConcurrency(){return this.pendingQueue.concurrency}set downloadConcurrency(e){this.pendingQueue.concurrency=e}get downloadQueueSizeLimit(){return this.pendingQueue.sizeLimit}set downloadQueueSizeLimit(e){this.pendingQueue.sizeLimit=e}_makeKey(e){return e}_parseKey(e){return e}_onDisposed(){}_isKeyInUse(){return!1}_main(){}_onMainComplete(){}_onMainCanceled(){}async add(e,t=0){const n=this._makeKey(e);if(this.lru.has(n))return this._storeResult?this.lru.get(n):null;try{const i=await this.pendingQueue.add(n,()=>this._main(e,n),{priority:t});return this.lru.has(n)?this._storeResult?this.lru.get(n):null:(this._onMainComplete(e,i),this.lru.set(n,this._storeResult?i:!0),i)}catch(i){if(i instanceof Gb||i.canceled||i.name==="CanceledError")this._onMainCanceled(e,i,n,t);else throw i;return null}}get(e){return this.lru.get(this._makeKey(e))}clear(){this.lru.reset(),this.pendingQueue.clear()}}function M_(r,e,t){return e=OS(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function OS(r){var e=PS(r,"string");return typeof e=="symbol"?e:String(e)}function PS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class IS extends m.EventEmitter{constructor(e){super(),M_(this,"imgUrl",null),M_(this,"_loadingPending",{image:!1,annotations:!1}),M_(this,"defaultFitImageZoomFactor",1),this.graphicsView=e,this.leftTopGroup=new gb,this.leftTopGroup.setScene(this.graphicsView.scene),this.img=new pb,this.img.setScene(this.leftTopGroup.graphics),this.projectMeta=new vb,this.annotations=new zb(this.projectMeta),this.annotations.setScene(this.leftTopGroup.graphics),this._initAnnEvents(),this.imagesLoader=new CS({storeResult:!0,isKeyInUse:t=>t===this.imgUrl,onMain:t=>Object(mf.a)(t)}),this.imagesLoader.cacheSize=10,this.imagesLoader.downloadConcurrency=2}_initAnnEvents(){this.annotations.on("figures-update-start",()=>{this._loadingPending.annotations||(this._loadingPending.annotations=!0,this.emit("figures-update-start"))}),this.annotations.on("figures-update-end",()=>{this._loadingPending.annotations&&(this._loadingPending.annotations=!1,this.emit("figures-update-end"))})}async setImageUrl(e){if(this.imgUrl===e)return;let t;try{if(this._loadingPending.image||(this._loadingPending.image=!0,this.emit("image-update-start")),this.imgUrl=e,t=await this.imagesLoader.add(e),this.imgUrl!==e)return}catch(n){throw this.imgUrl===e&&(this._loadingPending.image=!1,this.emit("image-update-end")),n}this.onImageChanged(t),this._loadingPending.image&&(this._loadingPending.image=!1,this.emit("image-update-end"))}async preloadImage(e){await this.imagesLoader.add(e)}setOpacity(e){this.annotations.setOpacity(e)}setLineWidth(e){this.annotations.setLineWidth(e)}setLineApplyZoom(e){this.annotations.setLineApplyZoom(e)}setLineApplyZoomFactor(e){this.annotations.setLineApplyZoomFactor(e)}setFitImageZoomFactor(e){this.defaultFitImageZoomFactor=e}onImageChanged(e){const{width:t,height:n}=e;this.leftTopGroup.setSize(t,n),this.img.setSize(t,n),this.img.setImage(e),this.fitImage()}fitImage(e=this.defaultFitImageZoomFactor){var t;(t=this.graphicsView.viewControls)!=null&&t.editorControls&&(this.leftTopGroup.graphics.updateMatrixWorld(),this.img.graphics.updateMatrixWorld(),this.graphicsView.viewControls.editorControls.focus(this.img.graphics,1,e))}updateProjectMeta(e){this.projectMeta.update(e),this.annotations.setProjectMeta(this.projectMeta)}async updateAnnotations(e){await this.annotations.update(e)}destroy(){this.removeAllListeners(),this.img.destroy(),this.img=null}zoomToFigure(e,t){var n;if((n=this.graphicsView.viewControls)!=null&&n.editorControls){const i=this.annotations.getFigureGraphicsByIndex(e);this.graphicsView.viewControls.editorControls.focus(i,1,t)}}setZoomLevel(e){const{camera:t}=this.graphicsView;t&&(t.zoom=e,t.updateProjectionMatrix())}getViewportInfo(){const{camera:e,domElement:t}=this.graphicsView,n={viewport:{},zoom:null};return e&&(n.zoom=e.zoom),t&&(n.viewport={...t.getBoundingClientRect()}),n}showFigure(e){this.annotations.setFigureVisibility(e,!0)}hideFigure(e){this.annotations.setFigureVisibility(e,!1)}highlightFigure(e){this.annotations.highlightFigure(e)}unhighlightFigure(e){this.annotations.unhighlightFigure(e)}}const kb={opacity:.5,lineWidth:0,lineApplyZoom:!0,lineApplyZoomFactor:10,fitImageZoomFactor:1},RS={enableZoom:!1,enablePan:!0,...kb},LS=Object.keys(kb).map(r=>({propKey:r,methodKey:`set${r[0].toUpperCase()}${r.slice(1)}`})),PT="sly-img";var DS=Object(g.defineComponent)({props:{imageUrl:null,projectMeta:null,annotation:null,width:null,height:null,options:Object},components:{MoveSceneTool:db},setup(r,{emit:e}){const t=Object(g.shallowRef)(null),n=Fm.addView(new ub),i=new IS(n),s=Object(g.shallowRef)(null),u=Object(g.computed)(()=>Object.assign({},RS,r.options)),c=Object(g.computed)(()=>n.camera),d=Object(g.computed)(()=>n.domElement),p=Object(g.reactive)({image:!1,anns:!1}),_=Object(g.computed)(()=>!p.image&&!p.anns);return i.on("image-update-start",()=>{p.image=!0}),i.on("image-update-end",()=>{p.image=!1}),i.on("figures-update-start",()=>{p.anns=!0}),i.on("figures-update-end",()=>{p.anns=!1}),n.on("camera-zoom-changed",x=>{e("zoom-changed",x)}),Object(g.watch)(_,()=>{e("loading",!_.value)}),LS.forEach(({propKey:x,methodKey:w})=>{Object(g.watch)(()=>u.value[x],R=>{R!=null&&i[w](R)},{immediate:!0})}),Object(g.watch)(()=>r.imageUrl,x=>{x!=null&&i.setImageUrl(x)},{immediate:!0}),Object(g.watch)(()=>r.projectMeta,x=>{x!=null&&i.updateProjectMeta(Object(g.toRaw)(x))},{immediate:!0}),Object(g.watch)(()=>r.annotation,x=>{i.updateAnnotations(Object(g.toRaw)(x))},{immediate:!0}),Object(g.watch)(()=>s.value,x=>{x!=null&&n.setViewControls(x)}),Object(g.onMounted)(()=>{n.setDomElement(t.value),i.fitImage()}),Object(g.onBeforeUnmount)(()=>{n&&(Fm.removeView(n),n.destroy()),i&&i.destroy()}),e("exposed",{fitImage:(x=1)=>i.fitImage(x),zoomToFigure:(x,w=1)=>i.zoomToFigure(x,w),showFigure:x=>i.showFigure(x),hideFigure:x=>i.hideFigure(x),highlightFigure:x=>i.highlightFigure(x),unhighlightFigure:x=>i.unhighlightFigure(x),setZoomLevel:x=>i.setZoomLevel(x),getViewportInfo:()=>i.getViewportInfo(),preloadImage:x=>i.preloadImage(x)}),{root:t,viewControls:s,sceneSettings:u,camera:c,domElement:d}}}),FS=DS,IT=o("f8ffbb78666105efac64"),Vb=Zh(FS,h,v,!1,null,"2b99cd7c",null);if(!1)var RT;Vb.options.__file="lib/browser/components/Apps/Widgets/ImageWidget/ImageWidget.vue";var US=Vb.exports,jb=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{ref:"root",staticClass:"sly-video-widget"},[t("div",{staticClass:"fullsize",staticStyle:{"z-index":"1"}},[t("move-scene-tool",{attrs:{camera:r.camera,"dom-element":r.domElement,"enable-zoom":r.sceneSettings.enableZoom,"enable-pan":r.sceneSettings.enablePan},on:{tool:function(n){r.viewControls=n}}})],1)])},NS=[];jb._withStripped=!0;class BS{constructor(e){e&&this.update(e)}update(e){this.objects=Object(ia.d)(e,"id")}getObjectById(e){return this.objects.get(e)}}function po(r,e,t){return e=zS(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zS(r){var e=GS(r,"string");return typeof e=="symbol"?e:String(e)}function GS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class kS extends m.EventEmitter{constructor(e){super(),po(this,"opacity",.5),po(this,"lineWidth",0),po(this,"lineApplyZoom",!0),po(this,"lineApplyZoomFactor",10),po(this,"frame",0),po(this,"_maxFrame",0),po(this,"_rawAnnsByFrame",new Map),po(this,"annsByFrame",new Map),po(this,"_cacheFramesSize",100),po(this,"geomPoolMap",new Map),this.group=new _s,this.projectMeta=e,this.annObjects=new BS,this.slyDataPool=new Cb({min:this._cacheFramesSize,onFree:this._onSlyDataPoolFree.bind(this)})}_onSlyDataPoolFree(e){e.setScene(null)}update(e){this.annObjects.update(e.objects),this._rawAnnsByFrame.clear(),this._maxFrame=0,e.frames.forEach(({index:t,figures:n})=>{this._rawAnnsByFrame.set(t,n),this._maxFrame=Math.max(this._maxFrame,t)}),this._computeAnnsByFrame()}setScene(e){this.scene=e,this.scene?this.scene.add(this.group):this.group.parent&&this.group.parent.remove(this.group)}_setFrameScene(e){const t=this.annsByFrame.get(e);t&&(this.group.children.forEach(n=>{this.group.remove(n)}),t.setScene(this.group))}setFrame(e){this.frame=e,this._computeAnnsByFrame(),this.annsByFrame.has(this.frame)&&this._setFrameScene(this.frame)}onAnnFrame(e){this.frame,this._setFrameScene(this.frame)}setOpacity(e){this.opacity=e,this.annsByFrame.forEach(t=>{t.setOpacity(this.opacity)})}setLineWidth(e){this.lineWidth=e,this.annsByFrame.forEach(t=>{t.setLineWidth(this.lineWidth)})}setLineApplyZoom(e){this.lineApplyZoom=e,this.annsByFrame.forEach(t=>{t.setLineApplyZoom(this.lineApplyZoom)})}setLineApplyZoomFactor(e){this.lineApplyZoomFactor=e,this.annsByFrame.forEach(t=>{t.setLineApplyZoomFactor(this.lineApplyZoomFactor)})}setProjectMeta(e){this.projectMeta=e,this.annsByFrame.forEach(t=>{t.setProjectMeta(this.lineWidth)})}_isWithinCacheRange(e){const t=Math.floor(this._cacheFramesSize/2);return e>=this.frame-t&&e<=this.frame+t}_computeAnnsByFrame(){if(!this._rawAnnsByFrame.size)return;Array.from(this.annsByFrame.keys()).forEach(i=>{if(!this._isWithinCacheRange(i)){const s=this.annsByFrame.get(i);this.slyDataPool.release(s),this.annsByFrame.delete(i)}});const t=Math.floor(this._cacheFramesSize/2);Object(P.range)(Math.max(0,Math.min(this._maxFrame,this.frame-t)),Math.max(0,Math.min(this._maxFrame,this.frame+t))).forEach(i=>{if(!this._rawAnnsByFrame.has(i)||this.annsByFrame.has(i))return;const s=this._rawAnnsByFrame.get(i);wb(s).then(u=>{if(!this._isWithinCacheRange(i))return;let c=this.slyDataPool.acquire();c||(c=new zb(this.projectMeta,this.annObjects,this.geomPoolMap),this.slyDataPool.add(c)),c.setProjectMeta(this.projectMeta),c.setAnnotationObjects(this.annObjects),c.updateFigures(u),this.annsByFrame.set(i,c),this.onAnnFrame(i,c)})})}}var VS=o("a9c99610b236cb1830cf"),jS=o.n(VS);const ad={LOG:1,VIDEO_INFO_READY:2,FRAME_READY:3,AVAILABLE_FRAME_RANGE:4,FRAMES_TS_INFO:5};function Wb(r,e,t){return e=WS(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function WS(r){var e=HS(r,"string");return typeof e=="symbol"?e:String(e)}function HS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}const YS=m_(new jS.a),XS=new Map([[ad.LOG,async(r,e,...t)=>{r.emit(e,...t)}],[ad.VIDEO_INFO_READY,(r,...e)=>{r.emit("ready",...e)}],[ad.FRAME_READY,(r,...e)=>{r.emit("frame",...e)}],[ad.AVAILABLE_FRAME_RANGE,(r,e)=>{r.availableFrameRange=e,r.emit("available-frame-range",e)}],[ad.FRAMES_TS_INFO,(r,e)=>{r.emit("frames-ts-info",e)}]]);class KS extends m.EventEmitter{constructor(e,t,n=e){super(),Wb(this,"workerProxy",null),Wb(this,"availableFrameRange",[]),this.url=e,this.trackIndex=t,this.cacheId=n}async _eventsCb(e,...t){try{await XS.get(e)(this,...t)}catch(n){this.emit("error",n)}}async init(){this.workerProxy=await new YS(this.url,this.trackIndex,Tb(this._eventsCb.bind(this)),this.cacheId),await this.workerProxy.init()}setTrackIndex(e){return this.workerProxy.setTrackIndex(e)}seek(e,t){return this.workerProxy.seek(e,t)}seekToFrame(e,t,n=!1){return this.workerProxy.seekToFrame(e,t,n)}}function $S(){return!1}class ZS{constructor(e={}){const{cacheSize:t=100,isFrameInUse:n=$S,onDisposed:i=ia.e}=e,s=this;this.cbIsFrameInUse=n,this.cbOnDisposed=i,this.coldCache=new T_.a({noDisposeOnSet:!0,max:t,dispose(u,c){if(s.cbIsFrameInUse(u,c)){Object(mf.b)().then(()=>{this.set(u,c)});return}s._onDisposed(u)}}),this.hotCache=new T_.a({noDisposeOnSet:!0,max:7,dispose(u,c){if(s.cbIsFrameInUse(u,c)){Object(mf.b)().then(()=>{this.set(u,c)});return}const{frame:p,keep:_}=c;_?s._moveToColdCache(u,p):(p.close(),s._onDisposed(u))}})}get cacheSize(){return this.coldCache.max}set cacheSize(e){this.coldCache.max=e}_moveToColdCache(e,t){const n=document.createElement("canvas"),i=n.getContext("2d");n.width=t.width,n.height=t.height,i.drawImage(t,0,0,n.width,n.height),t.close(),this.coldCache.set(e,n)}_onDisposed(e){this.cbOnDisposed(e)}_main(e){const{frameIndex:t}=e;this.hotCache.set(t,e)}_onMainCanceled(){}has(e){return!!(this.hotCache.has(e)||this.coldCache.has(e))}add(e){const{frameIndex:t,frame:n}=e;if(this.hotCache.has(t)||this.coldCache.has(t)){n.close();return}try{this._main(e)}catch(i){if(n.close(),i.canceled||i.name==="CanceledError")this._onMainCanceled(e,i);else throw i}}get(e){const t=this.hotCache.get(e);return t?t.frame:this.coldCache.get(e)}clear(){this.coldCache.reset(),this.hotCache.reset()}}function Jo(r,e,t){return e=QS(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function QS(r){var e=JS(r,"string");return typeof e=="symbol"?e:String(e)}function JS(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}const od={frameImg:null,frameIndex:null};class qS extends m.EventEmitter{constructor(e={}){super(),Jo(this,"videoInfo",null),Jo(this,"videoTrackIndex",null),Jo(this,"resetDecoderFrame",null),Jo(this,"isPaused",!0),Jo(this,"frame",0),Jo(this,"playForward",!0),Jo(this,"playbackFramerate",24),Jo(this,"playbackForwardPreload",60),Jo(this,"playbackBackwardPreload",5);const{setDefaultVideoIndex:t=!0,cacheSize:n=100}=e;this._shouldSetDefaultVideoIndex=t,this.framesCache=new ZS({cacheSize:n,isFrameInUse:()=>!1,onDisposed:i=>{this.emit("frame-removed",i)}})}get cacheSize(){return this.framesCache.cacheSize}get playbackForwardCacheSize(){return Math.ceil(this.cacheSize/2)}get forwardPreloadSize(){return Math.ceil(this.cacheSize/5)}get minBackwardsFramesCacheDecoderReset(){return Math.ceil(this.cacheSize/4)}get playbackBackwardCacheSize(){return this.cacheSize-this.minBackwardsFramesCacheDecoderReset}get currentVideoTrackInfo(){var e;return(e=this.videoInfo)==null?void 0:e.tracks[this.videoTrackIndex]}get currentVideoTrackWidth(){var e;return(e=this.currentVideoTrackInfo)==null?void 0:e.video.width}get currentVideoTrackHeight(){var e;return(e=this.currentVideoTrackInfo)==null?void 0:e.video.height}get normalizedUrl(){return this.videoUrl?Object(mf.c)(this.videoUrl).href:""}async setVideoUrl(e,t){this.videoUrl=e,this.videoTrackIndex=t,this.videoControl=new KS(this.normalizedUrl,this.videoTrackIndex),this.videoControl.on("ready",async n=>{try{this.videoInfo=n,this.emit("info",n),this.videoTrackIndex==null&&this._shouldSetDefaultVideoIndex&&(this.videoTrackIndex=this._findDefaultVideoTrackIndex(),await this.setTrackIndex(this.videoTrackIndex)),this.emit("ready")}catch(i){this.emit("error",i)}}),this.videoControl.on("error",n=>{this.emit("error",n)}),this.videoControl.on("frame",(n,i,s)=>{this._onFrameReady(n,i,s)}),this.videoControl.on("frames-ts-info",n=>{const i=new Array(n.size);n.forEach((s,u)=>{i[s]=u}),this.framesToTimecodes=i}),await this.videoControl.init()}_onFrameReady(e,t){const n=this.frame;let i,s;if(this.playForward){const c=this.playbackForwardCacheSize;i=n-c,s=n+c}else{const c=this.playbackBackwardCacheSize;this.isPaused?(i=n-c,s=n+5):(i=n-c,s=n+1)}if(this.resetDecoderFrame!=null&&t>=n&&(this.resetDecoderFrame=null),t<i||t>s){e.close();return}e.width=this.currentVideoTrackWidth,e.height=this.currentVideoTrackHeight,this.framesCache.add({frame:e,frameIndex:t,keep:this.isPaused||!this.playForward});const u=this.framesCache.get(t);u&&(od.frameImg=u,od.frameIndex=t,this.emit("frame-added",od),od.frameImg=null,od.frameIndex=null)}async seekToFrame(e){const t={back:1,forward:1,preDecodeCount:0},n=Math.sign(e-this.frame);let i=!1;if(n>0)t.forward=this.playbackForwardPreload,this.isPaused&&(t.preDecodeCount=this.forwardPreloadSize);else if(t.back=this.playbackBackwardPreload,this.resetDecoderFrame==null){let s=0;for(let u=e;u>=0;--u)if(this.framesCache.has(u)){if(s+=1,s>this.minBackwardsFramesCacheDecoderReset)break}else{s=0;break}s<=this.minBackwardsFramesCacheDecoderReset&&(i=!0,this.resetDecoderFrame=e)}this.frame=e,this.emit("frame-seek-start",this.frame),await this.videoControl.seekToFrame(e,t,i),this.emit("frame-seek-end",this.frame)}async setTrackIndex(e){this.videoTrackIndex=e,await this.videoControl.setTrackIndex(this.videoTrackIndex),this.emit("trackIndex-changed",this.videoTrackIndex)}_findDefaultVideoTrackIndex(){const e=this.videoInfo.tracks.findIndex(t=>t.type==="video");if(e===-1)throw new Error("No video track found");return e}getFrameImage(e){return this.framesCache.get(e)}frameToTimecode(e){return this.framesToTimecodes[e]||0}timecodeToFrame(e){let t=Object(P.sortedIndex)(this.framesToTimecodes,e)-1;return t===-1&&(t=0),t}play(){}pause(){}}function ud(r,e,t){return e=eA(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function eA(r){var e=tA(r,"string");return typeof e=="symbol"?e:String(e)}function tA(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}class nA{constructor(e){ud(this,"videoUrl",null),ud(this,"frame",0),ud(this,"_videoPlayerListeners",null),ud(this,"_loadingPending",{video:!1,annotations:!1}),ud(this,"defaultFitImageZoomFactor",1),this.graphicsView=e,this.leftTopGroup=new gb,this.leftTopGroup.setScene(this.graphicsView.scene),this.imgFrame=new pb,this.imgFrame.setScene(this.leftTopGroup.graphics),this.projectMeta=new vb,this.annotations=new kS(this.projectMeta),this.annotations.setScene(this.leftTopGroup.graphics),this._initAnnEvents(),this._initVideoPlayer()}_initVideoPlayer(){this.videoPlayer||(this.videoPlayer=new qS,this.videoPlayer.on("ready",()=>{this.videoPlayer.seekToFrame(this.frame)}),this.videoPlayer.on("error",e=>{console.error(e)}),this._initVideoPlayerEvents())}_initVideoPlayerEvents(){this._videoPlayerListeners||(this._videoPlayerListeners=new Map([["trackIndex-changed",this.onTrackIndexChanged.bind(this)],["frame-seek-start",this.onFrameSeekStart.bind(this)],["frame-added",this.onFrameAdded.bind(this)]])),this._videoPlayerListeners.forEach((e,t)=>{this.videoPlayer.on(t,e)})}_disposeVideoPlayerEvents(){this._videoPlayerListeners.forEach((e,t)=>{this.videoPlayer.off(t,e)})}_initAnnEvents(){this.annotations.on("figures-update-start",()=>{this._loadingPending.annotations||(this._loadingPending.annotations=!0,this.emit("figures-update-start"))}),this.annotations.on("figures-update-end",()=>{this._loadingPending.annotations&&(this._loadingPending.annotations=!1,this.emit("figures-update-end"))})}onTrackIndexChanged(){var e,t,n;const i=(e=this.videoPlayer.currentVideoTrackWidth)!=null?e:0,s=(t=this.videoPlayer.currentVideoTrackHeight)!=null?t:0;this.leftTopGroup.setSize(i,s),this.imgFrame.setSize(i,s),(n=this.graphicsView.viewControls)!=null&&n.editorControls&&(this.leftTopGroup.graphics.updateMatrixWorld(),this.imgFrame.graphics.updateMatrixWorld(),this.graphicsView.viewControls.editorControls.focus(this.imgFrame.graphics,1,1))}onFrameSeekStart(e){const t=this.videoPlayer.getFrameImage(e);t&&this.imgFrame.setImage(t)}onFrameAdded({frameImg:e,frameIndex:t}){this.videoPlayer.frame===t&&this.imgFrame.setImage(e)}async setVideoUrl(e){await this.videoPlayer.setVideoUrl(e)}setOpacity(e){this.annotations.setOpacity(e)}setLineWidth(e){this.annotations.setLineWidth(e)}setLineApplyZoom(e){this.annotations.setLineApplyZoom(e)}setLineApplyZoomFactor(e){this.annotations.setLineApplyZoomFactor(e)}setFitImageZoomFactor(e){this.defaultFitImageZoomFactor=e}async setVideoFrame(e){var t;this.frame=e,this.annotations.setFrame(e),(t=this.videoPlayer)!=null&&t.currentVideoTrackInfo&&await this.videoPlayer.seekToFrame(this.frame)}fitImage(e=this.defaultFitImageZoomFactor){var t;(t=this.graphicsView.viewControls)!=null&&t.editorControls&&(this.leftTopGroup.graphics.updateMatrixWorld(),this.imgFrame.graphics.updateMatrixWorld(),this.graphicsView.viewControls.editorControls.focus(this.imgFrame.graphics,1,e))}updateProjectMeta(e){this.projectMeta.update(e),this.annotations.setProjectMeta(this.projectMeta)}updateAnnotations(e){this.annotations.update(e)}setZoomLevel(e){const{camera:t}=this.graphicsView;t&&(t.zoom=e,t.updateProjectionMatrix())}getViewportInfo(){const{camera:e,domElement:t}=this.graphicsView,n={viewport:{},zoom:null};return e&&(n.zoom=e.zoom),t&&(n.viewport={...t.getBoundingClientRect()}),n}destroy(){this.imgFrame.destroy(),this.imgFrame=null}}const Hb={opacity:.5,lineWidth:0,lineApplyZoom:!0,lineApplyZoomFactor:10,fitImageZoomFactor:1},iA={soundVolume:1,playbackRate:1,skipFramesSize:10,enableZoom:!1,enablePan:!0,...Hb},rA=Object.keys(Hb).map(r=>({propKey:r,methodKey:`set${r[0].toUpperCase()}${r.slice(1)}`})),LT="sly-video-v2";var sA=Object(g.defineComponent)({props:{videoUrl:null,frame:0,options:Object,projectMeta:null,annotation:null},components:{MoveSceneTool:db},setup(r,{emit:e}){const t=Object(g.shallowRef)(null),n=Fm.addView(new ub),i=new nA(n),s=Object(g.shallowRef)(null),u=Object(g.computed)(()=>Object.assign({},iA,r.options)),c=Object(g.computed)(()=>n.camera),d=Object(g.computed)(()=>n.domElement),p=Object(g.reactive)({video:!1,anns:!1}),_=Object(g.computed)(()=>!p.video&&!p.anns);return n.on("camera-zoom-changed",x=>{e("zoom-changed",x)}),Object(g.watch)(_,()=>{e("loading",!_.value)}),rA.forEach(({propKey:x,methodKey:w})=>{Object(g.watch)(()=>u.value[x],R=>{R!=null&&i[w](R)},{immediate:!0})}),Object(g.watch)(()=>r.videoUrl,x=>{x!=null&&i.setVideoUrl(x)},{immediate:!0}),Object(g.watch)(()=>r.frame,x=>{x!=null&&i.setVideoFrame(x)},{immediate:!0}),Object(g.watch)(()=>r.projectMeta,x=>{x!=null&&i.updateProjectMeta(Object(g.toRaw)(x))},{immediate:!0}),Object(g.watch)(()=>r.annotation,x=>{i.updateAnnotations(Object(g.toRaw)(x))},{immediate:!0}),Object(g.watch)(()=>s.value,x=>{x!=null&&n.setViewControls(x)}),Object(g.onMounted)(()=>{n.setDomElement(t.value),i.fitImage()}),Object(g.onBeforeUnmount)(()=>{n&&(Fm.removeView(n),n.destroy()),i&&i.destroy()}),e("exposed",{fitImage:(x=1)=>i.fitImage(x),setZoomLevel:x=>i.setZoomLevel(x),getViewportInfo:()=>i.getViewportInfo()}),{root:t,viewControls:s,sceneSettings:u,camera:c,domElement:d}}}),aA=sA,DT=o("9a9b9b189abb97798865"),Yb=Zh(aA,jb,NS,!1,null,"e752a418",null);if(!1)var FT;Yb.options.__file="lib/browser/components/Apps/Widgets/VideoV2Widget/VideoV2Widget.vue";var oA=Yb.exports},c719983161461ad179dd:function(A,M,o){"use strict";var h=o("45e95ff7deb186b1032c"),v=o("47ae23487d4b5e1ce60f"),g=o("cd27c57942366dd9e816");o("6e329e616ad9c45fb7bd")("search",1,function(m,b,S,I){return[function(P){var D=m(this),U=P==null?void 0:P[b];return U!==void 0?U.call(P,D):new RegExp(P)[b](String(D))},function(T){var P=I(S,T,this);if(P.done)return P.value;var D=h(T),U=String(this),Y=D.lastIndex;v(Y,0)||(D.lastIndex=0);var K=g(D,U);return v(D.lastIndex,Y)||(D.lastIndex=Y),K===null?-1:K.index}]})},c815b7eba88e00c1c07a:function(A,M,o){var h=o("d3a44d49545c5d8bf631")("meta"),v=o("0c6bdb2f1e107b092ad8"),g=o("5e7f3152dbd5f68ea917"),m=o("f8cf2e7afd370478f99e").f,b=0,S=Object.isExtensible||function(){return!0},I=!o("126be16bb2f5f1c18403")(function(){return S(Object.preventExtensions({}))}),T=function(K){m(K,h,{value:{i:"O"+ ++b,w:{}}})},P=function(K,X){if(!v(K))return typeof K=="symbol"?K:(typeof K=="string"?"S":"P")+K;if(!g(K,h)){if(!S(K))return"F";if(!X)return"E";T(K)}return K[h].i},D=function(K,X){if(!g(K,h)){if(!S(K))return!0;if(!X)return!1;T(K)}return K[h].w},U=function(K){return I&&Y.NEED&&S(K)&&!g(K,h)&&T(K),K},Y=A.exports={KEY:h,NEED:!1,fastKey:P,getWeak:D,onFreeze:U}},c85ee313f17239f27581:function(A,M,o){"use strict";M.byteLength=T,M.toByteArray=D,M.fromByteArray=K;for(var h=[],v=[],g=typeof Uint8Array<"u"?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=0,S=m.length;b<S;++b)h[b]=m[b],v[m.charCodeAt(b)]=b;v["-".charCodeAt(0)]=62,v["_".charCodeAt(0)]=63;function I(X){var W=X.length;if(W%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=X.indexOf("=");j===-1&&(j=W);var Q=j===W?0:4-j%4;return[j,Q]}function T(X){var W=I(X),j=W[0],Q=W[1];return(j+Q)*3/4-Q}function P(X,W,j){return(W+j)*3/4-j}function D(X){for(var W,j=I(X),Q=j[0],ne=j[1],ce=new g(P(X,Q,ne)),ee=0,B=ne>0?Q-4:Q,$=0;$<B;$+=4)W=v[X.charCodeAt($)]<<18|v[X.charCodeAt($+1)]<<12|v[X.charCodeAt($+2)]<<6|v[X.charCodeAt($+3)],ce[ee++]=W>>16&255,ce[ee++]=W>>8&255,ce[ee++]=W&255;return ne===2&&(W=v[X.charCodeAt($)]<<2|v[X.charCodeAt($+1)]>>4,ce[ee++]=W&255),ne===1&&(W=v[X.charCodeAt($)]<<10|v[X.charCodeAt($+1)]<<4|v[X.charCodeAt($+2)]>>2,ce[ee++]=W>>8&255,ce[ee++]=W&255),ce}function U(X){return h[X>>18&63]+h[X>>12&63]+h[X>>6&63]+h[X&63]}function Y(X,W,j){for(var Q,ne=[],ce=W;ce<j;ce+=3)Q=(X[ce]<<16&16711680)+(X[ce+1]<<8&65280)+(X[ce+2]&255),ne.push(U(Q));return ne.join("")}function K(X){for(var W,j=X.length,Q=j%3,ne=[],ce=16383,ee=0,B=j-Q;ee<B;ee+=ce)ne.push(Y(X,ee,ee+ce>B?B:ee+ce));return Q===1?(W=X[j-1],ne.push(h[W>>2]+h[W<<4&63]+"==")):Q===2&&(W=(X[j-2]<<8)+X[j-1],ne.push(h[W>>10]+h[W>>4&63]+h[W<<2&63]+"=")),ne.join("")}},c8df7166b31cd74f9370:function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Math",{log2:function(g){return Math.log(g)/Math.LN2}})},c94cacefb6126448a6ae:function(A,M){A.exports=function(o,h){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:h}}},c96345244e1eeef5e549:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("45e95ff7deb186b1032c"),g=function(m){this._t=v(m),this._i=0;var b=this._k=[],S;for(S in m)b.push(S)};o("160ccb785c60ef5e2657")(g,"Object",function(){var m=this,b=m._k,S;do if(m._i>=b.length)return{value:void 0,done:!0};while(!((S=b[m._i++])in m._t));return{value:S,done:!1}}),h(h.S,"Reflect",{enumerate:function(b){return new g(b)}})},cce97c855f847adf6492:function(A,M,o){"use strict";var h=o("c4e1172cd86cf1507638"),v=o("2fc08ef14d334fbecb33"),g=o("7057fe086dddfd19f86c"),m=o("777583f135984e6aaced"),b=o("7964b54be5616e0032b3"),S=o("ba5246ed31a79503d644"),I=Object.assign;A.exports=!I||o("126be16bb2f5f1c18403")(function(){var T={},P={},D=Symbol(),U="abcdefghijklmnopqrst";return T[D]=7,U.split("").forEach(function(Y){P[Y]=Y}),I({},T)[D]!=7||Object.keys(I({},P)).join("")!=U})?function(P,D){for(var U=b(P),Y=arguments.length,K=1,X=g.f,W=m.f;Y>K;)for(var j=S(arguments[K++]),Q=X?v(j).concat(X(j)):v(j),ne=Q.length,ce=0,ee;ne>ce;)ee=Q[ce++],(!h||W.call(j,ee))&&(U[ee]=j[ee]);return U}:I},cd27856869d7952ccbe4:function(A,M,o){var h=o("0c6bdb2f1e107b092ad8"),v=o("931ac916c4b89621b3bd").set;A.exports=function(g,m,b){var S=m.constructor,I;return S!==b&&typeof S=="function"&&(I=S.prototype)!==b.prototype&&h(I)&&v&&v(g,I),g}},cd27c57942366dd9e816:function(A,M,o){"use strict";var h=o("03cdf004f8ef8c702f67"),v=RegExp.prototype.exec;A.exports=function(g,m){var b=g.exec;if(typeof b=="function"){var S=b.call(g,m);if(typeof S!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return S}if(h(g)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return v.call(g,m)}},ce769f529b514afbf364:function(A,M){var o=Math.expm1;A.exports=!o||o(10)>22025.465794806718||o(10)<22025.465794806718||o(-2e-17)!=-2e-17?function(v){return(v=+v)==0?v:v>-1e-6&&v<1e-6?v+v*v/2:Math.exp(v)-1}:o},ceb9404fbd5bba41e4d6:function(A,M,o){"use strict";var h=o("5ac187c343d34c84f217"),v=o("e9323032e98511a09e82"),g=o("a8ecafe71e21295d1184"),m=o("03cdf004f8ef8c702f67"),b=o("3091fc82fc780b1e9f35"),S=o("0c6bdb2f1e107b092ad8"),I=o("c021bf2eaf2f2e721a6e"),T=o("dde7c1ae034e12bce98a"),P=o("1017580665ebda702ba4"),D=o("5760c5a16066c01be8f5"),U=o("27cb60849c9c0ac2ac5a").set,Y=o("7be628f155d3e5d395ed")(),K=o("344a6b9a921b83349b58"),X=o("88316eefdd880aab6b3c"),W=o("3293ee358506ec9b7d32"),j=o("8925210aa0f0d3044001"),Q="Promise",ne=v.TypeError,ce=v.process,ee=ce&&ce.versions,B=ee&&ee.v8||"",$=v[Q],oe=m(ce)=="process",Se=function(){},Fe,ct,He,nt,Ae=ct=K.f,Ve=!!function(){try{var Te=$.resolve(1),Le=(Te.constructor={})[o("fdf9ec15fb80cd9b8df9")("species")]=function(yt){yt(Se,Se)};return(oe||typeof PromiseRejectionEvent=="function")&&Te.then(Se)instanceof Le&&B.indexOf("6.6")!==0&&W.indexOf("Chrome/66")===-1}catch{}}(),Ye=function(Te){var Le;return S(Te)&&typeof(Le=Te.then)=="function"?Le:!1},st=function(Te,Le){if(!Te._n){Te._n=!0;var yt=Te._c;Y(function(){for(var Mt=Te._v,$t=Te._s==1,on=0,un=function(Bn){var qn=$t?Bn.ok:Bn.fail,Rn=Bn.resolve,Fn=Bn.reject,ai=Bn.domain,hi,Zn,Yn;try{qn?($t||(Te._h==2&&be(Te),Te._h=1),qn===!0?hi=Mt:(ai&&ai.enter(),hi=qn(Mt),ai&&(ai.exit(),Yn=!0)),hi===Bn.promise?Fn(ne("Promise-chain cycle")):(Zn=Ye(hi))?Zn.call(hi,Rn,Fn):Rn(hi)):Fn(Mt)}catch(ei){ai&&!Yn&&ai.exit(),Fn(ei)}};yt.length>on;)un(yt[on++]);Te._c=[],Te._n=!1,Le&&!Te._h&&de(Te)})}},de=function(Te){U.call(v,function(){var Le=Te._v,yt=Ie(Te),Mt,$t,on;if(yt&&(Mt=X(function(){oe?ce.emit("unhandledRejection",Le,Te):($t=v.onunhandledrejection)?$t({promise:Te,reason:Le}):(on=v.console)&&on.error&&on.error("Unhandled promise rejection",Le)}),Te._h=oe||Ie(Te)?2:1),Te._a=void 0,yt&&Mt.e)throw Mt.v})},Ie=function(Te){return Te._h!==1&&(Te._a||Te._c).length===0},be=function(Te){U.call(v,function(){var Le;oe?ce.emit("rejectionHandled",Te):(Le=v.onrejectionhandled)&&Le({promise:Te,reason:Te._v})})},Ce=function(Te){var Le=this;Le._d||(Le._d=!0,Le=Le._w||Le,Le._v=Te,Le._s=2,Le._a||(Le._a=Le._c.slice()),st(Le,!0))},Ue=function(Te){var Le=this,yt;if(!Le._d){Le._d=!0,Le=Le._w||Le;try{if(Le===Te)throw ne("Promise can't be resolved itself");(yt=Ye(Te))?Y(function(){var Mt={_w:Le,_d:!1};try{yt.call(Te,g(Ue,Mt,1),g(Ce,Mt,1))}catch($t){Ce.call(Mt,$t)}}):(Le._v=Te,Le._s=1,st(Le,!1))}catch(Mt){Ce.call({_w:Le,_d:!1},Mt)}}};Ve||($=function(Le){T(this,$,Q,"_h"),I(Le),Fe.call(this);try{Le(g(Ue,this,1),g(Ce,this,1))}catch(yt){Ce.call(this,yt)}},Fe=function(Le){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Fe.prototype=o("5d61e0aac58adeaf65c8")($.prototype,{then:function(Le,yt){var Mt=Ae(D(this,$));return Mt.ok=typeof Le=="function"?Le:!0,Mt.fail=typeof yt=="function"&&yt,Mt.domain=oe?ce.domain:void 0,this._c.push(Mt),this._a&&this._a.push(Mt),this._s&&st(this,!1),Mt.promise},catch:function(Te){return this.then(void 0,Te)}}),He=function(){var Te=new Fe;this.promise=Te,this.resolve=g(Ue,Te,1),this.reject=g(Ce,Te,1)},K.f=Ae=function(Te){return Te===$||Te===nt?new He(Te):ct(Te)}),b(b.G+b.W+b.F*!Ve,{Promise:$}),o("e5a005c5c5eff4a503bf")($,Q),o("648f39bb5d52ff46b948")(Q),nt=o("04aabd2475089fa3cacd")[Q],b(b.S+b.F*!Ve,Q,{reject:function(Le){var yt=Ae(this),Mt=yt.reject;return Mt(Le),yt.promise}}),b(b.S+b.F*(h||!Ve),Q,{resolve:function(Le){return j(h&&this===nt?$:this,Le)}}),b(b.S+b.F*!(Ve&&o("78c9141ecce69548150c")(function(Te){$.all(Te).catch(Se)})),Q,{all:function(Le){var yt=this,Mt=Ae(yt),$t=Mt.resolve,on=Mt.reject,un=X(function(){var Bn=[],qn=0,Rn=1;P(Le,!1,function(Fn){var ai=qn++,hi=!1;Bn.push(void 0),Rn++,yt.resolve(Fn).then(function(Zn){hi||(hi=!0,Bn[ai]=Zn,--Rn||$t(Bn))},on)}),--Rn||$t(Bn)});return un.e&&on(un.v),Mt.promise},race:function(Le){var yt=this,Mt=Ae(yt),$t=Mt.reject,on=X(function(){P(Le,!1,function(un){yt.resolve(un).then(Mt.resolve,$t)})});return on.e&&$t(on.v),Mt.promise}})},cf000b6dbe8f01de602b:function(A,M,o){var h=o("e9323032e98511a09e82"),v=o("04aabd2475089fa3cacd"),g=o("5ac187c343d34c84f217"),m=o("bde4caa0455b2360b39e"),b=o("f8cf2e7afd370478f99e").f;A.exports=function(S){var I=v.Symbol||(v.Symbol=g?{}:h.Symbol||{});S.charAt(0)!="_"&&!(S in I)&&b(I,S,{value:m.f(S)})}},cf662a5f72286150b4ab:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("018197c10a6ce8e48027"),g=o("6ae02b075e3300a8a961"),m=o("87ca1990df7e5ce5f6d4"),b=[].lastIndexOf,S=!!b&&1/[1].lastIndexOf(1,-0)<0;h(h.P+h.F*(S||!o("155fc47f5eef242ee51b")(b)),"Array",{lastIndexOf:function(T){if(S)return b.apply(this,arguments)||0;var P=v(this),D=m(P.length),U=D-1;for(arguments.length>1&&(U=Math.min(U,g(arguments[1]))),U<0&&(U=D+U);U>=0;U--)if(U in P&&P[U]===T)return U||0;return-1}})},d11cd0540728c616a05b:function(A,M,o){"use strict";o.d(M,"a",function(){return h});const h={POLYGON:"polygon",BITMAP:"bitmap",BITMAP_PEN:"bitmap-pen",RECTANGLE:"rectangle",POLYLINE:"polyline",POINT:"point",SMART:"smart",GRAPH:"graph",CUBOID:"cuboid",POINT_CLOUD_PEN:"point-cloud-pen",POINT_3D:"point-3d",MASK_3D:"mask_3d"}},d183bd276413858f65a2:function(A,M,o){"use strict";var h=o("1ba25d39d0ba5c9fa8cc")(!0);o("bbdbd7ce4b2cfe2c4547")(String,"String",function(v){this._t=String(v),this._i=0},function(){var v=this._t,g=this._i,m;return g>=v.length?{value:void 0,done:!0}:(m=h(v,g),this._i+=m.length,{value:m,done:!1})})},d26a97cc4ba74aafd904:function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.P,"String",{repeat:o("7aff271e08d81419a9f8")})},d2c53214e38be825b200:function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("04ee658d61b391909b37");h(h.S,"Math",{cbrt:function(m){return v(m=+m)*Math.pow(Math.abs(m),1/3)}})},d3a44d49545c5d8bf631:function(A,M){var o=0,h=Math.random();A.exports=function(v){return"Symbol(".concat(v===void 0?"":v,")_",(++o+h).toString(36))}},d41ce8549e786ec2bfeb:function(A,M,o){"use strict";const h={NONE:"none",DONE:"done",ACCEPTED:"accepted",REJECTED:"rejected"}},d53b0841ddd3afd3477d:function(A,M,o){"use strict";var h=o("1ba25d39d0ba5c9fa8cc")(!0);A.exports=function(v,g,m){return g+(m?h(v,g).length:1)}},d6282c20c3a716bb4d6e:function(A,M,o){var h=Date.prototype,v="Invalid Date",g="toString",m=h[g],b=h.getTime;new Date(NaN)+""!=v&&o("26949bccb98fdb02c86a")(h,g,function(){var I=b.call(this);return I===I?m.call(this):v})},d6ba6c9daf4e147c1764:function(A,M){var o={}.toString;A.exports=Array.isArray||function(h){return o.call(h)=="[object Array]"}},d78041f21fabadba9cdd:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("7964b54be5616e0032b3"),g=o("9bbb799f204bee898f0a");h(h.P+h.F*o("126be16bb2f5f1c18403")(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(b){var S=v(this),I=g(S);return typeof I=="number"&&!isFinite(I)?null:S.toISOString()}})},d7a3c56d6fced4c51eb9:function(A,M,o){var h=o("018197c10a6ce8e48027"),v=o("87ca1990df7e5ce5f6d4"),g=o("dff1687ed27eabf28b37");A.exports=function(m){return function(b,S,I){var T=h(b),P=v(T.length),D=g(I,P),U;if(m&&S!=S){for(;P>D;)if(U=T[D++],U!=U)return!0}else for(;P>D;D++)if((m||D in T)&&T[D]===S)return m||D||0;return!m&&-1}}},d7f0821154b37b060f0b:function(A,M,o){"use strict";const h=o("38b88b4f2a5574824808");class v extends Error{constructor(b){super(b),this.name="TimeoutError"}}const g=(m,b,S)=>new Promise((I,T)=>{if(typeof b!="number"||b<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(b===1/0){I(m);return}const P=setTimeout(()=>{if(typeof S=="function"){try{I(S())}catch(Y){T(Y)}return}const D=typeof S=="string"?S:`Promise timed out after ${b} milliseconds`,U=S instanceof Error?S:new v(D);typeof m.cancel=="function"&&m.cancel(),T(U)},b);h(m.then(I,T),()=>{clearTimeout(P)})});A.exports=g,A.exports.default=g,A.exports.TimeoutError=v},d8a2b18087957e350ade:function(A,M){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}A.exports=o},d93711b385e8c0def2ac:function(A,M,o){"use strict";const h={LOGIN:"login",LOGOUT:"logout",CREATE_PROJECT:"create_project",UPDATE_PROJECT:"update_project",DISABLE_PROJECT:"disable_project",RESTORE_PROJECT:"restore_project",CREATE_DATASET:"create_dataset",UPDATE_DATASET:"update_dataset",DISABLE_DATASET:"disable_dataset",RESTORE_DATASET:"restore_dataset",CREATE_IMAGE:"create_image",UPDATE_IMAGE:"update_image",DISABLE_IMAGE:"disable_image",RESTORE_IMAGE:"restore_image",CREATE_FIGURE:"create_figure",UPDATE_FIGURE:"update_figure",DISABLE_FIGURE:"disable_figure",RESTORE_FIGURE:"restore_figure",CREATE_CLASS:"create_class",UPDATE_CLASS:"update_class",DISABLE_CLASS:"disable_class",RESTORE_CLASS:"restore_class",CREATE_BACKUP:"create_backup",EXPORT_PROJECT:"export_project",MODEL_TRAIN:"model_train",MODEL_INFERENCE:"model_inference",CREATE_PLUGIN:"create_plugin",DISABLE_PLUGIN:"disable_plugin",RESTORE_PLUGIN:"restore_plugin",CREATE_NODE:"create_node",DISABLE_NODE:"disable_node",RESTORE_NODE:"restore_node",CREATE_WORKSPACE:"create_workspace",DISABLE_WORKSPACE:"disable_workspace",RESTORE_WORKSPACE:"restore_workspace",CREATE_MODEL:"create_model",DISABLE_MODEL:"disable_model",RESTORE_MODEL:"restore_model",ADD_MEMBER:"add_member",REMOVE_MEMBER:"remove_member",LOGIN_TO_TEAM:"login_to_team",ATTACH_TAG:"attach_tag",UPDATE_TAG_VALUE:"update_tag_value",DETACH_TAG:"detach_tag",ANNOTATION_DURATION:"annotation_duration",IMAGE_REVIEW_STATUS_UPDATED:"image_review_status_updated"}},da33f9708fbb4cc901ff:function(A,M){A.exports=function(o,h){return{value:h,done:!!o}}},da66b305989709f1ddae:function(A,M,o){o("7d74e0b33d6370907a81"),A.exports=o("04aabd2475089fa3cacd").Array.flatMap},dca99cbc945b0bcf9943:function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("strike",function(h){return function(){return h(this,"strike","","")}})},dd1b049a7e602d219ec1:function(A,M){},dde7c1ae034e12bce98a:function(A,M){A.exports=function(o,h,v,g){if(!(o instanceof h)||g!==void 0&&g in o)throw TypeError(v+": incorrect invocation!");return o}},de1b22d97612a36416e3:function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("04aabd2475089fa3cacd"),g=o("126be16bb2f5f1c18403");A.exports=function(m,b){var S=(v.Object||{})[m]||Object[m],I={};I[m]=b(S),h(h.S+h.F*g(function(){S(1)}),"Object",I)}},de5c1fcbe332feb4e867:function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("sup",function(h){return function(){return h(this,"sup","","")}})},de82b172f89d0f35218f:function(A,M,o){"use strict";var h=o("00f83bf39a29e0b57d1f"),v=o.n(h);function g(b){return b}var m=function(b,S,I={}){if(typeof b!="function")throw new TypeError("Expected a function");let T=[];const P=Object.assign({mapData:g},I),D=Object(h.throttle)(()=>{const K=T.slice(0);T=[],b(K)},S),{mapData:U}=P;function Y(...K){T.push(U([...K])),D()}return Y}},df3e2598ae077b6ef2e9:function(A,M,o){},dff1687ed27eabf28b37:function(A,M,o){var h=o("6ae02b075e3300a8a961"),v=Math.max,g=Math.min;A.exports=function(m,b){return m=h(m),m<0?v(m+b,0):g(m,b)}},e07efe23259ec1cddf5e:function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("e62dc567c284e4bc74ce")(!0);h(h.S,"Object",{entries:function(m){return v(m)}})},e22a1a004346ab38e697:function(A,M){},e3529c4c6a770b1dc792:function(A,M,o){var h=o("0c6bdb2f1e107b092ad8"),v=o("e9323032e98511a09e82").document,g=h(v)&&h(v.createElement);A.exports=function(m){return g?v.createElement(m):{}}},e474a9b56e694461e21b:function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("3c1abcaf432651c852c0").f,g=o("45e95ff7deb186b1032c");h(h.S,"Reflect",{deleteProperty:function(b,S){var I=v(g(b),S);return I&&!I.configurable?!1:delete b[S]}})},e5a005c5c5eff4a503bf:function(A,M,o){var h=o("f8cf2e7afd370478f99e").f,v=o("5e7f3152dbd5f68ea917"),g=o("fdf9ec15fb80cd9b8df9")("toStringTag");A.exports=function(m,b,S){m&&!v(m=S?m:m.prototype,g)&&h(m,g,{configurable:!0,value:b})}},e5b971bc8bb0de02fc32:function(A,M,o){var h=o("3091fc82fc780b1e9f35");h(h.S,"Object",{is:o("47ae23487d4b5e1ce60f")})},e5f3df9816caf4a19edb:function(A,M,o){var h=o("5e7f3152dbd5f68ea917"),v=o("7964b54be5616e0032b3"),g=o("50afc5b514699956f7a1")("IE_PROTO"),m=Object.prototype;A.exports=Object.getPrototypeOf||function(b){return b=v(b),h(b,g)?b[g]:typeof b.constructor=="function"&&b instanceof b.constructor?b.constructor.prototype:b instanceof Object?m:null}},e62dc567c284e4bc74ce:function(A,M,o){var h=o("c4e1172cd86cf1507638"),v=o("2fc08ef14d334fbecb33"),g=o("018197c10a6ce8e48027"),m=o("777583f135984e6aaced").f;A.exports=function(b){return function(S){for(var I=g(S),T=v(I),P=T.length,D=0,U=[],Y;P>D;)Y=T[D++],(!h||m.call(I,Y))&&U.push(b?[Y,I[Y]]:I[Y]);return U}}},e87081fc956dfc3362c1:function(A,M,o){var h=o("e9323032e98511a09e82"),v=o("3091fc82fc780b1e9f35"),g=o("3293ee358506ec9b7d32"),m=[].slice,b=/MSIE .\./.test(g),S=function(I){return function(T,P){var D=arguments.length>2,U=D?m.call(arguments,2):!1;return I(D?function(){(typeof T=="function"?T:Function(T)).apply(this,U)}:T,P)}};v(v.G+v.B+v.F*b,{setTimeout:S(h.setTimeout),setInterval:S(h.setInterval)})},e90a439132e6e571e548:function(A,M,o){var h=o("aaf3f2dc8b62133d67ba");A.exports=function(v,g,m){if(h(v),g===void 0)return v;switch(m){case 1:return function(b){return v.call(g,b)};case 2:return function(b,S){return v.call(g,b,S)};case 3:return function(b,S,I){return v.call(g,b,S,I)}}return function(){return v.apply(g,arguments)}}},e9323032e98511a09e82:function(A,M){var o=A.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=o)},e9c07d0897a4ff4b404d:function(A,M,o){var h=o("e9323032e98511a09e82").document;A.exports=h&&h.documentElement},e9d111c27df40fd87819:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("409f063042ff82279e38")(5),g="find",m=!0;g in[]&&Array(1)[g](function(){m=!1}),h(h.P+h.F*m,"Array",{find:function(S){return v(this,S,arguments.length>1?arguments[1]:void 0)}}),o("7f1f5a90a2ecaf92a049")(g)},ea4541a64899b388d99e:function(A,M,o){"use strict";var h=o("e9323032e98511a09e82"),v=o("5e7f3152dbd5f68ea917"),g=o("30b8e0406acca1d79148"),m=o("cd27856869d7952ccbe4"),b=o("9bbb799f204bee898f0a"),S=o("126be16bb2f5f1c18403"),I=o("f231974c81033140970d").f,T=o("3c1abcaf432651c852c0").f,P=o("f8cf2e7afd370478f99e").f,D=o("3ed595a38226ae2a3783").trim,U="Number",Y=h[U],K=Y,X=Y.prototype,W=g(o("196ca7010a0a30f36bdf")(X))==U,j="trim"in String.prototype,Q=function(B){var $=b(B,!1);if(typeof $=="string"&&$.length>2){$=j?$.trim():D($,3);var oe=$.charCodeAt(0),Se,Fe,ct;if(oe===43||oe===45){if(Se=$.charCodeAt(2),Se===88||Se===120)return NaN}else if(oe===48){switch($.charCodeAt(1)){case 66:case 98:Fe=2,ct=49;break;case 79:case 111:Fe=8,ct=55;break;default:return+$}for(var He=$.slice(2),nt=0,Ae=He.length,Ve;nt<Ae;nt++)if(Ve=He.charCodeAt(nt),Ve<48||Ve>ct)return NaN;return parseInt(He,Fe)}}return+$};if(!Y(" 0o1")||!Y("0b1")||Y("+0x1")){Y=function($){var oe=arguments.length<1?0:$,Se=this;return Se instanceof Y&&(W?S(function(){X.valueOf.call(Se)}):g(Se)!=U)?m(new K(Q(oe)),Se,Y):Q(oe)};for(var ne=o("c4e1172cd86cf1507638")?I(K):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ce=0,ee;ne.length>ce;ce++)v(K,ee=ne[ce])&&!v(Y,ee)&&P(Y,ee,T(K,ee));Y.prototype=X,X.constructor=Y,o("26949bccb98fdb02c86a")(h,U,Y)}},eb441efc9f353b9c4d0e:function(A,M){},edd4df3a18a3d3cf7c09:function(A,M,o){"use strict";var h=o("01d16a391b82cbd5b98a");const v={VIDEO:"video",AUDIO:"audio"},g="33p",m=["mp4","webm","ogg","ogv"],b=["h264","vp8","vp9"],S=["mp4"],I=["h264","vp8","vp9"],T="50p",P={x:0,y:0,z:1};function D(U,Y){let K;if(U!=null){if(K=Y.find(X=>X.index===U),!K||K.codecType!==v.VIDEO)throw new h.b(`Video stream with id "${U}" was not found`,{status:400})}else if(K=Y.find(X=>X.codecType===v.VIDEO),!K)throw new h.b("No video streams were found",{status:400});return K}},ee17858ad5a5249b6394:function(A,M,o){o("61cdea2d1e51a5b243cc"),A.exports=o("04aabd2475089fa3cacd").String.trimLeft},ee380940dab8889d05d0:function(A,M,o){"use strict";var h=o("f8cf2e7afd370478f99e"),v=o("9ba7c6b5067bc2a0c49c");A.exports=function(g,m,b){m in g?h.f(g,m,v(0,b)):g[m]=b}},ee85e0acda45d892f72d:function(A,M,o){o("648f39bb5d52ff46b948")("Array")},eecfd43fe1eb02019c64:function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("ce769f529b514afbf364"),g=Math.exp;h(h.S+h.F*o("126be16bb2f5f1c18403")(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(b){return Math.abs(b=+b)<1?(v(b)-v(-b))/2:(g(b-1)-g(-b-1))*(Math.E/2)}})},f231974c81033140970d:function(A,M,o){var h=o("4d435970f504c4554c69"),v=o("97d0c7cef3162c18013d").concat("length","prototype");M.f=Object.getOwnPropertyNames||function(m){return h(m,v)}},f2b1656cbe8f2d162cce:function(A,M,o){var h=o("6b2cac041904481ec760");A.exports=function(v){if(!h(v))throw TypeError(v+" is not an object!");return v}},f502a2c38396f007c6a7:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("87ca1990df7e5ce5f6d4"),g=o("1c4b62b15b2568a573b4"),m="startsWith",b=""[m];h(h.P+h.F*o("5bb6cfbb6a15beb75e86")(m),"String",{startsWith:function(I){var T=g(this,I,m),P=v(Math.min(arguments.length>1?arguments[1]:void 0,T.length)),D=String(I);return b?b.call(T,D,P):T.slice(P,P+D.length)===D}})},f5c330229109f090ccbb:function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("small",function(h){return function(){return h(this,"small","","")}})},f7f403ac48646c865a3e:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("d7a3c56d6fced4c51eb9")(!0);h(h.P,"Array",{includes:function(m){return v(this,m,arguments.length>1?arguments[1]:void 0)}}),o("7f1f5a90a2ecaf92a049")("includes")},f89ea08855b945937e0d:function(A,M,o){(function(h){var v=typeof h<"u"&&h||typeof self<"u"&&self||window,g=Function.prototype.apply;M.setTimeout=function(){return new m(g.call(setTimeout,v,arguments),clearTimeout)},M.setInterval=function(){return new m(g.call(setInterval,v,arguments),clearInterval)},M.clearTimeout=M.clearInterval=function(b){b&&b.close()};function m(b,S){this._id=b,this._clearFn=S}m.prototype.unref=m.prototype.ref=function(){},m.prototype.close=function(){this._clearFn.call(v,this._id)},M.enroll=function(b,S){clearTimeout(b._idleTimeoutId),b._idleTimeout=S},M.unenroll=function(b){clearTimeout(b._idleTimeoutId),b._idleTimeout=-1},M._unrefActive=M.active=function(b){clearTimeout(b._idleTimeoutId);var S=b._idleTimeout;S>=0&&(b._idleTimeoutId=setTimeout(function(){b._onTimeout&&b._onTimeout()},S))},o("abf710223f9868f9ff0f"),M.setImmediate=typeof self<"u"&&self.setImmediate||typeof h<"u"&&h.setImmediate||this&&this.setImmediate,M.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof h<"u"&&h.clearImmediate||this&&this.clearImmediate}).call(this,o("d8a2b18087957e350ade"))},f8cf2e7afd370478f99e:function(A,M,o){var h=o("45e95ff7deb186b1032c"),v=o("513ff0a21cbd89023aaa"),g=o("9bbb799f204bee898f0a"),m=Object.defineProperty;M.f=o("c4e1172cd86cf1507638")?Object.defineProperty:function(S,I,T){if(h(S),I=g(I,!0),h(T),v)try{return m(S,I,T)}catch{}if("get"in T||"set"in T)throw TypeError("Accessors not supported!");return"value"in T&&(S[I]=T.value),S}},f8ffbb78666105efac64:function(A,M,o){"use strict";var h=o("4fd7a8c5b2fd7d7acd3f"),v=o.n(h),g=v.a},fa9e288138e317a7a504:function(A,M,o){var h=o("f8cf2e7afd370478f99e"),v=o("9ba7c6b5067bc2a0c49c");A.exports=o("c4e1172cd86cf1507638")?function(g,m,b){return h.f(g,m,v(1,b))}:function(g,m,b){return g[m]=b,g}},faf7059dd6c86b16a85c:function(A,M,o){"use strict";var h=o("989a42060903e47c0cff");const v={READY:"ready",SYNC:"sync",ERROR:"error"},g={[h.c.IMPORT]:"import",[h.c.CLONE]:"clone",[h.c.EXPORT]:"dtl",[h.c.INFERENCE]:"inference"}},fdf9ec15fb80cd9b8df9:function(A,M,o){var h=o("08135168150974c8d830")("wks"),v=o("d3a44d49545c5d8bf631"),g=o("e9323032e98511a09e82").Symbol,m=typeof g=="function",b=A.exports=function(S){return h[S]||(h[S]=m&&g[S]||(m?g:v)("Symbol."+S))};b.store=h},fdfd04fea7fd66d8827a:function(A,M,o){"use strict";var h=o("3091fc82fc780b1e9f35"),v=o("e9c07d0897a4ff4b404d"),g=o("30b8e0406acca1d79148"),m=o("dff1687ed27eabf28b37"),b=o("87ca1990df7e5ce5f6d4"),S=[].slice;h(h.P+h.F*o("126be16bb2f5f1c18403")(function(){v&&S.call(v)}),"Array",{slice:function(T,P){var D=b(this.length),U=g(this);if(P=P===void 0?D:P,U=="Array")return S.call(this,T,P);for(var Y=m(T,D),K=m(P,D),X=b(K-Y),W=new Array(X),j=0;j<X;j++)W[j]=U=="String"?this.charAt(Y+j):this[Y+j];return W}})},fe4423369110d999364f:function(A,M,o){"use strict";o("b5301206e9daae9e16c7")("blink",function(h){return function(){return h(this,"blink","","")}})},fe476b93fc81da67ab58:function(A,M,o){var h=o("0c6bdb2f1e107b092ad8");o("de1b22d97612a36416e3")("isExtensible",function(v){return function(m){return h(m)?v?v(m):!0:!1}})},fe764323ef07c8632dee:function(A,M,o){for(var h=o("e9323032e98511a09e82"),v=o("fa9e288138e317a7a504"),g=o("d3a44d49545c5d8bf631"),m=g("typed_array"),b=g("view"),S=!!(h.ArrayBuffer&&h.DataView),I=S,T=0,P=9,D,U="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");T<P;)(D=h[U[T++]])?(v(D.prototype,m,!0),v(D.prototype,b,!0)):I=!1;A.exports={ABV:S,CONSTR:I,TYPED:m,VIEW:b}},febfb5ec5199ff3750ae:function(A,M,o){for(var h=o("ae69b05663ee2a381de0"),v=o("2fc08ef14d334fbecb33"),g=o("26949bccb98fdb02c86a"),m=o("e9323032e98511a09e82"),b=o("fa9e288138e317a7a504"),S=o("0a850ab3e6aa8900d3c4"),I=o("fdf9ec15fb80cd9b8df9"),T=I("iterator"),P=I("toStringTag"),D=S.Array,U={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Y=v(U),K=0;K<Y.length;K++){var X=Y[K],W=U[X],j=m[X],Q=j&&j.prototype,ne;if(Q&&(Q[T]||b(Q,T,D),Q[P]||b(Q,P,X),S[X]=D,W))for(ne in h)Q[ne]||g(Q,ne,h[ne],!0)}},ff393f9713515a894575:function(A,M,o){var h=o("3091fc82fc780b1e9f35"),v=o("ce769f529b514afbf364"),g=Math.exp;h(h.S,"Math",{tanh:function(b){var S=v(b=+b),I=v(-b);return S==1/0?1:I==1/0?-1:(S-I)/(g(b)+g(-b))}})}});
